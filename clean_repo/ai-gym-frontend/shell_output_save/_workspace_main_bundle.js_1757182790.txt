 */const SM=ke("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=ke("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);class Nh extends Z.Component{constructor(r){super(r);vf(this,"retryCount",0);vf(this,"maxRetries",3);vf(this,"handleRetry",()=>{this.retryCount<this.maxRetries?(this.retryCount++,console.log(`🔄 Error Boundary Retry Attempt ${this.retryCount}/${this.maxRetries}`),this.setState({hasError:!1,error:null,errorId:Date.now().toString(36)})):(console.warn("⚠️ Max retry attempts reached, manual intervention required"),window.location.reload())});vf(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorId:Date.now().toString(36)}}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorId:Date.now().toString(36)}}componentDidCatch(r,n){var i,s;console.group("🚨 Error Boundary Caught Error"),console.error("Error:",r),console.error("Error Info:",n),console.error("Component Stack:",n.componentStack),console.groupEnd(),(s=(i=this.props).onError)==null||s.call(i,r,n),console.warn("Production error reporting not configured")}render(){var r,n,i,s,o,l;if(this.state.hasError){if(this.props.fallback){const f=this.props.fallback;return a.jsx(f,{error:this.state.error,retry:this.handleRetry})}const c=(n=(r=this.state.error)==null?void 0:r.message)==null?void 0:n.includes("Maximum update depth exceeded"),u=((s=(i=this.state.error)==null?void 0:i.message)==null?void 0:s.includes("navigate"))||((l=(o=this.state.error)==null?void 0:o.message)==null?void 0:l.includes("router"));return a.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:a.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(Pl,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:c?"System Stability Error":u?"Navigation Error":"Something went wrong"}),a.jsx("p",{className:"text-sm text-gray-600 mb-6",children:c?"The application encountered a rendering loop. This has been automatically contained.":u?"There was an issue with page navigation. You can safely continue using the application.":"An unexpected error occurred, but the system remains stable."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:this.handleRetry,disabled:this.retryCount>=this.maxRetries,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(IO,{className:"h-4 w-4 mr-2"}),this.retryCount>=this.maxRetries?"Max Retries Reached":`Try Again (${this.retryCount}/${this.maxRetries})`]}),a.jsxs("button",{onClick:this.handleGoHome,className:"w-full flex justify-center items-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(PO,{className:"h-4 w-4 mr-2"}),"Go to Dashboard"]})]}),!1]})})})}return this.props.children}}function HB(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=HB(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function it(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=HB(t))&&(n&&(n+=" "),n+=e);return n}const LO="-",GX=t=>{const e=XX(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(LO);return l[0]===""&&l.length!==1&&l.shift(),WB(l,e)||YX(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},WB=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),i=n?WB(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(LO);return(o=e.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},kM=/^\[(.+)\]$/,YX=t=>{if(kM.test(t)){const e=kM.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},XX=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return QX(Object.entries(t.classGroups),r).forEach(([s,o])=>{o_(o,n,s,e)}),n},o_=(t,e,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:_M(e,i);s.classGroupId=r;return}if(typeof i=="function"){if(JX(i)){o_(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([s,o])=>{o_(o,_M(e,s),r,n)})})},_M=(t,e)=>{let r=t;return e.split(LO).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},JX=t=>t.isThemeGetter,QX=(t,e)=>e?t.map(([r,n])=>{const i=n.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[e+o,l])):s);return[r,i]}):t,ZX=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const i=(s,o)=>{r.set(s,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(s){let o=r.get(s);if(o!==void 0)return o;if((o=n.get(s))!==void 0)return i(s,o),o},set(s,o){r.has(s)?r.set(s,o):i(s,o)}}},VB="!",eJ=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,i=e[0],s=e.length,o=l=>{const c=[];let u=0,f=0,d;for(let v=0;v<l.length;v++){let b=l[v];if(u===0){if(b===i&&(n||l.slice(v,v+s)===e)){c.push(l.slice(f,v)),f=v+s;continue}if(b==="/"){d=v;continue}}b==="["?u++:b==="]"&&u--}const p=c.length===0?l:l.substring(f),m=p.startsWith(VB),x=m?p.substring(1):p,y=d&&d>f?d-f:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:y}};return r?l=>r({className:l,parseClassName:o}):o},tJ=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},rJ=t=>({cache:ZX(t.cacheSize),parseClassName:eJ(t),...GX(t)}),nJ=/\s+/,iJ=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(nJ);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:f,hasImportantModifier:d,baseClassName:p,maybePostfixModifierPosition:m}=r(u);let x=!!m,y=n(x?p.substring(0,m):p);if(!y){if(!x){l=u+(l.length>0?" "+l:l);continue}if(y=n(p),!y){l=u+(l.length>0?" "+l:l);continue}x=!1}const v=tJ(f).join(":"),b=d?v+VB:v,w=b+y;if(s.includes(w))continue;s.push(w);const N=i(y,x);for(let j=0;j<N.length;++j){const k=N[j];s.push(b+k)}l=u+(l.length>0?" "+l:l)}return l};function sJ(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=KB(e))&&(n&&(n+=" "),n+=r);return n}const KB=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=KB(t[n]))&&(r&&(r+=" "),r+=e);return r};function oJ(t,...e){let r,n,i,s=o;function o(c){const u=e.reduce((f,d)=>d(f),t());return r=rJ(u),n=r.cache.get,i=r.cache.set,s=l,l(c)}function l(c){const u=n(c);if(u)return u;const f=iJ(c,r);return i(c,f),f}return function(){return s(sJ.apply(null,arguments))}}const qt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},GB=/^\[(?:([a-z-]+):)?(.+)\]$/i,aJ=/^\d+\/\d+$/,lJ=new Set(["px","full","screen"]),cJ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uJ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dJ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,fJ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hJ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gs=t=>gu(t)||lJ.has(t)||aJ.test(t),Qo=t=>fd(t,"length",wJ),gu=t=>!!t&&!Number.isNaN(Number(t)),qw=t=>fd(t,"number",gu),bf=t=>!!t&&Number.isInteger(Number(t)),pJ=t=>t.endsWith("%")&&gu(t.slice(0,-1)),st=t=>GB.test(t),Zo=t=>cJ.test(t),mJ=new Set(["length","size","percentage"]),gJ=t=>fd(t,mJ,YB),yJ=t=>fd(t,"position",YB),vJ=new Set(["image","url"]),xJ=t=>fd(t,vJ,SJ),bJ=t=>fd(t,"",jJ),wf=()=>!0,fd=(t,e,r)=>{const n=GB.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},wJ=t=>uJ.test(t)&&!dJ.test(t),YB=()=>!1,jJ=t=>fJ.test(t),SJ=t=>hJ.test(t),NJ=()=>{const t=qt("colors"),e=qt("spacing"),r=qt("blur"),n=qt("brightness"),i=qt("borderColor"),s=qt("borderRadius"),o=qt("borderSpacing"),l=qt("borderWidth"),c=qt("contrast"),u=qt("grayscale"),f=qt("hueRotate"),d=qt("invert"),p=qt("gap"),m=qt("gradientColorStops"),x=qt("gradientColorStopPositions"),y=qt("inset"),v=qt("margin"),b=qt("opacity"),w=qt("padding"),N=qt("saturate"),j=qt("scale"),k=qt("sepia"),_=qt("skew"),E=qt("space"),A=qt("translate"),T=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",st,e],R=()=>[st,e],L=()=>["",Gs,Qo],$=()=>["auto",gu,st],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",st],V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>[gu,st];return{cacheSize:500,separator:":",theme:{colors:[wf],spacing:[Gs,Qo],blur:["none","",Zo,st],brightness:D(),borderColor:[t],borderRadius:["none","","full",Zo,st],borderSpacing:R(),borderWidth:L(),contrast:D(),grayscale:q(),hueRotate:D(),invert:q(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[pJ,Qo],inset:P(),margin:P(),opacity:D(),padding:R(),saturate:D(),scale:D(),sepia:q(),skew:D(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",st]}],container:["container"],columns:[{columns:[Zo]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),st]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",bf,st]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",st]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",bf,st]}],"grid-cols":[{"grid-cols":[wf]}],"col-start-end":[{col:["auto",{span:["full",bf,st]},st]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[wf]}],"row-start-end":[{row:["auto",{span:[bf,st]},st]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",st]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",st]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",st,e]}],"min-w":[{"min-w":[st,e,"min","max","fit"]}],"max-w":[{"max-w":[st,e,"none","full","min","max","fit","prose",{screen:[Zo]},Zo]}],h:[{h:[st,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[st,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[st,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[st,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Zo,Qo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",qw]}],"font-family":[{font:[wf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",st]}],"line-clamp":[{"line-clamp":["none",gu,qw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Gs,st]}],"list-image":[{"list-image":["none",st]}],"list-style-type":[{list:["none","disc","decimal",st]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Gs,Qo]}],"underline-offset":[{"underline-offset":["auto",Gs,st]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",st]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",st]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),yJ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gJ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},xJ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[Gs,st]}],"outline-w":[{outline:[Gs,Qo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Gs,Qo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Zo,bJ]}],"shadow-color":[{shadow:[wf]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...W(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Zo,st]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[N]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",st]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",st]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",st]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[bf,st]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",st]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",st]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",st]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Gs,Qo,qw]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},kJ=oJ(NJ);function ge(...t){return kJ(it(t))}function cr({size:t="md",className:e}){const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return a.jsx("div",{className:ge("animate-spin rounded-full border-2 border-gray-300 border-t-blue-600",r[t],e)})}function ft({children:t,requireAdmin:e=!1}){const{user:r,admin:n,loading:i}=Ln(),[s,o]=O.useState(!1),l=O.useRef(null),c=O.useRef(!0);if(O.useEffect(()=>(i?l.current=setTimeout(()=>{c.current&&(console.warn("ProtectedRoute: Loading timeout reached - authentication may have failed"),o(!0))},15e3):(l.current&&(clearTimeout(l.current),l.current=null),o(!1)),()=>{l.current&&clearTimeout(l.current)}),[i]),O.useEffect(()=>()=>{c.current=!1,l.current&&clearTimeout(l.current)},[]),i&&!s)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx(cr,{size:"lg"}),a.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Verifying authentication..."})]})});if(s)return console.warn("ProtectedRoute: Authentication timeout - redirecting to login"),a.jsx(da,{to:"/login",replace:!0});if(!r)return a.jsx(da,{to:"/login",replace:!0});if(e){if(console.log("🔒 Checking admin access:",{user:!!r,admin:n,loading:i}),n===null)return console.log("❌ Access denied - user is not an admin"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600",children:"You don't have permission to access this page."}),a.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["User ID: ",r==null?void 0:r.id]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Admin Status: ",n===null?"Not Admin":n===void 0?"Loading...":"Admin"]}),a.jsx("button",{onClick:()=>window.location.href="/login",className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Return to Login"})]})});if(n===void 0)return console.log("⏳ Admin status still loading..."),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx(cr,{size:"lg"}),a.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Verifying admin permissions..."})]})});console.log("✅ Admin access granted:",n)}return a.jsx(a.Fragment,{children:t})}function _J(){var y,v;const[t,e]=O.useState(""),[r,n]=O.useState(""),[i,s]=O.useState(!1),[o,l]=O.useState(""),[c,u]=O.useState(!1),{user:f,signIn:d}=Ln(),m=((v=(y=rc().state)==null?void 0:y.from)==null?void 0:v.pathname)||"/dashboard";if(f)return a.jsx(da,{to:m,replace:!0});const x=async b=>{b.preventDefault(),l(""),u(!0);const{error:w}=await d(t,r);w&&l(w),u(!1)};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-gray-50 flex items-center justify-center px-4",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center mb-4",children:a.jsx(Ou,{className:"h-8 w-8 text-white"})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"AI GYM"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Training Zone Access Portal"})]}),a.jsx("div",{className:"bg-white shadow-lg rounded-xl border border-gray-200 p-8",children:a.jsxs("form",{className:"space-y-6",onSubmit:x,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:b=>e(b.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"admin@example.com",disabled:c})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",name:"password",type:i?"text":"password",autoComplete:"current-password",required:!0,value:r,onChange:b=>n(b.target.value),className:"w-full px-3 py-2.5 pr-10 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your password",disabled:c}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!i),disabled:c,children:i?a.jsx(TO,{className:"h-5 w-5 text-gray-400"}):a.jsx(ii,{className:"h-5 w-5 text-gray-400"})})]})]}),o&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsx("p",{className:"text-sm text-red-800",children:o})}),a.jsx("button",{type:"submit",disabled:c,className:"w-full flex justify-center items-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?a.jsxs(a.Fragment,{children:[a.jsx(cr,{size:"sm",className:"mr-2"}),"Signing in..."]}):"Sign In"})]})})]})})}function OJ(){var d;const{admin:t,signOut:e}=Ln(),[r,n]=O.useState(!1),[i,s]=O.useState(!1),o=rc(),l=[{name:"Dashboard",href:"/dashboard",icon:PO},{name:"Clients",href:"/clients",icon:Ou},{name:"Users",href:"/users",icon:oi},{name:"Tags",href:"/tags",icon:Es},{name:"Training Zone",href:"/training-zone",icon:Sh}],c=[{name:"AI Agents",href:"/content/ai-agents",icon:Kr,color:"#3B82F6"},{name:"Videos",href:"/content/videos",icon:si,color:"#EF4444"},{name:"Documents",href:"/content/documents",icon:Ot,color:"#10B981"},{name:"Prompts",href:"/content/prompts",icon:Gr,color:"#8B5CF6"},{name:"Automations",href:"/content/automations",icon:Ei,color:"#F59E0B"}],u=async()=>{await e()},f=o.pathname.startsWith("/content");return a.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs(Qn,{to:"/dashboard",className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-8 w-8 bg-blue-600 rounded-lg flex items-center justify-center",children:a.jsx(Ou,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"AI GYM"}),a.jsx("p",{className:"text-xs text-gray-500",children:"by AI Workify"})]})]})}),a.jsxs("nav",{className:"hidden md:flex space-x-8",children:[l.map(p=>{const m=o.pathname===p.href,x=p.icon;return a.jsxs(Qn,{to:p.href,className:`inline-flex items-center space-x-1 px-1 pt-1 text-sm font-medium transition-colors ${m?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[a.jsx(x,{className:"h-4 w-4"}),a.jsx("span",{children:p.name})]},p.name)}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>s(!i),className:`inline-flex items-center space-x-1 px-1 pt-1 text-sm font-medium transition-colors ${f?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[a.jsx(Ot,{className:"h-4 w-4"}),a.jsx("span",{children:"Content"}),a.jsx(mo,{className:"h-3 w-3"})]}),i&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>s(!1)}),a.jsx("div",{className:"absolute left-0 mt-2 w-56 bg-white rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 z-20",children:a.jsxs("div",{className:"py-2",children:[a.jsx("div",{className:"px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Repositories"}),c.map(p=>{const m=p.icon,x=o.pathname===p.href;return a.jsxs(Qn,{to:p.href,className:`flex items-center px-3 py-2 text-sm transition-colors ${x?"bg-blue-50 text-blue-700 border-r-2 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>s(!1),children:[a.jsx(m,{className:"mr-3 h-4 w-4",style:{color:p.color}}),p.name]},p.name)})]})})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>n(!r),className:"flex items-center space-x-3 text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-8 w-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-medium",children:t==null?void 0:t.email.charAt(0).toUpperCase()})}),a.jsxs("div",{className:"hidden md:block text-left",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:t==null?void 0:t.email}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:(d=t==null?void 0:t.role)==null?void 0:d.replace("_"," ")})]}),a.jsx(mo,{className:"h-4 w-4 text-gray-400"})]})}),r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>n(!1)}),a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-20",children:a.jsxs("div",{className:"py-1",children:[a.jsxs(Qn,{to:"/settings",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>n(!1),children:[a.jsx(Dn,{className:"mr-3 h-4 w-4"}),"Settings"]}),a.jsxs("button",{onClick:u,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[a.jsx(LB,{className:"mr-3 h-4 w-4"}),"Sign Out"]})]})})]})]})]})})})}function pr({children:t}){return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(OJ,{}),a.jsx("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:t})]})}var zw,OM;function $n(){if(OM)return zw;OM=1;var t=Array.isArray;return zw=t,zw}var Uw,EM;function XB(){if(EM)return Uw;EM=1;var t=typeof ag=="object"&&ag&&ag.Object===Object&&ag;return Uw=t,Uw}var Hw,CM;function Is(){if(CM)return Hw;CM=1;var t=XB(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return Hw=r,Hw}var Ww,AM;function Ap(){if(AM)return Ww;AM=1;var t=Is(),e=t.Symbol;return Ww=e,Ww}var Vw,TM;function EJ(){if(TM)return Vw;TM=1;var t=Ap(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,i=t?t.toStringTag:void 0;function s(o){var l=r.call(o,i),c=o[i];try{o[i]=void 0;var u=!0}catch{}var f=n.call(o);return u&&(l?o[i]=c:delete o[i]),f}return Vw=s,Vw}var Kw,PM;function CJ(){if(PM)return Kw;PM=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return Kw=r,Kw}var Gw,MM;function _o(){if(MM)return Gw;MM=1;var t=Ap(),e=EJ(),r=CJ(),n="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?i:n:s&&s in Object(l)?e(l):r(l)}return Gw=o,Gw}var Yw,RM;function Oo(){if(RM)return Yw;RM=1;function t(e){return e!=null&&typeof e=="object"}return Yw=t,Yw}var Xw,IM;function hd(){if(IM)return Xw;IM=1;var t=_o(),e=Oo(),r="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&t(i)==r}return Xw=n,Xw}var Jw,DM;function $O(){if(DM)return Jw;DM=1;var t=$n(),e=hd(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,o){if(t(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||e(s)?!0:n.test(s)||!r.test(s)||o!=null&&s in Object(o)}return Jw=i,Jw}var Qw,LM;function Fa(){if(LM)return Qw;LM=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return Qw=t,Qw}var Zw,$M;function BO(){if($M)return Zw;$M=1;var t=_o(),e=Fa(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!e(l))return!1;var c=t(l);return c==n||c==i||c==r||c==s}return Zw=o,Zw}var e1,BM;function AJ(){if(BM)return e1;BM=1;var t=Is(),e=t["__core-js_shared__"];return e1=e,e1}var t1,FM;function TJ(){if(FM)return t1;FM=1;var t=AJ(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return t1=r,t1}var r1,qM;function JB(){if(qM)return r1;qM=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return r1=r,r1}var n1,zM;function PJ(){if(zM)return n1;zM=1;var t=BO(),e=TJ(),r=Fa(),n=JB(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,f=RegExp("^"+c.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(p){if(!r(p)||e(p))return!1;var m=t(p)?f:s;return m.test(n(p))}return n1=d,n1}var i1,UM;function MJ(){if(UM)return i1;UM=1;function t(e,r){return e==null?void 0:e[r]}return i1=t,i1}var s1,HM;function ic(){if(HM)return s1;HM=1;var t=PJ(),e=MJ();function r(n,i){var s=e(n,i);return t(s)?s:void 0}return s1=r,s1}var o1,WM;function A0(){if(WM)return o1;WM=1;var t=ic(),e=t(Object,"create");return o1=e,o1}var a1,VM;function RJ(){if(VM)return a1;VM=1;var t=A0();function e(){this.__data__=t?t(null):{},this.size=0}return a1=e,a1}var l1,KM;function IJ(){if(KM)return l1;KM=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return l1=t,l1}var c1,GM;function DJ(){if(GM)return c1;GM=1;var t=A0(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(s){var o=this.__data__;if(t){var l=o[s];return l===e?void 0:l}return n.call(o,s)?o[s]:void 0}return c1=i,c1}var u1,YM;function LJ(){if(YM)return u1;YM=1;var t=A0(),e=Object.prototype,r=e.hasOwnProperty;function n(i){var s=this.__data__;return t?s[i]!==void 0:r.call(s,i)}return u1=n,u1}var d1,XM;function $J(){if(XM)return d1;XM=1;var t=A0(),e="__lodash_hash_undefined__";function r(n,i){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=t&&i===void 0?e:i,this}return d1=r,d1}var f1,JM;function BJ(){if(JM)return f1;JM=1;var t=RJ(),e=IJ(),r=DJ(),n=LJ(),i=$J();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,f1=s,f1}var h1,QM;function FJ(){if(QM)return h1;QM=1;function t(){this.__data__=[],this.size=0}return h1=t,h1}var p1,ZM;function FO(){if(ZM)return p1;ZM=1;function t(e,r){return e===r||e!==e&&r!==r}return p1=t,p1}var m1,eR;function T0(){if(eR)return m1;eR=1;var t=FO();function e(r,n){for(var i=r.length;i--;)if(t(r[i][0],n))return i;return-1}return m1=e,m1}var g1,tR;function qJ(){if(tR)return g1;tR=1;var t=T0(),e=Array.prototype,r=e.splice;function n(i){var s=this.__data__,o=t(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():r.call(s,o,1),--this.size,!0}return g1=n,g1}var y1,rR;function zJ(){if(rR)return y1;rR=1;var t=T0();function e(r){var n=this.__data__,i=t(n,r);return i<0?void 0:n[i][1]}return y1=e,y1}var v1,nR;function UJ(){if(nR)return v1;nR=1;var t=T0();function e(r){return t(this.__data__,r)>-1}return v1=e,v1}var x1,iR;function HJ(){if(iR)return x1;iR=1;var t=T0();function e(r,n){var i=this.__data__,s=t(i,r);return s<0?(++this.size,i.push([r,n])):i[s][1]=n,this}return x1=e,x1}var b1,sR;function P0(){if(sR)return b1;sR=1;var t=FJ(),e=qJ(),r=zJ(),n=UJ(),i=HJ();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,b1=s,b1}var w1,oR;function qO(){if(oR)return w1;oR=1;var t=ic(),e=Is(),r=t(e,"Map");return w1=r,w1}var j1,aR;function WJ(){if(aR)return j1;aR=1;var t=BJ(),e=P0(),r=qO();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return j1=n,j1}var S1,lR;function VJ(){if(lR)return S1;lR=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return S1=t,S1}var N1,cR;function M0(){if(cR)return N1;cR=1;var t=VJ();function e(r,n){var i=r.__data__;return t(n)?i[typeof n=="string"?"string":"hash"]:i.map}return N1=e,N1}var k1,uR;function KJ(){if(uR)return k1;uR=1;var t=M0();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return k1=e,k1}var _1,dR;function GJ(){if(dR)return _1;dR=1;var t=M0();function e(r){return t(this,r).get(r)}return _1=e,_1}var O1,fR;function YJ(){if(fR)return O1;fR=1;var t=M0();function e(r){return t(this,r).has(r)}return O1=e,O1}var E1,hR;function XJ(){if(hR)return E1;hR=1;var t=M0();function e(r,n){var i=t(this,r),s=i.size;return i.set(r,n),this.size+=i.size==s?0:1,this}return E1=e,E1}var C1,pR;function zO(){if(pR)return C1;pR=1;var t=WJ(),e=KJ(),r=GJ(),n=YJ(),i=XJ();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,C1=s,C1}var A1,mR;function QB(){if(mR)return A1;mR=1;var t=zO(),e="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],c=s.cache;if(c.has(l))return c.get(l);var u=n.apply(this,o);return s.cache=c.set(l,u)||c,u};return s.cache=new(r.Cache||t),s}return r.Cache=t,A1=r,A1}var T1,gR;function JJ(){if(gR)return T1;gR=1;var t=QB(),e=500;function r(n){var i=t(n,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return T1=r,T1}var P1,yR;function QJ(){if(yR)return P1;yR=1;var t=JJ(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,l,c,u){s.push(c?u.replace(r,"$1"):l||o)}),s});return P1=n,P1}var M1,vR;function UO(){if(vR)return M1;vR=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,s=Array(i);++n<i;)s[n]=r(e[n],n,e);return s}return M1=t,M1}var R1,xR;function ZJ(){if(xR)return R1;xR=1;var t=Ap(),e=UO(),r=$n(),n=hd(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return e(l,o)+"";if(n(l))return s?s.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return R1=o,R1}var I1,bR;function ZB(){if(bR)return I1;bR=1;var t=ZJ();function e(r){return r==null?"":t(r)}return I1=e,I1}var D1,wR;function eF(){if(wR)return D1;wR=1;var t=$n(),e=$O(),r=QJ(),n=ZB();function i(s,o){return t(s)?s:e(s,o)?[s]:r(n(s))}return D1=i,D1}var L1,jR;function R0(){if(jR)return L1;jR=1;var t=hd();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return L1=e,L1}var $1,SR;function HO(){if(SR)return $1;SR=1;var t=eF(),e=R0();function r(n,i){i=t(i,n);for(var s=0,o=i.length;n!=null&&s<o;)n=n[e(i[s++])];return s&&s==o?n:void 0}return $1=r,$1}var B1,NR;function tF(){if(NR)return B1;NR=1;var t=HO();function e(r,n,i){var s=r==null?void 0:t(r,n);return s===void 0?i:s}return B1=e,B1}var eQ=tF();const ei=ht(eQ);var F1,kR;function tQ(){if(kR)return F1;kR=1;function t(e){return e==null}return F1=t,F1}var rQ=tQ();const tt=ht(rQ);var q1,_R;function nQ(){if(_R)return q1;_R=1;var t=_o(),e=$n(),r=Oo(),n="[object String]";function i(s){return typeof s=="string"||!e(s)&&r(s)&&t(s)==n}return q1=i,q1}var iQ=nQ();const Tp=ht(iQ);var sQ=BO();const Ze=ht(sQ);var oQ=Fa();const pd=ht(oQ);var z1={exports:{}},xt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OR;function aQ(){if(OR)return xt;OR=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),x;x=Symbol.for("react.module.reference");function y(v){if(typeof v=="object"&&v!==null){var b=v.$$typeof;switch(b){case t:switch(v=v.type,v){case r:case i:case n:case u:case f:return v;default:switch(v=v&&v.$$typeof,v){case l:case o:case c:case p:case d:case s:return v;default:return b}}case e:return b}}}return xt.ContextConsumer=o,xt.ContextProvider=s,xt.Element=t,xt.ForwardRef=c,xt.Fragment=r,xt.Lazy=p,xt.Memo=d,xt.Portal=e,xt.Profiler=i,xt.StrictMode=n,xt.Suspense=u,xt.SuspenseList=f,xt.isAsyncMode=function(){return!1},xt.isConcurrentMode=function(){return!1},xt.isContextConsumer=function(v){return y(v)===o},xt.isContextProvider=function(v){return y(v)===s},xt.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===t},xt.isForwardRef=function(v){return y(v)===c},xt.isFragment=function(v){return y(v)===r},xt.isLazy=function(v){return y(v)===p},xt.isMemo=function(v){return y(v)===d},xt.isPortal=function(v){return y(v)===e},xt.isProfiler=function(v){return y(v)===i},xt.isStrictMode=function(v){return y(v)===n},xt.isSuspense=function(v){return y(v)===u},xt.isSuspenseList=function(v){return y(v)===f},xt.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===r||v===i||v===n||v===u||v===f||v===m||typeof v=="object"&&v!==null&&(v.$$typeof===p||v.$$typeof===d||v.$$typeof===s||v.$$typeof===o||v.$$typeof===c||v.$$typeof===x||v.getModuleId!==void 0)},xt.typeOf=y,xt}var ER;function lQ(){return ER||(ER=1,z1.exports=aQ()),z1.exports}var cQ=lQ(),U1,CR;function rF(){if(CR)return U1;CR=1;var t=_o(),e=Oo(),r="[object Number]";function n(i){return typeof i=="number"||e(i)&&t(i)==r}return U1=n,U1}var H1,AR;function uQ(){if(AR)return H1;AR=1;var t=rF();function e(r){return t(r)&&r!=+r}return H1=e,H1}var dQ=uQ();const Pp=ht(dQ);var fQ=rF();const hQ=ht(fQ);var mn=function(e){return e===0?0:e>0?1:-1},Nl=function(e){return Tp(e)&&e.indexOf("%")===e.length-1},Pe=function(e){return hQ(e)&&!Pp(e)},kr=function(e){return Pe(e)||Tp(e)},pQ=0,md=function(e){var r=++pQ;return"".concat(e||"").concat(r)},gn=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pe(e)&&!Tp(e))return n;var s;if(Nl(e)){var o=e.indexOf("%");s=r*parseFloat(e.slice(0,o))/100}else s=+e;return Pp(s)&&(s=n),i&&s>r&&(s=r),s},ha=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},mQ=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},Gn=function(e,r){return Pe(e)&&Pe(r)?function(n){return e+n*(r-e)}:function(){return r}};function by(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):ei(n,e))===r})}function yu(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function a_(t){"@babel/helpers - typeof";return a_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a_(t)}var gQ=["viewBox","children"],yQ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],TR=["points","pathLength"],W1={svg:gQ,polygon:TR,polyline:TR},WO=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],wy=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(O.isValidElement(e)&&(n=e.props),!pd(n))return null;var i={};return Object.keys(n).forEach(function(s){WO.includes(s)&&(i[s]=r||function(o){return n[s](n,o)})}),i},vQ=function(e,r,n){return function(i){return e(r,n,i),null}},zl=function(e,r,n){if(!pd(e)||a_(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];WO.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=vQ(o,r,n))}),i},xQ=["children"],bQ=["children"];function PR(t,e){if(t==null)return{};var r=wQ(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wQ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function l_(t){"@babel/helpers - typeof";return l_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l_(t)}var MR={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},co=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},RR=null,V1=null,VO=function t(e){if(e===RR&&Array.isArray(V1))return V1;var r=[];return O.Children.forEach(e,function(n){tt(n)||(cQ.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),V1=r,RR=e,r};function ti(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return co(i)}):n=[co(e)],VO(t).forEach(function(i){var s=ei(i,"type.displayName")||ei(i,"type.name");n.indexOf(s)!==-1&&r.push(i)}),r}function Vn(t,e){var r=ti(t,e);return r&&r[0]}var IR=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!Pe(n)||n<=0||!Pe(i)||i<=0)},jQ=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],SQ=function(e){return e&&e.type&&Tp(e.type)&&jQ.indexOf(e.type)>=0},NQ=function(e){return e&&l_(e)==="object"&&"clipDot"in e},kQ=function(e,r,n,i){var s,o=(s=W1==null?void 0:W1[i])!==null&&s!==void 0?s:[];return r.startsWith("data-")||!Ze(e)&&(i&&o.includes(r)||yQ.includes(r))||n&&WO.includes(r)},Ge=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(O.isValidElement(e)&&(i=e.props),!pd(i))return null;var s={};return Object.keys(i).forEach(function(o){var l;kQ((l=i)===null||l===void 0?void 0:l[o],o,r,n)&&(s[o]=i[o])}),s},c_=function t(e,r){if(e===r)return!0;var n=O.Children.count(e);if(n!==O.Children.count(r))return!1;if(n===0)return!0;if(n===1)return DR(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var s=e[i],o=r[i];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!DR(s,o))return!1}return!0},DR=function(e,r){if(tt(e)&&tt(r))return!0;if(!tt(e)&&!tt(r)){var n=e.props||{},i=n.children,s=PR(n,xQ),o=r.props||{},l=o.children,c=PR(o,bQ);return i&&l?yu(s,c)&&c_(i,l):!i&&!l?yu(s,c):!1}return!1},LR=function(e,r){var n=[],i={};return VO(e).forEach(function(s,o){if(SQ(s))n.push(s);else if(s){var l=co(s.type),c=r[l]||{},u=c.handler,f=c.once;if(u&&(!f||!i[l])){var d=u(s,l,o);n.push(d),i[l]=!0}}}),n},_Q=function(e){var r=e&&e.type;return r&&MR[r]?MR[r]:null},OQ=function(e,r){return VO(r).indexOf(e)},EQ=["children","width","height","viewBox","className","style","title","desc"];function u_(){return u_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},u_.apply(this,arguments)}function CQ(t,e){if(t==null)return{};var r=AQ(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function AQ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function d_(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,s=t.className,o=t.style,l=t.title,c=t.desc,u=CQ(t,EQ),f=i||{width:r,height:n,x:0,y:0},d=it("recharts-surface",s);return Z.createElement("svg",u_({},Ge(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),Z.createElement("title",null,l),Z.createElement("desc",null,c),e)}var TQ=["children","className"];function f_(){return f_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f_.apply(this,arguments)}function PQ(t,e){if(t==null)return{};var r=MQ(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function MQ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var gt=Z.forwardRef(function(t,e){var r=t.children,n=t.className,i=PQ(t,TQ),s=it("recharts-layer",n);return Z.createElement("g",f_({className:s},Ge(i,!0),{ref:e}),r)}),ts=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s]},K1,$R;function RQ(){if($R)return K1;$R=1;function t(e,r,n){var i=-1,s=e.length;r<0&&(r=-r>s?0:s+r),n=n>s?s:n,n<0&&(n+=s),s=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(s);++i<s;)o[i]=e[i+r];return o}return K1=t,K1}var G1,BR;function IQ(){if(BR)return G1;BR=1;var t=RQ();function e(r,n,i){var s=r.length;return i=i===void 0?s:i,!n&&i>=s?r:t(r,n,i)}return G1=e,G1}var Y1,FR;function nF(){if(FR)return Y1;FR=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+i+s+"]");function c(u){return l.test(u)}return Y1=c,Y1}var X1,qR;function DQ(){if(qR)return X1;qR=1;function t(e){return e.split("")}return X1=t,X1}var J1,zR;function LQ(){if(zR)return J1;zR=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,s="\\ufe0e\\ufe0f",o="["+t+"]",l="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",f="[^"+t+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",x=u+"?",y="["+s+"]?",v="(?:"+m+"(?:"+[f,d,p].join("|")+")"+y+x+")*",b=y+x+v,w="(?:"+[f+l+"?",l,d,p,o].join("|")+")",N=RegExp(c+"(?="+c+")|"+w+b,"g");function j(k){return k.match(N)||[]}return J1=j,J1}var Q1,UR;function $Q(){if(UR)return Q1;UR=1;var t=DQ(),e=nF(),r=LQ();function n(i){return e(i)?r(i):t(i)}return Q1=n,Q1}var Z1,HR;function BQ(){if(HR)return Z1;HR=1;var t=IQ(),e=nF(),r=$Q(),n=ZB();function i(s){return function(o){o=n(o);var l=e(o)?r(o):void 0,c=l?l[0]:o.charAt(0),u=l?t(l,1).join(""):o.slice(1);return c[s]()+u}}return Z1=i,Z1}var ej,WR;function FQ(){if(WR)return ej;WR=1;var t=BQ(),e=t("toUpperCase");return ej=e,ej}var qQ=FQ();const I0=ht(qQ);function Dt(t){return function(){return t}}const iF=Math.cos,jy=Math.sin,ds=Math.sqrt,Sy=Math.PI,D0=2*Sy,h_=Math.PI,p_=2*h_,vl=1e-6,zQ=p_-vl;function sF(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function UQ(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return sF;const r=10**e;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class HQ{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?sF:UQ(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,s,o){this._append`C${+e},${+r},${+n},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,i,s){if(e=+e,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-e,u=i-r,f=o-e,d=l-r,p=f*f+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(p>vl)if(!(Math.abs(d*c-u*f)>vl)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let m=n-o,x=i-l,y=c*c+u*u,v=m*m+x*x,b=Math.sqrt(y),w=Math.sqrt(p),N=s*Math.tan((h_-Math.acos((y+p-v)/(2*b*w)))/2),j=N/w,k=N/b;Math.abs(j-1)>vl&&this._append`L${e+j*f},${r+j*d}`,this._append`A${s},${s},0,0,${+(d*m>f*x)},${this._x1=e+k*c},${this._y1=r+k*u}`}}arc(e,r,n,i,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(i),c=n*Math.sin(i),u=e+l,f=r+c,d=1^o,p=o?i-s:s-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>vl||Math.abs(this._y1-f)>vl)&&this._append`L${u},${f}`,n&&(p<0&&(p=p%p_+p_),p>zQ?this._append`A${n},${n},0,1,${d},${e-l},${r-c}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:p>vl&&this._append`A${n},${n},0,${+(p>=h_)},${d},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function KO(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new HQ(e)}function GO(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oF(t){this._context=t}oF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function L0(t){return new oF(t)}function aF(t){return t[0]}function lF(t){return t[1]}function cF(t,e){var r=Dt(!0),n=null,i=L0,s=null,o=KO(l);t=typeof t=="function"?t:t===void 0?aF:Dt(t),e=typeof e=="function"?e:e===void 0?lF:Dt(e);function l(c){var u,f=(c=GO(c)).length,d,p=!1,m;for(n==null&&(s=i(m=o())),u=0;u<=f;++u)!(u<f&&r(d=c[u],u,c))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(d,u,c),+e(d,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Dt(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Dt(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Dt(!!c),l):r},l.curve=function(c){return arguments.length?(i=c,n!=null&&(s=i(n)),l):i},l.context=function(c){return arguments.length?(c==null?n=s=null:s=i(n=c),l):n},l}function pg(t,e,r){var n=null,i=Dt(!0),s=null,o=L0,l=null,c=KO(u);t=typeof t=="function"?t:t===void 0?aF:Dt(+t),e=typeof e=="function"?e:Dt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?lF:Dt(+r);function u(d){var p,m,x,y=(d=GO(d)).length,v,b=!1,w,N=new Array(y),j=new Array(y);for(s==null&&(l=o(w=c())),p=0;p<=y;++p){if(!(p<y&&i(v=d[p],p,d))===b)if(b=!b)m=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=p-1;x>=m;--x)l.point(N[x],j[x]);l.lineEnd(),l.areaEnd()}b&&(N[p]=+t(v,p,d),j[p]=+e(v,p,d),l.point(n?+n(v,p,d):N[p],r?+r(v,p,d):j[p]))}if(w)return l=null,w+""||null}function f(){return cF().defined(i).curve(o).context(s)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:Dt(+d),n=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Dt(+d),u):t},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Dt(+d),u):n},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:Dt(+d),r=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Dt(+d),u):e},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Dt(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(r)},u.lineX1=function(){return f().x(n).y(e)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Dt(!!d),u):i},u.curve=function(d){return arguments.length?(o=d,s!=null&&(l=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=l=null:l=o(s=d),u):s},u}class uF{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function WQ(t){return new uF(t,!0)}function VQ(t){return new uF(t,!1)}const YO={draw(t,e){const r=ds(e/Sy);t.moveTo(r,0),t.arc(0,0,r,0,D0)}},KQ={draw(t,e){const r=ds(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},dF=ds(1/3),GQ=dF*2,YQ={draw(t,e){const r=ds(e/GQ),n=r*dF;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},XQ={draw(t,e){const r=ds(e),n=-r/2;t.rect(n,n,r,r)}},JQ=.8908130915292852,fF=jy(Sy/10)/jy(7*Sy/10),QQ=jy(D0/10)*fF,ZQ=-iF(D0/10)*fF,eZ={draw(t,e){const r=ds(e*JQ),n=QQ*r,i=ZQ*r;t.moveTo(0,-r),t.lineTo(n,i);for(let s=1;s<5;++s){const o=D0*s/5,l=iF(o),c=jy(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*i,c*n+l*i)}t.closePath()}},tj=ds(3),tZ={draw(t,e){const r=-ds(e/(tj*3));t.moveTo(0,r*2),t.lineTo(-tj*r,-r),t.lineTo(tj*r,-r),t.closePath()}},yi=-.5,vi=ds(3)/2,m_=1/ds(12),rZ=(m_/2+1)*3,nZ={draw(t,e){const r=ds(e/rZ),n=r/2,i=r*m_,s=n,o=r*m_+r,l=-s,c=o;t.moveTo(n,i),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(yi*n-vi*i,vi*n+yi*i),t.lineTo(yi*s-vi*o,vi*s+yi*o),t.lineTo(yi*l-vi*c,vi*l+yi*c),t.lineTo(yi*n+vi*i,yi*i-vi*n),t.lineTo(yi*s+vi*o,yi*o-vi*s),t.lineTo(yi*l+vi*c,yi*c-vi*l),t.closePath()}};function iZ(t,e){let r=null,n=KO(i);t=typeof t=="function"?t:Dt(t||YO),e=typeof e=="function"?e:Dt(e===void 0?64:+e);function i(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Dt(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Dt(+s),i):e},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function Ny(){}function ky(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function hF(t){this._context=t}hF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ky(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ky(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function sZ(t){return new hF(t)}function pF(t){this._context=t}pF.prototype={areaStart:Ny,areaEnd:Ny,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ky(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function oZ(t){return new pF(t)}function mF(t){this._context=t}mF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:ky(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function aZ(t){return new mF(t)}function gF(t){this._context=t}gF.prototype={areaStart:Ny,areaEnd:Ny,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function lZ(t){return new gF(t)}function VR(t){return t<0?-1:1}function KR(t,e,r){var n=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(n||i<0&&-0),o=(r-t._y1)/(i||n<0&&-0),l=(s*i+o*n)/(n+i);return(VR(s)+VR(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function GR(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function rj(t,e,r){var n=t._x0,i=t._y0,s=t._x1,o=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,i+l*e,s-l,o-l*r,s,o)}function _y(t){this._context=t}_y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rj(this,this._t0,GR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,rj(this,GR(this,r=KR(this,t,e)),r);break;default:rj(this,this._t0,r=KR(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function yF(t){this._context=new vF(t)}(yF.prototype=Object.create(_y.prototype)).point=function(t,e){_y.prototype.point.call(this,e,t)};function vF(t){this._context=t}vF.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,s){this._context.bezierCurveTo(e,t,n,r,s,i)}};function cZ(t){return new _y(t)}function uZ(t){return new yF(t)}function xF(t){this._context=t}xF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=YR(t),i=YR(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function YR(t){var e,r=t.length-1,n,i=new Array(r),s=new Array(r),o=new Array(r);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function dZ(t){return new xF(t)}function $0(t,e){this._context=t,this._t=e}$0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function fZ(t){return new $0(t,.5)}function hZ(t){return new $0(t,0)}function pZ(t){return new $0(t,1)}function Cu(t,e){if((o=t.length)>1)for(var r=1,n,i,s=t[e[0]],o,l=s.length;r<o;++r)for(i=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function g_(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function mZ(t,e){return t[e]}function gZ(t){const e=[];return e.key=t,e}function yZ(){var t=Dt([]),e=g_,r=Cu,n=mZ;function i(s){var o=Array.from(t.apply(this,arguments),gZ),l,c=o.length,u=-1,f;for(const d of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(d,o[l].key,u,s)]).data=d;for(l=0,f=GO(e(o));l<c;++l)o[f[l]].index=l;return r(o,f),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Dt(Array.from(s)),i):t},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:Dt(+s),i):n},i.order=function(s){return arguments.length?(e=s==null?g_:typeof s=="function"?s:Dt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(r=s??Cu,i):r},i}function vZ(t,e){if((n=t.length)>0){for(var r,n,i=0,s=t[0].length,o;i<s;++i){for(o=r=0;r<n;++r)o+=t[r][i][1]||0;if(o)for(r=0;r<n;++r)t[r][i][1]/=o}Cu(t,e)}}function xZ(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,s=n.length;r<s;++r){for(var o=0,l=0;o<i;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Cu(t,e)}}function bZ(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var f=t[e[l]],d=f[n][1]||0,p=f[n-1][1]||0,m=(d-p)/2,x=0;x<l;++x){var y=t[e[x]],v=y[n][1]||0,b=y[n-1][1]||0;m+=v-b}c+=d,u+=m*d}i[n-1][1]+=i[n-1][0]=r,c&&(r-=u/c)}i[n-1][1]+=i[n-1][0]=r,Cu(t,e)}}function kh(t){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(t)}var wZ=["type","size","sizeType"];function y_(){return y_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},y_.apply(this,arguments)}function XR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function JR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XR(Object(r),!0).forEach(function(n){jZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jZ(t,e,r){return e=SZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SZ(t){var e=NZ(t,"string");return kh(e)=="symbol"?e:e+""}function NZ(t,e){if(kh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kZ(t,e){if(t==null)return{};var r=_Z(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _Z(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var bF={symbolCircle:YO,symbolCross:KQ,symbolDiamond:YQ,symbolSquare:XQ,symbolStar:eZ,symbolTriangle:tZ,symbolWye:nZ},OZ=Math.PI/180,EZ=function(e){var r="symbol".concat(I0(e));return bF[r]||YO},CZ=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*OZ;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},AZ=function(e,r){bF["symbol".concat(I0(e))]=r},XO=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,s=i===void 0?64:i,o=e.sizeType,l=o===void 0?"area":o,c=kZ(e,wZ),u=JR(JR({},c),{},{type:n,size:s,sizeType:l}),f=function(){var v=EZ(n),b=iZ().type(v).size(CZ(s,l,n));return b()},d=u.className,p=u.cx,m=u.cy,x=Ge(u,!0);return p===+p&&m===+m&&s===+s?Z.createElement("path",y_({},x,{className:it("recharts-symbols",d),transform:"translate(".concat(p,", ").concat(m,")"),d:f()})):null};XO.registerSymbol=AZ;function Au(t){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Au(t)}function v_(){return v_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},v_.apply(this,arguments)}function QR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function TZ(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QR(Object(r),!0).forEach(function(n){_h(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jF(n.key),n)}}function RZ(t,e,r){return e&&MZ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IZ(t,e,r){return e=Oy(e),DZ(t,wF()?Reflect.construct(e,r||[],Oy(t).constructor):e.apply(t,r))}function DZ(t,e){if(e&&(Au(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LZ(t)}function LZ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wF=function(){return!!t})()}function Oy(t){return Oy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Oy(t)}function $Z(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x_(t,e)}function x_(t,e){return x_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},x_(t,e)}function _h(t,e,r){return e=jF(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jF(t){var e=BZ(t,"string");return Au(e)=="symbol"?e:e+""}function BZ(t,e){if(Au(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hi=32,JO=function(t){function e(){return PZ(this,e),IZ(this,e,arguments)}return $Z(e,t),RZ(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,s=Hi/2,o=Hi/6,l=Hi/3,c=n.inactive?i:n.color;if(n.type==="plainline")return Z.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:Hi,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return Z.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Hi,"M").concat(2*l,",").concat(s,`
--
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},$ke=0,ru=[];function Bke(t){var e=O.useRef([]),r=O.useRef([0,0]),n=O.useRef(),i=O.useState($ke++)[0],s=O.useState(q9)[0],o=O.useRef(t);O.useEffect(function(){o.current=t},[t]),O.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=oke([t.lockRef.current],(t.shards||[]).map(B6),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=O.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var b=Wg(y),w=r.current,N="deltaX"in y?y.deltaX:w[0]-b[0],j="deltaY"in y?y.deltaY:w[1]-b[1],k,_=y.target,E=Math.abs(N)>Math.abs(j)?"h":"v";if("touches"in y&&E==="h"&&_.type==="range")return!1;var A=L6(E,_);if(!A)return!0;if(A?k=E:(k=E==="v"?"h":"v",A=L6(E,_)),!A)return!1;if(!n.current&&"changedTouches"in y&&(N||j)&&(n.current=k),!k)return!0;var T=n.current||k;return Ike(T,v,y,T==="h"?N:j)},[]),c=O.useCallback(function(y){var v=y;if(!(!ru.length||ru[ru.length-1]!==s)){var b="deltaY"in v?$6(v):Wg(v),w=e.current.filter(function(k){return k.name===v.type&&(k.target===v.target||v.target===k.shadowParent)&&Dke(k.delta,b)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var N=(o.current.shards||[]).map(B6).filter(Boolean).filter(function(k){return k.contains(v.target)}),j=N.length>0?l(v,N[0]):!o.current.noIsolation;j&&v.cancelable&&v.preventDefault()}}},[]),u=O.useCallback(function(y,v,b,w){var N={name:y,delta:v,target:b,should:w,shadowParent:Fke(b)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(j){return j!==N})},1)},[]),f=O.useCallback(function(y){r.current=Wg(y),n.current=void 0},[]),d=O.useCallback(function(y){u(y.type,$6(y),y.target,l(y,t.lockRef.current))},[]),p=O.useCallback(function(y){u(y.type,Wg(y),y.target,l(y,t.lockRef.current))},[]);O.useEffect(function(){return ru.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:p}),document.addEventListener("wheel",c,tu),document.addEventListener("touchmove",c,tu),document.addEventListener("touchstart",f,tu),function(){ru=ru.filter(function(y){return y!==s}),document.removeEventListener("wheel",c,tu),document.removeEventListener("touchmove",c,tu),document.removeEventListener("touchstart",f,tu)}},[]);var m=t.removeScrollBar,x=t.inert;return O.createElement(O.Fragment,null,x?O.createElement(s,{styles:Lke(i)}):null,m?O.createElement(Eke,{gapMode:t.gapMode}):null)}function Fke(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const qke=mke(F9,Bke);var W9=O.forwardRef(function(t,e){return O.createElement(Px,ws({},t,{ref:e,sideCar:qke}))});W9.classNames=Px.classNames;var zke=[" ","Enter","ArrowUp","ArrowDown"],Uke=[" ","Enter"],Jp="Select",[Mx,Rx,Hke]=wSe(Jp),[_d,EEe]=Yp(Jp,[Hke,_9]),Ix=_9(),[Wke,Ka]=_d(Jp),[Vke,Kke]=_d(Jp),V9=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:i,onOpenChange:s,value:o,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:d,disabled:p,required:m,form:x}=t,y=Ix(e),[v,b]=O.useState(null),[w,N]=O.useState(null),[j,k]=O.useState(!1),_=SSe(u),[E=!1,A]=v0({prop:n,defaultProp:i,onChange:s}),[T,M]=v0({prop:o,defaultProp:l,onChange:c}),P=O.useRef(null),R=v?x||!!v.closest("form"):!0,[L,$]=O.useState(new Set),F=Array.from(L).map(z=>z.props.value).join(";");return a.jsx(YNe,{...y,children:a.jsxs(Wke,{required:m,scope:e,trigger:v,onTriggerChange:b,valueNode:w,onValueNodeChange:N,valueNodeHasChildren:j,onValueNodeHasChildrenChange:k,contentId:OC(),value:T,onValueChange:M,open:E,onOpenChange:A,dir:_,triggerPointerDownPosRef:P,disabled:p,children:[a.jsx(Mx.Provider,{scope:e,children:a.jsx(Vke,{scope:t.__scopeSelect,onNativeOptionAdd:O.useCallback(z=>{$(W=>new Set(W).add(z))},[]),onNativeOptionRemove:O.useCallback(z=>{$(W=>{const K=new Set(W);return K.delete(z),K})},[]),children:r})}),R?a.jsxs(yH,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:d,value:T,onChange:z=>M(z.target.value),disabled:p,form:x,children:[T===void 0?a.jsx("option",{value:""}):null,Array.from(L)]},F):null]})})};V9.displayName=Jp;var K9="SelectTrigger",G9=O.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...i}=t,s=Ix(r),o=Ka(K9,r),l=o.disabled||n,c=yr(e,o.onTriggerChange),u=Rx(r),f=O.useRef("touch"),[d,p,m]=vH(y=>{const v=u().filter(N=>!N.disabled),b=v.find(N=>N.value===o.value),w=xH(v,y,b);w!==void 0&&o.onValueChange(w.value)}),x=y=>{l||(o.onOpenChange(!0),m()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return a.jsx(XNe,{asChild:!0,...s,children:a.jsx($t.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":gH(o.value)?"":void 0,...i,ref:c,onClick:Jt(i.onClick,y=>{y.currentTarget.focus(),f.current!=="mouse"&&x(y)}),onPointerDown:Jt(i.onPointerDown,y=>{f.current=y.pointerType;const v=y.target;v.hasPointerCapture(y.pointerId)&&v.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(x(y),y.preventDefault())}),onKeyDown:Jt(i.onKeyDown,y=>{const v=d.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&p(y.key),!(v&&y.key===" ")&&zke.includes(y.key)&&(x(),y.preventDefault())})})})});G9.displayName=K9;var Y9="SelectValue",X9=O.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,children:s,placeholder:o="",...l}=t,c=Ka(Y9,r),{onValueNodeHasChildrenChange:u}=c,f=s!==void 0,d=yr(e,c.onValueNodeChange);return Sn(()=>{u(f)},[u,f]),a.jsx($t.span,{...l,ref:d,style:{pointerEvents:"none"},children:gH(c.value)?a.jsx(a.Fragment,{children:o}):s})});X9.displayName=Y9;var Gke="SelectIcon",J9=O.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...i}=t;return a.jsx($t.span,{"aria-hidden":!0,...i,ref:e,children:n||"▼"})});J9.displayName=Gke;var Yke="SelectPortal",Q9=t=>a.jsx(I9,{asChild:!0,...t});Q9.displayName=Yke;var Zl="SelectContent",Z9=O.forwardRef((t,e)=>{const r=Ka(Zl,t.__scopeSelect),[n,i]=O.useState();if(Sn(()=>{i(new DocumentFragment)},[]),!r.open){const s=n;return s?js.createPortal(a.jsx(eH,{scope:t.__scopeSelect,children:a.jsx(Mx.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),s):null}return a.jsx(tH,{...t,ref:e})});Z9.displayName=Zl;var Gi=10,[eH,Ga]=_d(Zl),Xke="SelectContentImpl",Jke=h0("SelectContent.RemoveScroll"),tH=O.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:p,collisionPadding:m,sticky:x,hideWhenDetached:y,avoidCollisions:v,...b}=t,w=Ka(Zl,r),[N,j]=O.useState(null),[k,_]=O.useState(null),E=yr(e,Y=>j(Y)),[A,T]=O.useState(null),[M,P]=O.useState(null),R=Rx(r),[L,$]=O.useState(!1),F=O.useRef(!1);O.useEffect(()=>{if(N)return ske(N)},[N]),RSe();const z=O.useCallback(Y=>{const[re,...J]=R().map(se=>se.ref.current),[ne]=J.slice(-1),te=document.activeElement;for(const se of Y)if(se===te||(se==null||se.scrollIntoView({block:"nearest"}),se===re&&k&&(k.scrollTop=0),se===ne&&k&&(k.scrollTop=k.scrollHeight),se==null||se.focus(),document.activeElement!==te))return},[R,k]),W=O.useCallback(()=>z([A,N]),[z,A,N]);O.useEffect(()=>{L&&W()},[L,W]);const{onOpenChange:K,triggerPointerDownPosRef:q}=w;O.useEffect(()=>{if(N){let Y={x:0,y:0};const re=ne=>{var te,se;Y={x:Math.abs(Math.round(ne.pageX)-(((te=q.current)==null?void 0:te.x)??0)),y:Math.abs(Math.round(ne.pageY)-(((se=q.current)==null?void 0:se.y)??0))}},J=ne=>{Y.x<=10&&Y.y<=10?ne.preventDefault():N.contains(ne.target)||K(!1),document.removeEventListener("pointermove",re),q.current=null};return q.current!==null&&(document.addEventListener("pointermove",re),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",re),document.removeEventListener("pointerup",J,{capture:!0})}}},[N,K,q]),O.useEffect(()=>{const Y=()=>K(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[K]);const[V,D]=vH(Y=>{const re=R().filter(te=>!te.disabled),J=re.find(te=>te.ref.current===document.activeElement),ne=xH(re,Y,J);ne&&setTimeout(()=>ne.ref.current.focus())}),U=O.useCallback((Y,re,J)=>{const ne=!F.current&&!J;(w.value!==void 0&&w.value===re||ne)&&(T(Y),ne&&(F.current=!0))},[w.value]),G=O.useCallback(()=>N==null?void 0:N.focus(),[N]),ee=O.useCallback((Y,re,J)=>{const ne=!F.current&&!J;(w.value!==void 0&&w.value===re||ne)&&P(Y)},[w.value]),Q=n==="popper"?dO:rH,H=Q===dO?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:p,collisionPadding:m,sticky:x,hideWhenDetached:y,avoidCollisions:v}:{};return a.jsx(eH,{scope:r,content:N,viewport:k,onViewportChange:_,itemRefCallback:U,selectedItem:A,onItemLeave:G,itemTextRefCallback:ee,focusSelectedItem:W,selectedItemText:M,position:n,isPositioned:L,searchRef:V,children:a.jsx(W9,{as:Jke,allowPinchZoom:!0,children:a.jsx(f9,{asChild:!0,trapped:w.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:Jt(i,Y=>{var re;(re=w.trigger)==null||re.focus({preventScroll:!0}),Y.preventDefault()}),children:a.jsx(u9,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:a.jsx(Q,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:Y=>Y.preventDefault(),...b,...H,onPlaced:()=>$(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Jt(b.onKeyDown,Y=>{const re=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!re&&Y.key.length===1&&D(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let ne=R().filter(te=>!te.disabled).map(te=>te.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(ne=ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const te=Y.target,se=ne.indexOf(te);ne=ne.slice(se+1)}setTimeout(()=>z(ne)),Y.preventDefault()}})})})})})})});tH.displayName=Xke;var Qke="SelectItemAlignedPosition",rH=O.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...i}=t,s=Ka(Zl,r),o=Ga(Zl,r),[l,c]=O.useState(null),[u,f]=O.useState(null),d=yr(e,E=>f(E)),p=Rx(r),m=O.useRef(!1),x=O.useRef(!0),{viewport:y,selectedItem:v,selectedItemText:b,focusSelectedItem:w}=o,N=O.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&u&&y&&v&&b){const E=s.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),T=s.valueNode.getBoundingClientRect(),M=b.getBoundingClientRect();if(s.dir!=="rtl"){const te=M.left-A.left,se=T.left-te,ve=E.left-se,ie=E.width+ve,ye=Math.max(ie,A.width),Te=window.innerWidth-Gi,Le=v6(se,[Gi,Math.max(Gi,Te-ye)]);l.style.minWidth=ie+"px",l.style.left=Le+"px"}else{const te=A.right-M.right,se=window.innerWidth-T.right-te,ve=window.innerWidth-E.right-se,ie=E.width+ve,ye=Math.max(ie,A.width),Te=window.innerWidth-Gi,Le=v6(se,[Gi,Math.max(Gi,Te-ye)]);l.style.minWidth=ie+"px",l.style.right=Le+"px"}const P=p(),R=window.innerHeight-Gi*2,L=y.scrollHeight,$=window.getComputedStyle(u),F=parseInt($.borderTopWidth,10),z=parseInt($.paddingTop,10),W=parseInt($.borderBottomWidth,10),K=parseInt($.paddingBottom,10),q=F+z+L+K+W,V=Math.min(v.offsetHeight*5,q),D=window.getComputedStyle(y),U=parseInt(D.paddingTop,10),G=parseInt(D.paddingBottom,10),ee=E.top+E.height/2-Gi,Q=R-ee,H=v.offsetHeight/2,Y=v.offsetTop+H,re=F+z+Y,J=q-re;if(re<=ee){const te=P.length>0&&v===P[P.length-1].ref.current;l.style.bottom="0px";const se=u.clientHeight-y.offsetTop-y.offsetHeight,ve=Math.max(Q,H+(te?G:0)+se+W),ie=re+ve;l.style.height=ie+"px"}else{const te=P.length>0&&v===P[0].ref.current;l.style.top="0px";const ve=Math.max(ee,F+y.offsetTop+(te?U:0)+H)+J;l.style.height=ve+"px",y.scrollTop=re-ee+y.offsetTop}l.style.margin=`${Gi}px 0`,l.style.minHeight=V+"px",l.style.maxHeight=R+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[p,s.trigger,s.valueNode,l,u,y,v,b,s.dir,n]);Sn(()=>N(),[N]);const[j,k]=O.useState();Sn(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const _=O.useCallback(E=>{E&&x.current===!0&&(N(),w==null||w(),x.current=!1)},[N,w]);return a.jsx(e_e,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:_,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:a.jsx($t.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});rH.displayName=Qke;var Zke="SelectPopperPosition",dO=O.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=Gi,...s}=t,o=Ix(r);return a.jsx(JNe,{...o,...s,ref:e,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});dO.displayName=Zke;var[e_e,BC]=_d(Zl,{}),fO="SelectViewport",nH=O.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...i}=t,s=Ga(fO,r),o=BC(fO,r),l=yr(e,s.onViewportChange),c=O.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(Mx.Slot,{scope:r,children:a.jsx($t.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Jt(i.onScroll,u=>{const f=u.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&d){const m=Math.abs(c.current-f.scrollTop);if(m>0){const x=window.innerHeight-Gi*2,y=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),b=Math.max(y,v);if(b<x){const w=b+m,N=Math.min(x,w),j=w-N;d.style.height=N+"px",d.style.bottom==="0px"&&(f.scrollTop=j>0?j:0,d.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});nH.displayName=fO;var iH="SelectGroup",[t_e,r_e]=_d(iH),n_e=O.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=OC();return a.jsx(t_e,{scope:r,id:i,children:a.jsx($t.div,{role:"group","aria-labelledby":i,...n,ref:e})})});n_e.displayName=iH;var sH="SelectLabel",oH=O.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=r_e(sH,r);return a.jsx($t.div,{id:i.id,...n,ref:e})});oH.displayName=sH;var x0="SelectItem",[i_e,aH]=_d(x0),lH=O.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:s,...o}=t,l=Ka(x0,r),c=Ga(x0,r),u=l.value===n,[f,d]=O.useState(s??""),[p,m]=O.useState(!1),x=yr(e,w=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,w,n,i)}),y=OC(),v=O.useRef("touch"),b=()=>{i||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(i_e,{scope:r,value:n,disabled:i,textId:y,isSelected:u,onItemTextChange:O.useCallback(w=>{d(N=>N||((w==null?void 0:w.textContent)??"").trim())},[]),children:a.jsx(Mx.ItemSlot,{scope:r,value:n,disabled:i,textValue:f,children:a.jsx($t.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:x,onFocus:Jt(o.onFocus,()=>m(!0)),onBlur:Jt(o.onBlur,()=>m(!1)),onClick:Jt(o.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:Jt(o.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:Jt(o.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:Jt(o.onPointerMove,w=>{var N;v.current=w.pointerType,i?(N=c.onItemLeave)==null||N.call(c):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Jt(o.onPointerLeave,w=>{var N;w.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:Jt(o.onKeyDown,w=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&w.key===" "||(Uke.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});lH.displayName=x0;var Gf="SelectItemText",cH=O.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,...s}=t,o=Ka(Gf,r),l=Ga(Gf,r),c=aH(Gf,r),u=Kke(Gf,r),[f,d]=O.useState(null),p=yr(e,b=>d(b),c.onItemTextChange,b=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,b,c.value,c.disabled)}),m=f==null?void 0:f.textContent,x=O.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:v}=u;return Sn(()=>(y(x),()=>v(x)),[y,v,x]),a.jsxs(a.Fragment,{children:[a.jsx($t.span,{id:c.textId,...s,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?js.createPortal(s.children,o.valueNode):null]})});cH.displayName=Gf;var uH="SelectItemIndicator",dH=O.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return aH(uH,r).isSelected?a.jsx($t.span,{"aria-hidden":!0,...n,ref:e}):null});dH.displayName=uH;var hO="SelectScrollUpButton",fH=O.forwardRef((t,e)=>{const r=Ga(hO,t.__scopeSelect),n=BC(hO,t.__scopeSelect),[i,s]=O.useState(!1),o=yr(e,n.onScrollButtonChange);return Sn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;s(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?a.jsx(pH,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});fH.displayName=hO;var pO="SelectScrollDownButton",hH=O.forwardRef((t,e)=>{const r=Ga(pO,t.__scopeSelect),n=BC(pO,t.__scopeSelect),[i,s]=O.useState(!1),o=yr(e,n.onScrollButtonChange);return Sn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;s(f)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?a.jsx(pH,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});hH.displayName=pO;var pH=O.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=t,s=Ga("SelectScrollButton",r),o=O.useRef(null),l=Rx(r),c=O.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return O.useEffect(()=>()=>c(),[c]),Sn(()=>{var f;const u=l().find(d=>d.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),a.jsx($t.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Jt(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Jt(i.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Jt(i.onPointerLeave,()=>{c()})})}),s_e="SelectSeparator",mH=O.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return a.jsx($t.div,{"aria-hidden":!0,...n,ref:e})});mH.displayName=s_e;var mO="SelectArrow",o_e=O.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=Ix(r),s=Ka(mO,r),o=Ga(mO,r);return s.open&&o.position==="popper"?a.jsx(QNe,{...i,...n,ref:e}):null});o_e.displayName=mO;function gH(t){return t===""||t===void 0}var yH=O.forwardRef((t,e)=>{const{value:r,...n}=t,i=O.useRef(null),s=yr(e,i),o=$C(r);return O.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&f){const d=new Event("change",{bubbles:!0});f.call(l,r),l.dispatchEvent(d)}},[o,r]),a.jsx(D9,{asChild:!0,children:a.jsx("select",{...n,ref:s,defaultValue:r})})});yH.displayName="BubbleSelect";function vH(t){const e=wo(t),r=O.useRef(""),n=O.useRef(0),i=O.useCallback(o=>{const l=r.current+o;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),s=O.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return O.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,s]}function xH(t,e,r){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=r?t.indexOf(r):-1;let o=a_e(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function a_e(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var l_e=V9,bH=G9,c_e=X9,u_e=J9,d_e=Q9,wH=Z9,f_e=nH,jH=oH,SH=lH,h_e=cH,p_e=dH,NH=fH,kH=hH,_H=mH;const ec=l_e,tc=c_e,Da=O.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(bH,{ref:n,className:ge("flex h-10 w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:[e,a.jsx(u_e,{asChild:!0,children:a.jsx(mo,{className:"h-4 w-4 opacity-50"})})]}));Da.displayName=bH.displayName;const OH=O.forwardRef(({className:t,...e},r)=>a.jsx(NH,{ref:r,className:ge("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(CO,{className:"h-4 w-4"})}));OH.displayName=NH.displayName;const EH=O.forwardRef(({className:t,...e},r)=>a.jsx(kH,{ref:r,className:ge("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(mo,{className:"h-4 w-4"})}));EH.displayName=kH.displayName;const La=O.forwardRef(({className:t,children:e,position:r="popper",...n},i)=>a.jsx(d_e,{children:a.jsxs(wH,{ref:i,className:ge("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white text-gray-900 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[a.jsx(OH,{}),a.jsx(f_e,{className:ge("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(EH,{})]})}));La.displayName=wH.displayName;const m_e=O.forwardRef(({className:t,...e},r)=>a.jsx(jH,{ref:r,className:ge("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));m_e.displayName=jH.displayName;const kt=O.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(SH,{ref:n,className:ge("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(p_e,{children:a.jsx(ko,{className:"h-4 w-4"})})}),a.jsx(h_e,{children:e})]}));kt.displayName=SH.displayName;const g_e=O.forwardRef(({className:t,...e},r)=>a.jsx(_H,{ref:r,className:ge("-mx-1 my-1 h-px bg-gray-200",t),...e}));g_e.displayName=_H.displayName;function y_e({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n}){const i=t.content,{title:s="",subtitle:o,level:l=2}=i||{},[c,u]=O.useState(l),f=Rv({extensions:[d0.configure({heading:!1,paragraph:!1}),xp,bp,f0,u0.configure({placeholder:"Enter section title..."})],content:`<p>${s}</p>`,editable:e&&r,onUpdate:({editor:b})=>{if(n&&e){const w=b.getText();n({...i,title:w,level:c})}}}),d=Rv({extensions:[d0.configure({heading:!1}),xp,bp,f0,u0.configure({placeholder:"Optional subtitle..."})],content:`<p>${o||""}</p>`,editable:e&&r,onUpdate:({editor:b})=>{if(n&&e){const w=b.getText().trim();n({...i,title:(f==null?void 0:f.getText())||s,subtitle:w||void 0,level:c})}}});O.useEffect(()=>{f&&f.getText()!==s&&f.commands.setContent(`<p>${s}</p>`)},[f,s]),O.useEffect(()=>{d&&d.getText()!==(o||"")&&d.commands.setContent(`<p>${o||""}</p>`)},[d,o]),O.useEffect(()=>{f==null||f.setEditable(e&&r),d==null||d.setEditable(e&&r)},[f,d,e,r]);const p=b=>{b==null||b.chain().focus().toggleBold().run()},m=b=>{b==null||b.chain().focus().toggleItalic().run()},x=b=>{const w=parseInt(b);u(w),n&&n({...i,title:(f==null?void 0:f.getText())||s,subtitle:(d==null?void 0:d.getText().trim())||void 0,level:w})},y={1:"text-4xl font-bold",2:"text-3xl font-bold",3:"text-2xl font-semibold",4:"text-xl font-semibold",5:"text-lg font-medium",6:"text-base font-medium"},v=`h${c}`;return a.jsxs("div",{className:ge("space-y-3",r&&e&&"ring-2 ring-blue-500 ring-offset-2 rounded-lg p-3"),children:[e&&r&&a.jsxs("div",{className:"mb-4 p-3 border border-gray-200 rounded-lg bg-gray-50",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Heading Level:"}),a.jsxs(ec,{value:c.toString(),onValueChange:x,children:[a.jsx(Da,{className:"w-32",children:a.jsx(tc,{})}),a.jsxs(La,{children:[a.jsx(kt,{value:"1",children:"H1 - Largest"}),a.jsx(kt,{value:"2",children:"H2 - Large"}),a.jsx(kt,{value:"3",children:"H3 - Medium"}),a.jsx(kt,{value:"4",children:"H4 - Small"}),a.jsx(kt,{value:"5",children:"H5 - Smaller"}),a.jsx(kt,{value:"6",children:"H6 - Smallest"})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Title:"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>p(f),className:ge("h-8 w-8 p-0",(f==null?void 0:f.isActive("bold"))&&"bg-gray-200"),children:a.jsx(my,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>m(f),className:ge("h-8 w-8 p-0",(f==null?void 0:f.isActive("italic"))&&"bg-gray-200"),children:a.jsx(vy,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Subtitle:"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>p(d),className:ge("h-8 w-8 p-0",(d==null?void 0:d.isActive("bold"))&&"bg-gray-200"),children:a.jsx(my,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>m(d),className:ge("h-8 w-8 p-0",(d==null?void 0:d.isActive("italic"))&&"bg-gray-200"),children:a.jsx(vy,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:ge(y[c],"text-gray-900 leading-tight"),children:e&&r?a.jsx(Mv,{editor:f}):a.jsx(v,{className:ge(y[c],"text-gray-900 leading-tight"),children:s})}),(o||e&&r)&&a.jsx("div",{className:"text-gray-600 leading-relaxed",children:e&&r?a.jsx(Mv,{editor:d}):o?a.jsx("p",{className:"text-gray-600 leading-relaxed",children:o}):null}),e&&r&&!(f!=null&&f.getText().trim())&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-50",children:a.jsx("p",{className:"text-gray-400 text-sm",children:"Click to add section title..."})})]})}const v_e=Mi(y_e);var CH=Ct.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(r=>e.updateAttributes(r,{textAlign:t})).every(r=>r):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:r})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?r.unsetTextAlign():r.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});function x_e({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n}){const i=t.content,{html:s="<p>Enter your text here...</p>",text:o="Enter your text here..."}=i||{},l=Rv({extensions:[d0.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1}}),xp,bp,CH.configure({types:["heading","paragraph"]}),NC.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 hover:text-blue-800 underline"}}),f0,u0.configure({placeholder:"Start typing your content here..."})],content:s,editable:e&&r,onUpdate:({editor:v})=>{if(n&&e){const b=v.getHTML(),w=v.getText();n({html:b,text:w})}}});O.useEffect(()=>{l&&l.getHTML()!==s&&l.commands.setContent(s)},[l,s]),O.useEffect(()=>{l&&l.setEditable(e&&r)},[l,e,r]);const c=O.useCallback(()=>{l==null||l.chain().focus().toggleBold().run()},[l]),u=O.useCallback(()=>{l==null||l.chain().focus().toggleItalic().run()},[l]),f=O.useCallback(()=>{l==null||l.chain().focus().toggleUnderline().run()},[l]),d=O.useCallback(()=>{l==null||l.chain().focus().toggleStrike().run()},[l]),p=O.useCallback(v=>{l==null||l.chain().focus().setTextAlign(v).run()},[l]),m=O.useCallback(()=>{l==null||l.chain().focus().toggleBulletList().run()},[l]),x=O.useCallback(()=>{l==null||l.chain().focus().toggleOrderedList().run()},[l]),y=O.useCallback(()=>{const v=l==null?void 0:l.getAttributes("link").href,b=window.prompt("URL",v);if(b!==null){if(b===""){l==null||l.chain().focus().extendMarkRange("link").unsetLink().run();return}l==null||l.chain().focus().extendMarkRange("link").setLink({href:b}).run()}},[l]);return l?a.jsxs("div",{className:ge("relative",r&&e&&"ring-2 ring-blue-500 ring-offset-2 rounded-lg"),children:[e&&r&&a.jsxs("div",{className:"mb-4 p-2 border border-gray-200 rounded-lg bg-gray-50 flex flex-wrap gap-1",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:c,className:ge("h-8 w-8 p-0",l.isActive("bold")&&"bg-gray-200"),children:a.jsx(my,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:u,className:ge("h-8 w-8 p-0",l.isActive("italic")&&"bg-gray-200"),children:a.jsx(vy,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:f,className:ge("h-8 w-8 p-0",l.isActive("underline")&&"bg-gray-200"),children:a.jsx(qB,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:d,className:ge("h-8 w-8 p-0",l.isActive("strike")&&"bg-gray-200"),children:a.jsx(BB,{className:"w-4 h-4"})}),a.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>p("left"),className:ge("h-8 w-8 p-0",l.isActive({textAlign:"left"})&&"bg-gray-200"),children:a.jsx(PB,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>p("center"),className:ge("h-8 w-8 p-0",l.isActive({textAlign:"center"})&&"bg-gray-200"),children:a.jsx(TB,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>p("right"),className:ge("h-8 w-8 p-0",l.isActive({textAlign:"right"})&&"bg-gray-200"),children:a.jsx(MB,{className:"w-4 h-4"})}),a.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:m,className:ge("h-8 w-8 p-0",l.isActive("bulletList")&&"bg-gray-200"),children:a.jsx(rs,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:x,className:ge("h-8 w-8 p-0",l.isActive("orderedList")&&"bg-gray-200"),children:a.jsx(MO,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:y,className:ge("h-8 w-8 p-0",l.isActive("link")&&"bg-gray-200"),children:a.jsx(E0,{className:"w-4 h-4"})})]}),a.jsx("div",{className:ge("prose prose-gray max-w-none focus:outline-none",e&&r&&"min-h-[100px]"),children:a.jsx(Mv,{editor:l})}),e&&r&&l.getText().length===0&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx("p",{className:"text-gray-400 text-sm",children:"Click to start typing..."})})]}):a.jsxs("div",{className:"prose prose-gray max-w-none animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})}const b_e=Mi(x_e);function w_e({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n}){const i=t.content,{src:s="",alt:o="",caption:l,width:c,height:u}=i||{},[f,d]=O.useState(!1),[p,m]=O.useState(!!s),[x,y]=O.useState(!1),[v,b]=O.useState(!1),[w,N]=O.useState(l||""),[j,k]=O.useState(o||""),[_,E]=O.useState(!1),A=O.useRef(null),T=()=>{m(!1),d(!1)},M=()=>{d(!0),m(!1)},P=()=>{var z;(z=A.current)==null||z.click()},R=async z=>{var K;const W=(K=z.target.files)==null?void 0:K[0];if(W){if(!W.type.startsWith("image/")){alert("Please select an image file");return}if(W.size>5*1024*1024){alert("Image size must be less than 5MB");return}try{y(!0),d(!1);const q=await new Promise((Q,H)=>{const Y=new FileReader;Y.onloadend=()=>Q(Y.result),Y.onerror=H,Y.readAsDataURL(W)}),{data:V,error:D}=await pe.functions.invoke("enhanced-file-upload",{body:{fileData:q,fileName:W.name,fileType:W.type,folder:"page-builder/images"}});if(D)throw console.error("Upload error:",D),new Error(D.message||"Failed to upload image");if(V!=null&&V.error)throw new Error(V.error.message||"Failed to upload image");const G=V.data.publicUrl,ee={...i,src:G,alt:o||W.name.split(".")[0],width:void 0,height:void 0};n==null||n(ee),m(!0)}catch(q){console.error("Error uploading image:",q),alert(`Failed to upload image: ${q.message}`)}finally{y(!1),A.current&&(A.current.value="")}}},L=async()=>{const z=prompt("Enter image URL:");if(z)try{m(!0),d(!1);const W={...i,src:z,alt:o||"Image from URL"};n==null||n(W)}catch(W){console.error("Error setting image URL:",W),d(!0),m(!1)}},$=()=>{const z={...i,caption:w.trim()||void 0,alt:j.trim()||o};n==null||n(z),b(!1)},F=()=>{N(l||""),k(o||""),b(!1)};return s?f?a.jsx("div",{className:"flex items-center justify-center min-h-48 bg-red-50 border-2 border-dashed border-red-300 rounded-lg",children:a.jsxs("div",{className:"text-center p-8",children:[a.jsx("div",{className:"text-red-400 mb-4",children:a.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h4",{className:"text-lg font-medium text-red-800 mb-2",children:"Failed to load image"}),a.jsx("p",{className:"text-red-600 text-sm mb-4 break-all max-w-md",children:s}),e&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[a.jsxs(fe,{onClick:P,size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Ir,{className:"w-4 h-4"}),a.jsx("span",{children:"Upload New"})]}),a.jsxs(fe,{onClick:L,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Os,{className:"w-4 h-4"}),a.jsx("span",{children:"Try URL"})]})]})]})}):a.jsxs("figure",{className:ge("space-y-4 relative group",r&&e&&"ring-2 ring-blue-500 ring-offset-2 rounded-lg p-3"),children:[r&&e&&a.jsxs("div",{className:"absolute -top-2 -right-2 z-10 flex space-x-2",children:[a.jsx(fe,{onClick:()=>b(!v),size:"sm",variant:"outline",className:"h-8 w-8 p-0 bg-white border-gray-300 hover:bg-gray-50 shadow-lg",title:"Edit caption and alt text",children:a.jsx(yo,{className:"w-4 h-4"})}),a.jsx(fe,{onClick:P,size:"sm",variant:"outline",className:"h-8 w-8 p-0 bg-white border-gray-300 hover:bg-gray-50 shadow-lg",title:"Replace image",children:a.jsx(Ir,{className:"w-4 h-4"})})]}),v&&e&&a.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-4 shadow-lg space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alt Text (for accessibility)"}),a.jsx(ct,{value:j,onChange:z=>k(z.target.value),placeholder:"Describe the image for screen readers",className:"text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caption (optional)"}),a.jsx(ct,{value:w,onChange:z=>N(z.target.value),placeholder:"Add a caption for the image",className:"text-sm"})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx(fe,{onClick:F,size:"sm",variant:"outline",children:"Cancel"}),a.jsxs(fe,{onClick:$,size:"sm",className:"flex items-center space-x-1",children:[a.jsx(ko,{className:"w-4 h-4"}),a.jsx("span",{children:"Save"})]})]})]}),a.jsxs("div",{className:"relative overflow-hidden rounded-lg",children:[(p||x)&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 rounded-lg z-10",children:a.jsxs("div",{className:"text-center",children:[a.jsx(i_,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600",children:x?"Uploading...":"Loading..."})]})}),a.jsx("img",{src:s,alt:o,onLoad:T,onError:M,onClick:()=>!e&&E(!0),className:ge("max-w-full h-auto",!e&&"cursor-pointer hover:opacity-90 transition-opacity",(p||x)&&"opacity-0"),style:{width:c||"auto",height:u||"auto"}}),!e&&a.jsx("button",{onClick:()=>E(!0),className:"absolute top-3 right-3 bg-black bg-opacity-50 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"View fullscreen",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]}),l&&a.jsx("figcaption",{className:"text-sm text-gray-600 text-center italic px-4",children:l}),a.jsx("input",{ref:A,type:"file",accept:"image/*",onChange:R,className:"hidden"}),_&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"relative max-w-full max-h-full",children:[a.jsx("button",{onClick:()=>E(!1),className:"absolute -top-12 right-0 text-white hover:text-gray-300 text-2xl font-bold z-10",children:"×"}),a.jsx("img",{src:s,alt:o,className:"max-w-full max-h-full object-contain"}),l&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 text-white p-4 text-center",children:a.jsx("p",{className:"text-lg",children:l})})]})})]}):e?a.jsx("div",{className:"flex items-center justify-center min-h-48 bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors",children:a.jsxs("div",{className:"text-center p-8",children:[a.jsx(Eu,{className:"w-16 h-16 text-gray-400 mx-auto mb-6"}),a.jsx("h4",{className:"text-xl font-medium text-gray-900 mb-3",children:"Add Image"}),a.jsx("p",{className:"text-gray-600 text-sm mb-6 max-w-sm",children:"Upload an image file or provide a URL to display in this block."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[a.jsx(fe,{onClick:P,disabled:x,className:"flex items-center space-x-2",children:x?a.jsxs(a.Fragment,{children:[a.jsx(i_,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Uploading..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ir,{className:"w-4 h-4"}),a.jsx("span",{children:"Upload Image"})]})}),a.jsxs(fe,{onClick:L,variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(Os,{className:"w-4 h-4"}),a.jsx("span",{children:"From URL"})]})]}),a.jsx("input",{ref:A,type:"file",accept:"image/*",onChange:R,className:"hidden"})]})}):a.jsx("div",{className:"flex items-center justify-center h-48 bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Eu,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"No image selected"})]})})}const j_e=Mi(w_e);function S_e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return O.useMemo(()=>n=>{e.forEach(i=>i(n))},e)}const Dx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Od(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function FC(t){return"nodeType"in t}function Nn(t){var e,r;return t?Od(t)?t:FC(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function qC(t){const{Document:e}=Nn(t);return t instanceof e}function Qp(t){return Od(t)?!1:t instanceof Nn(t).HTMLElement}function AH(t){return t instanceof Nn(t).SVGElement}function Ed(t){return t?Od(t)?t.document:FC(t)?qC(t)?t:Qp(t)||AH(t)?t.ownerDocument:document:document:document}const ls=Dx?O.useLayoutEffect:O.useEffect;function Lx(t){const e=O.useRef(t);return ls(()=>{e.current=t}),O.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e.current==null?void 0:e.current(...n)},[])}function N_e(){const t=O.useRef(null),e=O.useCallback((n,i)=>{t.current=setInterval(n,i)},[]),r=O.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function Sp(t,e){e===void 0&&(e=[t]);const r=O.useRef(t);return ls(()=>{r.current!==t&&(r.current=t)},e),r}function Zp(t,e){const r=O.useRef();return O.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function b0(t){const e=Lx(t),r=O.useRef(null),n=O.useCallback(i=>{i!==r.current&&(e==null||e(i,r.current)),r.current=i},[]);return[r,n]}function w0(t){const e=O.useRef();return O.useEffect(()=>{e.current=t},[t]),e.current}let Dk={};function em(t,e){return O.useMemo(()=>{if(e)return e;const r=Dk[t]==null?0:Dk[t]+1;return Dk[t]=r,t+"-"+r},[t,e])}function TH(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce((s,o)=>{const l=Object.entries(o);for(const[c,u]of l){const f=s[c];f!=null&&(s[c]=f+t*u)}return s},{...e})}}const ku=TH(1),j0=TH(-1);function k_e(t){return"clientX"in t&&"clientY"in t}function $x(t){if(!t)return!1;const{KeyboardEvent:e}=Nn(t.target);return e&&t instanceof e}function __e(t){if(!t)return!1;const{TouchEvent:e}=Nn(t.target);return e&&t instanceof e}function S0(t){if(__e(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return k_e(t)?{x:t.clientX,y:t.clientY}:null}const Rs=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[Rs.Translate.toString(t),Rs.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),F6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function O_e(t){return t.matches(F6)?t:t.querySelector(F6)}const E_e={display:"none"};function C_e(t){let{id:e,value:r}=t;return Z.createElement("div",{id:e,style:E_e},r)}function A_e(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Z.createElement("div",{id:e,style:i,role:"status","aria-live":n,"aria-atomic":!0},r)}function T_e(){const[t,e]=O.useState("");return{announce:O.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const PH=O.createContext(null);function P_e(t){const e=O.useContext(PH);O.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function M_e(){const[t]=O.useState(()=>new Set),e=O.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[O.useCallback(n=>{let{type:i,event:s}=n;t.forEach(o=>{var l;return(l=o[i])==null?void 0:l.call(o,s)})},[t]),e]}const R_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},I_e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function D_e(t){let{announcements:e=I_e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:i=R_e}=t;const{announce:s,announcement:o}=T_e(),l=em("DndLiveRegion"),[c,u]=O.useState(!1);if(O.useEffect(()=>{u(!0)},[]),P_e(O.useMemo(()=>({onDragStart(d){let{active:p}=d;s(e.onDragStart({active:p}))},onDragMove(d){let{active:p,over:m}=d;e.onDragMove&&s(e.onDragMove({active:p,over:m}))},onDragOver(d){let{active:p,over:m}=d;s(e.onDragOver({active:p,over:m}))},onDragEnd(d){let{active:p,over:m}=d;s(e.onDragEnd({active:p,over:m}))},onDragCancel(d){let{active:p,over:m}=d;s(e.onDragCancel({active:p,over:m}))}}),[s,e])),!c)return null;const f=Z.createElement(Z.Fragment,null,Z.createElement(C_e,{id:n,value:i.draggable}),Z.createElement(A_e,{id:l,announcement:o}));return r?js.createPortal(f,r):f}var Sr;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Sr||(Sr={}));function N0(){}function Bx(t,e){return O.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Fx(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return O.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const cs=Object.freeze({x:0,y:0});function L_e(t,e){const r=S0(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function $_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function B_e(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function F_e(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-n,l=s-r;if(n<i&&r<s){const c=e.width*e.height,u=t.width*t.height,f=o*l,d=f/(c+u-f);return Number(d.toFixed(4))}return 0}const q_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const i=[];for(const s of n){const{id:o}=s,l=r.get(o);if(l){const c=F_e(l,e);c>0&&i.push({id:o,data:{droppableContainer:s,value:c}})}}return i.sort($_e)};function z_e(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function MH(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:cs}function U_e(t){return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return i.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...r})}}const H_e=U_e(1);function RH(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function W_e(t,e,r){const n=RH(e);if(!n)return t;const{scaleX:i,scaleY:s,x:o,y:l}=n,c=t.left-o-(1-i)*parseFloat(r),u=t.top-l-(1-s)*parseFloat(r.slice(r.indexOf(" ")+1)),f=i?t.width/i:t.width,d=s?t.height/s:t.height;return{width:f,height:d,top:u,right:c+f,bottom:u+d,left:c}}const V_e={ignoreTransform:!1};function Cd(t,e){e===void 0&&(e=V_e);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:f}=Nn(t).getComputedStyle(t);u&&(r=W_e(r,u,f))}const{top:n,left:i,width:s,height:o,bottom:l,right:c}=r;return{top:n,left:i,width:s,height:o,bottom:l,right:c}}function q6(t){return Cd(t,{ignoreTransform:!0})}function K_e(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function G_e(t,e){return e===void 0&&(e=Nn(t).getComputedStyle(t)),e.position==="fixed"}function Y_e(t,e){e===void 0&&(e=Nn(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?r.test(s):!1})}function zC(t,e){const r=[];function n(i){if(e!=null&&r.length>=e||!i)return r;if(qC(i)&&i.scrollingElement!=null&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!Qp(i)||AH(i)||r.includes(i))return r;const s=Nn(t).getComputedStyle(i);return i!==t&&Y_e(i,s)&&r.push(i),G_e(i,s)?r:n(i.parentNode)}return t?n(t):r}function IH(t){const[e]=zC(t,1);return e??null}function Lk(t){return!Dx||!t?null:Od(t)?t:FC(t)?qC(t)||t===Ed(t).scrollingElement?window:Qp(t)?t:null:null}function DH(t){return Od(t)?t.scrollX:t.scrollLeft}function LH(t){return Od(t)?t.scrollY:t.scrollTop}function gO(t){return{x:DH(t),y:LH(t)}}var Pr;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Pr||(Pr={}));function $H(t){return!Dx||!t?!1:t===document.scrollingElement}function BH(t){const e={x:0,y:0},r=$H(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=n.y,l=t.scrollLeft>=n.x;return{isTop:i,isLeft:s,isBottom:o,isRight:l,maxScroll:n,minScroll:e}}const X_e={x:.2,y:.2};function J_e(t,e,r,n,i){let{top:s,left:o,right:l,bottom:c}=r;n===void 0&&(n=10),i===void 0&&(i=X_e);const{isTop:u,isBottom:f,isLeft:d,isRight:p}=BH(t),m={x:0,y:0},x={x:0,y:0},y={height:e.height*i.y,width:e.width*i.x};return!u&&s<=e.top+y.height?(m.y=Pr.Backward,x.y=n*Math.abs((e.top+y.height-s)/y.height)):!f&&c>=e.bottom-y.height&&(m.y=Pr.Forward,x.y=n*Math.abs((e.bottom-y.height-c)/y.height)),!p&&l>=e.right-y.width?(m.x=Pr.Forward,x.x=n*Math.abs((e.right-y.width-l)/y.width)):!d&&o<=e.left+y.width&&(m.x=Pr.Backward,x.x=n*Math.abs((e.left+y.width-o)/y.width)),{direction:m,speed:x}}function Q_e(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:r,right:n,bottom:i}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:i,width:t.clientWidth,height:t.clientHeight}}function FH(t){return t.reduce((e,r)=>ku(e,gO(r)),cs)}function Z_e(t){return t.reduce((e,r)=>e+DH(r),0)}function e2e(t){return t.reduce((e,r)=>e+LH(r),0)}function qH(t,e){if(e===void 0&&(e=Cd),!t)return;const{top:r,left:n,bottom:i,right:s}=e(t);IH(t)&&(i<=0||s<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const t2e=[["x",["left","right"],Z_e],["y",["top","bottom"],e2e]];class UC{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=zC(r),i=FH(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,l]of t2e)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(n),f=i[s]-u;return this.rect[c]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class gh{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var i;(i=this.target)==null||i.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function r2e(t){const{EventTarget:e}=Nn(t);return t instanceof e?t:Ed(t)}function $k(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var Si;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Si||(Si={}));function z6(t){t.preventDefault()}function n2e(t){t.stopPropagation()}var vt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(vt||(vt={}));const zH={start:[vt.Space,vt.Enter],cancel:[vt.Esc],end:[vt.Space,vt.Enter,vt.Tab]},i2e=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case vt.Right:return{...r,x:r.x+25};case vt.Left:return{...r,x:r.x-25};case vt.Down:return{...r,y:r.y+25};case vt.Up:return{...r,y:r.y-25}}};class UH{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new gh(Ed(r)),this.windowListeners=new gh(Nn(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Si.Resize,this.handleCancel),this.windowListeners.add(Si.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Si.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&qH(n),r(cs)}handleKeyDown(e){if($x(e)){const{active:r,context:n,options:i}=this.props,{keyboardCodes:s=zH,coordinateGetter:o=i2e,scrollBehavior:l="smooth"}=i,{code:c}=e;if(s.end.includes(c)){this.handleEnd(e);return}if(s.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=n.current,f=u?{x:u.left,y:u.top}:cs;this.referenceCoordinates||(this.referenceCoordinates=f);const d=o(e,{active:r,context:n.current,currentCoordinates:f});if(d){const p=j0(d,f),m={x:0,y:0},{scrollableAncestors:x}=n.current;for(const y of x){const v=e.code,{isTop:b,isRight:w,isLeft:N,isBottom:j,maxScroll:k,minScroll:_}=BH(y),E=Q_e(y),A={x:Math.min(v===vt.Right?E.right-E.width/2:E.right,Math.max(v===vt.Right?E.left:E.left+E.width/2,d.x)),y:Math.min(v===vt.Down?E.bottom-E.height/2:E.bottom,Math.max(v===vt.Down?E.top:E.top+E.height/2,d.y))},T=v===vt.Right&&!w||v===vt.Left&&!N,M=v===vt.Down&&!j||v===vt.Up&&!b;if(T&&A.x!==d.x){const P=y.scrollLeft+p.x,R=v===vt.Right&&P<=k.x||v===vt.Left&&P>=_.x;if(R&&!p.y){y.scrollTo({left:P,behavior:l});return}R?m.x=y.scrollLeft-P:m.x=v===vt.Right?y.scrollLeft-k.x:y.scrollLeft-_.x,m.x&&y.scrollBy({left:-m.x,behavior:l});break}else if(M&&A.y!==d.y){const P=y.scrollTop+p.y,R=v===vt.Down&&P<=k.y||v===vt.Up&&P>=_.y;if(R&&!p.x){y.scrollTo({top:P,behavior:l});return}R?m.y=y.scrollTop-P:m.y=v===vt.Down?y.scrollTop-k.y:y.scrollTop-_.y,m.y&&y.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(e,ku(j0(d,this.referenceCoordinates),m))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}UH.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=zH,onActivation:i}=e,{active:s}=r;const{code:o}=t.nativeEvent;if(n.start.includes(o)){const l=s.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function U6(t){return!!(t&&"distance"in t)}function H6(t){return!!(t&&"delay"in t)}class HC{constructor(e,r,n){var i;n===void 0&&(n=r2e(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:s}=e,{target:o}=s;this.props=e,this.events=r,this.document=Ed(o),this.documentListeners=new gh(this.document),this.listeners=new gh(n),this.windowListeners=new gh(Nn(o)),this.initialCoordinates=(i=S0(s))!=null?i:cs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Si.Resize,this.handleCancel),this.windowListeners.add(Si.DragStart,z6),this.windowListeners.add(Si.VisibilityChange,this.handleCancel),this.windowListeners.add(Si.ContextMenu,z6),this.documentListeners.add(Si.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(H6(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(U6(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:i}=this.props;i(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Si.Click,n2e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Si.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:l}}=s;if(!i)return;const c=(r=S0(e))!=null?r:cs,u=j0(i,c);if(!n&&l){if(U6(l)){if(l.tolerance!=null&&$k(u,l.tolerance))return this.handleCancel();if($k(u,l.distance))return this.handleStart()}if(H6(l)&&$k(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===vt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const s2e={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ad extends HC{constructor(e){const{event:r}=e,n=Ed(r.target);super(e,s2e,n)}}Ad.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const o2e={move:{name:"mousemove"},end:{name:"mouseup"}};var yO;(function(t){t[t.RightClick=2]="RightClick"})(yO||(yO={}));class a2e extends HC{constructor(e){super(e,o2e,Ed(e.event.target))}}a2e.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===yO.RightClick?!1:(n==null||n({event:r}),!0)}}];const Bk={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class l2e extends HC{constructor(e){super(e,Bk)}static setup(){return window.addEventListener(Bk.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Bk.move.name,e)};function e(){}}}l2e.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:i}=r;return i.length>1?!1:(n==null||n({event:r}),!0)}}];var yh;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(yh||(yh={}));var k0;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(k0||(k0={}));function c2e(t){let{acceleration:e,activator:r=yh.Pointer,canScroll:n,draggingRect:i,enabled:s,interval:o=5,order:l=k0.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:f,delta:d,threshold:p}=t;const m=d2e({delta:d,disabled:!s}),[x,y]=N_e(),v=O.useRef({x:0,y:0}),b=O.useRef({x:0,y:0}),w=O.useMemo(()=>{switch(r){case yh.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case yh.DraggableRect:return i}},[r,i,c]),N=O.useRef(null),j=O.useCallback(()=>{const _=N.current;if(!_)return;const E=v.current.x*b.current.x,A=v.current.y*b.current.y;_.scrollBy(E,A)},[]),k=O.useMemo(()=>l===k0.TreeOrder?[...u].reverse():u,[l,u]);O.useEffect(()=>{if(!s||!u.length||!w){y();return}for(const _ of k){if((n==null?void 0:n(_))===!1)continue;const E=u.indexOf(_),A=f[E];if(!A)continue;const{direction:T,speed:M}=J_e(_,A,w,e,p);for(const P of["x","y"])m[P][T[P]]||(M[P]=0,T[P]=0);if(M.x>0||M.y>0){y(),N.current=_,x(j,o),v.current=M,b.current=T;return}}v.current={x:0,y:0},b.current={x:0,y:0},y()},[e,j,n,y,s,o,JSON.stringify(w),JSON.stringify(m),x,u,k,f,JSON.stringify(p)])}const u2e={x:{[Pr.Backward]:!1,[Pr.Forward]:!1},y:{[Pr.Backward]:!1,[Pr.Forward]:!1}};function d2e(t){let{delta:e,disabled:r}=t;const n=w0(e);return Zp(i=>{if(r||!n||!i)return u2e;const s={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[Pr.Backward]:i.x[Pr.Backward]||s.x===-1,[Pr.Forward]:i.x[Pr.Forward]||s.x===1},y:{[Pr.Backward]:i.y[Pr.Backward]||s.y===-1,[Pr.Forward]:i.y[Pr.Forward]||s.y===1}}},[r,e,n])}function f2e(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return Zp(i=>{var s;return e==null?null:(s=n??i)!=null?s:null},[n,e])}function h2e(t,e){return O.useMemo(()=>t.reduce((r,n)=>{const{sensor:i}=n,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,n)}));return[...r,...s]},[]),[t,e])}var Np;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Np||(Np={}));var vO;(function(t){t.Optimized="optimized"})(vO||(vO={}));const W6=new Map;function p2e(t,e){let{dragging:r,dependencies:n,config:i}=e;const[s,o]=O.useState(null),{frequency:l,measure:c,strategy:u}=i,f=O.useRef(t),d=v(),p=Sp(d),m=O.useCallback(function(b){b===void 0&&(b=[]),!p.current&&o(w=>w===null?b:w.concat(b.filter(N=>!w.includes(N))))},[p]),x=O.useRef(null),y=Zp(b=>{if(d&&!r)return W6;if(!b||b===W6||f.current!==t||s!=null){const w=new Map;for(let N of t){if(!N)continue;if(s&&s.length>0&&!s.includes(N.id)&&N.rect.current){w.set(N.id,N.rect.current);continue}const j=N.node.current,k=j?new UC(c(j),j):null;N.rect.current=k,k&&w.set(N.id,k)}return w}return b},[t,s,r,d,c]);return O.useEffect(()=>{f.current=t},[t]),O.useEffect(()=>{d||m()},[r,d]),O.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),O.useEffect(()=>{d||typeof l!="number"||x.current!==null||(x.current=setTimeout(()=>{m(),x.current=null},l))},[l,d,m,...n]),{droppableRects:y,measureDroppableContainers:m,measuringScheduled:s!=null};function v(){switch(u){case Np.Always:return!1;case Np.BeforeDragging:return r;default:return!r}}}function WC(t,e){return Zp(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function m2e(t,e){return WC(t,e)}function g2e(t){let{callback:e,disabled:r}=t;const n=Lx(e),i=O.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(n)},[n,r]);return O.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function qx(t){let{callback:e,disabled:r}=t;const n=Lx(e),i=O.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(n)},[r]);return O.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function y2e(t){return new UC(Cd(t),t)}function V6(t,e,r){e===void 0&&(e=y2e);const[n,i]=O.useState(null);function s(){i(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??r)!=null?u:null}const f=e(t);return JSON.stringify(c)===JSON.stringify(f)?c:f})}const o=g2e({callback(c){if(t)for(const u of c){const{type:f,target:d}=u;if(f==="childList"&&d instanceof HTMLElement&&d.contains(t)){s();break}}}}),l=qx({callback:s});return ls(()=>{s(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),n}function v2e(t){const e=WC(t);return MH(t,e)}const K6=[];function x2e(t){const e=O.useRef(t),r=Zp(n=>t?n&&n!==K6&&t&&e.current&&t.parentNode===e.current.parentNode?n:zC(t):K6,[t]);return O.useEffect(()=>{e.current=t},[t]),r}function b2e(t){const[e,r]=O.useState(null),n=O.useRef(t),i=O.useCallback(s=>{const o=Lk(s.target);o&&r(l=>l?(l.set(o,gO(o)),new Map(l)):null)},[]);return O.useEffect(()=>{const s=n.current;if(t!==s){o(s);const l=t.map(c=>{const u=Lk(c);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,gO(u)]):null}).filter(c=>c!=null);r(l.length?new Map(l):null),n.current=t}return()=>{o(t),o(s)};function o(l){l.forEach(c=>{const u=Lk(c);u==null||u.removeEventListener("scroll",i)})}},[i,t]),O.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>ku(s,o),cs):FH(t):cs,[t,e])}function G6(t,e){e===void 0&&(e=[]);const r=O.useRef(null);return O.useEffect(()=>{r.current=null},e),O.useEffect(()=>{const n=t!==cs;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?j0(t,r.current):cs}function w2e(t){O.useEffect(()=>{if(!Dx)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function j2e(t,e){return O.useMemo(()=>t.reduce((r,n)=>{let{eventName:i,handler:s}=n;return r[i]=o=>{s(o,e)},r},{}),[t,e])}function HH(t){return O.useMemo(()=>t?K_e(t):null,[t])}const Y6=[];function S2e(t,e){e===void 0&&(e=Cd);const[r]=t,n=HH(r?Nn(r):null),[i,s]=O.useState(Y6);function o(){s(()=>t.length?t.map(c=>$H(c)?n:new UC(e(c),c)):Y6)}const l=qx({callback:o});return ls(()=>{l==null||l.disconnect(),o(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),i}function WH(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Qp(e)?e:t}function N2e(t){let{measure:e}=t;const[r,n]=O.useState(null),i=O.useCallback(u=>{for(const{target:f}of u)if(Qp(f)){n(d=>{const p=e(f);return d?{...d,width:p.width,height:p.height}:p});break}},[e]),s=qx({callback:i}),o=O.useCallback(u=>{const f=WH(u);s==null||s.disconnect(),f&&(s==null||s.observe(f)),n(f?e(f):null)},[e,s]),[l,c]=b0(o);return O.useMemo(()=>({nodeRef:l,rect:r,setRef:c}),[r,l,c])}const k2e=[{sensor:Ad,options:{}},{sensor:UH,options:{}}],_2e={current:{}},cy={draggable:{measure:q6},droppable:{measure:q6,strategy:Np.WhileDragging,frequency:vO.Optimized},dragOverlay:{measure:Cd}};class vh extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const O2e={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new vh,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:N0},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:cy,measureDroppableContainers:N0,windowRect:null,measuringScheduled:!1},VH={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:N0,draggableNodes:new Map,over:null,measureDroppableContainers:N0},tm=O.createContext(VH),KH=O.createContext(O2e);function E2e(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new vh}}}function C2e(t,e){switch(e.type){case Sr.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Sr.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Sr.DragEnd:case Sr.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Sr.RegisterDroppable:{const{element:r}=e,{id:n}=r,i=new vh(t.droppable.containers);return i.set(n,r),{...t,droppable:{...t.droppable,containers:i}}}case Sr.SetDroppableDisabled:{const{id:r,key:n,disabled:i}=e,s=t.droppable.containers.get(r);if(!s||n!==s.key)return t;const o=new vh(t.droppable.containers);return o.set(r,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case Sr.UnregisterDroppable:{const{id:r,key:n}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const s=new vh(t.droppable.containers);return s.delete(r),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function A2e(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:i}=O.useContext(tm),s=w0(n),o=w0(r==null?void 0:r.id);return O.useEffect(()=>{if(!e&&!n&&s&&o!=null){if(!$x(s)||document.activeElement===s.target)return;const l=i.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[c.current,u.current]){if(!f)continue;const d=O_e(f);if(d){d.focus();break}}})}},[n,e,i,o,s]),null}function GH(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...n}),r):r}function T2e(t){return O.useMemo(()=>({draggable:{...cy.draggable,...t==null?void 0:t.draggable},droppable:{...cy.droppable,...t==null?void 0:t.droppable},dragOverlay:{...cy.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function P2e(t){let{activeNode:e,measure:r,initialRect:n,config:i=!0}=t;const s=O.useRef(!1),{x:o,y:l}=typeof i=="boolean"?{x:i,y:i}:i;ls(()=>{if(!o&&!l||!e){s.current=!1;return}if(s.current||!n)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const f=r(u),d=MH(f,n);if(o||(d.x=0),l||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const p=IH(u);p&&p.scrollBy({top:d.y,left:d.x})}},[e,o,l,n,r])}const zx=O.createContext({...cs,scaleX:1,scaleY:1});var ua;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ua||(ua={}));const Ux=O.memo(function(e){var r,n,i,s;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:f=k2e,collisionDetection:d=q_e,measuring:p,modifiers:m,...x}=e;const y=O.useReducer(C2e,void 0,E2e),[v,b]=y,[w,N]=M_e(),[j,k]=O.useState(ua.Uninitialized),_=j===ua.Initialized,{draggable:{active:E,nodes:A,translate:T},droppable:{containers:M}}=v,P=E!=null?A.get(E):null,R=O.useRef({initial:null,translated:null}),L=O.useMemo(()=>{var Kt;return E!=null?{id:E,data:(Kt=P==null?void 0:P.data)!=null?Kt:_2e,rect:R}:null},[E,P]),$=O.useRef(null),[F,z]=O.useState(null),[W,K]=O.useState(null),q=Sp(x,Object.values(x)),V=em("DndDescribedBy",o),D=O.useMemo(()=>M.getEnabled(),[M]),U=T2e(p),{droppableRects:G,measureDroppableContainers:ee,measuringScheduled:Q}=p2e(D,{dragging:_,dependencies:[T.x,T.y],config:U.droppable}),H=f2e(A,E),Y=O.useMemo(()=>W?S0(W):null,[W]),re=To(),J=m2e(H,U.draggable.measure);P2e({activeNode:E!=null?A.get(E):null,config:re.layoutShiftCompensation,initialRect:J,measure:U.draggable.measure});const ne=V6(H,U.draggable.measure,J),te=V6(H?H.parentElement:null),se=O.useRef({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ve=M.getNodeFor((r=se.current.over)==null?void 0:r.id),ie=N2e({measure:U.dragOverlay.measure}),ye=(n=ie.nodeRef.current)!=null?n:H,Te=_?(i=ie.rect)!=null?i:ne:null,Le=!!(ie.nodeRef.current&&ie.rect),ue=v2e(Le?null:ne),he=HH(ye?Nn(ye):null),we=x2e(_?ve??H:null),Oe=S2e(we),be=GH(m,{transform:{x:T.x-ue.x,y:T.y-ue.y,scaleX:1,scaleY:1},activatorEvent:W,active:L,activeNodeRect:ne,containerNodeRect:te,draggingNodeRect:Te,over:se.current.over,overlayNodeRect:ie.rect,scrollableAncestors:we,scrollableAncestorRects:Oe,windowRect:he}),We=Y?ku(Y,T):null,Je=b2e(we),Ye=G6(Je),Ae=G6(Je,[ne]),Me=ku(be,Ye),Re=Te?H_e(Te,be):null,sr=L&&Re?d({active:L,collisionRect:Re,droppableRects:G,droppableContainers:D,pointerCoordinates:We}):null,ut=B_e(sr,"id"),[wt,ci]=O.useState(null),dc=Le?be:ku(be,Ae),fc=z_e(dc,(s=wt==null?void 0:wt.rect)!=null?s:null,ne),Md=O.useRef(null),hc=O.useCallback((Kt,Yr)=>{let{sensor:Xr,options:Ri}=Yr;if($.current==null)return;const un=A.get($.current);if(!un)return;const Jr=Kt.nativeEvent,kn=new Xr({active:$.current,activeNode:un,event:Jr,options:Ri,context:se,onAbort(Gt){if(!A.get(Gt))return;const{onDragAbort:Qr}=q.current,Ii={id:Gt};Qr==null||Qr(Ii),w({type:"onDragAbort",event:Ii})},onPending(Gt,ui,Qr,Ii){if(!A.get(Gt))return;const{onDragPending:fs}=q.current,Bn={id:Gt,constraint:ui,initialCoordinates:Qr,offset:Ii};fs==null||fs(Bn),w({type:"onDragPending",event:Bn})},onStart(Gt){const ui=$.current;if(ui==null)return;const Qr=A.get(ui);if(!Qr)return;const{onDragStart:Ii}=q.current,Di={activatorEvent:Jr,active:{id:ui,data:Qr.data,rect:R}};js.unstable_batchedUpdates(()=>{Ii==null||Ii(Di),k(ua.Initializing),b({type:Sr.DragStart,initialCoordinates:Gt,active:ui}),w({type:"onDragStart",event:Di}),z(Md.current),K(Jr)})},onMove(Gt){b({type:Sr.DragMove,coordinates:Gt})},onEnd:$s(Sr.DragEnd),onCancel:$s(Sr.DragCancel)});Md.current=kn;function $s(Gt){return async function(){const{active:Qr,collisions:Ii,over:Di,scrollAdjustedTranslate:fs}=se.current;let Bn=null;if(Qr&&fs){const{cancelDrop:Bs}=q.current;Bn={activatorEvent:Jr,active:Qr,collisions:Ii,delta:fs,over:Di},Gt===Sr.DragEnd&&typeof Bs=="function"&&await Promise.resolve(Bs(Bn))&&(Gt=Sr.DragCancel)}$.current=null,js.unstable_batchedUpdates(()=>{b({type:Gt}),k(ua.Uninitialized),ci(null),z(null),K(null),Md.current=null;const Bs=Gt===Sr.DragEnd?"onDragEnd":"onDragCancel";if(Bn){const Ld=q.current[Bs];Ld==null||Ld(Bn),w({type:Bs,event:Bn})}})}}},[A]),Rd=O.useCallback((Kt,Yr)=>(Xr,Ri)=>{const un=Xr.nativeEvent,Jr=A.get(Ri);if($.current!==null||!Jr||un.dndKit||un.defaultPrevented)return;const kn={active:Jr};Kt(Xr,Yr.options,kn)===!0&&(un.dndKit={capturedBy:Yr.sensor},$.current=Ri,hc(Xr,Yr))},[A,hc]),pc=h2e(f,Rd);w2e(f),ls(()=>{ne&&j===ua.Initializing&&k(ua.Initialized)},[ne,j]),O.useEffect(()=>{const{onDragMove:Kt}=q.current,{active:Yr,activatorEvent:Xr,collisions:Ri,over:un}=se.current;if(!Yr||!Xr)return;const Jr={active:Yr,activatorEvent:Xr,collisions:Ri,delta:{x:Me.x,y:Me.y},over:un};js.unstable_batchedUpdates(()=>{Kt==null||Kt(Jr),w({type:"onDragMove",event:Jr})})},[Me.x,Me.y]),O.useEffect(()=>{const{active:Kt,activatorEvent:Yr,collisions:Xr,droppableContainers:Ri,scrollAdjustedTranslate:un}=se.current;if(!Kt||$.current==null||!Yr||!un)return;const{onDragOver:Jr}=q.current,kn=Ri.get(ut),$s=kn&&kn.rect.current?{id:kn.id,rect:kn.rect.current,data:kn.data,disabled:kn.disabled}:null,Gt={active:Kt,activatorEvent:Yr,collisions:Xr,delta:{x:un.x,y:un.y},over:$s};js.unstable_batchedUpdates(()=>{ci($s),Jr==null||Jr(Gt),w({type:"onDragOver",event:Gt})})},[ut]),ls(()=>{se.current={activatorEvent:W,active:L,activeNode:H,collisionRect:Re,collisions:sr,droppableRects:G,draggableNodes:A,draggingNode:ye,draggingNodeRect:Te,droppableContainers:M,over:wt,scrollableAncestors:we,scrollAdjustedTranslate:Me},R.current={initial:Te,translated:Re}},[L,H,sr,Re,A,ye,Te,G,M,wt,we,Me]),c2e({...re,delta:T,draggingRect:Re,pointerCoordinates:We,scrollableAncestors:we,scrollableAncestorRects:Oe});const Id=O.useMemo(()=>({active:L,activeNode:H,activeNodeRect:ne,activatorEvent:W,collisions:sr,containerNodeRect:te,dragOverlay:ie,draggableNodes:A,droppableContainers:M,droppableRects:G,over:wt,measureDroppableContainers:ee,scrollableAncestors:we,scrollableAncestorRects:Oe,measuringConfiguration:U,measuringScheduled:Q,windowRect:he}),[L,H,ne,W,sr,te,ie,A,M,G,wt,ee,we,Oe,U,Q,he]),Dd=O.useMemo(()=>({activatorEvent:W,activators:pc,active:L,activeNodeRect:ne,ariaDescribedById:{draggable:V},dispatch:b,draggableNodes:A,over:wt,measureDroppableContainers:ee}),[W,pc,L,ne,b,V,A,wt,ee]);return Z.createElement(PH.Provider,{value:N},Z.createElement(tm.Provider,{value:Dd},Z.createElement(KH.Provider,{value:Id},Z.createElement(zx.Provider,{value:fc},u)),Z.createElement(A2e,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Z.createElement(D_e,{...l,hiddenTextDescribedById:V}));function To(){const Kt=(F==null?void 0:F.autoScrollEnabled)===!1,Yr=typeof c=="object"?c.enabled===!1:c===!1,Xr=_&&!Kt&&!Yr;return typeof c=="object"?{...c,enabled:Xr}:{enabled:Xr}}}),M2e=O.createContext(null),X6="button",R2e="Draggable";function I2e(t){let{id:e,data:r,disabled:n=!1,attributes:i}=t;const s=em(R2e),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:f,draggableNodes:d,over:p}=O.useContext(tm),{role:m=X6,roleDescription:x="draggable",tabIndex:y=0}=i??{},v=(c==null?void 0:c.id)===e,b=O.useContext(v?zx:M2e),[w,N]=b0(),[j,k]=b0(),_=j2e(o,e),E=Sp(r);ls(()=>(d.set(e,{id:e,key:s,node:w,activatorNode:j,data:E}),()=>{const T=d.get(e);T&&T.key===s&&d.delete(e)}),[d,e]);const A=O.useMemo(()=>({role:m,tabIndex:y,"aria-disabled":n,"aria-pressed":v&&m===X6?!0:void 0,"aria-roledescription":x,"aria-describedby":f.draggable}),[n,m,y,v,x,f.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:A,isDragging:v,listeners:n?void 0:_,node:w,over:p,setNodeRef:N,setActivatorNodeRef:k,transform:b}}function YH(){return O.useContext(KH)}const D2e="Droppable",L2e={timeout:25};function $2e(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:i}=t;const s=em(D2e),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=O.useContext(tm),f=O.useRef({disabled:r}),d=O.useRef(!1),p=O.useRef(null),m=O.useRef(null),{disabled:x,updateMeasurementsFor:y,timeout:v}={...L2e,...i},b=Sp(y??n),w=O.useCallback(()=>{if(!d.current){d.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),m.current=null},v)},[v]),N=qx({callback:w,disabled:x||!o}),j=O.useCallback((A,T)=>{N&&(T&&(N.unobserve(T),d.current=!1),A&&N.observe(A))},[N]),[k,_]=b0(j),E=Sp(e);return O.useEffect(()=>{!N||!k.current||(N.disconnect(),d.current=!1,N.observe(k.current))},[k,N]),O.useEffect(()=>(l({type:Sr.RegisterDroppable,element:{id:n,key:s,disabled:r,node:k,rect:p,data:E}}),()=>l({type:Sr.UnregisterDroppable,key:s,id:n})),[n]),O.useEffect(()=>{r!==f.current.disabled&&(l({type:Sr.SetDroppableDisabled,id:n,key:s,disabled:r}),f.current.disabled=r)},[n,s,r,l]),{active:o,rect:p,isOver:(c==null?void 0:c.id)===n,node:k,over:c,setNodeRef:_}}function B2e(t){let{animation:e,children:r}=t;const[n,i]=O.useState(null),[s,o]=O.useState(null),l=w0(r);return!r&&!n&&l&&i(l),ls(()=>{if(!s)return;const c=n==null?void 0:n.key,u=n==null?void 0:n.props.id;if(c==null||u==null){i(null);return}Promise.resolve(e(u,s)).then(()=>{i(null)})},[e,n,s]),Z.createElement(Z.Fragment,null,r,n?O.cloneElement(n,{ref:o}):null)}const F2e={x:0,y:0,scaleX:1,scaleY:1};function q2e(t){let{children:e}=t;return Z.createElement(tm.Provider,{value:VH},Z.createElement(zx.Provider,{value:F2e},e))}const z2e={position:"fixed",touchAction:"none"},U2e=t=>$x(t)?"transform 250ms ease":void 0,H2e=O.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:i,children:s,className:o,rect:l,style:c,transform:u,transition:f=U2e}=t;if(!l)return null;const d=i?u:{...u,scaleX:1,scaleY:1},p={...z2e,width:l.width,height:l.height,top:l.top,left:l.left,transform:Rs.Transform.toString(d),transformOrigin:i&&n?L_e(n,l):void 0,transition:typeof f=="function"?f(n):f,...c};return Z.createElement(r,{className:o,style:p,ref:e},s)}),W2e=t=>e=>{let{active:r,dragOverlay:n}=e;const i={},{styles:s,className:o}=t;if(s!=null&&s.active)for(const[l,c]of Object.entries(s.active))c!==void 0&&(i[l]=r.node.style.getPropertyValue(l),r.node.style.setProperty(l,c));if(s!=null&&s.dragOverlay)for(const[l,c]of Object.entries(s.dragOverlay))c!==void 0&&n.node.style.setProperty(l,c);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(i))r.node.style.setProperty(c,u);o!=null&&o.active&&r.node.classList.remove(o.active)}},V2e=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:Rs.Transform.toString(e)},{transform:Rs.Transform.toString(r)}]},K2e={duration:250,easing:"ease",keyframes:V2e,sideEffects:W2e({styles:{active:{opacity:"0"}}})};function G2e(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:i}=t;return Lx((s,o)=>{if(e===null)return;const l=r.get(s);if(!l)return;const c=l.node.current;if(!c)return;const u=WH(o);if(!u)return;const{transform:f}=Nn(o).getComputedStyle(o),d=RH(f);if(!d)return;const p=typeof e=="function"?e:Y2e(e);return qH(c,i.draggable.measure),p({active:{id:s,data:l.data,node:c,rect:i.draggable.measure(c)},draggableNodes:r,dragOverlay:{node:o,rect:i.dragOverlay.measure(u)},droppableContainers:n,measuringConfiguration:i,transform:d})})}function Y2e(t){const{duration:e,easing:r,sideEffects:n,keyframes:i}={...K2e,...t};return s=>{let{active:o,dragOverlay:l,transform:c,...u}=s;if(!e)return;const f={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},d={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-f.x,y:c.y-f.y,...d},m=i({...u,active:o,dragOverlay:l,transform:{initial:c,final:p}}),[x]=m,y=m[m.length-1];if(JSON.stringify(x)===JSON.stringify(y))return;const v=n==null?void 0:n({active:o,dragOverlay:l,...u}),b=l.node.animate(m,{duration:e,easing:r,fill:"forwards"});return new Promise(w=>{b.onfinish=()=>{v==null||v(),w()}})}}let J6=0;function X2e(t){return O.useMemo(()=>{if(t!=null)return J6++,J6},[t])}const VC=Z.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:i,transition:s,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=t;const{activatorEvent:f,active:d,activeNodeRect:p,containerNodeRect:m,draggableNodes:x,droppableContainers:y,dragOverlay:v,over:b,measuringConfiguration:w,scrollableAncestors:N,scrollableAncestorRects:j,windowRect:k}=YH(),_=O.useContext(zx),E=X2e(d==null?void 0:d.id),A=GH(o,{activatorEvent:f,active:d,activeNodeRect:p,containerNodeRect:m,draggingNodeRect:v.rect,over:b,overlayNodeRect:v.rect,scrollableAncestors:N,scrollableAncestorRects:j,transform:_,windowRect:k}),T=WC(p),M=G2e({config:n,draggableNodes:x,droppableContainers:y,measuringConfiguration:w}),P=T?v.setRef:void 0;return Z.createElement(q2e,null,Z.createElement(B2e,{animation:M},d&&E?Z.createElement(H2e,{key:E,id:d.id,ref:P,as:l,activatorEvent:f,adjustScale:e,className:c,transition:s,rect:T,style:{zIndex:u,...i},transform:A},r):null))});function Td(t,e,r){const n=t.slice();return n.splice(r<0?n.length+r:r,0,n.splice(e,1)[0]),n}function J2e(t,e){return t.reduce((r,n,i)=>{const s=e.get(n);return s&&(r[i]=s),r},Array(t.length))}function Vg(t){return t!==null&&t>=0}function Q2e(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Z2e(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const XH=t=>{let{rects:e,activeIndex:r,overIndex:n,index:i}=t;const s=Td(e,n,r),o=e[i],l=s[i];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},Kg={scaleX:1,scaleY:1},Hx=t=>{var e;let{activeIndex:r,activeNodeRect:n,index:i,rects:s,overIndex:o}=t;const l=(e=s[r])!=null?e:n;if(!l)return null;if(i===r){const u=s[o];return u?{x:0,y:r<o?u.top+u.height-(l.top+l.height):u.top-l.top,...Kg}:null}const c=eOe(s,i,r);return i>r&&i<=o?{x:0,y:-l.height-c,...Kg}:i<r&&i>=o?{x:0,y:l.height+c,...Kg}:{x:0,y:0,...Kg}};function eOe(t,e,r){const n=t[e],i=t[e-1],s=t[e+1];return n?r<e?i?n.top-(i.top+i.height):s?s.top-(n.top+n.height):0:s?s.top-(n.top+n.height):i?n.top-(i.top+i.height):0:0}const JH="Sortable",QH=Z.createContext({activeIndex:-1,containerId:JH,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:XH,disabled:{draggable:!1,droppable:!1}});function Wx(t){let{children:e,id:r,items:n,strategy:i=XH,disabled:s=!1}=t;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:f}=YH(),d=em(JH,r),p=l.rect!==null,m=O.useMemo(()=>n.map(_=>typeof _=="object"&&"id"in _?_.id:_),[n]),x=o!=null,y=o?m.indexOf(o.id):-1,v=u?m.indexOf(u.id):-1,b=O.useRef(m),w=!Q2e(m,b.current),N=v!==-1&&y===-1||w,j=Z2e(s);ls(()=>{w&&x&&f(m)},[w,m,x,f]),O.useEffect(()=>{b.current=m},[m]);const k=O.useMemo(()=>({activeIndex:y,containerId:d,disabled:j,disableTransforms:N,items:m,overIndex:v,useDragOverlay:p,sortedRects:J2e(m,c),strategy:i}),[y,d,j.draggable,j.droppable,N,m,v,c,p,i]);return Z.createElement(QH.Provider,{value:k},e)}const tOe=t=>{let{id:e,items:r,activeIndex:n,overIndex:i}=t;return Td(r,n,i).indexOf(e)},rOe=t=>{let{containerId:e,isSorting:r,wasDragging:n,index:i,items:s,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!n||l!==s&&i===o?!1:r?!0:o!==i&&e===c},nOe={duration:200,easing:"ease"},ZH="transform",iOe=Rs.Transition.toString({property:ZH,duration:0,easing:"linear"}),sOe={roleDescription:"sortable"};function oOe(t){let{disabled:e,index:r,node:n,rect:i}=t;const[s,o]=O.useState(null),l=O.useRef(r);return ls(()=>{if(!e&&r!==l.current&&n.current){const c=i.current;if(c){const u=Cd(n.current,{ignoreTransform:!0}),f={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(f.x||f.y)&&o(f)}}r!==l.current&&(l.current=r)},[e,r,n,i]),O.useEffect(()=>{s&&o(null)},[s]),s}function KC(t){let{animateLayoutChanges:e=rOe,attributes:r,disabled:n,data:i,getNewIndex:s=tOe,id:o,strategy:l,resizeObserverConfig:c,transition:u=nOe}=t;const{items:f,containerId:d,activeIndex:p,disabled:m,disableTransforms:x,sortedRects:y,overIndex:v,useDragOverlay:b,strategy:w}=O.useContext(QH),N=aOe(n,m),j=f.indexOf(o),k=O.useMemo(()=>({sortable:{containerId:d,index:j,items:f},...i}),[d,i,j,f]),_=O.useMemo(()=>f.slice(f.indexOf(o)),[f,o]),{rect:E,node:A,isOver:T,setNodeRef:M}=$2e({id:o,data:k,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...c}}),{active:P,activatorEvent:R,activeNodeRect:L,attributes:$,setNodeRef:F,listeners:z,isDragging:W,over:K,setActivatorNodeRef:q,transform:V}=I2e({id:o,data:k,attributes:{...sOe,...r},disabled:N.draggable}),D=S_e(M,F),U=!!P,G=U&&!x&&Vg(p)&&Vg(v),ee=!b&&W,Q=ee&&G?V:null,Y=G?Q??(l??w)({rects:y,activeNodeRect:L,activeIndex:p,overIndex:v,index:j}):null,re=Vg(p)&&Vg(v)?s({id:o,items:f,activeIndex:p,overIndex:v}):j,J=P==null?void 0:P.id,ne=O.useRef({activeId:J,items:f,newIndex:re,containerId:d}),te=f!==ne.current.items,se=e({active:P,containerId:d,isDragging:W,isSorting:U,id:o,index:j,items:f,newIndex:ne.current.newIndex,previousItems:ne.current.items,previousContainerId:ne.current.containerId,transition:u,wasDragging:ne.current.activeId!=null}),ve=oOe({disabled:!se,index:j,node:A,rect:E});return O.useEffect(()=>{U&&ne.current.newIndex!==re&&(ne.current.newIndex=re),d!==ne.current.containerId&&(ne.current.containerId=d),f!==ne.current.items&&(ne.current.items=f)},[U,re,d,f]),O.useEffect(()=>{if(J===ne.current.activeId)return;if(J!=null&&ne.current.activeId==null){ne.current.activeId=J;return}const ye=setTimeout(()=>{ne.current.activeId=J},50);return()=>clearTimeout(ye)},[J]),{active:P,activeIndex:p,attributes:$,data:k,rect:E,index:j,newIndex:re,items:f,isOver:T,isSorting:U,isDragging:W,listeners:z,node:A,overIndex:v,over:K,setNodeRef:D,setActivatorNodeRef:q,setDroppableNodeRef:M,setDraggableNodeRef:F,transform:ve??Y,transition:ie()};function ie(){if(ve||te&&ne.current.newIndex===j)return iOe;if(!(ee&&!$x(R)||!u)&&(U||se))return Rs.Transition.toString({...u,property:ZH})}}function aOe(t,e){var r,n;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(r=t==null?void 0:t.draggable)!=null?r:e.draggable,droppable:(n=t==null?void 0:t.droppable)!=null?n:e.droppable}}vt.Down,vt.Right,vt.Up,vt.Left;function lOe({item:t,isEditing:e,onUpdate:r,onDelete:n}){const[i,s]=O.useState(t.text),[o,l]=O.useState(!1),{attributes:c,listeners:u,setNodeRef:f,transform:d,transition:p,isDragging:m}=KC({id:t.id}),x={transform:Rs.Transform.toString(d),transition:p},y=()=>{i.trim()&&r(t.id,i.trim()),l(!1)},v=()=>{s(t.text),l(!1)},b=w=>{w.key==="Enter"?(w.preventDefault(),y()):w.key==="Escape"&&v()};return a.jsxs("li",{ref:f,style:x,className:ge("flex items-center group relative py-2 px-1 rounded transition-colors",m&&"opacity-50",e&&"hover:bg-gray-50"),children:[e&&a.jsx("button",{...c,...u,className:"opacity-0 group-hover:opacity-100 mr-2 p-1 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing",title:"Drag to reorder",children:a.jsx(DB,{className:"w-4 h-4"})}),a.jsx("div",{className:"flex-1 min-w-0",children:o&&e?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ct,{value:i,onChange:w=>s(w.target.value),onKeyDown:b,className:"text-sm",autoFocus:!0,placeholder:"Enter list item text..."}),a.jsx(fe,{onClick:y,size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-green-600 hover:text-green-700 hover:bg-green-50",children:a.jsx(ko,{className:"w-4 h-4"})}),a.jsx(fe,{onClick:v,size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:a.jsx($r,{className:"w-4 h-4"})})]}):a.jsxs("div",{className:"flex items-center justify-between group",children:[a.jsx("span",{className:"text-gray-700 leading-relaxed break-words",children:t.html?a.jsx("span",{dangerouslySetInnerHTML:{__html:t.html}}):t.text}),e&&a.jsxs("div",{className:"opacity-0 group-hover:opacity-100 flex items-center space-x-1 ml-2",children:[a.jsx(fe,{onClick:()=>l(!0),size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50",title:"Edit item",children:a.jsx(yo,{className:"w-3 h-3"})}),a.jsx(fe,{onClick:()=>n(t.id),size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete item",children:a.jsx(RO,{className:"w-3 h-3"})})]})]})})]})}function cOe({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n}){var w;const i=t.content,{type:s="unordered",items:o=[]}=i||{},[l,c]=O.useState(null),u=Fx(Bx(Ad,{activationConstraint:{distance:8}})),f=O.useCallback(N=>{n&&n({...i,...N})},[i,n]),d=()=>{const j={id:`item_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,text:"New item"};f({items:[...o,j]})},p=(N,j)=>{const k=o.map(_=>_.id===N?{..._,text:j}:_);f({items:k})},m=N=>{const j=o.filter(k=>k.id!==N);f({items:j})},x=()=>{f({type:s==="ordered"?"unordered":"ordered"})},y=N=>{const{active:j,over:k}=N;if(k&&j.id!==k.id){const _=o.findIndex(A=>A.id===j.id),E=o.findIndex(A=>A.id===k.id);if(_!==-1&&E!==-1){const A=Td(o,_,E);f({items:A})}}c(null)},v=s==="ordered"?"ol":"ul",b=ge("space-y-1 pl-6",s==="ordered"?"list-decimal":"list-disc");return o.length===0&&!e?a.jsx("div",{className:"text-gray-400 italic py-4",children:"No list items"}):a.jsxs("div",{className:ge("space-y-3",r&&e&&"ring-2 ring-blue-500 ring-offset-2 rounded-lg p-3"),children:[e&&r&&a.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg bg-gray-50",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(fe,{onClick:x,size:"sm",variant:"outline",className:"flex items-center space-x-2",children:s==="ordered"?a.jsxs(a.Fragment,{children:[a.jsx(MO,{className:"w-4 h-4"}),a.jsx("span",{children:"Numbered"})]}):a.jsxs(a.Fragment,{children:[a.jsx(rs,{className:"w-4 h-4"}),a.jsx("span",{children:"Bulleted"})]})}),a.jsxs("span",{className:"text-sm text-gray-500",children:[o.length," ",o.length===1?"item":"items"]})]}),a.jsxs(fe,{onClick:d,size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Item"})]})]}),o.length>0&&a.jsxs(Ux,{sensors:u,onDragStart:N=>c(N.active.id),onDragEnd:y,children:[a.jsx(v,{className:b,children:a.jsx(Wx,{items:o.map(N=>N.id),strategy:Hx,children:o.map(N=>a.jsx(lOe,{item:N,isEditing:e&&r,onUpdate:p,onDelete:m},N.id))})}),a.jsx(VC,{children:l?a.jsx("div",{className:"bg-white border border-gray-300 rounded px-3 py-2 shadow-lg",children:(w=o.find(N=>N.id===l))==null?void 0:w.text}):null})]}),o.length===0&&e&&r&&a.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[a.jsx(rs,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"No list items yet"}),a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Add your first list item to get started"}),a.jsxs(fe,{onClick:d,size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add First Item"})]})]})]})}const uOe=Mi(cOe),Ai=O.forwardRef(({className:t,...e},r)=>a.jsx("textarea",{className:ge("flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));Ai.displayName="Textarea";function dOe({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n}){const i=t.content,{text:s="",author:o="",source:l=""}=i||{},[c,u]=O.useState(s),[f,d]=O.useState(o||""),[p,m]=O.useState(l||""),[x,y]=O.useState(!1);O.useEffect(()=>{u(s),d(o||""),m(l||"")},[s,o,l]);const v=()=>{c.trim()&&n&&n({text:c.trim(),author:f.trim()||void 0,source:p.trim()||void 0}),y(!1)},b=()=>{u(s),d(o||""),m(l||""),y(!1)},w=j=>{j.key==="Escape"&&b()},N=j=>{j.key==="Enter"?(j.preventDefault(),v()):j.key==="Escape"&&b()};return!s&&!e?a.jsx("div",{className:"text-gray-400 italic py-4",children:"No quote text"}):a.jsxs("div",{className:ge("relative",r&&e&&"ring-2 ring-blue-500 ring-offset-2 rounded-lg p-3"),children:[x&&e&&r?a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quote Text *"}),a.jsx(Ai,{value:c,onChange:j=>u(j.target.value),onKeyDown:w,placeholder:"Enter the quote text here...",className:"min-h-[100px] resize-none",autoFocus:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(zB,{className:"w-4 h-4 inline mr-1"}),"Author (Optional)"]}),a.jsx(ct,{value:f,onChange:j=>d(j.target.value),onKeyDown:N,placeholder:"e.g., Albert Einstein",className:"text-sm"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(E0,{className:"w-4 h-4 inline mr-1"}),"Source (Optional)"]}),a.jsx(ct,{value:p,onChange:j=>m(j.target.value),onKeyDown:N,placeholder:"e.g., Theory of Relativity",className:"text-sm"})]})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-2 border-t border-gray-200",children:[a.jsxs(fe,{onClick:b,size:"sm",variant:"outline",className:"flex items-center space-x-2",children:[a.jsx($r,{className:"w-4 h-4"}),a.jsx("span",{children:"Cancel"})]}),a.jsxs(fe,{onClick:v,size:"sm",disabled:!c.trim(),className:"flex items-center space-x-2",children:[a.jsx(ko,{className:"w-4 h-4"}),a.jsx("span",{children:"Save Quote"})]})]})]})}):a.jsxs("blockquote",{className:"relative border-l-4 border-blue-500 bg-blue-50 py-4 px-6 my-6 group",children:[e&&r&&a.jsx(fe,{onClick:()=>y(!0),size:"sm",variant:"outline",className:"absolute -top-2 -right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-white border-gray-300 hover:bg-gray-50 shadow-lg h-8 w-8 p-0",title:"Edit quote",children:a.jsx(yo,{className:"w-4 h-4"})}),a.jsxs("div",{className:"relative",children:[a.jsx("svg",{className:"absolute top-0 left-0 transform -translate-x-2 -translate-y-2 h-8 w-8 text-blue-500",fill:"currentColor",viewBox:"0 0 32 32",children:a.jsx("path",{d:"M9.352 4c4.456 0 8.064 3.84 8.064 8.352 0 4.448-3.608 8.064-8.064 8.064a7.12 7.12 0 01-.448-.032c1.216-1.344 1.888-3.136 1.888-5.12 0-3.584-2.848-6.464-6.464-6.464a7.12 7.12 0 01-.448.032c1.216 1.344 1.888 3.136 1.888 5.12 0 3.584-2.848 6.464-6.464 6.464v-1.6c2.752 0 4.864-2.112 4.864-4.864 0-2.688-2.176-4.864-4.864-4.864V4h10.048z"})}),a.jsx("div",{className:"pl-6",children:s?a.jsx("p",{className:"text-gray-800 text-lg leading-relaxed italic whitespace-pre-wrap",children:s}):a.jsx("p",{className:"text-gray-400 text-lg leading-relaxed italic",children:"Click to add quote text..."})}),(o||l)&&a.jsx("footer",{className:"mt-4 pl-6",children:a.jsxs("cite",{className:"text-gray-600 text-sm not-italic",children:[o&&a.jsx("span",{className:"font-medium",children:o}),o&&l&&a.jsx("span",{className:"mx-1",children:"•"}),l&&a.jsx("span",{children:l})]})})]})]}),!s&&e&&r&&!x&&a.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>y(!0),children:[a.jsx(xy,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Add an Inspirational Quote"}),a.jsx("p",{className:"text-gray-500 mb-4 max-w-sm mx-auto",children:"Share wisdom, motivation, or insights with a beautifully formatted quote block."}),a.jsxs(fe,{onClick:j=>{j.stopPropagation(),y(!0)},className:"flex items-center space-x-2",children:[a.jsx(xy,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Quote"})]})]})]})}const fOe=Mi(dOe);function hOe({block:t}){return a.jsx("div",{className:"flex items-center justify-center my-8",children:a.jsx("hr",{className:"flex-grow border-t border-gray-300"})})}const pOe=Mi(hOe);function mOe({onSelect:t,selectedContentType:e="video",allowedTypes:r=["video","document","prompt","automation","ai_agent"],multiSelect:n=!1}){const[i,s]=O.useState(e),[o,l]=O.useState("grid"),[c,u]=O.useState(""),[f,d]=O.useState("updated_at"),[p,m]=O.useState("desc"),[x,y]=O.useState([]),[v,b]=O.useState(""),[w,N]=O.useState(!1),[j,k]=O.useState([]),[_,E]=O.useState(0),[A,T]=O.useState(0),[M,P]=O.useState([]),[R,L]=O.useState(!1),[$,F]=O.useState([]),z=20,W={video:{icon:si,label:"Videos",color:"text-red-600"},document:{icon:Ot,label:"Documents",color:"text-blue-600"},prompt:{icon:Gr,label:"Prompts",color:"text-green-600"},automation:{icon:Ei,label:"Automations",color:"text-yellow-600"},ai_agent:{icon:Kr,label:"AI Agents",color:"text-purple-600"}},K=H=>({video:"videos",document:"documents",prompt:"prompts",automation:"automations",ai_agent:"ai_agents"})[H]||H,q=async(H=!1)=>{var Y;N(!0);try{const re=H?0:A,{data:J,error:ne}=await pe.functions.invoke("content-repository-manager",{body:{action:"list",contentType:K(i),searchQuery:c,filters:{tags:x,difficulty:v},sortBy:f,sortOrder:p,limit:z,offset:re}});if(ne){console.error("Failed to fetch content:",ne);return}const te=J.data;k(H||re===0?te.items||[]:se=>[...se,...te.items||[]]),E(((Y=te.pagination)==null?void 0:Y.total)||0),H&&T(0)}catch(re){console.error("Error fetching content:",re)}finally{N(!1)}},V=()=>{const H=A+z;T(H),q(!1)};O.useEffect(()=>{q(!0)},[i,c,x,v,f,p]);const D=H=>{if(n){const Y=M.includes(H.id)?M.filter(re=>re!==H.id):[...M,H.id];P(Y)}else t(H)},U=H=>{y(Y=>Y.includes(H)?Y.filter(re=>re!==H):[...Y,H])},G=W[i],ee=G.icon,Q=A+z<_;return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:r.map(H=>{const Y=W[H],re=Y.icon;return a.jsxs("button",{onClick:()=>{s(H),u(""),y([]),T(0)},className:ge("flex items-center space-x-2 px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200",i===H?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[a.jsx(re,{className:"w-4 h-4"}),a.jsx("span",{children:Y.label})]},H)})})}),a.jsxs("div",{className:"border-b border-gray-200 px-4 py-3 space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx(ct,{placeholder:`Search ${G.label.toLowerCase()}...`,value:c,onChange:H=>u(H.target.value),className:"pl-10 pr-10"}),c&&a.jsx("button",{onClick:()=>u(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"×"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>L(!R),className:ge("flex items-center space-x-2",R&&"bg-gray-100"),children:[a.jsx(Ep,{className:"w-4 h-4"}),a.jsx("span",{children:"Filters"}),(x.length>0||v)&&a.jsx(At,{variant:"secondary",className:"text-xs",children:x.length+(v?1:0)})]}),a.jsxs("select",{value:`${f}-${p}`,onChange:H=>{const[Y,re]=H.target.value.split("-");d(Y),m(re)},className:"text-sm border border-gray-300 rounded-md px-3 py-1.5 bg-white",children:[a.jsx("option",{value:"updated_at-desc",children:"Recently Updated"}),a.jsx("option",{value:"created_at-desc",children:"Newest First"}),a.jsx("option",{value:"title-asc",children:"A-Z"}),a.jsx("option",{value:"title-desc",children:"Z-A"})]})]}),a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>l("grid"),className:ge("p-1.5 rounded-md transition-colors",o==="grid"?"bg-white shadow-sm":"hover:bg-gray-200"),children:a.jsx(dd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>l("list"),className:ge("p-1.5 rounded-md transition-colors",o==="list"?"bg-white shadow-sm":"hover:bg-gray-200"),children:a.jsx(rs,{className:"w-4 h-4"})})]})]}),R&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty Level"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["beginner","intermediate","advanced"].map(H=>a.jsx("button",{onClick:()=>b(v===H?"":H),className:ge("px-3 py-1.5 text-sm rounded-full border transition-colors",v===H?"bg-blue-100 border-blue-300 text-blue-700":"border-gray-300 text-gray-600 hover:border-gray-400"),children:H.charAt(0).toUpperCase()+H.slice(1)},H))})]}),$.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:$.slice(0,10).map(H=>a.jsx("button",{onClick:()=>U(H),className:ge("px-3 py-1.5 text-sm rounded-full border transition-colors",x.includes(H)?"bg-blue-100 border-blue-300 text-blue-700":"border-gray-300 text-gray-600 hover:border-gray-400"),children:H},H))})]}),(x.length>0||v)&&a.jsx("div",{className:"flex justify-end",children:a.jsx(fe,{variant:"outline",size:"sm",onClick:()=>{y([]),b("")},children:"Clear All Filters"})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:w&&j.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-48",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"}),a.jsxs("p",{className:"text-gray-600",children:["Loading ",G.label.toLowerCase(),"..."]})]}):j.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-center",children:[a.jsx(ee,{className:ge("w-12 h-12 mb-4",G.color)}),a.jsxs("h3",{className:"font-medium text-gray-900 mb-2",children:["No ",G.label.toLowerCase()," found"]}),a.jsx("p",{className:"text-gray-500 text-sm",children:c||x.length>0||v?"Try adjusting your search or filters":`No ${G.label.toLowerCase()} available yet`})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:ge(o==="grid"?"grid grid-cols-2 gap-4":"space-y-3"),children:j.map(H=>a.jsx("div",{onClick:()=>D(H),className:ge("border border-gray-200 rounded-lg transition-all duration-200 cursor-pointer hover:shadow-md",M.includes(H.id)&&"border-blue-500 bg-blue-50",o==="grid"?"p-4":"p-3 flex items-center space-x-4"),children:o==="grid"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg mb-3 flex items-center justify-center overflow-hidden",children:H.thumbnail_url||H.file_url?a.jsx("img",{src:H.thumbnail_url||H.file_url,alt:H.title,className:"w-full h-full object-cover"}):a.jsx(ee,{className:ge("w-8 h-8",G.color)})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 text-sm line-clamp-2 mb-1",children:H.title}),H.description&&a.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 mb-2",children:H.description}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(go,{className:"w-3 h-3"}),a.jsx("span",{children:new Date(H.updated_at).toLocaleDateString()})]}),H.status&&a.jsx(At,{variant:H.status==="published"?"default":"secondary",className:"text-xs",children:H.status})]}),H.tags&&H.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[H.tags.slice(0,2).map(Y=>a.jsx(At,{variant:"outline",className:"text-xs",children:Y},Y)),H.tags.length>2&&a.jsxs("span",{className:"text-xs text-gray-500",children:["+",H.tags.length-2]})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0 overflow-hidden",children:H.thumbnail_url||H.file_url?a.jsx("img",{src:H.thumbnail_url||H.file_url,alt:H.title,className:"w-full h-full object-cover"}):a.jsx(ee,{className:ge("w-5 h-5",G.color)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 text-sm truncate",children:H.title}),H.description&&a.jsx("p",{className:"text-xs text-gray-600 truncate mt-1",children:H.description})]}),H.status&&a.jsx(At,{variant:H.status==="published"?"default":"secondary",className:"text-xs ml-2 flex-shrink-0",children:H.status})]}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(go,{className:"w-3 h-3"}),a.jsx("span",{children:new Date(H.updated_at).toLocaleDateString()})]}),H.difficulty_level&&a.jsx(At,{variant:"outline",className:"text-xs",children:H.difficulty_level})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(ii,{className:"w-4 h-4"})}),a.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(Os,{className:"w-4 h-4"})})]})]})]})]})},H.id))}),Q&&a.jsx("div",{className:"flex justify-center mt-6",children:a.jsx(fe,{variant:"outline",onClick:V,disabled:w,className:"flex items-center space-x-2",children:w?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):a.jsx("span",{children:"Load More"})})})]})}),a.jsxs("div",{className:"border-t border-gray-200 px-4 py-3 text-xs text-gray-500",children:["Showing ",j.length," of ",_," ",G.label.toLowerCase(),n&&M.length>0&&a.jsxs("span",{className:"ml-2",children:["• ",M.length," selected"]})]})]})}function GC({isOpen:t,onClose:e,onSelect:r,contentType:n="video",allowedTypes:i=["video","document","prompt","automation","ai_agent"],title:s="Select Content",description:o="Choose content from your library",multiSelect:l=!1}){const[c,u]=O.useState([]);O.useEffect(()=>{t||u([])},[t]);const f=p=>{l?u(m=>m.find(y=>y.id===p.id)?m.filter(y=>y.id!==p.id):[...m,p]):(r(p),e())},d=()=>{c.length>0&&(r(l?c:c[0]),e())};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s}),o&&a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:o})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 p-2",children:a.jsx($r,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsx(mOe,{onSelect:f,selectedContentType:n,allowedTypes:i,multiSelect:l})}),a.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-sm text-gray-500",children:l&&c.length>0&&a.jsxs("span",{children:[c.length," item",c.length!==1?"s":""," selected"]})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(fe,{variant:"outline",onClick:e,children:"Cancel"}),l&&a.jsxs(fe,{onClick:d,disabled:c.length===0,children:["Select ",c.length>0?`(${c.length})`:""]})]})]})})]})}):null}async function ml(t,e={}){const{search:r,status:n="published",limit:i=20,offset:s=0,sortBy:o="updated_at",sortOrder:l="desc"}=e;let c=pe.from("content_items").select("*").eq("content_type",t);n!=="all"&&(c=c.eq("status",n)),r!=null&&r.trim()&&(c=c.or(`title.ilike.%${r}%,description.ilike.%${r}%`)),c=c.order(o,{ascending:l==="asc"}),c=c.range(s,s+i-1);const{data:u,error:f,count:d}=await c;if(f)throw console.error("Error fetching content items:",f),f;if(!u||u.length===0)return{items:[],total:d||0};let p;const m=u.map(b=>b.id);switch(t){case"ai_agent":p=pe.from("ai_agents").select("content_item_id, agent_name, short_description").in("content_item_id",m);break;case"video":p=pe.from("videos").select("content_item_id, video_platform, duration_seconds").in("content_item_id",m);break;case"document":p=pe.from("documents").select("content_item_id, word_count, reading_time_minutes").in("content_item_id",m);break;case"prompt":p=pe.from("prompts").select("content_item_id, prompt_category, usage_count").in("content_item_id",m);break;case"automation":p=pe.from("automations").select("content_item_id, required_tools").in("content_item_id",m);break}const{data:x,error:y}=await p;return y&&console.error("Error fetching metadata:",y),{items:u.map(b=>{const w=x==null?void 0:x.find(N=>N.content_item_id===b.id);return{...b,metadata:w?{...w,content_item_id:void 0}:void 0}}),total:d||0}}const gOe={async getAIAgents(t){return ml("ai_agent",t)},async getVideos(t){return ml("video",t)},async getDocuments(t){return ml("document",t)},async getPrompts(t){return ml("prompt",t)},async getAutomations(t){return ml("automation",t)},async getContentByType(t,e){return ml(t,e)},async getContentById(t,e){const{data:r,error:n}=await pe.from("content_items").select("*").eq("id",e).eq("content_type",t).maybeSingle();if(n)throw console.error("Error fetching content item:",n),n;if(!r)return null;let i;switch(t){case"ai_agent":i=pe.from("ai_agents").select("agent_name, short_description").eq("content_item_id",e).maybeSingle();break;case"video":i=pe.from("videos").select("video_platform, duration_seconds").eq("content_item_id",e).maybeSingle();break;case"document":i=pe.from("documents").select("word_count, reading_time_minutes").eq("content_item_id",e).maybeSingle();break;case"prompt":i=pe.from("prompts").select("prompt_category, usage_count").eq("content_item_id",e).maybeSingle();break;case"automation":i=pe.from("automations").select("required_tools").eq("content_item_id",e).maybeSingle();break}const{data:s}=await i||{data:null};return{...r,metadata:s||void 0}},async searchAllContent(t,e){const{contentTypes:r=["ai_agent","video","document","prompt","automation"],status:n="published",limit:i=5}=e||{},s=await Promise.all(r.map(async l=>{const{items:c}=await ml(l,{search:t,status:n,limit:i,sortBy:"updated_at",sortOrder:"desc"});return{type:l,items:c}})),o={};return s.forEach(({type:l,items:c})=>{o[l]=c}),o}},uy={formatDuration(t){if(!t)return"Unknown duration";const e=Math.floor(t/3600),r=Math.floor(t%3600/60),n=t%60;return e>0?`${e}:${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`:`${r}:${n.toString().padStart(2,"0")}`},formatReadingTime(t){return t?t<1?"< 1 min read":`${t} min read`:"Unknown reading time"},formatWordCount(t){return t?t<1e3?`${t} words`:`${(t/1e3).toFixed(1)}k words`:"Unknown length"},getContentTypeInfo(t){return{ai_agent:{label:"AI Agent",icon:"Bot",color:"#3B82F6"},video:{label:"Video",icon:"Play",color:"#EF4444"},document:{label:"Document",icon:"FileText",color:"#10B981"},prompt:{label:"Prompt",icon:"MessageSquare",color:"#8B5CF6"},automation:{label:"Automation",icon:"Zap",color:"#F59E0B"}}[t]||{label:t,icon:"File",color:"#6B7280"}},generatePreviewText(t){const{content_type:e,metadata:r,description:n}=t;if(n&&n.length>100)return n.substring(0,100)+"...";if(n)return n;switch(e){case"ai_agent":return(r==null?void 0:r.short_description)||"AI agent for automated conversations and assistance";case"video":const i=r==null?void 0:r.duration_seconds,s=(r==null?void 0:r.video_platform)||"video";return`${s.charAt(0).toUpperCase()+s.slice(1)} - ${uy.formatDuration(i)}`;case"document":const o=r==null?void 0:r.word_count,l=r==null?void 0:r.reading_time_minutes;return`${uy.formatWordCount(o)} • ${uy.formatReadingTime(l)}`;case"prompt":const c=r==null?void 0:r.prompt_category,u=(r==null?void 0:r.usage_count)||0;return`${c?c+" • ":""}Used ${u} times`;case"automation":const f=r==null?void 0:r.required_tools;return f&&f.length>0?`Requires: ${f.slice(0,2).join(", ")}${f.length>2?`+${f.length-2} more`:""}`:"Process automation workflow";default:return"Content item"}}},gl={video:{label:"Videos",icon:({className:t})=>a.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M2 6a2 2 0 012-2h6l2 2h6a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})}),color:"#EF4444",bgColor:"#FEF2F2",description:"Video content and tutorials",extensions:["mp4","avi","mov","wmv"]},document:{label:"Documents",icon:({className:t})=>a.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-5L9 2H4z",clipRule:"evenodd"})}),color:"#10B981",bgColor:"#ECFDF5",description:"PDFs, guides and documentation",extensions:["pdf","doc","docx"]},ai_agent:{label:"AI Agents",icon:({className:t})=>a.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})}),color:"#3B82F6",bgColor:"#EFF6FF",description:"Interactive AI assistants",extensions:[]},prompt:{label:"Prompts",icon:({className:t})=>a.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z",clipRule:"evenodd"})}),color:"#8B5CF6",bgColor:"#F3E8FF",description:"Reusable prompt templates",extensions:[]},automation:{label:"Automations",icon:({className:t})=>a.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.477.859h4z"})}),color:"#F59E0B",bgColor:"#FFFBEB",description:"Workflow automations",extensions:[]}};function yOe({onSelect:t,onUpload:e,allowUpload:r=!1,multiSelect:n=!1,className:i}){const[s,o]=O.useState("folders"),[l,c]=O.useState(null),[u,f]=O.useState(["Content Repository"]),[d,p]=O.useState([]),[m,x]=O.useState(!1),[y,v]=O.useState(null),[b,w]=O.useState("tiles"),[N,j]=O.useState(""),[k,_]=O.useState("updated_at"),[E,A]=O.useState("desc"),[T,M]=O.useState([]),[P,R]=O.useState(!1),[L,$]=O.useState(!1),F=Object.entries(gl).map(([H,Y])=>({id:H,name:Y.label,contentType:H,itemCount:0,lastModified:new Date().toISOString(),color:Y.color,icon:Y.icon})),z=O.useCallback(async H=>{if(H){x(!0),v(null);try{const{items:Y}=await gOe.getContentByType(H,{search:N,status:"all",sortBy:k==="content_type"?"title":k,sortOrder:E,limit:50});p(Y)}catch(Y){console.error("Error fetching content:",Y),v("Failed to load content. Please try again."),p([])}finally{x(!1)}}},[N,k,E]),W=H=>{c(H.contentType),o("content"),f(["Content Repository",H.name]),z(H.contentType)},K=()=>{s==="content"&&(o("folders"),c(null),f(["Content Repository"]),p([]),M([]))},q=async()=>{l&&($(!0),await z(l),$(!1))},V=H=>{n?M(Y=>Y.includes(H.id)?Y.filter(J=>J!==H.id):[...Y,H.id]):t==null||t(H)},D=Z.useMemo(()=>{let H=[...d];if(N.trim()){const Y=N.toLowerCase();H=H.filter(re=>{var J;return re.title.toLowerCase().includes(Y)||((J=re.description)==null?void 0:J.toLowerCase().includes(Y))})}return H},[d,N]),U=()=>a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-4",children:[a.jsx(PO,{className:"w-4 h-4"}),u.map((H,Y)=>a.jsxs(Z.Fragment,{children:[Y>0&&a.jsx(jh,{className:"w-4 h-4"}),a.jsx("span",{className:ge(Y===u.length-1?"text-gray-900 font-medium":"hover:text-gray-900 cursor-pointer"),onClick:Y===0?K:void 0,children:H})]},Y))]}),G=()=>{var H;return a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[s==="content"&&a.jsxs(fe,{variant:"outline",size:"sm",onClick:K,className:"flex items-center space-x-2",children:[a.jsx(lo,{className:"w-4 h-4"}),a.jsx("span",{children:"Back"})]}),a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx(ct,{placeholder:`Search ${s==="folders"?"content":(H=gl[l])==null?void 0:H.label.toLowerCase()}...`,value:N,onChange:Y=>j(Y.target.value),className:"pl-10"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[s==="content"&&a.jsxs(fe,{variant:"outline",size:"sm",onClick:q,disabled:L,className:"flex items-center space-x-2",children:[a.jsx(IO,{className:ge("w-4 h-4",L&&"animate-spin")}),a.jsx("span",{children:"Refresh"})]}),r&&l&&a.jsxs(fe,{size:"sm",className:"flex items-center space-x-2",style:{backgroundColor:gl[l].color},children:[a.jsx(Ir,{className:"w-4 h-4"}),a.jsx("span",{children:"Upload"})]}),a.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>w("tiles"),className:ge("p-2 rounded-md transition-colors",b==="tiles"?"bg-white shadow-sm":"hover:bg-gray-200"),title:"Tile view",children:a.jsx(dd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>w("list"),className:ge("p-2 rounded-md transition-colors",b==="list"?"bg-white shadow-sm":"hover:bg-gray-200"),title:"List view",children:a.jsx(rs,{className:"w-4 h-4"})})]})]})]})},ee=()=>a.jsx("div",{className:ge("grid gap-6",b==="tiles"?"grid-cols-2 md:grid-cols-3 lg:grid-cols-4":"grid-cols-1"),children:F.map(H=>{const Y=H.icon;return a.jsxs("div",{onClick:()=>W(H),className:ge("group relative border border-gray-200 rounded-xl transition-all duration-200 cursor-pointer hover:shadow-lg hover:border-gray-300",b==="tiles"?"p-6 text-center":"p-4 flex items-center space-x-4"),style:{backgroundColor:H.color+"08"},children:[a.jsx("div",{className:ge("flex items-center justify-center rounded-lg transition-transform group-hover:scale-110",b==="tiles"?"w-16 h-16 mx-auto mb-4":"w-12 h-12 flex-shrink-0"),style:{backgroundColor:H.color+"20"},children:a.jsx(Y,{className:"w-8 h-8",style:{color:H.color}})}),a.jsxs("div",{className:ge(b==="list"&&"flex-1"),children:[a.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-gray-700 transition-colors",children:H.name}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:gl[H.contentType].description}),a.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-2 text-xs text-gray-500",children:[a.jsxs("span",{children:[H.itemCount," items"]}),a.jsx("span",{children:"•"}),a.jsx("span",{children:"Updated today"})]})]})]},H.id)})}),Q=()=>{var H;if(m)return a.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[a.jsx(cr,{size:"lg"}),a.jsxs("p",{className:"text-gray-600 mt-4",children:["Loading ",(H=gl[l])==null?void 0:H.label.toLowerCase(),"..."]})]});if(y)return a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"text-red-500 mb-4",children:a.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Content"}),a.jsx("p",{className:"text-gray-600 mb-4",children:y}),a.jsx(fe,{onClick:q,children:"Try Again"})]});if(D.length===0){const Y=gl[l];return a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"mb-4",style:{color:Y.color},children:a.jsx(Y.icon,{className:"w-12 h-12 mx-auto"})}),a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",Y.label.toLowerCase()," found"]}),a.jsx("p",{className:"text-gray-600 mb-6",children:N?`No ${Y.label.toLowerCase()} match your search"${N}"`:`Start by uploading your first ${Y.label.toLowerCase().slice(0,-1)}`}),r&&a.jsxs(fe,{className:"flex items-center space-x-2",style:{backgroundColor:Y.color},children:[a.jsx(Ir,{className:"w-4 h-4"}),a.jsxs("span",{children:["Upload ",Y.label.slice(0,-1)]})]})]})}return a.jsx("div",{className:ge("grid gap-4",b==="tiles"?"grid-cols-2 md:grid-cols-3 lg:grid-cols-4":"grid-cols-1"),children:D.map(Y=>{const re=T.includes(Y.id),J=gl[l];return a.jsx("div",{onClick:()=>V(Y),className:ge("group border border-gray-200 rounded-lg transition-all duration-200 cursor-pointer hover:shadow-md",re&&"border-blue-500 bg-blue-50",b==="tiles"?"p-4":"p-3 flex items-center space-x-4"),children:b==="tiles"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg mb-3 flex items-center justify-center overflow-hidden",children:Y.thumbnail_url?a.jsx("img",{src:Y.thumbnail_url,alt:Y.title,className:"w-full h-full object-cover"}):a.jsx(J.icon,{className:"w-8 h-8",style:{color:J.color}})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 line-clamp-2 mb-1",children:Y.title}),Y.description&&a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:Y.description}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[a.jsx("span",{children:new Date(Y.updated_at).toLocaleDateString()}),a.jsx(At,{variant:Y.status==="published"?"default":"secondary",className:"text-xs",children:Y.status})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(J.icon,{className:"w-5 h-5",style:{color:J.color}})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 truncate",children:Y.title}),Y.description&&a.jsx("p",{className:"text-sm text-gray-600 truncate",children:Y.description})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsx(At,{variant:Y.status==="published"?"default":"secondary",className:"text-xs",children:Y.status}),a.jsx("span",{children:new Date(Y.updated_at).toLocaleDateString()})]})]})},Y.id)})})};return a.jsxs("div",{className:ge("h-full flex flex-col bg-white",i),children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[U(),G()]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s==="folders"?ee():Q()}),n&&T.length>0&&a.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-sm text-gray-700",children:[T.length," item",T.length!==1?"s":""," selected"]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(fe,{variant:"outline",size:"sm",onClick:()=>M([]),children:"Clear Selection"}),a.jsx(fe,{size:"sm",onClick:()=>{const H=D.filter(Y=>T.includes(Y.id));t==null||t(H[0])},children:"Use Selected"})]})]})})]})}const Q6={video:UB,document:Ot,ai_agent:Kr,prompt:Gr,automation:Ei};function eW({isOpen:t,onClose:e,onSelect:r,contentType:n,allowedTypes:i,title:s="Select Content",description:o="Choose content from your library",multiSelect:l=!1,allowUpload:c=!1,className:u}){const[f,d]=O.useState([]),[p,m]=O.useState(!1),[x,y]=O.useState(!1);if(!t)return null;const v=_=>{if(l){const E=f.find(A=>A.id===_.id);d(E?A=>A.filter(T=>T.id!==_.id):A=>[...A,_])}else r(_),e()},b=()=>{f.length>0&&(r(l?f:f[0]),e())},w=_=>{console.log("Files to upload:",_),m(!1)},N=_=>{_.preventDefault(),y(!0)},j=_=>{_.preventDefault(),y(!1)},k=_=>{_.preventDefault(),y(!1);const E=Array.from(_.dataTransfer.files);E.length>0&&w(E)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:ge("bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[85vh] flex flex-col overflow-hidden",u),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:n&&Q6[n]?Z.createElement(Q6[n],{className:"w-6 h-6 text-white"}):a.jsx(Ot,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s}),o&&a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:o})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[c&&a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>m(!p),className:ge("flex items-center space-x-2",p&&"bg-blue-50 border-blue-300 text-blue-700"),children:[a.jsx(Ir,{className:"w-4 h-4"}),a.jsx("span",{children:"Upload"})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx($r,{className:"w-5 h-5"})})]})]}),a.jsx("div",{className:"flex-1 overflow-hidden relative",children:p?a.jsx("div",{className:ge("h-full flex items-center justify-center border-2 border-dashed border-gray-300 m-6 rounded-xl transition-colors",x&&"border-blue-500 bg-blue-50"),onDragOver:N,onDragLeave:j,onDrop:k,children:a.jsxs("div",{className:"text-center p-8",children:[a.jsx(Ir,{className:"w-16 h-16 mx-auto mb-6 text-gray-400"}),a.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Upload New Content"}),a.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:"Drag and drop your files here, or click to browse and select files from your computer."}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(fe,{className:"flex items-center space-x-2",children:[a.jsx(Ir,{className:"w-4 h-4"}),a.jsx("span",{children:"Choose Files"})]}),n&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Supported formats: ",vOe(n).join(", ")]})]})]})}):a.jsx(yOe,{onSelect:v,multiSelect:l,allowUpload:!1,className:"h-full"})}),a.jsx("div",{className:"border-t border-gray-200 px-6 py-4 bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[l&&f.length>0&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-xs font-medium",children:f.length}),a.jsxs("span",{className:"text-sm text-gray-700",children:[f.length," item",f.length!==1?"s":""," selected"]})]}),p&&a.jsx(fe,{variant:"outline",size:"sm",onClick:()=>m(!1),children:"Back to Library"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(fe,{variant:"outline",onClick:e,children:"Cancel"}),l&&f.length>0&&!p&&a.jsx(fe,{onClick:b,className:"flex items-center space-x-2",children:a.jsxs("span",{children:["Select (",f.length,")"]})})]})]})})]})})}function vOe(t){return{video:["MP4","AVI","MOV","WMV","MKV"],document:["PDF","DOC","DOCX","TXT"],ai_agent:["JSON","YAML"],prompt:["TXT","MD"],automation:["JSON","YAML","JS"]}[t]||["All files"]}function xOe({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n,onSelect:i,onEdit:s,className:o}){const[l,c]=O.useState(!1),[u,f]=O.useState(!1),d=t.content,{video_id:p,url:m,platform:x,title:y,description:v,thumbnail:b,duration:w,autoplay:N=!1,controls:j=!0}=d||{},k=T=>{var P,R,L;const M={video_id:T.id,title:T.title,description:T.description,thumbnail:T.thumbnail_url,platform:((P=T.metadata)==null?void 0:P.video_platform)||"internal",url:((R=T.metadata)==null?void 0:R.video_url)||T.file_url,duration:(L=T.metadata)==null?void 0:L.duration_seconds,autoplay:!1,controls:!0};n==null||n(M),c(!1)},_=()=>{n==null||n({})},E=()=>"aspect-video",A=()=>!p&&!m?a.jsx("div",{className:`${E()} bg-gray-100 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300`,children:a.jsxs("div",{className:"text-center",children:[a.jsx(Fw,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Add Video Content"}),a.jsx("p",{className:"text-gray-600 mb-4 max-w-sm",children:"Select a video from your content library to embed in this block."}),e&&a.jsxs(fe,{onClick:()=>c(!0),className:"flex items-center space-x-2",children:[a.jsx(si,{className:"w-4 h-4"}),a.jsx("span",{children:"Select Video"})]})]})}):a.jsxs("div",{className:"space-y-4",children:[y&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:y}),v&&a.jsx("p",{className:"text-gray-600 text-sm",children:v})]}),a.jsxs("div",{className:`${E()} bg-black rounded-lg relative overflow-hidden group`,children:[a.jsx("div",{className:"absolute inset-0",children:b?a.jsx("img",{src:b,alt:y||"Video thumbnail",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center",children:a.jsx(Fw,{className:"w-16 h-16 text-gray-400"})})}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("button",{onClick:()=>f(!0),className:"w-16 h-16 bg-white bg-opacity-90 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all duration-200 group-hover:scale-110",children:a.jsx(si,{className:"w-8 h-8 text-gray-800 ml-1",fill:"currentColor"})})}),e&&a.jsxs("div",{className:"absolute top-3 right-3 flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx(fe,{onClick:()=>c(!0),size:"sm",variant:"outline",className:"bg-white/90 hover:bg-white border-gray-300",children:a.jsx(Dn,{className:"w-4 h-4"})}),a.jsx(fe,{onClick:_,size:"sm",variant:"outline",className:"bg-white/90 hover:bg-white border-gray-300 text-red-600 hover:text-red-700",children:"×"})]}),w&&a.jsxs("div",{className:"absolute bottom-3 right-3 bg-black bg-opacity-75 text-white px-2 py-1 rounded text-sm",children:[Math.floor(w/60),":",(w%60).toString().padStart(2,"0")]})]}),(x||w)&&a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[x&&a.jsxs("span",{className:"capitalize",children:[x," Video"]}),w&&a.jsxs("span",{children:["Duration: ",Math.floor(w/60),":",(w%60).toString().padStart(2,"0")]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>f(!0),className:"p-1 hover:text-gray-700 transition-colors",title:"View fullscreen",children:a.jsx(Jg,{className:"w-4 h-4"})}),m&&a.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"p-1 hover:text-gray-700 transition-colors",title:"Open in new tab",children:a.jsx(Os,{className:"w-4 h-4"})})]})]})]});return a.jsxs("div",{className:ge("relative",r&&e&&"ring-2 ring-blue-500 ring-offset-2 rounded-lg p-2",o),onClick:i,children:[A(),a.jsx(eW,{isOpen:l,onClose:()=>c(!1),onSelect:k,contentType:"video",title:"Select Video",description:"Choose a video to embed in this block",allowUpload:!0}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"relative w-full max-w-6xl",children:[a.jsx("button",{onClick:()=>f(!1),className:"absolute -top-12 right-0 text-white hover:text-gray-300 text-xl font-bold z-10",children:"×"}),a.jsx("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:m?a.jsx("video",{src:m,controls:j,autoPlay:N,className:"w-full h-full",poster:b,children:"Your browser does not support the video tag."}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-white",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Fw,{className:"w-16 h-16 mx-auto mb-4"}),a.jsx("p",{children:"Video not available"})]})})}),y&&a.jsxs("div",{className:"mt-4 text-white text-center",children:[a.jsx("h3",{className:"text-xl font-semibold",children:y}),v&&a.jsx("p",{className:"text-gray-300 mt-2",children:v})]})]})})]})}function bOe({block:t,isSelected:e=!1,isEditing:r=!1,onSelect:n,onEdit:i,className:s}){const o=t.content,{agent_id:l,agent_name:c="AI Assistant",initial_message:u="Hello! How can I help you?",context:f,allowed_interactions:d=["chat"]}=o||{},[p,m]=O.useState([{id:"1",role:"assistant",content:u}]),[x,y]=O.useState(""),[v,b]=O.useState(!1),w=async()=>{if(!x.trim())return;const N={id:Date.now().toString(),role:"user",content:x};m(j=>[...j,N]),y(""),b(!0);try{await new Promise(k=>setTimeout(k,1e3));const j={id:(Date.now()+1).toString(),role:"assistant",content:`Thank you for your message: "${N.content}". I'm a simulated response from ${c}.`};m(k=>[...k,j])}catch(j){console.error("Failed to send message:",j)}finally{b(!1)}};return r&&!l?a.jsxs("div",{className:ge("border-2 border-dashed border-purple-300 rounded-lg p-8 text-center bg-purple-50",s),children:[a.jsx("div",{className:"text-purple-400 mb-4",children:a.jsx(Kr,{className:"w-12 h-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-purple-900 mb-2",children:"Select an AI Agent"}),a.jsx("p",{className:"text-purple-600 text-sm mb-4",children:"Choose an AI agent from your repository to embed here."}),a.jsxs(fe,{onClick:i,variant:"outline",size:"sm",className:"border-purple-300 text-purple-600 hover:bg-purple-100",children:[a.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Configure Agent"]})]}):a.jsxs("div",{className:ge("border border-gray-200 rounded-lg bg-white max-w-2xl",e&&"ring-2 ring-blue-500",s),onClick:n,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-blue-50",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(Kr,{className:"w-4 h-4 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:c}),a.jsx("p",{className:"text-xs text-gray-500",children:"AI Assistant"})]})]}),r&&a.jsx(fe,{onClick:i,variant:"ghost",size:"sm",children:a.jsx(Dn,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"p-4 h-64 overflow-y-auto space-y-3",children:[p.map(N=>a.jsx("div",{className:ge("flex",N.role==="user"?"justify-end":"justify-start"),children:a.jsx("div",{className:ge("max-w-xs lg:max-w-md px-3 py-2 rounded-lg text-sm",N.role==="user"?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"),children:N.content})},N.id)),v&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-gray-100 px-3 py-2 rounded-lg",children:a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),a.jsx("div",{className:"p-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(ct,{value:x,onChange:N=>y(N.target.value),onKeyPress:N=>N.key==="Enter"&&w(),placeholder:"Type your message...",disabled:v||!l,className:"flex-1"}),a.jsx(fe,{onClick:w,disabled:v||!x.trim()||!l,size:"sm",children:a.jsx($B,{className:"w-4 h-4"})})]})})]})}const wOe=Mi(bOe);function jOe({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n,onSelect:i,onEdit:s,className:o}){const[l,c]=O.useState(!1),[u,f]=O.useState(!1),[d,p]=O.useState(1),[m,x]=O.useState(1),[y,v]=O.useState(100),[b,w]=O.useState(0),[N,j]=O.useState(null),k=t.content,{document_id:_,title:E,excerpt:A,display_mode:T="embedded"}=k||{},M=V=>{var U;const D={document_id:V.id,title:V.title,excerpt:V.description||V.excerpt,display_mode:"embedded"};n==null||n(D),c(!1),j(V),(U=V.metadata)!=null&&U.total_pages&&x(V.metadata.total_pages)},P=()=>{d<m&&p(d+1)},R=()=>{d>1&&p(d-1)},L=()=>{y<200&&v(y+25)},$=()=>{y>50&&v(y-25)},F=()=>{w((b+90)%360)},z=()=>!_||!N?a.jsx("div",{className:"aspect-[3/4] bg-gray-100 rounded-lg flex items-center justify-center border border-gray-200",children:a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx(Ot,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("p",{className:"text-sm",children:"PDF preview unavailable"})]})}):a.jsxs("div",{className:"relative group",children:[a.jsxs("div",{className:"aspect-[3/4] bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm",children:[a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50",children:N.thumbnail_url?a.jsx("img",{src:N.thumbnail_url,alt:`Page ${d} of ${E}`,className:"max-w-full max-h-full object-contain",style:{transform:`rotate(${b}deg) scale(${y/100})`,transition:"transform 0.3s ease"}}):a.jsxs("div",{className:"text-center text-gray-400",children:[a.jsx(Ot,{className:"w-16 h-16 mx-auto mb-4"}),a.jsxs("p",{className:"text-lg font-medium",children:["Page ",d]}),a.jsx("p",{className:"text-sm",children:E})]})}),a.jsxs("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[d>1&&a.jsx("button",{onClick:R,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-75 text-white p-2 rounded-full hover:bg-opacity-90 transition-colors",title:"Previous page",children:a.jsx(r_,{className:"w-4 h-4"})}),d<m&&a.jsx("button",{onClick:P,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-75 text-white p-2 rounded-full hover:bg-opacity-90 transition-colors",title:"Next page",children:a.jsx(jh,{className:"w-4 h-4"})}),a.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[a.jsx("button",{onClick:$,className:"bg-black bg-opacity-75 text-white p-1.5 rounded hover:bg-opacity-90 transition-colors",title:"Zoom out",disabled:y<=50,children:a.jsx(NM,{className:"w-3 h-3"})}),a.jsx("button",{onClick:L,className:"bg-black bg-opacity-75 text-white p-1.5 rounded hover:bg-opacity-90 transition-colors",title:"Zoom in",disabled:y>=200,children:a.jsx(SM,{className:"w-3 h-3"})}),a.jsx("button",{onClick:F,className:"bg-black bg-opacity-75 text-white p-1.5 rounded hover:bg-opacity-90 transition-colors",title:"Rotate 90°",children:a.jsx(bM,{className:"w-3 h-3"})})]}),a.jsx("button",{onClick:()=>f(!0),className:"absolute bottom-2 right-2 bg-black bg-opacity-75 text-white p-2 rounded hover:bg-opacity-90 transition-colors",title:"View fullscreen",children:a.jsx(Jg,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-3 px-1",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",d," of ",m]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[y,"% zoom"]})]}),m>1&&m<=10&&a.jsx("div",{className:"flex justify-center mt-2 space-x-1",children:Array.from({length:m},(V,D)=>a.jsx("button",{onClick:()=>p(D+1),className:ge("w-2 h-2 rounded-full transition-colors",d===D+1?"bg-blue-600":"bg-gray-300 hover:bg-gray-400"),title:`Go to page ${D+1}`},D))})]}),W=()=>{n==null||n({document_id:"",title:"",display_mode:"embedded"})},K=V=>{n==null||n({...k,display_mode:V})},q=()=>!_||!E?a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(Ot,{className:"w-12 h-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Add Document"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Select a document from your content library to embed in this block."}),e&&a.jsxs(fe,{onClick:()=>c(!0),className:"flex items-center space-x-2",children:[a.jsx(Zn,{className:"w-4 h-4"}),a.jsx("span",{children:"Select Document"})]})]}):a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden group hover:shadow-md transition-shadow",children:[a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(Ot,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:E}),A&&a.jsx("p",{className:"text-gray-600 text-sm line-clamp-3 mb-3",children:A}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(At,{variant:"outline",className:ge("text-xs",T==="embedded"&&"border-green-300 text-green-700",T==="modal"&&"border-blue-300 text-blue-700",T==="new_tab"&&"border-purple-300 text-purple-700"),children:[T==="embedded"&&"Embedded",T==="modal"&&"Modal View",T==="new_tab"&&"New Tab"]}),a.jsx("span",{className:"text-xs text-gray-500",children:"Document"})]})]})]}),e&&a.jsxs("div",{className:"flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsxs(fe,{onClick:()=>c(!0),size:"sm",variant:"outline",className:"flex items-center space-x-1",children:[a.jsx(Dn,{className:"w-4 h-4"}),a.jsx("span",{children:"Change"})]}),a.jsx(fe,{onClick:W,size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 border-red-300",children:"×"})]})]})}),a.jsx("div",{className:"border-t border-gray-100 px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(fe,{onClick:()=>{T==="modal"?f(!0):T==="new_tab"&&window.open(`/content/documents/${_}`,"_blank")},size:"sm",className:"flex items-center space-x-2",children:[T==="embedded"&&a.jsxs(a.Fragment,{children:[a.jsx(ii,{className:"w-4 h-4"}),a.jsx("span",{children:"View Document"})]}),T==="modal"&&a.jsxs(a.Fragment,{children:[a.jsx(Jg,{className:"w-4 h-4"}),a.jsx("span",{children:"Open Modal"})]}),T==="new_tab"&&a.jsxs(a.Fragment,{children:[a.jsx(Os,{className:"w-4 h-4"}),a.jsx("span",{children:"Open in New Tab"})]})]}),a.jsxs(fe,{onClick:()=>{console.log("Download document:",_)},size:"sm",variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(yy,{className:"w-4 h-4"}),a.jsx("span",{children:"Download"})]})]}),e&&a.jsx("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[{mode:"embedded",icon:ii,label:"Embedded"},{mode:"modal",icon:Jg,label:"Modal"},{mode:"new_tab",icon:Os,label:"New Tab"}].map(({mode:V,icon:D,label:U})=>a.jsxs("button",{onClick:()=>K(V),className:ge("px-2 py-1 text-xs rounded-md transition-colors flex items-center space-x-1",T===V?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-900"),title:U,children:[a.jsx(D,{className:"w-3 h-3"}),a.jsx("span",{className:"hidden sm:inline",children:U})]},V))})]})}),T==="embedded"&&a.jsx("div",{className:"border-t border-gray-100 p-4",children:z()})]});return a.jsxs("div",{className:ge("relative",r&&e&&"ring-2 ring-blue-500 ring-offset-2 rounded-lg p-2",o),onClick:i,children:[q(),a.jsx(eW,{isOpen:l,onClose:()=>c(!1),onSelect:M,contentType:"document",title:"Select Document",description:"Choose a document to embed in this block",allowUpload:!0}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"relative w-full max-w-6xl max-h-full bg-white rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:E}),A&&a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:A})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{onClick:()=>{console.log("Download document:",_)},size:"sm",variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(yy,{className:"w-4 h-4"}),a.jsx("span",{children:"Download"})]}),a.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600 p-2",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",style:{maxHeight:"calc(90vh - 120px)"},children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[z(),m>1&&a.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-6",children:[a.jsxs(fe,{onClick:R,disabled:d===1,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(r_,{className:"w-4 h-4"}),a.jsx("span",{children:"Previous"})]}),a.jsx("div",{className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 rounded-lg",children:a.jsxs("span",{className:"text-sm font-medium",children:["Page ",d," of ",m]})}),a.jsxs(fe,{onClick:P,disabled:d===m,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[a.jsx("span",{children:"Next"}),a.jsx(jh,{className:"w-4 h-4"})]})]}),a.jsxs("div",{className:"flex justify-center items-center space-x-3 mt-4",children:[a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:$,disabled:y<=50,className:"p-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",title:"Zoom out",children:a.jsx(NM,{className:"w-4 h-4"})}),a.jsxs("span",{className:"px-2 text-sm font-medium",children:[y,"%"]}),a.jsx("button",{onClick:L,disabled:y>=200,className:"p-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",title:"Zoom in",children:a.jsx(SM,{className:"w-4 h-4"})})]}),a.jsx("button",{onClick:F,className:"p-2 bg-gray-100 text-gray-600 hover:text-gray-800 rounded-lg",title:"Rotate 90°",children:a.jsx(bM,{className:"w-4 h-4"})})]})]})})]})})]})}function SOe({block:t,isSelected:e=!1,isEditing:r=!1,onSelect:n,onEdit:i,onBlockChange:s,className:o}){const l=t.content,{prompt_id:c,title:u="Prompt",preview_text:f,show_copy_button:d=!0,allow_customization:p=!1}=l||{},[m,x]=O.useState(!1),[y,v]=O.useState(!1),[b,w]=O.useState(!1),N=E=>{var T;const A={prompt_id:E.id,title:E.title,preview_text:E.description||((T=E.content)==null?void 0:T.substring(0,200))+"...",show_copy_button:!0,allow_customization:!1};s&&s(t.id,{content:A}),w(!1)},j=()=>{s&&s(t.id,{content:{prompt_id:"",title:"Prompt",show_copy_button:!0}})},k=async()=>{if(f)try{await navigator.clipboard.writeText(f),x(!0),setTimeout(()=>x(!1),2e3)}catch(E){console.error("Failed to copy prompt:",E)}},_=async()=>{if(c){v(!0);try{window.open(`/prompts/${c}`,"_blank")}catch(E){console.error("Failed to view prompt:",E)}finally{v(!1)}}};return r&&!c?a.jsxs("div",{className:ge("border-2 border-dashed border-indigo-300 rounded-lg p-8 text-center bg-indigo-50",o),children:[a.jsx("div",{className:"text-indigo-400 mb-4",children:a.jsx(Gr,{className:"w-12 h-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-indigo-900 mb-2",children:"Select a Prompt"}),a.jsx("p",{className:"text-indigo-600 text-sm mb-4",children:"Choose a prompt template from your repository to embed here."}),a.jsxs(fe,{onClick:()=>w(!0),variant:"outline",size:"sm",className:"border-indigo-300 text-indigo-600 hover:bg-indigo-100",children:[a.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Select Prompt"]})]}):a.jsxs("div",{className:ge("border border-gray-200 rounded-lg p-6 bg-white hover:shadow-md transition-shadow",e&&"ring-2 ring-blue-500",o),onClick:n,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(Gr,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:u}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Prompt Template"})]})]}),r&&a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(fe,{onClick:()=>w(!0),variant:"ghost",size:"sm",className:"flex items-center space-x-1",title:"Change prompt",children:[a.jsx(C0,{className:"w-4 h-4"}),a.jsx("span",{children:"Change"})]}),a.jsx(fe,{onClick:j,variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",title:"Remove prompt",children:"×"})]})]}),f&&a.jsx("div",{className:"mb-4",children:a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border text-sm text-gray-700 max-h-32 overflow-y-auto",children:f})}),c&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{onClick:_,disabled:y,className:"flex items-center space-x-2",children:[y?a.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-white border-t-transparent rounded-full"}):a.jsx(Os,{className:"w-4 h-4"}),a.jsx("span",{children:"View Full Prompt"})]}),d&&f&&a.jsxs(fe,{onClick:k,variant:"outline",size:"sm",className:"flex items-center space-x-1",children:[m?a.jsx(ln,{className:"w-3 h-3 text-green-600"}):a.jsx(gy,{className:"w-3 h-3"}),a.jsx("span",{children:m?"Copied!":"Copy"})]})]}),!c&&!r&&a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No prompt selected"}),a.jsx(GC,{isOpen:b,onClose:()=>w(!1),onSelect:N,contentType:"prompt",title:"Select Prompt",description:"Choose a prompt template to embed in this block"})]})}const NOe=Mi(SOe);function kOe({block:t,isSelected:e=!1,isEditing:r=!1,onSelect:n,onEdit:i,onBlockChange:s,userContext:o,className:l}){const c=t.content,{automation_id:u,automation_name:f="Automation",automation_url:d,required_tools:p=[],description:m,display_mode:x="embedded"}=c||{},[y,v]=O.useState(!1),[b,w]=O.useState(!1),N=_=>{var A,T;const E={automation_id:_.id,automation_name:_.title,description:_.description,automation_url:((A=_.metadata)==null?void 0:A.automation_url)||_.file_url,required_tools:((T=_.metadata)==null?void 0:T.required_tools)||[],display_mode:"embedded"};s&&s(t.id,{content:E}),w(!1)},j=()=>{s&&s(t.id,{content:{automation_id:"",automation_name:"Automation",display_mode:"embedded"}})},k=async()=>{if(d){v(!0);try{window.open(d,"_blank")}catch(_){console.error("Failed to run automation:",_)}finally{v(!1)}}};return r&&!u?a.jsxs("div",{className:ge("border-2 border-dashed border-blue-300 rounded-lg p-8 text-center bg-blue-50",l),children:[a.jsx("div",{className:"text-blue-400 mb-4",children:a.jsx(Ei,{className:"w-12 h-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Select an Automation"}),a.jsx("p",{className:"text-blue-600 text-sm mb-4",children:"Choose an automation from your repository to embed here."}),a.jsxs(fe,{onClick:()=>w(!0),variant:"outline",size:"sm",className:"border-blue-300 text-blue-600 hover:bg-blue-100",children:[a.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Select Automation"]})]}):a.jsxs("div",{className:ge("border border-gray-200 rounded-lg p-6 bg-white hover:shadow-md transition-shadow",e&&"ring-2 ring-blue-500",l),onClick:n,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:a.jsx(Ei,{className:"w-5 h-5 text-yellow-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:f}),m&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m})]})]}),r&&a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(fe,{onClick:()=>w(!0),variant:"ghost",size:"sm",className:"flex items-center space-x-1",title:"Change automation",children:[a.jsx(C0,{className:"w-4 h-4"}),a.jsx("span",{children:"Change"})]}),a.jsx(fe,{onClick:j,variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",title:"Remove automation",children:"×"})]})]}),p&&p.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Required Tools:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:p.map((_,E)=>a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:_},E))})]}),d&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{onClick:k,disabled:y,className:"flex items-center space-x-2",children:[y?a.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-white border-t-transparent rounded-full"}):a.jsx(si,{className:"w-4 h-4"}),a.jsx("span",{children:"Run Automation"})]}),a.jsxs(fe,{onClick:()=>window.open(d,"_blank"),variant:"outline",size:"sm",className:"flex items-center space-x-1",children:[a.jsx(Os,{className:"w-3 h-3"}),a.jsx("span",{children:"Open"})]})]}),!d&&!r&&a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No automation URL configured"}),a.jsx(GC,{isOpen:b,onClose:()=>w(!1),onSelect:N,contentType:"automation",title:"Select Automation",description:"Choose an automation workflow to embed in this block"})]})}const _Oe=Mi(kOe);function OOe({item:t,index:e,isEditing:r,onUpdate:n,onDelete:i}){const[s,o]=O.useState(!1),[l,c]=O.useState(t),[u,f]=O.useState(t.is_open_by_default||!1),{attributes:d,listeners:p,setNodeRef:m,transform:x,transition:y,isDragging:v}=KC({id:t.id}),b={transform:Rs.Transform.toString(x),transition:y},w=()=>{n(t.id,l),o(!1)},N=()=>{c(t),o(!1)};return a.jsx("div",{ref:m,style:b,className:ge("border rounded-lg overflow-hidden transition-colors group",v&&"opacity-50",s?"border-blue-300 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:s?a.jsx("div",{className:"p-4 space-y-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[r&&a.jsx("button",{...d,...p,className:"mt-2 p-1 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing",title:"Drag to reorder",children:a.jsx(s_,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section Title"}),a.jsx(ct,{value:l.title,onChange:j=>c({...l,title:j.target.value}),placeholder:"Enter section title...",className:"font-medium"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),a.jsx(Ai,{value:l.content,onChange:j=>c({...l,content:j.target.value}),placeholder:"Enter section content...",className:"min-h-[120px] resize-none"})]}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:l.is_open_by_default||!1,onChange:j=>c({...l,is_open_by_default:j.target.checked}),className:"form-checkbox text-blue-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Open by default"})]})}),a.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-2 border-t border-gray-200",children:[a.jsxs(fe,{onClick:N,size:"sm",variant:"outline",children:[a.jsx($r,{className:"w-4 h-4 mr-1"}),"Cancel"]}),a.jsxs(fe,{onClick:w,size:"sm",children:[a.jsx(ko,{className:"w-4 h-4 mr-1"}),"Save"]})]})]})]})}):a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("button",{onClick:()=>f(!u),className:"w-full px-4 py-3 text-left bg-gray-50 hover:bg-gray-100 transition-colors flex items-center justify-between focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset","aria-expanded":u,children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[r&&a.jsx("button",{...d,...p,className:"opacity-0 group-hover:opacity-100 p-1 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing",title:"Drag to reorder",onClick:j=>j.stopPropagation(),children:a.jsx(s_,{className:"w-4 h-4"})}),a.jsx("span",{className:"font-medium text-gray-900",children:t.title})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[r&&a.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100",onClick:j=>j.stopPropagation(),children:[a.jsx(fe,{onClick:()=>o(!0),size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:a.jsx(yo,{className:"w-3 h-3"})}),a.jsx(fe,{onClick:()=>i(t.id),size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:a.jsx(ns,{className:"w-3 h-3"})})]}),u?a.jsx(CO,{className:"w-5 h-5 text-gray-500"}):a.jsx(mo,{className:"w-5 h-5 text-gray-500"})]})]})}),a.jsx("div",{className:ge("transition-all duration-200 ease-in-out overflow-hidden",u?"max-h-screen":"max-h-0"),children:a.jsxs("div",{className:"p-4 bg-white border-t border-gray-100",children:[t.html?a.jsx("div",{className:"prose prose-gray max-w-none text-sm",dangerouslySetInnerHTML:{__html:t.html}}):a.jsx("p",{className:"text-gray-700 leading-relaxed text-sm whitespace-pre-wrap",children:t.content}),r&&!t.content&&!t.html&&a.jsx("p",{className:"text-gray-400 italic text-sm",children:"No content added yet"})]})})]})})}function EOe({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n}){const i=t.content,{items:s=[],allow_multiple_open:o=!0}=i||{},[l,c]=O.useState(new Set(s.filter(j=>j.is_open_by_default).map(j=>j.id))),[u,f]=O.useState(null),[d,p]=O.useState(!1),m=Fx(Bx(Ad,{activationConstraint:{distance:8}})),x=j=>{n&&n({...i,...j})},y=()=>{const k={id:`accordion_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:"New Section",content:"Enter content for this section...",is_open_by_default:!1};x({items:[...s,k]})},v=(j,k)=>{const _=s.map(E=>E.id===j?{...E,...k}:E);x({items:_})},b=j=>{const k=s.filter(_=>_.id!==j);x({items:k})},w=j=>{const{active:k,over:_}=j;if(_&&k.id!==_.id){const E=s.findIndex(T=>T.id===k.id),A=s.findIndex(T=>T.id===_.id);if(E!==-1&&A!==-1){const T=Td(s,E,A);x({items:T})}}f(null)},N=j=>{c(k=>{const _=new Set(k);return _.has(j)?_.delete(j):(o||_.clear(),_.add(j)),_})};return e&&r?a.jsxs("div",{className:ge("border border-gray-300 rounded-lg overflow-hidden","ring-2 ring-blue-500 ring-offset-2"),children:[a.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Accordion Block"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create collapsible sections with expandable content"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{onClick:()=>p(!d),size:"sm",variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(Dn,{className:"w-4 h-4"}),a.jsx("span",{children:"Settings"})]}),a.jsxs(fe,{onClick:y,size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Section"})]})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[s.length," section",s.length!==1?"s":""]}),d&&a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mt-4",children:a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:o,onChange:j=>x({allow_multiple_open:j.target.checked}),className:"form-checkbox text-blue-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Allow multiple sections to be open at once"})]})})]}),a.jsx("div",{className:"p-6",children:s.length===0?a.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[a.jsx(Sh,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Sections Yet"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Add your first accordion section to get started"}),a.jsxs(fe,{onClick:y,className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add First Section"})]})]}):a.jsxs(Ux,{sensors:m,onDragStart:j=>f(j.active.id),onDragEnd:w,children:[a.jsx("div",{className:"space-y-3",children:a.jsx(Wx,{items:s.map(j=>j.id),strategy:Hx,children:s.map((j,k)=>a.jsx(OOe,{item:j,index:k,isEditing:!0,onUpdate:v,onDelete:b},j.id))})}),a.jsx(VC,{children:u?a.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-4 shadow-lg",children:["Section ",s.findIndex(j=>j.id===u)+1]}):null})]})})]}):s.length===0?a.jsx("div",{className:"text-gray-400 italic py-4 text-center",children:"No accordion items configured"}):a.jsx("div",{className:"space-y-2",children:s.map((j,k)=>{const _=l.has(j.id);return a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsxs("button",{onClick:()=>N(j.id),className:"w-full px-4 py-3 text-left bg-gray-50 hover:bg-gray-100 transition-colors flex items-center justify-between focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset","aria-expanded":_,children:[a.jsx("span",{className:"font-medium text-gray-900",children:j.title}),_?a.jsx(CO,{className:"w-5 h-5 text-gray-500"}):a.jsx(mo,{className:"w-5 h-5 text-gray-500"})]}),a.jsx("div",{className:ge("transition-all duration-200 ease-in-out overflow-hidden",_?"max-h-screen":"max-h-0"),children:a.jsx("div",{className:"p-4 bg-white border-t border-gray-100",children:j.html?a.jsx("div",{className:"prose prose-gray max-w-none",dangerouslySetInnerHTML:{__html:j.html}}):a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:j.content})})})]},j.id)})})}const COe=Mi(EOe);function AOe({question:t,index:e,isEditing:r,onUpdate:n,onDelete:i}){var k;const[s,o]=O.useState(!1),[l,c]=O.useState(t),{attributes:u,listeners:f,setNodeRef:d,transform:p,transition:m,isDragging:x}=KC({id:t.id}),y={transform:Rs.Transform.toString(p),transition:m},v=()=>{n(t.id,l),o(!1)},b=()=>{c(t),o(!1)},w=()=>{const _=[...l.options||[],"New Option"];c({...l,options:_})},N=(_,E)=>{const A=[...l.options];A[_]=E,c({...l,options:A})},j=_=>{const E=l.options.filter((A,T)=>T!==_);c({...l,options:E})};return a.jsx("div",{ref:d,style:y,className:ge("border rounded-lg p-4 transition-colors group",x&&"opacity-50",s?"border-blue-300 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:a.jsxs("div",{className:"flex items-start space-x-3",children:[r&&a.jsx("button",{...u,...f,className:"opacity-0 group-hover:opacity-100 mt-1 p-1 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing",title:"Drag to reorder",children:a.jsx(s_,{className:"w-4 h-4"})}),a.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-800 text-sm font-medium rounded-full flex items-center justify-center mt-1",children:e+1}),a.jsx("div",{className:"flex-1",children:s?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question"}),a.jsx(Ai,{value:l.question,onChange:_=>c({...l,question:_.target.value}),placeholder:"Enter your question...",className:"min-h-[80px]"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Type"}),a.jsxs(ec,{value:l.type,onValueChange:_=>c({...l,type:_}),children:[a.jsx(Da,{children:a.jsx(tc,{})}),a.jsxs(La,{children:[a.jsx(kt,{value:"multiple_choice",children:"Multiple Choice"}),a.jsx(kt,{value:"true_false",children:"True/False"}),a.jsx(kt,{value:"short_answer",children:"Short Answer"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points"}),a.jsx(ct,{type:"number",value:l.points,onChange:_=>c({...l,points:parseInt(_.target.value)||1}),min:"1",className:"w-full"})]})]}),l.type==="multiple_choice"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer Options"}),a.jsxs("div",{className:"space-y-2",children:[(k=l.options)==null?void 0:k.map((_,E)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ct,{value:_,onChange:A=>N(E,A.target.value),placeholder:`Option ${E+1}`,className:"flex-1"}),a.jsx(fe,{onClick:()=>c({...l,correct_answer:_}),size:"sm",variant:l.correct_answer===_?"default":"outline",className:"shrink-0",children:l.correct_answer===_?"Correct":"Set Correct"}),a.jsx(fe,{onClick:()=>j(E),size:"sm",variant:"ghost",className:"shrink-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:a.jsx(ns,{className:"w-4 h-4"})})]},E)),a.jsxs(fe,{onClick:w,size:"sm",variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Option"})]})]})]}),l.type!=="multiple_choice"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer"}),l.type==="true_false"?a.jsxs(ec,{value:l.correct_answer,onValueChange:_=>c({...l,correct_answer:_}),children:[a.jsx(Da,{className:"w-32",children:a.jsx(tc,{})}),a.jsxs(La,{children:[a.jsx(kt,{value:"True",children:"True"}),a.jsx(kt,{value:"False",children:"False"})]})]}):a.jsx(ct,{value:l.correct_answer,onChange:_=>c({...l,correct_answer:_.target.value}),placeholder:"Enter the correct answer..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Explanation (Optional)"}),a.jsx(Ai,{value:l.explanation||"",onChange:_=>c({...l,explanation:_.target.value}),placeholder:"Explain why this answer is correct...",className:"min-h-[60px]"})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-2 border-t border-gray-200",children:[a.jsxs(fe,{onClick:b,size:"sm",variant:"outline",children:[a.jsx($r,{className:"w-4 h-4 mr-1"}),"Cancel"]}),a.jsxs(fe,{onClick:v,size:"sm",children:[a.jsx(ko,{className:"w-4 h-4 mr-1"}),"Save"]})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("p",{className:"font-medium text-gray-900 flex-1",children:[t.question,a.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",t.points," pt",t.points!==1?"s":"",")"]})]}),r&&a.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100",children:[a.jsx(fe,{onClick:()=>o(!0),size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:a.jsx(yo,{className:"w-3 h-3"})}),a.jsx(fe,{onClick:()=>i(t.id),size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:a.jsx(ns,{className:"w-3 h-3"})})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Type:"})," ",t.type==="multiple_choice"?"Multiple Choice":t.type==="true_false"?"True/False":"Short Answer",t.type==="multiple_choice"&&t.options&&a.jsxs("span",{className:"ml-2",children:["(",t.options.length," options)"]})]}),t.correct_answer&&a.jsxs("div",{className:"text-sm text-green-600",children:[a.jsx("strong",{children:"Answer:"})," ",String(t.correct_answer)]})]})})]})})}function TOe({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n,onComplete:i}){const s=t.content,{title:o="Quiz",description:l="",questions:c=[],time_limit:u,passing_score:f=70,allow_retries:d=!0,show_results_immediately:p=!0}=s||{},[m,x]=O.useState({}),[y,v]=O.useState(!1),[b,w]=O.useState(null),[N,j]=O.useState(u?u*60:null),[k,_]=O.useState(!1),[E,A]=O.useState(o),[T,M]=O.useState(l),[P,R]=O.useState(!1),[L,$]=O.useState(null),F=Fx(Bx(Ad,{activationConstraint:{distance:8}})),z=J=>{n&&n({...s,...J})},W=()=>{const ne={id:`q_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,question:"New Question",type:"multiple_choice",options:["Option 1","Option 2"],correct_answer:"Option 1",points:1};z({questions:[...c,ne]})},K=(J,ne)=>{const te=c.map(se=>se.id===J?{...se,...ne}:se);z({questions:te})},q=J=>{const ne=c.filter(te=>te.id!==J);z({questions:ne})},V=J=>{const{active:ne,over:te}=J;if(te&&ne.id!==te.id){const se=c.findIndex(ie=>ie.id===ne.id),ve=c.findIndex(ie=>ie.id===te.id);if(se!==-1&&ve!==-1){const ie=Td(c,se,ve);z({questions:ie})}}$(null)},D=()=>{z({title:E,description:T})},U=(J,ne)=>{x(te=>({...te,[J]:ne}))},G=()=>{let J=0,ne=0;return c.forEach(te=>{J+=te.points;const se=m[te.id];te.type==="multiple_choice"||te.type==="true_false"?se===te.correct_answer&&(ne+=te.points):te.type==="short_answer"&&se&&se.toLowerCase().trim()===String(te.correct_answer).toLowerCase().trim()&&(ne+=te.points)}),J>0?Math.round(ne/J*100):0},ee=()=>{const J=G();w(J),v(!0),p&&_(!0),i==null||i(J,m)},Q=()=>{x({}),v(!1),w(null),_(!1),j(u?u*60:null)},H=J=>m[J]!==void 0&&m[J]!=="",Y=c.every(J=>H(J.id)),re=b!==null&&b>=f;return O.useEffect(()=>{if(N!==null&&N>0&&!y){const J=setTimeout(()=>{j(ne=>ne-1)},1e3);return()=>clearTimeout(J)}else N===0&&!y&&ee()},[N,y]),O.useEffect(()=>{if(e){const J=setTimeout(()=>{(E!==o||T!==l)&&D()},1e3);return()=>clearTimeout(J)}},[E,T,e]),e&&r?a.jsxs("div",{className:ge("border border-gray-300 rounded-lg overflow-hidden","ring-2 ring-blue-500 ring-offset-2"),children:[a.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quiz Title"}),a.jsx(ct,{value:E,onChange:J=>A(J.target.value),placeholder:"Enter quiz title...",className:"font-semibold"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),a.jsx(Ai,{value:T,onChange:J=>M(J.target.value),placeholder:"Enter quiz description...",className:"min-h-[60px] resize-none"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:[c.length," question",c.length!==1?"s":""]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{onClick:()=>R(!P),size:"sm",variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(Dn,{className:"w-4 h-4"}),a.jsx("span",{children:"Settings"})]}),a.jsxs(fe,{onClick:W,size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Question"})]})]})]}),P&&a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Limit (minutes)"}),a.jsx(ct,{type:"number",value:u||"",onChange:J=>z({time_limit:J.target.value?parseInt(J.target.value):void 0}),placeholder:"No limit",min:"1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Passing Score (%)"}),a.jsx(ct,{type:"number",value:f,onChange:J=>z({passing_score:parseInt(J.target.value)||70}),min:"0",max:"100"})]})]}),a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:d,onChange:J=>z({allow_retries:J.target.checked}),className:"form-checkbox text-blue-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Allow retries"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:p,onChange:J=>z({show_results_immediately:J.target.checked}),className:"form-checkbox text-blue-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Show results immediately"})]})]})]})]})}),a.jsx("div",{className:"p-6",children:c.length===0?a.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[a.jsx(AO,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Questions Yet"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Add your first question to get started"}),a.jsxs(fe,{onClick:W,className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add First Question"})]})]}):a.jsxs(Ux,{sensors:F,onDragStart:J=>$(J.active.id),onDragEnd:V,children:[a.jsx("div",{className:"space-y-4",children:a.jsx(Wx,{items:c.map(J=>J.id),strategy:Hx,children:c.map((J,ne)=>a.jsx(AOe,{question:J,index:ne,isEditing:!0,onUpdate:K,onDelete:q},J.id))})}),a.jsx(VC,{children:L?a.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-4 shadow-lg",children:["Question ",c.findIndex(J=>J.id===L)+1]}):null})]})})]}):c.length===0?a.jsx("div",{className:"text-gray-400 italic py-8 text-center",children:"No quiz questions configured"}):a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"bg-blue-50 px-6 py-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:o}),l&&a.jsx("p",{className:"text-gray-600 mt-1",children:l})]}),N!==null&&!y&&a.jsxs("div",{className:"flex items-center space-x-2 bg-white px-3 py-2 rounded-lg border",children:[a.jsx(go,{className:"w-4 h-4 text-gray-500"}),a.jsxs("span",{className:ge("font-mono text-sm",N<60?"text-red-600 font-bold":"text-gray-700"),children:[Math.floor(N/60),":",String(N%60).padStart(2,"0")]})]})]}),y&&b!==null&&a.jsxs("div",{className:ge("mt-4 p-3 rounded-lg flex items-center space-x-2",re?"bg-green-100 border border-green-200":"bg-red-100 border border-red-200"),children:[re?a.jsx(ko,{className:"w-5 h-5 text-green-600"}):a.jsx($r,{className:"w-5 h-5 text-red-600"}),a.jsxs("span",{className:ge("font-medium",re?"text-green-800":"text-red-800"),children:["Score: ",b,"% ",re?"(Passed)":`(Failed - ${f}% required)`]})]})]}),a.jsx("div",{className:"p-6 space-y-6",children:c.map((J,ne)=>{const te=m[J.id],se=y&&te===J.correct_answer,ve=y&&te!==J.correct_answer;return a.jsx("div",{className:ge("border rounded-lg p-4 transition-colors",y&&se&&"border-green-300 bg-green-50",y&&ve&&"border-red-300 bg-red-50",!y&&"border-gray-200"),children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-800 text-sm font-medium rounded-full flex items-center justify-center",children:ne+1}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"font-medium text-gray-900 mb-3",children:[J.question,a.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",J.points," pt",J.points!==1?"s":"",")"]})]}),J.type==="multiple_choice"&&J.options&&a.jsx("div",{className:"space-y-2",children:J.options.map((ie,ye)=>a.jsxs("label",{className:ge("flex items-center space-x-2 p-2 rounded cursor-pointer transition-colors",!y&&"hover:bg-gray-50",y&&ie===J.correct_answer&&"bg-green-100 border border-green-300",y&&ie===te&&ie!==J.correct_answer&&"bg-red-100 border border-red-300"),children:[a.jsx("input",{type:"radio",name:`question-${J.id}`,value:ie,checked:te===ie,disabled:y,onChange:Te=>U(J.id,Te.target.value),className:"form-radio text-blue-600"}),a.jsx("span",{className:ge("text-gray-700",y&&ie===J.correct_answer&&"font-medium text-green-800",y&&ie===te&&ie!==J.correct_answer&&"text-red-800"),children:ie})]},ye))}),J.type==="true_false"&&a.jsx("div",{className:"space-y-2",children:["True","False"].map(ie=>a.jsxs("label",{className:ge("flex items-center space-x-2 p-2 rounded cursor-pointer transition-colors",!y&&"hover:bg-gray-50",y&&ie===J.correct_answer&&"bg-green-100 border border-green-300",y&&ie===te&&ie!==J.correct_answer&&"bg-red-100 border border-red-300"),children:[a.jsx("input",{type:"radio",name:`question-${J.id}`,value:ie,checked:te===ie,disabled:y,onChange:ye=>U(J.id,ye.target.value),className:"form-radio text-blue-600"}),a.jsx("span",{children:ie})]},ie))}),J.type==="short_answer"&&a.jsx("input",{type:"text",value:te||"",disabled:y,onChange:ie=>U(J.id,ie.target.value),placeholder:"Enter your answer...",className:ge("w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",y&&se&&"border-green-300 bg-green-50",y&&ve&&"border-red-300 bg-red-50")}),y&&k&&J.explanation&&a.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded",children:a.jsxs("p",{className:"text-blue-800 text-sm",children:[a.jsx("strong",{children:"Explanation:"})," ",J.explanation]})})]})]})},J.id)})}),a.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Questions answered: ",Object.keys(m).length," of ",c.length]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[y&&!re&&d&&a.jsx("button",{onClick:Q,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Retry Quiz"}),!y&&a.jsx("button",{onClick:ee,disabled:!Y,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit Quiz"}),y&&p&&!k&&a.jsx("button",{onClick:()=>_(!0),className:"px-4 py-2 text-sm font-medium text-blue-700 bg-blue-100 border border-blue-300 rounded-md hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Show Answers"})]})]})})]})}const POe=Mi(TOe);function MOe({block:t,isSelected:e=!1,isEditing:r=!1,onSelect:n,onEdit:i,onBlockChange:s,className:o}){const l=t.content,{title:c="Submit Your Work",description:u,submission_type:f="text",instructions:d="Please provide your submission below",max_file_size:p,allowed_file_types:m=[],required_fields:x=[],auto_grade:y=!1}=l||{},[v,b]=O.useState({}),[w,N]=O.useState(null),[j,k]=O.useState(!1),[_,E]=O.useState(!1),[A,T]=O.useState(!1),M=K=>{N(K.target.files)},P=async()=>{k(!0);try{await new Promise(K=>setTimeout(K,2e3)),console.log("Submission:",{blockId:t.id,submissionType:f,submission:v,files:w?Array.from(w):[]}),E(!0)}catch(K){console.error("Failed to submit:",K)}finally{k(!1)}},L=(()=>{switch(f){case"file":return IB;case"url":return E0;case"text":return Ot;default:return Ir}})(),$=K=>{s&&s(t.id,{content:{...l,...K}})},F=()=>{const K={name:`field_${Date.now()}`,label:"New Field",type:"text",required:!0};$({required_fields:[...x||[],K]})},z=(K,q)=>{const V=[...x||[]];V[K]={...V[K],...q},$({required_fields:V})},W=K=>{const q=[...x||[]];q.splice(K,1),$({required_fields:q})};return r?a.jsx("div",{className:ge("border-2 border-dashed border-orange-300 rounded-lg bg-orange-50",o),children:A?a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-orange-900",children:"Configure User Submission"}),a.jsx(fe,{onClick:()=>T(!1),variant:"ghost",size:"sm",className:"text-orange-600 hover:bg-orange-100",children:a.jsx($r,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),a.jsx(ct,{value:c,onChange:K=>$({title:K.target.value}),placeholder:"Submit Your Work"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Submission Type"}),a.jsxs(ec,{value:f,onValueChange:K=>$({submission_type:K}),children:[a.jsx(Da,{children:a.jsx(tc,{})}),a.jsxs(La,{children:[a.jsx(kt,{value:"text",children:"Text Submission"}),a.jsx(kt,{value:"file",children:"Single File"}),a.jsx(kt,{value:"multiple",children:"Multiple Files"}),a.jsx(kt,{value:"url",children:"URL/Link"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),a.jsx(ct,{value:u||"",onChange:K=>$({description:K.target.value}),placeholder:"Brief description of the submission"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructions"}),a.jsx(Ai,{value:d,onChange:K=>$({instructions:K.target.value}),placeholder:"Please provide your submission below",rows:3})]}),(f==="file"||f==="multiple")&&a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg space-y-4",children:[a.jsx("h4",{className:"font-medium text-blue-900",children:"File Upload Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max File Size (MB)"}),a.jsx(ct,{type:"number",value:p?Math.round(p/(1024*1024)):"",onChange:K=>{const q=parseInt(K.target.value)||0;$({max_file_size:q*1024*1024})},placeholder:"10",min:"1",max:"100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allowed File Types (comma separated)"}),a.jsx(ct,{value:(m==null?void 0:m.join(", "))||"",onChange:K=>{const q=K.target.value.split(",").map(V=>V.trim()).filter(Boolean);$({allowed_file_types:q})},placeholder:".pdf, .docx, .txt, image/*"})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Additional Fields"}),a.jsxs(fe,{onClick:F,variant:"outline",size:"sm",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[a.jsx(Vt,{className:"w-4 h-4 mr-1"}),"Add Field"]})]}),x&&x.length>0?a.jsx("div",{className:"space-y-3",children:x.map((K,q)=>a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Field ",q+1]}),a.jsx(fe,{onClick:()=>W(q),variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-50",children:a.jsx(ns,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Field Name"}),a.jsx(ct,{value:K.name,onChange:V=>z(q,{name:V.target.value}),placeholder:"field_name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Label"}),a.jsx(ct,{value:K.label,onChange:V=>z(q,{label:V.target.value}),placeholder:"Field Label"})]}),a.jsxs("div",{className:"flex items-end gap-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),a.jsxs(ec,{value:K.type,onValueChange:V=>z(q,{type:V}),children:[a.jsx(Da,{className:"h-9",children:a.jsx(tc,{})}),a.jsxs(La,{children:[a.jsx(kt,{value:"text",children:"Text"}),a.jsx(kt,{value:"email",children:"Email"}),a.jsx(kt,{value:"number",children:"Number"}),a.jsx(kt,{value:"tel",children:"Phone"}),a.jsx(kt,{value:"date",children:"Date"}),a.jsx(kt,{value:"textarea",children:"Long Text"})]})]})]}),a.jsxs("div",{className:"flex items-center h-9",children:[a.jsx("input",{type:"checkbox",id:`required-${q}`,checked:K.required,onChange:V=>z(q,{required:V.target.checked}),className:"mr-2"}),a.jsx("label",{htmlFor:`required-${q}`,className:"text-xs text-gray-600",children:"Required"})]})]})]})]},q))}):a.jsx("p",{className:"text-sm text-gray-500 italic",children:'No additional fields configured. Click "Add Field" to create custom form fields.'})]}),a.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"auto-grade",checked:y||!1,onChange:K=>$({auto_grade:K.target.checked}),className:"mr-3"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"auto-grade",className:"text-sm font-medium text-green-900",children:"Enable Auto-Grading"}),a.jsx("p",{className:"text-xs text-green-700",children:"Automatically evaluate submissions when possible"})]})]})})]}):a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"text-orange-400 mb-4",children:a.jsx(Ir,{className:"w-12 h-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-orange-900 mb-2",children:"User Submission Block"}),a.jsx("p",{className:"text-orange-600 text-sm mb-4",children:"Configure how users can submit their work."}),a.jsxs(fe,{onClick:()=>T(!0),variant:"outline",size:"sm",className:"border-orange-300 text-orange-600 hover:bg-orange-100",children:[a.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Configure Submission"]})]})}):_?a.jsxs("div",{className:ge("border border-green-200 rounded-lg p-6 bg-green-50 text-center",e&&"ring-2 ring-blue-500",o),onClick:n,children:[a.jsx("div",{className:"text-green-500 mb-4",children:a.jsx(ln,{className:"w-12 h-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"Submission Received!"}),a.jsxs("p",{className:"text-green-700 text-sm",children:["Thank you for your submission. ",y?"Your work is being evaluated automatically.":"Your work will be reviewed soon."]})]}):a.jsxs("div",{className:ge("border border-gray-200 rounded-lg p-6 bg-white",e&&"ring-2 ring-blue-500",o),onClick:n,children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:a.jsx(L,{className:"w-5 h-5 text-orange-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:c}),u&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u})]})]})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Instructions:"})," ",d]})}),a.jsxs("div",{className:"space-y-4",children:[x.map((K,q)=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[K.label," ",K.required&&a.jsx("span",{className:"text-red-500",children:"*"})]}),K.type==="textarea"?a.jsx("textarea",{value:v[K.name]||"",onChange:V=>b(D=>({...D,[K.name]:V.target.value})),placeholder:`Enter ${K.label.toLowerCase()}`,required:K.required,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):a.jsx(ct,{type:K.type||"text",value:v[K.name]||"",onChange:V=>b(D=>({...D,[K.name]:V.target.value})),placeholder:`Enter ${K.label.toLowerCase()}`,required:K.required})]},q)),f==="text"&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Your Submission ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{value:v.content||"",onChange:K=>b(q=>({...q,content:K.target.value})),placeholder:"Enter your submission here...",rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(f==="file"||f==="multiple")&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Upload File(s) ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"file",onChange:M,multiple:f==="multiple",accept:m.join(","),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),p&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum file size: ",Math.round(p/(1024*1024)),"MB"]})]}),f==="url"&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["URL ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(ct,{type:"url",value:v.url||"",onChange:K=>b(q=>({...q,url:K.target.value})),placeholder:"https://example.com",required:!0})]}),a.jsxs(fe,{onClick:P,disabled:j,className:"w-full flex items-center justify-center space-x-2",children:[j?a.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-white border-t-transparent rounded-full"}):a.jsx($B,{className:"w-4 h-4"}),a.jsx("span",{children:j?"Submitting...":"Submit"})]})]})]})}const ROe=Mi(MOe);function tW({block:t,isSelected:e=!1,isEditing:r=!1,onSelect:n,onEdit:i,onProgress:s,onContentChange:o,userContext:l,className:c}){const u={block:t,isSelected:e,isEditing:r,onSelect:n,onEdit:i,className:c},f=d=>{o==null||o(t.id,d)};switch(t.block_type){case"section_header":return a.jsx(v_e,{...u,onContentChange:f});case"rich_text":return a.jsx(b_e,{...u,onContentChange:f});case"image":return a.jsx(j_e,{...u,onContentChange:f});case"list":return a.jsx(uOe,{...u,onContentChange:f});case"quote":return a.jsx(fOe,{...u,onContentChange:f});case"divider":return a.jsx(pOe,{...u});case"video":return a.jsx(xOe,{...u,onContentChange:f});case"agent":return a.jsx(wOe,{...u});case"document":return a.jsx(jOe,{...u,onContentChange:f});case"prompt":return a.jsx(NOe,{...u});case"automation":return a.jsx(_Oe,{...u,userContext:l});case"quiz":return a.jsx(POe,{...u,onComplete:(d,p)=>{console.log("Quiz completed:",{blockId:t.id,score:d,answers:p})}});case"user_submission":return a.jsx(ROe,{...u});case"accordion":return a.jsx(COe,{...u});default:return a.jsxs("div",{className:"border-2 border-dashed border-red-300 rounded-lg p-8 text-center bg-red-50",children:[a.jsx("div",{className:"text-red-400 mb-2",children:a.jsx("svg",{className:"w-8 h-8 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsxs("p",{className:"text-red-600 text-sm font-medium",children:["Unknown Block Type: ",t.block_type]}),a.jsx("p",{className:"text-red-500 text-xs mt-1",children:"This block type is not supported"})]})}}var IOe="Separator",Z6="horizontal",DOe=["horizontal","vertical"],rW=O.forwardRef((t,e)=>{const{decorative:r,orientation:n=Z6,...i}=t,s=LOe(n)?n:Z6,l=r?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return a.jsx($t.div,{"data-orientation":s,...l,...i,ref:e})});rW.displayName=IOe;function LOe(t){return DOe.includes(t)}var nW=rW;const Pd=O.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},i)=>a.jsx(nW,{ref:i,decorative:r,orientation:e,className:ge("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));Pd.displayName=nW.displayName;var YC="Switch",[$Oe,CEe]=Yp(YC),[BOe,FOe]=$Oe(YC),iW=O.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:i,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:f,...d}=t,[p,m]=O.useState(null),x=yr(e,N=>m(N)),y=O.useRef(!1),v=p?f||!!p.closest("form"):!0,[b=!1,w]=v0({prop:i,defaultProp:s,onChange:u});return a.jsxs(BOe,{scope:r,checked:b,disabled:l,children:[a.jsx($t.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":aW(b),"data-disabled":l?"":void 0,disabled:l,value:c,...d,ref:x,onClick:Jt(t.onClick,N=>{w(j=>!j),v&&(y.current=N.isPropagationStopped(),y.current||N.stopPropagation())})}),v&&a.jsx(qOe,{control:p,bubbles:!y.current,name:n,value:c,checked:b,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});iW.displayName=YC;var sW="SwitchThumb",oW=O.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,i=FOe(sW,r);return a.jsx($t.span,{"data-state":aW(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:e})});oW.displayName=sW;var qOe=t=>{const{control:e,checked:r,bubbles:n=!0,...i}=t,s=O.useRef(null),o=$C(r),l=IC(e);return O.useEffect(()=>{const c=s.current,u=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==r&&d){const p=new Event("click",{bubbles:n});d.call(c,r),c.dispatchEvent(p)}},[o,r,n]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:s,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function aW(t){return t?"checked":"unchecked"}var lW=iW,zOe=oW;const kp=O.forwardRef(({className:t,...e},r)=>a.jsx(lW,{className:ge("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:r,children:a.jsx(zOe,{className:ge("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));kp.displayName=lW.displayName;var UOe="Label",cW=O.forwardRef((t,e)=>a.jsx($t.label,{...t,ref:e,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));cW.displayName=UOe;var uW=cW;const HOe=it,WOe=(t,e)=>r=>HOe(t,r==null?void 0:r.class,r==null?void 0:r.className),VOe=WOe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_t=O.forwardRef(({className:t,...e},r)=>a.jsx(uW,{ref:r,className:ge(VOe(),t),...e}));_t.displayName=uW.displayName;const If={ai_agent:"AI Agents",video:"Videos",document:"Documents",prompt:"Prompts",automation:"Automations",image:"Images",pdf:"PDFs"},Gg={ai_agent:"🤖",video:"📹",document:"📄",prompt:"💬",automation:"⚡",image:"🖼️",pdf:"📑"};function KOe({contentType:t,selectedItemId:e,onSelect:r,onCancel:n,className:i}){const{user:s}=Ln(),[o,l]=O.useState([]),[c,u]=O.useState(!0),[f,d]=O.useState(""),[p,m]=O.useState("grid"),[x,y]=O.useState("updated_at"),[v,b]=O.useState("desc"),[w,N]=O.useState("published"),[j,k]=O.useState(null);O.useEffect(()=>{_()},[t,x,v,w]);const _=async()=>{try{u(!0),k(null);let R=pe.from("content_items").select("*");if(t==="image"){const{data:z,error:W}=await pe.from("content_images").select("*").eq("status",w==="all"?void 0:w).order(x,{ascending:v==="asc"});if(W)throw W;l(z||[]);return}if(t==="pdf"){const{data:z,error:W}=await pe.from("content_pdfs").select("*").eq("status",w==="all"?void 0:w).order(x,{ascending:v==="asc"});if(W)throw W;l(z||[]);return}R=R.eq("content_type",t),w!=="all"&&(R=R.eq("status",w)),R=R.order(x,{ascending:v==="asc"});const{data:L,error:$}=await R;if($)throw $;const F=await Promise.all((L||[]).map(async z=>{try{switch(z.content_type){case"ai_agent":{const{data:W}=await pe.from("ai_agents").select("agent_name").eq("content_item_id",z.id).maybeSingle();return{...z,agent_name:W==null?void 0:W.agent_name}}case"video":{const{data:W}=await pe.from("videos").select("video_url").eq("content_item_id",z.id).maybeSingle();return{...z,video_url:W==null?void 0:W.video_url}}case"document":{const{data:W}=await pe.from("documents").select("content_html").eq("content_item_id",z.id).maybeSingle();return{...z,content_html:W==null?void 0:W.content_html}}case"prompt":{const{data:W}=await pe.from("prompts").select("prompt_text").eq("content_item_id",z.id).maybeSingle();return{...z,prompt_text:W==null?void 0:W.prompt_text}}case"automation":{const{data:W}=await pe.from("automations").select("automation_url").eq("content_item_id",z.id).maybeSingle();return{...z,automation_url:W==null?void 0:W.automation_url}}default:return z}}catch(W){return console.error(`Error loading details for ${z.content_type}:`,W),z}}));l(F)}catch(R){console.error("Error loading content:",R),k(R instanceof Error?R.message:"Failed to load content")}finally{u(!1)}},E=O.useMemo(()=>o.filter(R=>{var $,F,z,W;const L=f.toLowerCase();return(($=R.title)==null?void 0:$.toLowerCase().includes(L))||((F=R.description)==null?void 0:F.toLowerCase().includes(L))||((z=R.agent_name)==null?void 0:z.toLowerCase().includes(L))||((W=R.prompt_text)==null?void 0:W.toLowerCase().includes(L))}),[o,f]),A=R=>{x===R?b(v==="asc"?"desc":"asc"):(y(R),b("desc"))},T=R=>{switch(R){case"published":return a.jsxs(At,{className:"bg-green-100 text-green-800 border-green-200",children:[a.jsx(ln,{className:"w-3 h-3 mr-1"}),"Published"]});case"draft":return a.jsxs(At,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[a.jsx(go,{className:"w-3 h-3 mr-1"}),"Draft"]});case"archived":return a.jsxs(At,{className:"bg-gray-100 text-gray-800 border-gray-200",children:[a.jsx(t_,{className:"w-3 h-3 mr-1"}),"Archived"]});default:return a.jsx(At,{variant:"outline",children:R})}},M=R=>new Date(R).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),P=R=>{switch(R.content_type||t){case"ai_agent":return R.agent_name||"AI Agent";case"video":return"Video Content";case"document":return R.content_html?`${R.content_html.length} characters`:"Document";case"prompt":return R.prompt_text?R.prompt_text.substring(0,100)+"...":"Prompt";case"automation":return R.automation_url||"Automation";case"image":return"Image File";case"pdf":return"PDF Document";default:return R.description||"Content Item"}};return c?a.jsx("div",{className:ge("bg-white rounded-lg border border-gray-200 p-6 max-w-4xl mx-auto",i),children:a.jsxs("div",{className:"flex items-center justify-center h-64",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsxs("span",{className:"ml-3 text-gray-600",children:["Loading ",If[t],"..."]})]})}):a.jsxs("div",{className:ge("bg-white rounded-lg border border-gray-200 max-w-4xl mx-auto",i),children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-2xl",children:Gg[t]}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold",children:["Select ",If[t]]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Choose content from your repository"})]})]}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:n,children:a.jsx($r,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ct,{placeholder:`Search ${If[t].toLowerCase()}...`,value:f,onChange:R=>d(R.target.value),className:"pl-10"})]}),a.jsxs("div",{className:"flex border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx(fe,{variant:p==="grid"?"default":"ghost",size:"sm",onClick:()=>m("grid"),className:"rounded-none border-0",children:a.jsx(dd,{className:"h-4 w-4"})}),a.jsx(fe,{variant:p==="list"?"default":"ghost",size:"sm",onClick:()=>m("list"),className:"rounded-none border-0 border-l border-gray-200",children:a.jsx(rs,{className:"h-4 w-4"})})]}),a.jsxs("select",{value:w,onChange:R=>N(R.target.value),className:"border border-gray-200 rounded-lg px-3 py-2 text-sm",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"published",children:"Published Only"}),a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"archived",children:"Archived"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>A("name"),className:ge("flex items-center space-x-1",x==="name"&&"bg-blue-50 border-blue-200"),children:[a.jsx("span",{children:"Name"}),x==="name"&&(v==="asc"?a.jsx(yM,{className:"h-3 w-3"}):a.jsx(gM,{className:"h-3 w-3"}))]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>A("updated_at"),className:ge("flex items-center space-x-1",x==="updated_at"&&"bg-blue-50 border-blue-200"),children:[a.jsx("span",{children:"Modified"}),x==="updated_at"&&(v==="asc"?a.jsx(yM,{className:"h-3 w-3"}):a.jsx(gM,{className:"h-3 w-3"}))]})]})]})]}),a.jsxs("div",{className:"p-6",children:[j&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[a.jsx("p",{className:"text-red-800",children:j}),a.jsx(fe,{variant:"outline",size:"sm",onClick:_,className:"mt-2",children:"Try Again"})]}),E.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("span",{className:"text-6xl mb-4 block",children:Gg[t]}),a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",If[t]," Found"]}),a.jsx("p",{className:"text-gray-600 mb-4",children:f?"Try adjusting your search terms.":`No ${If[t].toLowerCase()} available yet.`}),f&&a.jsx(fe,{variant:"outline",onClick:()=>d(""),children:"Clear Search"})]}):a.jsx("div",{className:ge(p==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-3"),children:E.map(R=>a.jsx("div",{onClick:()=>r(R),className:ge("border border-gray-200 rounded-lg p-4 cursor-pointer transition-all hover:border-blue-300 hover:shadow-md",e===R.id&&"border-blue-500 bg-blue-50",p==="list"&&"flex items-center space-x-4"),children:p==="grid"?a.jsxs("div",{children:[a.jsx("div",{className:"w-full h-32 bg-gray-100 rounded-lg flex items-center justify-center mb-3",children:a.jsx("span",{className:"text-3xl",children:Gg[t]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:R.title}),a.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:P(R)}),a.jsxs("div",{className:"flex items-center justify-between",children:[T(R.status),a.jsx("span",{className:"text-xs text-gray-500",children:M(R.updated_at)})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-xl",children:Gg[t]})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium text-sm truncate",children:R.title}),a.jsx("p",{className:"text-xs text-gray-600 truncate",children:P(R)})]}),a.jsxs("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[T(R.status),a.jsx("span",{className:"text-xs text-gray-500",children:M(R.updated_at)})]})]})},R.id))})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[E.length," ",E.length===1?"item":"items",f&&` matching "${f}"`]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx(fe,{variant:"outline",onClick:n,children:"Cancel"}),a.jsx(fe,{disabled:!e,onClick:()=>{const R=E.find(L=>L.id===e);R&&r(R)},children:"Select Content"})]})]})]})}const GOe={section_header:{icon:DO,label:"Section Header",description:"Create section headings with formatting"},rich_text:{icon:Ot,label:"Rich Text",description:"WYSIWYG text editor with formatting"},list:{icon:rs,label:"List",description:"Bullets, numbers, checkboxes with interactions"},quote:{icon:xy,label:"Quote",description:"Blockquotes with optional author attribution"},divider:{icon:RO,label:"Division",description:"Horizontal rule with spacing controls"},quiz:{icon:AO,label:"Quiz",description:"Interactive quizzes with multiple question types"},accordion:{icon:mo,label:"Accordion",description:"Expandable content sections"},user_submission:{icon:Ir,label:"User Submission",description:"Forms for text and file submissions"}},YOe={video:{icon:UB,label:"Video",description:"Video content from repository"},agent:{icon:Kr,label:"AI Agent",description:"Interactive AI agent conversations"},document:{icon:IB,label:"Document",description:"Rich documents from repository"},prompt:{icon:Gr,label:"Prompts",description:"Interactive prompt execution"},automation:{icon:Ei,label:"Automation",description:"Process automation workflows"},image:{icon:Eu,label:"Image",description:"Images with upload or repository selection"},pdf:{icon:RX,label:"PDF",description:"PDF documents with carousel view"}};function XOe({onBlockAdd:t,onPageCreate:e,onPageSelect:r,pages:n,currentPageId:i,structure:s,onSave:o,onPreview:l,isPreviewMode:c=!1,onStructureUpdate:u,className:f}){const[d,p]=O.useState(null),[m,x]=O.useState(""),[y,v]=O.useState((s==null?void 0:s.title)||""),[b,w]=O.useState((s==null?void 0:s.description)||""),[N,j]=O.useState((s==null?void 0:s.status)==="published"),[k,_]=O.useState(!1),[E,A]=O.useState(!1),[T,M]=O.useState(!1),[P,R]=O.useState(null);O.useEffect(()=>{s&&(v(s.title||""),w(s.description||""),j(s.status==="published"),_(!1))},[s]),O.useEffect(()=>{if(s){const U=y!==(s.title||"")||b!==(s.description||"")||N!==(s.status==="published");_(U)}},[s,y,b,N]);const L=async()=>{if(!(!u||!s||!k)){A(!0);try{await u({title:y,description:b,status:N?"published":"draft"}),_(!1),console.log("Settings saved successfully")}catch(U){console.error("Failed to save settings:",U)}finally{A(!1)}}},$=async U=>{if(!P)return;const ee={video:"video",ai_agent:"agent",document:"document",prompt:"prompt",automation:"automation",image:"image",pdf:"pdf"}[P];ee&&await t(ee),M(!1),R(null),p(null)},F=()=>{M(!1),R(null)},z=U=>{p(d===U?null:U)},W=()=>{p(null)},K=Object.entries(GOe).filter(([U,G])=>m===""||G.label.toLowerCase().includes(m.toLowerCase())),q=Object.entries(YOe).filter(([U,G])=>m===""||G.label.toLowerCase().includes(m.toLowerCase())),V=K.length>0,D=q.length>0;return a.jsxs("div",{className:ge("flex",f),children:[a.jsxs("div",{className:"w-16 bg-gray-900 border-r border-gray-800 flex flex-col items-center py-4 space-y-2 fixed left-0 top-0 bottom-0 z-40",children:[a.jsx(fe,{variant:d==="setup"?"secondary":"ghost",size:"sm",onClick:()=>z("setup"),className:"w-12 h-12 p-0 text-gray-300 hover:text-white hover:bg-gray-700 data-[state=open]:bg-gray-700",title:"Setup",children:a.jsx(Dn,{className:"h-5 w-5"})}),a.jsx(fe,{variant:d==="elements"?"secondary":"ghost",size:"sm",onClick:()=>z("elements"),className:"w-12 h-12 p-0 text-gray-300 hover:text-white hover:bg-gray-700 data-[state=open]:bg-gray-700",title:"Elements",children:a.jsx("div",{className:"relative",children:a.jsx("div",{className:"w-6 h-6 border-2 border-current rounded-full flex items-center justify-center",children:a.jsx(Vt,{className:"h-3 w-3"})})})}),a.jsx(fe,{variant:d==="content"?"secondary":"ghost",size:"sm",onClick:()=>z("content"),className:"w-12 h-12 p-0 text-gray-300 hover:text-white hover:bg-gray-700 data-[state=open]:bg-gray-700",title:"Content",children:a.jsx(Ot,{className:"h-5 w-5"})}),a.jsx(fe,{variant:d==="pages"?"secondary":"ghost",size:"sm",onClick:()=>z("pages"),className:"w-12 h-12 p-0 text-gray-300 hover:text-white hover:bg-gray-700 data-[state=open]:bg-gray-700",title:"Pages",children:a.jsx(Sh,{className:"h-5 w-5"})}),a.jsx("div",{className:"flex-1"}),o&&a.jsx(fe,{variant:"ghost",size:"sm",onClick:o,className:"w-12 h-12 p-0 text-gray-300 hover:text-white hover:bg-gray-700",title:"Save",children:a.jsx(Cp,{className:"h-5 w-5"})}),l&&a.jsx(fe,{variant:"ghost",size:"sm",onClick:l,className:"w-12 h-12 p-0 text-gray-300 hover:text-white hover:bg-gray-700",title:c?"Exit Preview":"Preview",children:a.jsx(ii,{className:"h-5 w-5"})})]}),d&&a.jsx("div",{className:"fixed inset-0 z-30",onClick:W}),d&&a.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col fixed left-16 top-0 bottom-0 z-40 shadow-lg",children:[d==="setup"&&a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h2",{className:"font-semibold text-lg",children:"WOD Setup"}),E?a.jsxs("div",{className:"flex items-center text-blue-600 text-sm",children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-blue-600 mr-2"}),"Saving..."]}):k?a.jsxs("div",{className:"flex items-center text-orange-600 text-sm",children:[a.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),"Unsaved"]}):a.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[a.jsx(ln,{className:"h-3 w-3 mr-1"}),"Saved"]})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Configure your Workout of the Day"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"wod-title",className:"text-sm font-medium",children:"WOD Title"}),a.jsx(ct,{id:"wod-title",value:y,onChange:U=>v(U.target.value),placeholder:"Enter WOD title...",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"wod-description",className:"text-sm font-medium",children:"Description"}),a.jsx(Ai,{id:"wod-description",value:b,onChange:U=>w(U.target.value),placeholder:"Describe this WOD...",rows:3,className:"mt-1"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"publication-status",className:"text-sm font-medium",children:"Publication Status"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N?"Published - visible to users":"Draft - only visible to admins"})]}),a.jsx(kp,{id:"publication-status",checked:N,onCheckedChange:j})]}),k&&a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-orange-900",children:"Unsaved Changes"}),a.jsx("p",{className:"text-xs text-orange-700 mt-1",children:"Click save to update WOD settings"})]}),a.jsx(fe,{onClick:L,disabled:E,size:"sm",className:"bg-orange-600 hover:bg-orange-700",children:E?a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-white mr-2"}),"Saving..."]}):"Save Settings"})]})}),a.jsx(Pd,{}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium mb-3",children:"WOD Categories & Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(_t,{className:"text-sm font-medium",children:"Category"}),a.jsxs("select",{className:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 mt-1",children:[a.jsx("option",{value:"",children:"Select Category"}),a.jsx("option",{value:"strength",children:"Strength Training"}),a.jsx("option",{value:"cardio",children:"Cardiovascular"}),a.jsx("option",{value:"hiit",children:"HIIT"}),a.jsx("option",{value:"flexibility",children:"Flexibility & Mobility"}),a.jsx("option",{value:"functional",children:"Functional Fitness"}),a.jsx("option",{value:"olympic",children:"Olympic Lifting"}),a.jsx("option",{value:"bodyweight",children:"Bodyweight"}),a.jsx("option",{value:"crossfit",children:"CrossFit Style"})]})]}),a.jsxs("div",{children:[a.jsx(_t,{className:"text-sm font-medium",children:"Workout Type"}),a.jsxs("select",{className:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 mt-1",children:[a.jsx("option",{value:"",children:"Select Type"}),a.jsx("option",{value:"strength",children:"Strength"}),a.jsx("option",{value:"cardio",children:"Cardio"}),a.jsx("option",{value:"hiit",children:"HIIT"}),a.jsx("option",{value:"endurance",children:"Endurance"}),a.jsx("option",{value:"power",children:"Power"}),a.jsx("option",{value:"flexibility",children:"Flexibility"}),a.jsx("option",{value:"recovery",children:"Recovery"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(_t,{className:"text-sm font-medium",children:"Difficulty Level"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Set the difficulty level"})]}),a.jsxs("select",{className:"text-sm border rounded px-2 py-1",children:[a.jsx("option",{children:"Beginner"}),a.jsx("option",{children:"Intermediate"}),a.jsx("option",{children:"Advanced"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(_t,{className:"text-sm font-medium",children:"Progress Tracking"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Track user progress (ready for future functionality)"})]}),a.jsx(kp,{defaultChecked:!0,disabled:!0,className:"opacity-50"})]})]})]})]})]}),d==="elements"&&a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsx("h2",{className:"font-semibold text-lg mb-3",children:"Elements"}),a.jsxs("div",{className:"relative",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ct,{placeholder:"Search elements...",value:m,onChange:U=>x(U.target.value),className:"w-full pl-10"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:a.jsxs("div",{className:"space-y-6",children:[V&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Basic Elements"}),a.jsx("div",{className:"space-y-3",children:K.map(([U,G])=>{const ee=G.icon;return a.jsxs(fe,{variant:"outline",onClick:()=>{t(U),p(null)},className:"w-full h-auto p-4 flex items-start space-x-3 hover:bg-gray-50 transition-colors text-left",children:[a.jsx(ee,{className:"h-5 w-5 text-gray-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:G.label}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:G.description})]})]},U)})})]}),D&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Content Elements"}),a.jsx("div",{className:"space-y-3",children:q.map(([U,G])=>{const ee=G.icon;return a.jsxs(fe,{variant:"outline",onClick:()=>{t(U),p(null)},className:"w-full h-auto p-4 flex items-start space-x-3 hover:bg-gray-50 transition-colors text-left",children:[a.jsx(ee,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:G.label}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:G.description})]}),a.jsx(At,{variant:"secondary",className:"text-xs ml-2",children:"Repository"})]},U)})})]}),!V&&!D&&m&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(dd,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No elements found"}),a.jsx("p",{className:"text-xs",children:"Try adjusting your search"})]})]})})]}),d==="content"&&a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsx("h2",{className:"font-semibold text-lg mb-3",children:"Content"}),a.jsxs("div",{className:"relative",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ct,{placeholder:"Search content blocks...",value:m,onChange:U=>x(U.target.value),className:"w-full pl-10"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:a.jsx("div",{className:"space-y-3",children:q.map(([U,G])=>{const ee=G.icon;return a.jsxs(fe,{variant:"outline",onClick:()=>{const Q={video:"video",agent:"ai_agent",document:"document",prompt:"prompt",automation:"automation",image:"image",pdf:"pdf"};U in Q?(R(Q[U]),M(!0)):(t(U),p(null))},className:"w-full h-auto p-4 flex items-start space-x-3 hover:bg-gray-50 transition-colors text-left",children:[a.jsx(ee,{className:"h-5 w-5 text-gray-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:G.label}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Select from ",G.label.toLowerCase()," repository"]})]})]},U)})})})]}),d==="pages"&&a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h2",{className:"font-semibold text-lg",children:"Pages"}),a.jsxs(fe,{size:"sm",onClick:e,children:[a.jsx(Vt,{className:"h-4 w-4 mr-1"}),"New"]})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage WOD pages"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:a.jsxs("div",{className:"space-y-2",children:[n.map((U,G)=>a.jsx("div",{onClick:()=>{r(U.id),p(null)},className:ge("p-3 rounded-lg border cursor-pointer transition-colors",i===U.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:bg-gray-50"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:G+1}),a.jsx("span",{className:"font-medium text-sm",children:U.title})]}),a.jsxs(At,{variant:"outline",className:"text-xs",children:[U.blocks," blocks"]})]})},U.id)),n.length===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Sh,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No pages yet"}),a.jsx("p",{className:"text-xs",children:"Create your first page to get started"})]})]})})]})]}),T&&P&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx(KOe,{contentType:P,onSelect:$,onCancel:F,className:"max-w-4xl w-full mx-4"})})]})}function JOe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){const i=t.content||{},s=i.title||"",o=i.subtitle||"",l=i.level||1,c=d=>{e({...i,title:d})},u=d=>{e({...i,subtitle:d})},f=d=>{e({...i,level:parseInt(d)})};if(n){const d=`h${l}`;return a.jsxs("div",{className:"p-4",children:[a.jsx(d,{className:`font-bold mb-2 ${l===1?"text-3xl":l===2?"text-2xl":l===3?"text-xl":l===4?"text-lg":l===5?"text-base":"text-sm"}`,children:s||"Untitled Section"}),o&&a.jsx("p",{className:"text-gray-600 text-sm",children:o})]})}return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"title",children:"Section Title"}),a.jsx(ct,{id:"title",value:s,onChange:d=>c(d.target.value),placeholder:"Enter section title...",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"subtitle",children:"Subtitle (optional)"}),a.jsx(ct,{id:"subtitle",value:o,onChange:d=>u(d.target.value),placeholder:"Enter subtitle...",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"level",children:"Heading Level"}),a.jsxs(ec,{value:l.toString(),onValueChange:f,children:[a.jsx(Da,{className:"mt-1",children:a.jsx(tc,{placeholder:"Select heading level"})}),a.jsxs(La,{children:[a.jsx(kt,{value:"1",children:"H1 - Main Title"}),a.jsx(kt,{value:"2",children:"H2 - Section Title"}),a.jsx(kt,{value:"3",children:"H3 - Subsection"}),a.jsx(kt,{value:"4",children:"H4 - Small Heading"}),a.jsx(kt,{value:"5",children:"H5 - Tiny Heading"})]})]})]})]})}function QOe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){const i=t.content||{},s=i.html||"<p>Enter your text here...</p>";i.text;const o=Rv({extensions:[d0.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1}}),xp,bp,CH.configure({types:["heading","paragraph"]}),NC.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 hover:text-blue-800 underline"}}),f0,u0.configure({placeholder:"Start typing your content here..."})],content:s,editable:!n,onUpdate:({editor:y})=>{const v=y.getHTML(),b=y.getText();e({html:v,text:b})}});if(O.useEffect(()=>{o&&o.getHTML()!==s&&o.commands.setContent(s)},[o,s]),!o)return a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})});const l=()=>o.chain().focus().toggleBold().run(),c=()=>o.chain().focus().toggleItalic().run(),u=()=>o.chain().focus().toggleUnderline().run(),f=()=>o.chain().focus().toggleStrike().run(),d=y=>o.chain().focus().setTextAlign(y).run(),p=()=>o.chain().focus().toggleBulletList().run(),m=()=>o.chain().focus().toggleOrderedList().run(),x=()=>{const y=o.getAttributes("link").href,v=window.prompt("URL",y);if(v!==null){if(v===""){o.chain().focus().extendMarkRange("link").unsetLink().run();return}o.chain().focus().extendMarkRange("link").setLink({href:v}).run()}};return n?a.jsx("div",{className:"p-4",children:a.jsx("div",{dangerouslySetInnerHTML:{__html:s},className:"prose prose-sm max-w-none"})}):a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx(_t,{className:"text-base font-semibold mb-4 block",children:"Content Editor"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Use the toolbar below to format your text. Changes will be reflected on the canvas in real-time."})]}),a.jsx(Pd,{}),a.jsx("div",{className:"border border-gray-200 rounded-lg bg-gray-50 p-2",children:a.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:l,className:ge("h-8 w-8 p-0",o.isActive("bold")&&"bg-gray-200"),children:a.jsx(my,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:c,className:ge("h-8 w-8 p-0",o.isActive("italic")&&"bg-gray-200"),children:a.jsx(vy,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:u,className:ge("h-8 w-8 p-0",o.isActive("underline")&&"bg-gray-200"),children:a.jsx(qB,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:f,className:ge("h-8 w-8 p-0",o.isActive("strike")&&"bg-gray-200"),children:a.jsx(BB,{className:"w-4 h-4"})}),a.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1 self-center"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>d("left"),className:ge("h-8 w-8 p-0",o.isActive({textAlign:"left"})&&"bg-gray-200"),children:a.jsx(PB,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>d("center"),className:ge("h-8 w-8 p-0",o.isActive({textAlign:"center"})&&"bg-gray-200"),children:a.jsx(TB,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>d("right"),className:ge("h-8 w-8 p-0",o.isActive({textAlign:"right"})&&"bg-gray-200"),children:a.jsx(MB,{className:"w-4 h-4"})}),a.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1 self-center"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:p,className:ge("h-8 w-8 p-0",o.isActive("bulletList")&&"bg-gray-200"),children:a.jsx(rs,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:m,className:ge("h-8 w-8 p-0",o.isActive("orderedList")&&"bg-gray-200"),children:a.jsx(MO,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:x,className:ge("h-8 w-8 p-0",o.isActive("link")&&"bg-gray-200"),children:a.jsx(E0,{className:"w-4 h-4"})})]})}),a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 min-h-[300px] bg-white",children:a.jsx(Mv,{editor:o,className:"prose prose-gray max-w-none focus:outline-none min-h-[250px]"})}),a.jsxs("div",{className:"text-xs text-gray-500",children:[a.jsx("strong",{children:"Tip:"})," Select text and use the toolbar buttons to format it. Your changes will appear on the canvas immediately."]})]})}function ZOe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){const{user:i}=Ln(),s=O.useRef(null),[o,l]=O.useState([]),[c,u]=O.useState(""),[f,d]=O.useState(!1),[p,m]=O.useState(!1),[x,y]=O.useState(!1),v=t.content||{},b=v.src||"",w=v.alt||"",N=v.caption||"",j=v.width,k=v.height;Z.useEffect(()=>{x&&_()},[x]);const _=async()=>{if(i)try{d(!0);const{data:$,error:F}=await pe.from("uploaded_files").select("*").like("mime_type","image/%").order("created_at",{ascending:!1});if(F)throw F;l($||[])}catch($){console.error("Error loading images:",$)}finally{d(!1)}},E=async $=>{var z;const F=(z=$.target.files)==null?void 0:z[0];if(F){if(!F.type.startsWith("image/")){alert("Please select a valid image file");return}if(F.size>5*1024*1024){alert("File size must be less than 5MB");return}try{m(!0);const W=await new Promise((D,U)=>{const G=new FileReader;G.onloadend=()=>D(G.result),G.onerror=U,G.readAsDataURL(F)}),{data:K,error:q}=await pe.functions.invoke("enhanced-file-upload",{body:{fileData:W,fileName:F.name,fileType:F.type,folder:"page-builder"}});if(q)throw q;const V=K.data;e({...v,src:V.publicUrl,alt:w||F.name,width:void 0,height:void 0}),_()}catch(W){console.error("Error uploading file:",W),alert("Failed to upload image. Please try again.")}finally{m(!1),s.current&&(s.current.value="")}}},A=$=>{e({...v,src:$.file_url,alt:w||$.filename,width:void 0,height:void 0}),y(!1)},T=$=>{e({...v,alt:$})},M=$=>{e({...v,caption:$})},P=($,F)=>{const z=F?parseInt(F,10):void 0;e({...v,[$]:z})},R=()=>{e({...v,src:"",alt:"",caption:"",width:void 0,height:void 0})},L=o.filter($=>c===""||$.filename.toLowerCase().includes(c.toLowerCase()));return n?b?a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("img",{src:b,alt:w,style:{width:j?`${j}px`:"auto",height:k?`${k}px`:"auto",maxWidth:"100%"},className:"rounded-lg shadow-sm mx-auto"}),N&&a.jsx("p",{className:"text-sm text-gray-600 mt-2 italic",children:N})]})}):a.jsxs("div",{className:"p-4 text-center text-gray-500",children:[a.jsx(Eu,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),a.jsx("p",{children:"No image selected"})]}):a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx(_t,{children:"Current Image"}),b?a.jsxs("div",{className:"mt-2 relative",children:[a.jsx("img",{src:b,alt:w,className:"w-full max-w-xs rounded-lg border border-gray-200"}),a.jsx(fe,{variant:"destructive",size:"sm",onClick:R,className:"absolute top-2 right-2 h-6 w-6 p-0",children:a.jsx($r,{className:"h-3 w-3"})})]}):a.jsxs("div",{className:"mt-2 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center text-gray-500",children:[a.jsx(Eu,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{children:"No image selected"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{onClick:()=>{var $;return($=s.current)==null?void 0:$.click()},disabled:p,size:"sm",children:[a.jsx(Ir,{className:"h-4 w-4 mr-1"}),p?"Uploading...":"Upload New"]}),a.jsx(fe,{variant:"outline",size:"sm",onClick:()=>y(!x),children:x?"Hide Repository":"Browse Repository"})]}),a.jsx("input",{type:"file",ref:s,onChange:E,accept:"image/*",className:"hidden"}),x&&a.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"p-3 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(In,{className:"h-4 w-4 text-gray-400"}),a.jsx(ct,{placeholder:"Search images...",value:c,onChange:$=>u($.target.value),className:"flex-1"})]})}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:f?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading images..."}):L.length>0?a.jsx("div",{className:"grid grid-cols-3 gap-2 p-3",children:L.map($=>a.jsx("button",{onClick:()=>A($),className:"aspect-square bg-gray-100 rounded border hover:border-blue-500 transition-colors overflow-hidden",children:a.jsx("img",{src:$.file_url,alt:$.filename,className:"w-full h-full object-cover"})},$.id))}):a.jsx("div",{className:"p-4 text-center text-gray-500",children:a.jsx("p",{children:"No images found"})})})]}),b&&a.jsxs(a.Fragment,{children:[a.jsx(Pd,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"alt-text",children:"Alt Text"}),a.jsx(ct,{id:"alt-text",value:w,onChange:$=>T($.target.value),placeholder:"Describe this image for accessibility...",className:"mt-1"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Alt text is important for screen readers and SEO"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"caption",children:"Caption (optional)"}),a.jsx(Ai,{id:"caption",value:N,onChange:$=>M($.target.value),placeholder:"Add a caption that will appear below the image...",className:"mt-1 min-h-[60px]"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"width",children:"Width (px)"}),a.jsx(ct,{id:"width",type:"number",value:j||"",onChange:$=>P("width",$.target.value),placeholder:"Auto",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"height",children:"Height (px)"}),a.jsx(ct,{id:"height",type:"number",value:k||"",onChange:$=>P("height",$.target.value),placeholder:"Auto",className:"mt-1"})]})]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Leave dimensions empty for automatic sizing"})]})]})]})}const dW=({fileTypes:t=[],onSelect:e,onCancel:r,allowUpload:n=!0,multiSelect:i=!1,title:s="Content Repository",subtitle:o="Select content from your repository"})=>{const[l,c]=O.useState([]),[u,f]=O.useState([]),[d,p]=O.useState(!0),[m,x]=O.useState(null),[y,v]=O.useState(""),[b,w]=O.useState("grid"),[N,j]=O.useState("created_at"),[k,_]=O.useState("desc"),[E,A]=O.useState(!0),[T,M]=O.useState([]),[P,R]=O.useState(null),[L,$]=O.useState(0),[F,z]=O.useState(!1);O.useEffect(()=>{W()},[]),O.useEffect(()=>{K()},[l,y,N,k,E,t]);const W=async()=>{try{p(!0),x(null);let Q=pe.from("uploaded_files").select("*");if(t.length>0){const re=t.map(J=>J.endsWith("/*")?`file_type.like.${J.replace("/*","/%")}`:`file_type.eq.${J}`);Q=Q.or(re.join(","))}const{data:H,error:Y}=await Q;if(Y)throw Y;c(H||[])}catch(Q){console.error("Error fetching files:",Q),x(Q.message||"Failed to load files")}finally{p(!1)}},K=()=>{let Q=[...l];y.trim()&&(Q=Q.filter(H=>H.file_name.toLowerCase().includes(y.toLowerCase()))),E&&(Q=Q.filter(H=>H.is_published)),Q.sort((H,Y)=>{let re,J;switch(N){case"name":re=H.file_name.toLowerCase(),J=Y.file_name.toLowerCase();break;case"created_at":re=new Date(H.created_at).getTime(),J=new Date(Y.created_at).getTime();break;case"file_size":re=H.file_size,J=Y.file_size;break;default:return 0}return re<J?k==="asc"?-1:1:re>J?k==="asc"?1:-1:0}),f(Q)},q=async Q=>{const H=Q.target.files;if(!H||H.length===0)return;const Y=H[0];try{z(!0),$(0),x(null);const ne=`uploads/${`${Date.now()}-${Y.name.replace(/[^a-zA-Z0-9.-]/g,"_")}`}`,{data:te,error:se}=await pe.storage.from("missions").upload(ne,Y,{cacheControl:"3600",upsert:!1});if(se)throw se;const{data:{user:ve}}=await pe.auth.getUser();if(!ve)throw new Error("User not authenticated");const{data:ie}=await pe.from("users").select("organization_id").eq("id",ve.id).single();if(!(ie!=null&&ie.organization_id))throw new Error("User organization not found");const{data:ye,error:Te}=await pe.from("uploaded_files").insert({file_name:Y.name,file_type:Y.type,file_size:Y.size,storage_path:ne,organization_id:ie.organization_id,uploader_id:ve.id,is_published:!0}).select().single();if(Te)throw Te;await W(),e(ye)}catch(re){console.error("Error uploading file:",re),x(re.message||"Failed to upload file")}finally{z(!1),$(0)}},V=Q=>{if(Q===0)return"0 Bytes";const H=1024,Y=["Bytes","KB","MB","GB"],re=Math.floor(Math.log(Q)/Math.log(H));return parseFloat((Q/Math.pow(H,re)).toFixed(2))+" "+Y[re]},D=Q=>Q.startsWith("image/")?"🖼️":Q==="application/pdf"?"📄":Q.startsWith("video/")?"🎥":"📎",U=Q=>{if(i){const H=T.includes(Q.id)?T.filter(Y=>Y!==Q.id):[...T,Q.id];M(H)}else R(Q)},G=()=>{P&&e(P)},ee=()=>{const Q=u.filter(H=>T.includes(H.id));Q.length>0&&e(Q[0])};return d?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[80vh] overflow-hidden",children:a.jsxs("div",{className:"flex items-center justify-center h-64",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),a.jsx("span",{className:"ml-3 text-lg",children:"Loading files..."})]})})}):a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:s}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o})]}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:"×"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:t.some(Q=>Q.startsWith("video"))?"Search videos...":"Search files...",value:y,onChange:Q=>v(Q.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("div",{className:"flex border border-gray-300 rounded-md",children:[a.jsx("button",{onClick:()=>w("grid"),className:`p-2 ${b==="grid"?"bg-blue-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:a.jsx(dd,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>w("list"),className:`p-2 ${b==="list"?"bg-blue-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:a.jsx(rs,{className:"h-4 w-4"})})]}),a.jsxs("select",{value:`${N}-${k}`,onChange:Q=>{const[H,Y]=Q.target.value.split("-");j(H),_(Y)},className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"created_at-desc",children:"Newest First"}),a.jsx("option",{value:"created_at-asc",children:"Oldest First"}),a.jsx("option",{value:"name-asc",children:"Name A-Z"}),a.jsx("option",{value:"name-desc",children:"Name Z-A"}),a.jsx("option",{value:"file_size-desc",children:"Largest First"}),a.jsx("option",{value:"file_size-asc",children:"Smallest First"})]}),a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx("input",{type:"checkbox",checked:E,onChange:Q=>A(Q.target.checked),className:"rounded border-gray-300 focus:ring-2 focus:ring-blue-500"}),"Published Only"]})]})]})]}),n&&a.jsx("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:"flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md cursor-pointer transition-colors",children:[a.jsx(Ir,{className:"h-4 w-4"}),F?"Uploading...":"Upload New File",a.jsx("input",{type:"file",onChange:q,className:"hidden",accept:t.join(","),disabled:F})]}),F&&a.jsx("div",{className:"flex-1",children:a.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${L}%`}})})})]})}),m&&a.jsx("div",{className:"p-4 bg-red-50 border-b border-red-200",children:a.jsx("p",{className:"text-red-600",children:m})}),a.jsx("div",{className:"flex-1 overflow-auto p-6",children:u.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"📁"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No files found"}),a.jsx("p",{className:"text-gray-600",children:y?"Try adjusting your search terms":"Upload some files to get started"})]}):b==="grid"?a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:u.map(Q=>a.jsx("div",{onClick:()=>U(Q),className:`border-2 rounded-lg p-4 cursor-pointer transition-all duration-200 hover:shadow-lg ${i&&T.includes(Q.id)||!i&&(P==null?void 0:P.id)===Q.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl mb-2",children:D(Q.file_type)}),a.jsx("h4",{className:"font-medium text-sm text-gray-900 mb-1 truncate",title:Q.file_name,children:Q.file_name}),a.jsx("p",{className:"text-xs text-gray-500",children:V(Q.file_size)}),a.jsx("p",{className:"text-xs text-gray-400",children:new Date(Q.created_at).toLocaleDateString()})]})},Q.id))}):a.jsx("div",{className:"space-y-2",children:u.map(Q=>a.jsxs("div",{onClick:()=>U(Q),className:`flex items-center gap-4 p-4 rounded-lg cursor-pointer transition-all duration-200 hover:bg-gray-50 ${i&&T.includes(Q.id)||!i&&(P==null?void 0:P.id)===Q.id?"bg-blue-50 border border-blue-200":"border border-gray-200"}`,children:[a.jsx("div",{className:"text-2xl",children:D(Q.file_type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 truncate",children:Q.file_name}),a.jsxs("p",{className:"text-sm text-gray-500",children:[V(Q.file_size)," • ",new Date(Q.created_at).toLocaleDateString()]})]}),!Q.is_published&&a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:"Draft"})]},Q.id))})}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-between items-center",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[u.length," file",u.length!==1?"s":""," found",i&&T.length>0&&` • ${T.length} selected`,!i&&P&&` • ${P.file_name} selected`]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),i&&T.length>0&&a.jsxs("button",{onClick:ee,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors",children:["Select ",T.length," File",T.length!==1?"s":""]}),!i&&P&&a.jsx("button",{onClick:G,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors",children:"Select Content"})]})]})]})})};function eEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){const{user:i}=Ln(),[s,o]=O.useState([]),[l,c]=O.useState(!1),[u,f]=O.useState(!1),d=t.content||{},p=d.video_id,m=s.find(k=>k.id===p),x=d.autoplay||!1,y=d.controls!==!1;O.useEffect(()=>{v()},[]);const v=async()=>{if(i)try{c(!0);const{data:k,error:_}=await pe.from("videos").select("*").eq("status","published").order("created_at",{ascending:!1});if(_)throw _;o(k||[])}catch(k){console.error("Error loading videos:",k)}finally{c(!1)}},b=k=>{e({...d,video_id:k.id,title:k.file_name,description:"",thumbnail:"",url:k.storage_path,platform:"direct",video_id_external:"",duration:0}),f(!1)},w=k=>{e({...d,autoplay:k})},N=k=>{e({...d,controls:k})},j=k=>k.video_url?k.video_url:k.platform==="youtube"&&k.video_id_external?`https://www.youtube.com/embed/${k.video_id_external}?autoplay=${x?1:0}&controls=${y?1:0}`:k.platform==="vimeo"&&k.video_id_external?`https://player.vimeo.com/video/${k.video_id_external}?autoplay=${x?1:0}&controls=${y?1:0}`:null;if(n){if(!m)return a.jsxs("div",{className:"p-4 text-center text-gray-500",children:[a.jsx(si,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),a.jsx("p",{children:"No video selected"})]});const k=j(m);return k?a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:m.platform&&m.platform!=="direct"?a.jsx("iframe",{src:k,title:m.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):a.jsx("video",{src:k,controls:y,autoPlay:x,className:"w-full h-full",poster:m.thumbnail_url,children:"Your browser does not support the video tag."})}),a.jsxs("div",{className:"mt-3",children:[a.jsx("h3",{className:"font-medium",children:m.title}),m.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m.description}),m.duration&&a.jsxs(At,{variant:"secondary",className:"mt-2 text-xs",children:[Math.floor(m.duration/60),":",(m.duration%60).toString().padStart(2,"0")]})]})]}):a.jsx("div",{className:"p-4 text-center text-red-500",children:a.jsx("p",{children:"Invalid video configuration"})})}return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(_t,{children:"Selected Video"}),a.jsx(fe,{size:"sm",onClick:()=>{console.log("Browse Repository button clicked"),f(!0)},className:"bg-blue-500 hover:bg-blue-600 text-white",children:"Browse Repository"})]}),m?a.jsx("div",{className:"border border-gray-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium",children:m.title}),m.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m.description}),a.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[a.jsx(At,{variant:"outline",className:"text-xs",children:m.platform||"Direct"}),m.duration&&a.jsxs(At,{variant:"secondary",className:"text-xs",children:[Math.floor(m.duration/60),":",(m.duration%60).toString().padStart(2,"0")]})]})]}),m.thumbnail_url&&a.jsx("img",{src:m.thumbnail_url,alt:m.title,className:"w-16 h-12 object-cover rounded"})]})}):a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center text-gray-500",children:[a.jsx(si,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{children:"No video selected"}),a.jsx("p",{className:"text-sm",children:"Browse the repository to select a video"})]})]}),u&&a.jsx(dW,{title:"Select Videos",subtitle:"Choose a video from your content repository",fileTypes:["video/*"],onSelect:b,onCancel:()=>f(!1),allowUpload:!0}),m&&a.jsxs(a.Fragment,{children:[a.jsx(Pd,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(_t,{className:"font-medium",children:"Autoplay"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Start playing automatically when visible"})]}),a.jsx(kp,{checked:x,onCheckedChange:w})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(_t,{className:"font-medium",children:"Show Controls"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Display video player controls"})]}),a.jsx(kp,{checked:y,onCheckedChange:N})]})]})]})]})}function tEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){const{user:i}=Ln(),[s,o]=O.useState([]),[l,c]=O.useState(!1),[u,f]=O.useState(!1),d=t.content||{},p=d.agent_id,m=s.find(j=>j.id===p),x=d.initial_message||"",y=d.context||"";O.useEffect(()=>{v()},[]);const v=async()=>{if(i)try{c(!0);const{data:j,error:k}=await pe.from("ai_agents").select("*").eq("status","published").order("created_at",{ascending:!1});if(k)throw k;o(j||[])}catch(j){console.error("Error loading AI agents:",j)}finally{c(!1)}},b=j=>{e({...d,agent_id:j.id,agent_name:j.file_name,agent_description:"AI Agent from file repository",model:"default",avatar_url:""}),f(!1)},w=j=>{e({...d,initial_message:j})},N=j=>{e({...d,context:j})};return n?m?a.jsx("div",{className:"p-4",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:m.avatar_url?a.jsx("img",{src:m.avatar_url,alt:m.name,className:"w-full h-full rounded-full object-cover"}):a.jsx(Kr,{className:"h-5 w-5 text-blue-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-blue-900",children:m.name}),m.description&&a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:m.description}),x&&a.jsx("div",{className:"mt-3 bg-white border border-blue-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Gr,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700",children:x})]})}),a.jsx(fe,{size:"sm",className:"mt-3 bg-blue-600 hover:bg-blue-700",disabled:!0,children:"Start Conversation"})]})]})})}):a.jsxs("div",{className:"p-4 text-center text-gray-500",children:[a.jsx(Kr,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),a.jsx("p",{children:"No AI agent selected"})]}):a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(_t,{children:"Selected AI Agent"}),a.jsx(fe,{size:"sm",onClick:()=>{console.log("Browse Repository button clicked"),f(!0)},className:"bg-blue-500 hover:bg-blue-600 text-white",children:"Browse Repository"})]}),m?a.jsx("div",{className:"border border-gray-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0",children:m.avatar_url?a.jsx("img",{src:m.avatar_url,alt:m.name,className:"w-full h-full rounded-full object-cover"}):a.jsx(Kr,{className:"h-5 w-5 text-gray-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium",children:m.name}),m.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m.description}),a.jsx("div",{className:"flex items-center space-x-2 mt-2",children:a.jsx(At,{variant:"outline",className:"text-xs",children:m.model||"Default Model"})})]})]})}):a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center text-gray-500",children:[a.jsx(Kr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{children:"No AI agent selected"}),a.jsx("p",{className:"text-sm",children:"Browse the repository to select an agent"})]})]}),u&&a.jsx(dW,{title:"Select AI Agent",subtitle:"Choose an AI agent from your content repository",fileTypes:["application/json"],onSelect:b,onCancel:()=>f(!1),allowUpload:!0}),m&&a.jsxs(a.Fragment,{children:[a.jsx(Pd,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"initial-message",children:"Initial Message (optional)"}),a.jsx(Ai,{id:"initial-message",value:x,onChange:j=>w(j.target.value),placeholder:"Enter the agent's greeting message...",className:"mt-1 min-h-[80px]"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This message will be displayed when the agent first loads"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"custom-context",children:"Additional Context (optional)"}),a.jsx(Ai,{id:"custom-context",value:y,onChange:j=>N(j.target.value),placeholder:"Provide additional context specific to this interaction...",className:"mt-1 min-h-[80px]"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Additional context that will be provided to the agent for this specific interaction"})]})]})]})]})}function rEe(t,e){return O.useReducer((r,n)=>e[r][n]??r,t)}var fW=t=>{const{present:e,children:r}=t,n=nEe(e),i=typeof r=="function"?r({present:n.isPresent}):O.Children.only(r),s=yr(n.ref,iEe(i));return typeof r=="function"||n.isPresent?O.cloneElement(i,{ref:s}):null};fW.displayName="Presence";function nEe(t){const[e,r]=O.useState(),n=O.useRef({}),i=O.useRef(t),s=O.useRef("none"),o=t?"mounted":"unmounted",[l,c]=rEe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return O.useEffect(()=>{const u=Yg(n.current);s.current=l==="mounted"?u:"none"},[l]),Sn(()=>{const u=n.current,f=i.current;if(f!==t){const p=s.current,m=Yg(u);t?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),Sn(()=>{if(e){let u;const f=e.ownerDocument.defaultView??window,d=m=>{const y=Yg(n.current).includes(m.animationName);if(m.target===e&&y&&(c("ANIMATION_END"),!i.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",u=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},p=m=>{m.target===e&&(s.current=Yg(n.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{f.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:O.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Yg(t){return(t==null?void 0:t.animationName)||"none"}function iEe(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var XC="Checkbox",[sEe,AEe]=Yp(XC),[oEe,aEe]=sEe(XC),hW=O.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:f,...d}=t,[p,m]=O.useState(null),x=yr(e,j=>m(j)),y=O.useRef(!1),v=p?f||!!p.closest("form"):!0,[b=!1,w]=v0({prop:i,defaultProp:s,onChange:u}),N=O.useRef(b);return O.useEffect(()=>{const j=p==null?void 0:p.form;if(j){const k=()=>w(N.current);return j.addEventListener("reset",k),()=>j.removeEventListener("reset",k)}},[p,w]),a.jsxs(oEe,{scope:r,state:b,disabled:l,children:[a.jsx($t.button,{type:"button",role:"checkbox","aria-checked":Ca(b)?"mixed":b,"aria-required":o,"data-state":gW(b),"data-disabled":l?"":void 0,disabled:l,value:c,...d,ref:x,onKeyDown:Jt(t.onKeyDown,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:Jt(t.onClick,j=>{w(k=>Ca(k)?!0:!k),v&&(y.current=j.isPropagationStopped(),y.current||j.stopPropagation())})}),v&&a.jsx(lEe,{control:p,bubbles:!y.current,name:n,value:c,checked:b,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"},defaultChecked:Ca(s)?!1:s})]})});hW.displayName=XC;var pW="CheckboxIndicator",mW=O.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:n,...i}=t,s=aEe(pW,r);return a.jsx(fW,{present:n||Ca(s.state)||s.state===!0,children:a.jsx($t.span,{"data-state":gW(s.state),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});mW.displayName=pW;var lEe=t=>{const{control:e,checked:r,bubbles:n=!0,defaultChecked:i,...s}=t,o=O.useRef(null),l=$C(r),c=IC(e);O.useEffect(()=>{const f=o.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==r&&m){const x=new Event("click",{bubbles:n});f.indeterminate=Ca(r),m.call(f,Ca(r)?!1:r),f.dispatchEvent(x)}},[l,r,n]);const u=O.useRef(Ca(r)?!1:r);return a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??u.current,...s,tabIndex:-1,ref:o,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ca(t){return t==="indeterminate"}function gW(t){return Ca(t)?"indeterminate":t?"checked":"unchecked"}var yW=hW,cEe=mW;const Yf=O.forwardRef(({className:t,...e},r)=>a.jsx(yW,{ref:r,className:ge("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:a.jsx(cEe,{className:ge("flex items-center justify-center text-current"),children:a.jsx(ko,{className:"h-4 w-4"})})}));Yf.displayName=yW.displayName;function uEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){const i=t.content||{},s=i.type||"unordered",o=i.items||[{id:"1",text:""}],l=i.checklistStyle||!1,c=y=>{e({...i,type:y})},u=y=>{e({...i,checklistStyle:y,items:o.map(v=>({...v,checked:y?!1:void 0}))})},f=(y,v)=>{const b=o.map(w=>w.id===y?{...w,text:v}:w);e({...i,items:b})},d=(y,v)=>{const b=o.map(w=>w.id===y?{...w,checked:v}:w);e({...i,items:b})},p=()=>{const y=(Math.max(...o.map(b=>parseInt(b.id)||0))+1).toString(),v=[...o,{id:y,text:"",...l&&{checked:!1}}];e({...i,items:v})},m=y=>{if(o.length<=1)return;const v=o.filter(b=>b.id!==y);e({...i,items:v})},x=(y,v)=>{const b=[...o],w=y-1;w<0||w>=b.length||([b[y],b[w]]=[b[w],b[y]],e({...i,items:b}))};return n?a.jsx("div",{className:"p-4",children:s==="ordered"?a.jsx("ol",{className:"list-decimal list-inside space-y-2",children:o.map((y,v)=>a.jsx("li",{className:"flex items-start",children:l?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Yf,{checked:y.checked||!1,disabled:!0,className:"mt-0.5"}),a.jsx("span",{className:y.checked?"line-through text-gray-500":"",children:y.text||`Item ${v+1}`})]}):a.jsx("span",{children:y.text||`Item ${v+1}`})},y.id))}):a.jsx("ul",{className:"list-disc list-inside space-y-2",children:o.map((y,v)=>a.jsx("li",{className:"flex items-start",children:l?a.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[a.jsx(Yf,{checked:y.checked||!1,disabled:!0,className:"mt-0.5"}),a.jsx("span",{className:y.checked?"line-through text-gray-500":"",children:y.text||`Item ${v+1}`})]}):a.jsx("span",{className:"ml-4",children:y.text||`Item ${v+1}`})},y.id))})}):a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"list-type",children:"List Type"}),a.jsxs(ec,{value:s,onValueChange:c,children:[a.jsx(Da,{className:"mt-1",children:a.jsx(tc,{placeholder:"Select list type"})}),a.jsxs(La,{children:[a.jsx(kt,{value:"unordered",children:"Bulleted List"}),a.jsx(kt,{value:"ordered",children:"Numbered List"})]})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Yf,{id:"checklist-style",checked:l,onCheckedChange:u}),a.jsx(_t,{htmlFor:"checklist-style",className:"text-sm",children:"Interactive Checklist"})]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(_t,{children:"List Items"}),a.jsxs(fe,{size:"sm",onClick:p,children:[a.jsx(Vt,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),o.map((y,v)=>a.jsxs("div",{className:"flex items-center space-x-2 group",children:[a.jsx("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>x(v),disabled:v===0,className:"h-8 w-8 p-0",children:a.jsx(DB,{className:"h-4 w-4"})})}),l&&a.jsx(Yf,{checked:y.checked||!1,onCheckedChange:b=>d(y.id,b)}),a.jsx(ct,{value:y.text,onChange:b=>f(y.id,b.target.value),placeholder:`Item ${v+1}...`,className:"flex-1"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>m(y.id),disabled:o.length<=1,className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(RO,{className:"h-4 w-4"})})]},y.id))]})]})}function dEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){const i=t.content||{},s=i.text||"",o=i.author||"",l=i.source||"",c=d=>{e({...i,text:d})},u=d=>{e({...i,author:d})},f=d=>{e({...i,source:d})};return n?a.jsx("div",{className:"p-4",children:a.jsxs("blockquote",{className:"border-l-4 border-blue-500 bg-blue-50 p-4 italic",children:[a.jsxs("p",{className:"text-gray-800 text-lg mb-2",children:['"',s||"Enter your quote text...",'"']}),(o||l)&&a.jsxs("footer",{className:"text-gray-600 text-sm",children:[o&&a.jsx("span",{className:"font-medium",children:o}),o&&l&&a.jsx("span",{children:", "}),l&&a.jsx("cite",{className:"not-italic",children:l})]})]})}):a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"quote-text",children:"Quote Text"}),a.jsx(Ai,{id:"quote-text",value:s,onChange:d=>c(d.target.value),placeholder:"Enter the quote text...",className:"mt-1 min-h-[100px]"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"quote-author",children:"Author (optional)"}),a.jsx(ct,{id:"quote-author",value:o,onChange:d=>u(d.target.value),placeholder:"Quote author...",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"quote-source",children:"Source (optional)"}),a.jsx(ct,{id:"quote-source",value:l,onChange:d=>f(d.target.value),placeholder:"Source or publication...",className:"mt-1"})]})]})}function fEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){return Z.createElement("div",{className:"p-4 text-center text-gray-500"},Z.createElement("p",null,"Document editor coming soon"),Z.createElement("p",{className:"text-sm"},"This will integrate with the document repository"))}function hEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){return Z.createElement("div",{className:"p-4 text-center text-gray-500"},Z.createElement("p",null,"Prompt editor coming soon"),Z.createElement("p",{className:"text-sm"},"This will integrate with the prompts repository"))}function pEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){return Z.createElement("div",{className:"p-4 text-center text-gray-500"},Z.createElement("p",null,"Automation editor coming soon"),Z.createElement("p",{className:"text-sm"},"This will integrate with the automations repository"))}function mEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){return Z.createElement("div",{className:"p-4 text-center text-gray-500"},Z.createElement("p",null,"Quiz editor coming soon"),Z.createElement("p",{className:"text-sm"},"This will include question creation and scoring"))}function gEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){return Z.createElement("div",{className:"p-4 text-center text-gray-500"},Z.createElement("p",null,"Accordion editor coming soon"),Z.createElement("p",{className:"text-sm"},"This will create expandable sections"))}function yEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){return Z.createElement("div",{className:"p-4 text-center text-gray-500"},Z.createElement("p",null,"User submission editor coming soon"),Z.createElement("p",{className:"text-sm"},"This will create forms for user data collection"))}function Fk(){const{type:t,id:e}=us(),r=Ti(),{user:n}=Ln(),{structure:i,currentPage:s,selectedBlock:o,isEditing:l,previewMode:c,loading:u,error:f,loadStructure:d,createPage:p,updatePage:m,navigateToPage:x,createBlock:y,updateBlock:v,deleteBlock:b,reorderBlocks:w,setSelectedBlock:N,setIsEditing:j,setPreviewMode:k}=C8(t==="wods"?"mission":"course",e||""),_=O.useCallback(async Ae=>{var ut,wt;if(!i)return;const Me=t==="wods",Re=Me?qf:zf,sr=Me?(ut=i.mission)==null?void 0:ut.id:(wt=i.course)==null?void 0:wt.id;if(!sr)throw new Error("Parent ID not found");try{await Re.update(sr,Ae),await d()}catch(ci){throw console.error("Failed to update structure:",ci),ci}},[i,t,d]),{trackProgress:E}=A8(t==="wods"?"mission":"course",e||""),[A,T]=O.useState("desktop"),[M,P]=O.useState(!1),[R,L]=O.useState({isOpen:!1}),[$,F]=O.useState(!1),[z,W]=O.useState("idle"),[K,q]=O.useState(null),[V,D]=O.useState(null),[U,G]=O.useState(null),ee=Fx(Bx(Ad,{activationConstraint:{distance:8}})),Q=O.useRef(!0),H=O.useRef(null),Y=O.useMemo(()=>s?{id:s.id,title:s.title,description:s.description,status:s.status,is_locked:s.is_locked,unlock_conditions:s.unlock_conditions,page_config:s.page_config,order_index:s.order_index}:null,[s==null?void 0:s.id,s==null?void 0:s.title,s==null?void 0:s.description,s==null?void 0:s.status]);O.useEffect(()=>{e&&Q.current&&d(!0)},[e,d]),O.useEffect(()=>()=>{Q.current=!1,H.current&&H.current.abort()},[]);const re=O.useCallback(async Ae=>{if(!s||!Q.current){console.warn("Cannot add block - no current page or component unmounted");return}try{const Me=Xye[Ae];if(!Me)throw new Error(`Unknown block type: ${Ae}`);console.log("Creating block of type:",Ae);const Re=await y(Ae,Me.defaultContent||{});Re&&Q.current&&(N(Re),P(!0),j(!0),E({progressType:"block_interacted",pageId:s.id,progressData:{action:"block_created",blockType:Ae}}))}catch(Me){console.error("Failed to add block:",Me),q(Me instanceof Error?Me.message:"Failed to add block"),W("error")}},[s,y,E,N,j]),J=O.useCallback(async(Ae,Me)=>{new AbortController;try{await v(Ae,{content:Me}),Q.current&&j(!0)}catch(Re){Re.name!=="AbortError"&&(console.error("Failed to update block content:",Re),q(Re instanceof Error?Re.message:"Failed to update block"),W("error"))}},[v,j]),ne=O.useCallback(Ae=>{Q.current&&(N(Ae),P(!0),j(!1))},[N,j]),te=O.useCallback(Ae=>{Q.current&&(N(Ae),P(!0),j(!0))},[N,j]),se=O.useCallback(async(Ae,Me)=>{new AbortController;try{await v(Ae,Me),Q.current&&j(!0)}catch(Re){Re.name!=="AbortError"&&(console.error("Failed to update block:",Re),q(Re instanceof Error?Re.message:"Failed to update block"),W("error"))}},[v,j]),ve=O.useCallback(Ae=>{L({isOpen:!0,blockId:Ae})},[]),ie=O.useCallback(async()=>{if(!R.blockId||!Q.current)return;const Ae=new AbortController,Me=setTimeout(()=>{Ae.abort(),q("Delete operation timed out - please try again"),W("error")},1e4);try{await b(R.blockId),clearTimeout(Me),L({isOpen:!1}),(o==null?void 0:o.id)===R.blockId&&(N(null),P(!1))}catch(Re){clearTimeout(Me),Re.name!=="AbortError"&&(console.error("Failed to delete block:",Re),q(Re instanceof Error?Re.message:"Failed to delete block"),W("error"))}},[R.blockId,b,o,N]),ye=O.useCallback(async Ae=>{new AbortController;try{await w(Ae),Q.current&&j(!0)}catch(Me){Me.name!=="AbortError"&&(console.error("Failed to reorder blocks:",Me),q(Me instanceof Error?Me.message:"Failed to reorder blocks"),W("error"))}},[w,j]),Te=O.useCallback(async()=>{if(!Y||!Q.current){console.warn("Save attempted without valid page data");return}if(H.current){console.log("Save operation already in progress");return}W("saving"),F(!0),q(null);const Ae=new AbortController;H.current=Ae;try{console.log("Saving WOD page data:",Y.title),await m(Y),Q.current&&(W("saved"),j(!1),H.current=null,console.log("WOD saved successfully - staying on current page"),setTimeout(()=>{Q.current&&z!=="saving"&&W("idle")},3e3))}catch(Me){if(Me.name!=="AbortError"&&Q.current){console.error("Save failed:",Me);const Re=Me instanceof Error?Me.message:"Failed to save";q(Re),W("error"),H.current=null,setTimeout(()=>{Q.current&&(q(null),W("idle"))},1e4)}}finally{Q.current&&F(!1)}},[Y,m,j,z]),Le=O.useCallback(()=>{Q.current&&(k(!c),c||P(!1))},[c,k]),ue=O.useCallback(async()=>{if(!i||!Q.current)return;const Ae=new AbortController,Me=setTimeout(()=>{Ae.abort(),q("Page creation timed out - please try again"),W("error")},15e3);try{const Re=i.pages.length+1,sr=await p({title:`Page ${Re}`,description:"",is_locked:!1,status:"draft"});clearTimeout(Me),sr&&Q.current&&x(sr)}catch(Re){clearTimeout(Me),Re.name!=="AbortError"&&(console.error("Failed to create page:",Re),q(Re instanceof Error?Re.message:"Failed to create page"),W("error"))}},[i,p,x]),he=O.useCallback(Ae=>{const Me=i==null?void 0:i.pages.find(Re=>Re.id===Ae);Me&&Q.current&&(x(Me),P(!1),N(null))},[i==null?void 0:i.pages,x,N]),we=O.useCallback(Ae=>{const{active:Me}=Ae;if(D(Me.id),s!=null&&s.blocks){const Re=s.blocks.find(sr=>sr.id===Me.id);G(Re||null)}},[s==null?void 0:s.blocks]),Oe=O.useCallback(Ae=>{var sr;const{active:Me,over:Re}=Ae;if(D(null),G(null),!!Re){if(((sr=Me.data.current)==null?void 0:sr.type)==="block-type"){const ut=Me.data.current.blockType;re(ut);return}if(Me.id!==Re.id&&(s!=null&&s.blocks)){const ut=s.blocks.findIndex(ci=>ci.id===Me.id),wt=s.blocks.findIndex(ci=>ci.id===Re.id);if(ut!==-1&&wt!==-1){const dc=Td(s.blocks,ut,wt).map(fc=>fc.id);ye(dc)}}}},[s==null?void 0:s.blocks,re,ye]),be=O.useCallback(()=>{if(!o)return null;const Ae={block:o,onContentChange:Me=>{J(o.id,Me)},onConfigChange:Me=>{se(o.id,{config:Me})},isPreview:!1};switch(o.block_type){case"rich_text":return a.jsx(QOe,{...Ae});case"section_header":return a.jsx(JOe,{...Ae});case"image":return a.jsx(ZOe,{...Ae});case"video":return a.jsx(eEe,{...Ae});case"agent":return a.jsx(tEe,{...Ae});case"list":return a.jsx(uEe,{...Ae});case"quote":return a.jsx(dEe,{...Ae});case"document":return a.jsx(fEe,{...Ae});case"prompt":return a.jsx(hEe,{...Ae});case"automation":return a.jsx(pEe,{...Ae});case"quiz":return a.jsx(mEe,{...Ae});case"accordion":return a.jsx(gEe,{...Ae});case"user_submission":return a.jsx(yEe,{...Ae});default:return a.jsxs("div",{className:"p-4 text-center text-gray-500",children:[a.jsxs("p",{children:["Editor not available for ",o.block_type]}),a.jsx("p",{className:"text-sm",children:"Using fallback to generic editor"})]})}},[o,J,se]),We=()=>{switch(A){case"mobile":return"max-w-sm mx-auto";case"tablet":return"max-w-2xl mx-auto";case"desktop":default:return"max-w-full"}},Je=Ae=>{switch(Ae){case"mobile":return UX;case"tablet":return HX;case"desktop":return $X}};if(u)return a.jsx("div",{className:"h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading WOD builder..."})]})});if(f||!i)return a.jsx("div",{className:"h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 max-w-md",children:[a.jsx(ql,{className:"h-8 w-8 text-red-600 mx-auto mb-4"}),a.jsxs("p",{className:"text-red-800 text-center mb-4",children:["Error: ",f||"Failed to load content"]}),a.jsxs(fe,{onClick:()=>r("/training-zone"),variant:"outline",className:"w-full",children:[a.jsx(lo,{className:"h-4 w-4 mr-2"}),"Back to Training Zone"]})]})});const Ye=t==="wods"?i.mission:i.course;return Ye?a.jsxs("div",{className:"h-screen bg-gray-50 flex overflow-hidden",children:[!c&&a.jsx(XOe,{onBlockAdd:re,onPageCreate:ue,onPageSelect:he,pages:i.pages.map(Ae=>{var Me;return{id:Ae.id,title:Ae.title,blocks:((Me=Ae.blocks)==null?void 0:Me.length)||0}}),currentPageId:s==null?void 0:s.id,structure:Ye,onSave:Te,onPreview:Le,isPreviewMode:c,onStructureUpdate:_}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",style:{marginLeft:c?"0":"64px"},children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>r("/training-zone"),className:"text-gray-600 hover:text-gray-900",children:[a.jsx(lo,{className:"h-4 w-4 mr-2"}),"Back to Training Zone"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:Ye.title}),a.jsxs("p",{className:"text-sm text-gray-600",children:[Ye.status," • ",i.pages.length," pages",s&&` • Page: ${s.title}`]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[!c&&a.jsx("div",{className:"flex items-center border border-gray-200 rounded-lg",children:["desktop","tablet","mobile"].map(Ae=>{const Me=Je(Ae);return a.jsx(fe,{variant:A===Ae?"default":"ghost",size:"sm",onClick:()=>T(Ae),className:"rounded-none first:rounded-l-lg last:rounded-r-lg",children:a.jsx(Me,{className:"h-4 w-4"})},Ae)})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[z==="saving"&&a.jsxs("div",{className:"flex items-center text-blue-600 text-sm",children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-blue-600 mr-2"}),"Saving..."]}),z==="saved"&&a.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[a.jsx(ln,{className:"h-3 w-3 mr-1"}),"Saved"]}),z==="error"&&K&&a.jsxs("div",{className:"flex items-center text-red-600 text-sm",children:[a.jsx(ql,{className:"h-3 w-3 mr-1"}),K]}),l&&z==="idle"&&a.jsx(At,{variant:"outline",className:"text-orange-600",children:"Unsaved Changes"})]}),a.jsx(fe,{variant:c?"default":"outline",size:"sm",onClick:Le,className:"min-w-[100px]",children:c?a.jsxs(a.Fragment,{children:[a.jsx(TO,{className:"h-4 w-4 mr-2"}),"Exit Preview"]}):a.jsxs(a.Fragment,{children:[a.jsx(ii,{className:"h-4 w-4 mr-2"}),"Preview"]})}),a.jsxs(fe,{onClick:Te,disabled:$||!l,size:"sm",className:"min-w-[80px]",children:[$?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b border-white mr-2"}):a.jsx(Cp,{className:"h-4 w-4 mr-2"}),"Save"]})]})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[a.jsx("div",{className:ge("flex-1 overflow-auto",c&&"bg-white",!c&&M&&"mr-96"),children:a.jsx("div",{className:ge("min-h-full",We()),children:a.jsx(Ux,{sensors:ee,onDragStart:we,onDragEnd:Oe,children:a.jsx("div",{className:ge("min-h-full",c?"bg-white":"bg-gray-50 p-8"),children:s?a.jsx("div",{className:ge("bg-white rounded-lg shadow-sm",c?"min-h-screen":"min-h-[600px] p-6"),children:s.blocks&&s.blocks.length>0?a.jsx(Wx,{items:s.blocks.map(Ae=>Ae.id),strategy:Hx,children:a.jsx("div",{className:"space-y-4",children:s.blocks.map(Ae=>a.jsxs("div",{className:ge("group relative",!c&&"border border-transparent hover:border-gray-300 rounded-lg transition-colors",(o==null?void 0:o.id)===Ae.id&&!c&&"border-blue-500 bg-blue-50/50"),onClick:()=>!c&&ne(Ae),children:[!c&&a.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:a.jsxs("div",{className:"flex items-center space-x-1 bg-white border border-gray-200 rounded-lg shadow-sm p-1",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:Me=>{Me.stopPropagation(),te(Ae)},className:"h-6 w-6 p-0",children:a.jsx(FX,{className:"h-3 w-3"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:Me=>{Me.stopPropagation(),ve(Ae.id)},className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",children:a.jsx(ns,{className:"h-3 w-3"})})]})}),a.jsx(tW,{block:Ae,isEditing:!c&&(o==null?void 0:o.id)===Ae.id,isSelected:(o==null?void 0:o.id)===Ae.id,onContentChange:(Me,Re)=>J(Me,Re)})]},Ae.id))})}):a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Sh,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["Start building your ",t==="wods"?"WOD":"block"]}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Add blocks from the left panel to create engaging content"}),a.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Use the left sidebar to add blocks and manage content"})]})})}):a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ot,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No page selected"}),a.jsx("p",{className:"text-gray-500",children:"Select a page from the pages panel to start editing"})]})})})})})}),!c&&M&&o&&a.jsxs("div",{className:"w-96 bg-white border-l border-gray-200 flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[(()=>{const Ae=(()=>{switch(o.block_type){case"section_header":return IX;case"rich_text":return DO;case"list":return rs;case"quote":return xy;case"image":return Eu;case"video":return si;case"agent":return Kr;case"document":return Ot;case"prompt":return Gr;case"automation":return Ei;case"quiz":return AO;case"user_submission":return Ir;default:return Dn}})();return a.jsx(Ae,{className:"h-5 w-5 text-gray-600"})})(),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:(()=>{switch(o.block_type){case"section_header":return"Section Header";case"rich_text":return"Rich Text";case"list":return"List";case"quote":return"Quote";case"image":return"Image";case"video":return"Video";case"agent":return"AI Agent";case"document":return"Document";case"prompt":return"Prompts";case"automation":return"Automation";case"quiz":return"Quiz";case"user_submission":return"User Form";default:return"Block"}})()}),a.jsx("p",{className:"text-sm text-gray-500",children:"Configure block content and settings"})]})]}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>P(!1),className:"h-8 w-8 p-0",children:a.jsx($r,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex-1 overflow-auto",children:be()})]})]})]}),a.jsx(T8,{isOpen:R.isOpen,onClose:()=>L({isOpen:!1}),onConfirm:ie,title:"Delete Block",message:"Are you sure you want to delete this block? This action cannot be undone.",confirmText:"Delete",variant:"destructive"})]}):a.jsx("div",{className:"h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 max-w-md",children:[a.jsx("p",{className:"text-red-800 text-center mb-4",children:"Content not found"}),a.jsxs(fe,{onClick:()=>r("/training-zone"),variant:"outline",className:"w-full",children:[a.jsx(lo,{className:"h-4 w-4 mr-2"}),"Back to Training Zone"]})]})})}function vEe({value:t=0,max:e=100,className:r,...n}){const i=Math.min(Math.max(t/e*100,0),100);return a.jsx("div",{className:ge("relative h-2 w-full overflow-hidden rounded-full bg-gray-200",r),...n,children:a.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300 ease-in-out",style:{width:`${i}%`}})})}function xEe(){const{type:t,id:e}=us(),r=Ti(),{user:n}=Ln(),{structure:i,currentPage:s,loading:o,error:l,loadStructure:c,navigateToPageIndex:u}=C8(t==="missions"?"mission":"course",e||""),{progressMetrics:f,trackProgress:d}=A8(t==="missions"?"mission":"course",e||""),[p,m]=O.useState(!1),[x,y]=O.useState(0),[v,b]=O.useState(null);O.useEffect(()=>{e&&n&&(c(!0),b(new Date))},[e,n,c]),O.useEffect(()=>{s&&n&&d({progressType:"page_started",pageId:s.id,progressData:{timestamp:new Date().toISOString(),pageIndex:x}})},[s,n,d,x]),O.useEffect(()=>()=>{if(v&&s&&n){const T=Math.floor((new Date().getTime()-v.getTime())/1e3);T>10&&d({progressType:"page_completed",pageId:s.id,completionPercentage:100,timeSpent:T,progressData:{completed:!0,endTime:new Date().toISOString()}})}},[v,s,n,d]);const w=()=>{if(x>0){const T=x-1;y(T),u(T),b(new Date)}},N=()=>{if(i&&x<i.pages.length-1){const T=x+1;y(T),u(T),b(new Date)}},j=T=>{y(T),u(T),m(!1),b(new Date)},k=(T,M)=>{n&&s&&d({progressType:"block_interacted",pageId:s.id,blockId:T,progressData:{interactionProgress:M,timestamp:new Date().toISOString()}})},_=T=>f.lastActivity?f.lastActivity.page_id===T.id&&f.lastActivity.progress_type==="page_completed":!1,E=()=>i!=null&&i.pages.length?f.completedPages/i.pages.length*100:0;if(o)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your learning experience..."})]})});if(l||!i)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-red-500 mb-4",children:a.jsx(Zn,{className:"w-12 h-12 mx-auto"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Content not available"}),a.jsx("p",{className:"text-gray-600 mb-6",children:l||"The requested content could not be found."}),a.jsx(fe,{onClick:()=>r("/dashboard"),variant:"outline",children:"Return to Dashboard"})]})});const A=t==="missions"?i.mission:i.course;return A?a.jsxs("div",{className:"min-h-screen bg-white",children:[a.jsxs("div",{className:"sticky top-0 z-40 bg-white border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>m(!0),className:"md:hidden",children:a.jsx(LX,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(Zn,{className:"w-4 h-4 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-semibold text-gray-900 text-sm md:text-base truncate max-w-48",children:A.title}),a.jsxs("p",{className:"text-xs text-gray-500",children:[x+1," of ",i.pages.length]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"text-right hidden sm:block",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[Math.round(E()),"% Complete"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[f.completedPages," of ",i.pages.length," pages"]})]}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>r("/dashboard"),children:"Exit"})]})]}),a.jsx("div",{className:"px-4 pb-3",children:a.jsx(vEe,{value:E(),className:"h-2"})})]}),a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"hidden md:block w-80 bg-gray-50 border-r border-gray-200 h-screen sticky top-16 overflow-y-auto",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(At,{variant:A.status==="published"?"default":"secondary",children:A.status}),A.difficulty_level&&a.jsx(At,{variant:"outline",children:A.difficulty_level})]}),A.description&&a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:A.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[A.estimated_duration_minutes&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(go,{className:"w-3 h-3"}),a.jsxs("span",{children:[A.estimated_duration_minutes,"min"]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(TX,{className:"w-3 h-3"}),a.jsxs("span",{children:[f.completedPages," completed"]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Pages"}),a.jsx("nav",{className:"space-y-1",children:i.pages.map((T,M)=>{const P=_(T),R=M===x;return a.jsxs("button",{onClick:()=>j(M),className:ge("w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center space-x-2",R?"bg-blue-100 text-blue-900 font-medium":"text-gray-700 hover:bg-gray-200"),disabled:T.is_locked,children:[a.jsx("div",{className:"flex-shrink-0",children:P?a.jsx(ln,{className:"w-4 h-4 text-green-500"}):a.jsx(vM,{className:ge("w-4 h-4",R?"text-blue-600":"text-gray-400")})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:ge("truncate",T.is_locked?"text-gray-400":""),children:T.title}),T.description&&a.jsx("div",{className:"text-xs text-gray-500 truncate",children:T.description})]}),a.jsx("div",{className:"text-xs text-gray-400",children:M+1})]},T.id)})})]})]})}),p&&a.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>m(!1)}),a.jsxs("div",{className:"fixed left-0 top-0 bottom-0 w-80 bg-white",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"font-semibold text-gray-900",children:"Navigation"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>m(!1),children:a.jsx($r,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"p-4 overflow-y-auto h-full",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(At,{variant:A.status==="published"?"default":"secondary",children:A.status}),A.difficulty_level&&a.jsx(At,{variant:"outline",children:A.difficulty_level})]}),A.description&&a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:A.description})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Pages"}),a.jsx("nav",{className:"space-y-1",children:i.pages.map((T,M)=>{const P=_(T),R=M===x;return a.jsxs("button",{onClick:()=>j(M),className:ge("w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center space-x-2",R?"bg-blue-100 text-blue-900 font-medium":"text-gray-700 hover:bg-gray-200"),disabled:T.is_locked,children:[a.jsx("div",{className:"flex-shrink-0",children:P?a.jsx(ln,{className:"w-4 h-4 text-green-500"}):a.jsx(vM,{className:ge("w-4 h-4",R?"text-blue-600":"text-gray-400")})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("div",{className:ge("truncate",T.is_locked?"text-gray-400":""),children:T.title})}),a.jsx("div",{className:"text-xs text-gray-400",children:M+1})]},T.id)})})]})]})]})]}),a.jsx("div",{className:"flex-1 min-h-screen",children:s?a.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:s.title}),s.description&&a.jsx("p",{className:"text-lg text-gray-600 leading-relaxed",children:s.description})]}),a.jsx("div",{className:"space-y-8 mb-12",children:s.blocks&&s.blocks.length>0?s.blocks.filter(T=>T.is_visible).map(T=>a.jsx(tW,{block:T,onProgress:k,userContext:{userId:n==null?void 0:n.id,progress:f,learningMode:!0}},T.id)):a.jsxs("div",{className:"text-center py-16",children:[a.jsx(Zn,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"This page doesn't have any content yet."})]})}),a.jsx("div",{className:"border-t border-gray-200 pt-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(fe,{variant:"outline",onClick:w,disabled:x===0,className:"flex items-center space-x-2",children:[a.jsx(r_,{className:"w-4 h-4"}),a.jsx("span",{children:"Previous"})]}),a.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:a.jsxs("span",{children:["Page ",x+1," of ",i.pages.length]})}),a.jsxs(fe,{onClick:N,disabled:x===i.pages.length-1,className:"flex items-center space-x-2",children:[a.jsx("span",{children:"Next"}),a.jsx(jh,{className:"w-4 h-4"})]})]})})]}):a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("p",{className:"text-gray-500",children:"No content available"})})})]})]}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-red-600",children:"Content not found"})})})}function bEe(){const[t,e]=O.useState(!1),[r,n]=O.useState("video"),[i,s]=O.useState([]),o=[{type:"video",label:"Videos",icon:si,color:"#EF4444",description:"Educational videos with transcriptions"},{type:"ai_agent",label:"AI Agents",icon:Kr,color:"#3B82F6",description:"Intelligent AI agents with custom prompts"},{type:"document",label:"Documents",icon:Ot,color:"#10B981",description:"Rich text documents and guides"},{type:"prompt",label:"Prompts",icon:Gr,color:"#8B5CF6",description:"Reusable prompt templates"},{type:"automation",label:"Automations",icon:Ei,color:"#F59E0B",description:"Process automations and workflows"}],l=p=>{n(p),e(!0)},c=p=>{const m={type:r,item:p};s(x=>[...x.filter(v=>!(v.type===r&&v.item.id===p.id)),m]),e(!1)},u=(p,m)=>{s(x=>x.filter(y=>!(y.type===p&&y.item.id===m)))},f=p=>o.find(m=>m.type===p),d=p=>{const m=f(p.type),{item:x}=p,y=uy.generatePreviewText(x);return a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:m.color+"15"},children:a.jsx(m.icon,{className:"w-5 h-5",style:{color:m.color}})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:x.title}),a.jsx("button",{onClick:()=>u(p.type,x.id),className:"text-red-500 hover:text-red-700 text-sm ml-2",children:"Remove"})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:y}),a.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:m.color+"10",color:m.color},children:m.label.slice(0,-1)}),a.jsxs("span",{children:["Updated ",new Date(x.updated_at).toLocaleDateString()]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${x.status==="published"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:x.status})]})]})]})},`${p.type}-${x.id}`)};return a.jsx(pr,{children:a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:a.jsx(wM,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Content Selector System Demo"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Demonstrating the reusable Content Selector Modal for all content types"})]})]})}),a.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Select Content Type"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:o.map(p=>{const m=p.icon;return a.jsx("button",{onClick:()=>l(p.type),className:"p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all text-left group",children:a.jsxs("div",{className:"flex flex-col items-center text-center space-y-2",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",style:{backgroundColor:p.color+"15"},children:a.jsx(m,{className:"w-6 h-6",style:{color:p.color}})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:p.label}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:p.description})]})]})},p.type)})})]}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Selected Content"}),a.jsxs("div",{className:"text-sm text-gray-500",children:[i.length," ",i.length===1?"item":"items"," selected"]})]}),i.length===0?a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center",children:[a.jsx(wM,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Content Selected"}),a.jsx("p",{className:"text-gray-600",children:"Click on any content type above to open the Content Selector Modal and choose items from your repositories."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(d)})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Demo Features"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Content Selector Modal"}),a.jsxs("ul",{className:"text-blue-700 space-y-1",children:[a.jsx("li",{children:"• Unified interface for all content types"}),a.jsx("li",{children:"• Search and filter capabilities"}),a.jsx("li",{children:"• Card and list view modes"}),a.jsx("li",{children:"• Pagination for large datasets"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Content Integration"}),a.jsxs("ul",{className:"text-blue-700 space-y-1",children:[a.jsx("li",{children:"• Type-specific metadata display"}),a.jsx("li",{children:"• Status and update information"}),a.jsx("li",{children:"• Reusable across all block types"}),a.jsx("li",{children:"• Error handling and loading states"})]})]})]})]}),a.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"How It Works"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-700",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-blue-600 font-semibold",children:"1"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Select Content Type"}),a.jsx("p",{children:"Click any content type button to open the selector modal for that specific repository."})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-blue-600 font-semibold",children:"2"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Browse & Search"}),a.jsx("p",{children:"Use the search, filters, and view modes to find the content you need from the repository."})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-blue-600 font-semibold",children:"3"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Select & Use"}),a.jsx("p",{children:'Click on any item to select it. The selected content will appear in the "Selected Content" section below.'})]})]})]})]})]}),a.jsx(GC,{isOpen:t,onClose:()=>e(!1),onSelect:c,contentType:r})]})})}function wEe(){return a.jsx(Nh,{onError:(t,e)=>{console.group("🚨 Application Error"),console.error("App-level error:",t),console.error("Error info:",e),console.groupEnd(),console.warn("Production error reporting not configured")},children:a.jsx(EX,{children:a.jsx(bG,{children:a.jsx("div",{className:"App",children:a.jsx(Nh,{children:a.jsxs(hG,{children:[a.jsx(rt,{path:"/login",element:a.jsx(_J,{})}),a.jsx(rt,{path:"/",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(da,{to:"/dashboard",replace:!0})})}),a.jsx(rt,{path:"/dashboard",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(mge,{})})}),a.jsx(rt,{path:"/clients",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(yge,{})})}),a.jsx(rt,{path:"/clients/:clientId",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Sge,{})})}),a.jsx(rt,{path:"/users/:userId",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Nge,{})})}),a.jsx(rt,{path:"/users",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(vge,{})})}),a.jsx(rt,{path:"/tags",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(wge,{})})}),a.jsx(rt,{path:"/content",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(_ge,{})})}),a.jsx(rt,{path:"/content/articles",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Oge,{})})}),a.jsx(rt,{path:"/content/ai-agents",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Ege,{})})}),a.jsx(rt,{path:"/content/videos",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Cge,{})})}),a.jsx(rt,{path:"/content/documents",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Age,{})})}),a.jsx(rt,{path:"/content/prompts",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Tge,{})})}),a.jsx(rt,{path:"/content/automations",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Pge,{})})}),a.jsx(rt,{path:"/content/articles/create",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(A5,{})})}),a.jsx(rt,{path:"/content/articles/:id/edit",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(A5,{})})}),a.jsx(rt,{path:"/content/ai-agents/create",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(L5,{})})}),a.jsx(rt,{path:"/content/ai-agents/:id/edit",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(L5,{})})}),a.jsx(rt,{path:"/content/videos/create",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx($5,{})})}),a.jsx(rt,{path:"/content/videos/:id/edit",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx($5,{})})}),a.jsx(rt,{path:"/content/documents/create",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(q5,{})})}),a.jsx(rt,{path:"/content/documents/:id/edit",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(q5,{})})}),a.jsx(rt,{path:"/content/prompts/create",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(z5,{})})}),a.jsx(rt,{path:"/content/prompts/:id/edit",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(z5,{})})}),a.jsx(rt,{path:"/content/automations/create",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(U5,{})})}),a.jsx(rt,{path:"/content/automations/:id/edit",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(U5,{})})}),a.jsx(rt,{path:"/training-zone",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Yye,{})})}),a.jsx(rt,{path:"/wod-builder",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Fk,{})})}),a.jsx(rt,{path:"/training-zone/:type/:id",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Fk,{})})}),a.jsx(rt,{path:"/training-zone/legacy/:type/:id",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Fk,{})})}),a.jsx(rt,{path:"/page-builder",element:a.jsx(da,{to:"/training-zone",replace:!0})}),a.jsx(rt,{path:"/page-builder/*",element:a.jsx(da,{to:"/training-zone",replace:!0})}),a.jsx(rt,{path:"/mission-builder-v4",element:a.jsx(da,{to:"/wod-builder",replace:!0})}),a.jsx(rt,{path:"/demo/content-selector",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(bEe,{})})}),a.jsx(rt,{path:"/learn/:type/:id",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(xEe,{})})}),a.jsx(rt,{path:"/sandbox",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"AI Sandbox"}),a.jsx("p",{className:"text-gray-600",children:"Interactive learning environment coming soon..."})]})})})}),a.jsx(rt,{path:"/admin",element:a.jsx(da,{to:"/dashboard",replace:!0})}),a.jsx(rt,{path:"/settings",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Settings"}),a.jsx("p",{className:"text-gray-600",children:"Settings page coming soon..."})]})})})}),a.jsx(rt,{path:"/logout",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(kge,{})})}),a.jsx(rt,{path:"*",element:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Page Not Found"}),a.jsx("p",{className:"text-gray-600",children:"The page you're looking for doesn't exist."})]})})})]})})})})})})}jK.createRoot(document.getElementById("root")).render(a.jsx(Z.StrictMode,{children:a.jsx(wEe,{})}));
