var uK=Object.defineProperty;var dK=(t,e,r)=>e in t?uK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var vf=(t,e,r)=>dK(t,typeof e!="symbol"?e+"":e,r);function fK(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var ag=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ht(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function hK(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var _w={exports:{}},xf={},Ow={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EP;function pK(){if(EP)return lt;EP=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;function p(D){return D===null||typeof D!="object"?null:(D=d&&D[d]||D["@@iterator"],typeof D=="function"?D:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,y={};function v(D,U,G){this.props=D,this.context=U,this.refs=y,this.updater=G||m}v.prototype.isReactComponent={},v.prototype.setState=function(D,U){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,U,"setState")},v.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function b(){}b.prototype=v.prototype;function w(D,U,G){this.props=D,this.context=U,this.refs=y,this.updater=G||m}var N=w.prototype=new b;N.constructor=w,x(N,v.prototype),N.isPureReactComponent=!0;var j=Array.isArray,k=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function A(D,U,G){var ee,Q={},H=null,Y=null;if(U!=null)for(ee in U.ref!==void 0&&(Y=U.ref),U.key!==void 0&&(H=""+U.key),U)k.call(U,ee)&&!E.hasOwnProperty(ee)&&(Q[ee]=U[ee]);var re=arguments.length-2;if(re===1)Q.children=G;else if(1<re){for(var J=Array(re),ne=0;ne<re;ne++)J[ne]=arguments[ne+2];Q.children=J}if(D&&D.defaultProps)for(ee in re=D.defaultProps,re)Q[ee]===void 0&&(Q[ee]=re[ee]);return{$$typeof:t,type:D,key:H,ref:Y,props:Q,_owner:_.current}}function T(D,U){return{$$typeof:t,type:D.type,key:U,ref:D.ref,props:D.props,_owner:D._owner}}function M(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function P(D){var U={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(G){return U[G]})}var R=/\/+/g;function L(D,U){return typeof D=="object"&&D!==null&&D.key!=null?P(""+D.key):U.toString(36)}function $(D,U,G,ee,Q){var H=typeof D;(H==="undefined"||H==="boolean")&&(D=null);var Y=!1;if(D===null)Y=!0;else switch(H){case"string":case"number":Y=!0;break;case"object":switch(D.$$typeof){case t:case e:Y=!0}}if(Y)return Y=D,Q=Q(Y),D=ee===""?"."+L(Y,0):ee,j(Q)?(G="",D!=null&&(G=D.replace(R,"$&/")+"/"),$(Q,U,G,"",function(ne){return ne})):Q!=null&&(M(Q)&&(Q=T(Q,G+(!Q.key||Y&&Y.key===Q.key?"":(""+Q.key).replace(R,"$&/")+"/")+D)),U.push(Q)),1;if(Y=0,ee=ee===""?".":ee+":",j(D))for(var re=0;re<D.length;re++){H=D[re];var J=ee+L(H,re);Y+=$(H,U,G,J,Q)}else if(J=p(D),typeof J=="function")for(D=J.call(D),re=0;!(H=D.next()).done;)H=H.value,J=ee+L(H,re++),Y+=$(H,U,G,J,Q);else if(H==="object")throw U=String(D),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Y}function F(D,U,G){if(D==null)return D;var ee=[],Q=0;return $(D,ee,"","",function(H){return U.call(G,H,Q++)}),ee}function z(D){if(D._status===-1){var U=D._result;U=U(),U.then(function(G){(D._status===0||D._status===-1)&&(D._status=1,D._result=G)},function(G){(D._status===0||D._status===-1)&&(D._status=2,D._result=G)}),D._status===-1&&(D._status=0,D._result=U)}if(D._status===1)return D._result.default;throw D._result}var W={current:null},K={transition:null},q={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:K,ReactCurrentOwner:_};function V(){throw Error("act(...) is not supported in production builds of React.")}return lt.Children={map:F,forEach:function(D,U,G){F(D,function(){U.apply(this,arguments)},G)},count:function(D){var U=0;return F(D,function(){U++}),U},toArray:function(D){return F(D,function(U){return U})||[]},only:function(D){if(!M(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},lt.Component=v,lt.Fragment=r,lt.Profiler=i,lt.PureComponent=w,lt.StrictMode=n,lt.Suspense=c,lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,lt.act=V,lt.cloneElement=function(D,U,G){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var ee=x({},D.props),Q=D.key,H=D.ref,Y=D._owner;if(U!=null){if(U.ref!==void 0&&(H=U.ref,Y=_.current),U.key!==void 0&&(Q=""+U.key),D.type&&D.type.defaultProps)var re=D.type.defaultProps;for(J in U)k.call(U,J)&&!E.hasOwnProperty(J)&&(ee[J]=U[J]===void 0&&re!==void 0?re[J]:U[J])}var J=arguments.length-2;if(J===1)ee.children=G;else if(1<J){re=Array(J);for(var ne=0;ne<J;ne++)re[ne]=arguments[ne+2];ee.children=re}return{$$typeof:t,type:D.type,key:Q,ref:H,props:ee,_owner:Y}},lt.createContext=function(D){return D={$$typeof:o,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:s,_context:D},D.Consumer=D},lt.createElement=A,lt.createFactory=function(D){var U=A.bind(null,D);return U.type=D,U},lt.createRef=function(){return{current:null}},lt.forwardRef=function(D){return{$$typeof:l,render:D}},lt.isValidElement=M,lt.lazy=function(D){return{$$typeof:f,_payload:{_status:-1,_result:D},_init:z}},lt.memo=function(D,U){return{$$typeof:u,type:D,compare:U===void 0?null:U}},lt.startTransition=function(D){var U=K.transition;K.transition={};try{D()}finally{K.transition=U}},lt.unstable_act=V,lt.useCallback=function(D,U){return W.current.useCallback(D,U)},lt.useContext=function(D){return W.current.useContext(D)},lt.useDebugValue=function(){},lt.useDeferredValue=function(D){return W.current.useDeferredValue(D)},lt.useEffect=function(D,U){return W.current.useEffect(D,U)},lt.useId=function(){return W.current.useId()},lt.useImperativeHandle=function(D,U,G){return W.current.useImperativeHandle(D,U,G)},lt.useInsertionEffect=function(D,U){return W.current.useInsertionEffect(D,U)},lt.useLayoutEffect=function(D,U){return W.current.useLayoutEffect(D,U)},lt.useMemo=function(D,U){return W.current.useMemo(D,U)},lt.useReducer=function(D,U,G){return W.current.useReducer(D,U,G)},lt.useRef=function(D){return W.current.useRef(D)},lt.useState=function(D){return W.current.useState(D)},lt.useSyncExternalStore=function(D,U,G){return W.current.useSyncExternalStore(D,U,G)},lt.useTransition=function(){return W.current.useTransition()},lt.version="18.3.1",lt}var CP;function ad(){return CP||(CP=1,Ow.exports=pK()),Ow.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AP;function mK(){if(AP)return xf;AP=1;var t=ad(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,u){var f,d={},p=null,m=null;u!==void 0&&(p=""+u),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(m=c.ref);for(f in c)n.call(c,f)&&!s.hasOwnProperty(f)&&(d[f]=c[f]);if(l&&l.defaultProps)for(f in c=l.defaultProps,c)d[f]===void 0&&(d[f]=c[f]);return{$$typeof:e,type:l,key:p,ref:m,props:d,_owner:i.current}}return xf.Fragment=r,xf.jsx=o,xf.jsxs=o,xf}var TP;function gK(){return TP||(TP=1,_w.exports=mK()),_w.exports}var a=gK(),O=ad();const Z=ht(O),eB=fK({__proto__:null,default:Z},[O]);var lg={},Ew={exports:{}},Tn={},Cw={exports:{}},Aw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PP;function yK(){return PP||(PP=1,function(t){function e(K,q){var V=K.length;K.push(q);e:for(;0<V;){var D=V-1>>>1,U=K[D];if(0<i(U,q))K[D]=q,K[V]=U,V=D;else break e}}function r(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var q=K[0],V=K.pop();if(V!==q){K[0]=V;e:for(var D=0,U=K.length,G=U>>>1;D<G;){var ee=2*(D+1)-1,Q=K[ee],H=ee+1,Y=K[H];if(0>i(Q,V))H<U&&0>i(Y,Q)?(K[D]=Y,K[H]=V,D=H):(K[D]=Q,K[ee]=V,D=ee);else if(H<U&&0>i(Y,V))K[D]=Y,K[H]=V,D=H;else break e}}return q}function i(K,q){var V=K.sortIndex-q.sortIndex;return V!==0?V:K.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,d=null,p=3,m=!1,x=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(K){for(var q=r(u);q!==null;){if(q.callback===null)n(u);else if(q.startTime<=K)n(u),q.sortIndex=q.expirationTime,e(c,q);else break;q=r(u)}}function j(K){if(y=!1,N(K),!x)if(r(c)!==null)x=!0,z(k);else{var q=r(u);q!==null&&W(j,q.startTime-K)}}function k(K,q){x=!1,y&&(y=!1,b(A),A=-1),m=!0;var V=p;try{for(N(q),d=r(c);d!==null&&(!(d.expirationTime>q)||K&&!P());){var D=d.callback;if(typeof D=="function"){d.callback=null,p=d.priorityLevel;var U=D(d.expirationTime<=q);q=t.unstable_now(),typeof U=="function"?d.callback=U:d===r(c)&&n(c),N(q)}else n(c);d=r(c)}if(d!==null)var G=!0;else{var ee=r(u);ee!==null&&W(j,ee.startTime-q),G=!1}return G}finally{d=null,p=V,m=!1}}var _=!1,E=null,A=-1,T=5,M=-1;function P(){return!(t.unstable_now()-M<T)}function R(){if(E!==null){var K=t.unstable_now();M=K;var q=!0;try{q=E(!0,K)}finally{q?L():(_=!1,E=null)}}else _=!1}var L;if(typeof w=="function")L=function(){w(R)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,F=$.port2;$.port1.onmessage=R,L=function(){F.postMessage(null)}}else L=function(){v(R,0)};function z(K){E=K,_||(_=!0,L())}function W(K,q){A=v(function(){K(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){x||m||(x=!0,z(k))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(K){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var V=p;p=q;try{return K()}finally{p=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,q){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var V=p;p=K;try{return q()}finally{p=V}},t.unstable_scheduleCallback=function(K,q,V){var D=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?D+V:D):V=D,K){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=V+U,K={id:f++,callback:q,priorityLevel:K,startTime:V,expirationTime:U,sortIndex:-1},V>D?(K.sortIndex=V,e(u,K),r(c)===null&&K===r(u)&&(y?(b(A),A=-1):y=!0,W(j,V-D))):(K.sortIndex=U,e(c,K),x||m||(x=!0,z(k))),K},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(K){var q=p;return function(){var V=p;p=q;try{return K.apply(this,arguments)}finally{p=V}}}}(Aw)),Aw}var MP;function vK(){return MP||(MP=1,Cw.exports=yK()),Cw.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RP;function xK(){if(RP)return Tn;RP=1;var t=ad(),e=vK();function r(h){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+h,S=1;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(h,g){o(h,g),o(h+"Capture",g)}function o(h,g){for(i[h]=g,h=0;h<g.length;h++)n.add(g[h])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},d={};function p(h){return c.call(d,h)?!0:c.call(f,h)?!1:u.test(h)?d[h]=!0:(f[h]=!0,!1)}function m(h,g,S,C){if(S!==null&&S.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return C?!1:S!==null?!S.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function x(h,g,S,C){if(g===null||typeof g>"u"||m(h,g,S,C))return!0;if(C)return!1;if(S!==null)switch(S.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function y(h,g,S,C,I,B,X){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=C,this.attributeNamespace=I,this.mustUseProperty=S,this.propertyName=h,this.type=g,this.sanitizeURL=B,this.removeEmptyString=X}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){v[h]=new y(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var g=h[0];v[g]=new y(g,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){v[h]=new y(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){v[h]=new y(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){v[h]=new y(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){v[h]=new y(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){v[h]=new y(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){v[h]=new y(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){v[h]=new y(h,5,!1,h.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function w(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var g=h.replace(b,w);v[g]=new y(g,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var g=h.replace(b,w);v[g]=new y(g,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var g=h.replace(b,w);v[g]=new y(g,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){v[h]=new y(h,1,!1,h.toLowerCase(),null,!1,!1)}),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){v[h]=new y(h,1,!1,h.toLowerCase(),null,!0,!0)});function N(h,g,S,C){var I=v.hasOwnProperty(g)?v[g]:null;(I!==null?I.type!==0:C||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(x(g,S,I,C)&&(S=null),C||I===null?p(g)&&(S===null?h.removeAttribute(g):h.setAttribute(g,""+S)):I.mustUseProperty?h[I.propertyName]=S===null?I.type===3?!1:"":S:(g=I.attributeName,C=I.attributeNamespace,S===null?h.removeAttribute(g):(I=I.type,S=I===3||I===4&&S===!0?"":""+S,C?h.setAttributeNS(C,g,S):h.setAttribute(g,S))))}var j=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),P=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),K=Symbol.iterator;function q(h){return h===null||typeof h!="object"?null:(h=K&&h[K]||h["@@iterator"],typeof h=="function"?h:null)}var V=Object.assign,D;function U(h){if(D===void 0)try{throw Error()}catch(S){var g=S.stack.trim().match(/\n( *(at )?)/);D=g&&g[1]||""}return`
`+D+h}var G=!1;function ee(h,g){if(!h||G)return"";G=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(me){var C=me}Reflect.construct(h,[],g)}else{try{g.call()}catch(me){C=me}h.call(g.prototype)}else{try{throw Error()}catch(me){C=me}h()}}catch(me){if(me&&C&&typeof me.stack=="string"){for(var I=me.stack.split(`
`),B=C.stack.split(`
`),X=I.length-1,oe=B.length-1;1<=X&&0<=oe&&I[X]!==B[oe];)oe--;for(;1<=X&&0<=oe;X--,oe--)if(I[X]!==B[oe]){if(X!==1||oe!==1)do if(X--,oe--,0>oe||I[X]!==B[oe]){var ae=`
`+I[X].replace(" at new "," at ");return h.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",h.displayName)),ae}while(1<=X&&0<=oe);break}}}finally{G=!1,Error.prepareStackTrace=S}return(h=h?h.displayName||h.name:"")?U(h):""}function Q(h){switch(h.tag){case 5:return U(h.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return h=ee(h.type,!1),h;case 11:return h=ee(h.type.render,!1),h;case 1:return h=ee(h.type,!0),h;default:return""}}function H(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case E:return"Fragment";case _:return"Portal";case T:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case $:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case P:return(h.displayName||"Context")+".Consumer";case M:return(h._context.displayName||"Context")+".Provider";case R:var g=h.render;return h=h.displayName,h||(h=g.displayName||g.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case F:return g=h.displayName||null,g!==null?g:H(h.type)||"Memo";case z:g=h._payload,h=h._init;try{return H(h(g))}catch{}}return null}function Y(h){var g=h.type;switch(h.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=g.render,h=h.displayName||h.name||"",g.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(g);case 8:return g===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function re(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function J(h){var g=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function ne(h){var g=J(h)?"checked":"value",S=Object.getOwnPropertyDescriptor(h.constructor.prototype,g),C=""+h[g];if(!h.hasOwnProperty(g)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var I=S.get,B=S.set;return Object.defineProperty(h,g,{configurable:!0,get:function(){return I.call(this)},set:function(X){C=""+X,B.call(this,X)}}),Object.defineProperty(h,g,{enumerable:S.enumerable}),{getValue:function(){return C},setValue:function(X){C=""+X},stopTracking:function(){h._valueTracker=null,delete h[g]}}}}function te(h){h._valueTracker||(h._valueTracker=ne(h))}function se(h){if(!h)return!1;var g=h._valueTracker;if(!g)return!0;var S=g.getValue(),C="";return h&&(C=J(h)?h.checked?"true":"false":h.value),h=C,h!==S?(g.setValue(h),!0):!1}function ve(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function ie(h,g){var S=g.checked;return V({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:S??h._wrapperState.initialChecked})}function ye(h,g){var S=g.defaultValue==null?"":g.defaultValue,C=g.checked!=null?g.checked:g.defaultChecked;S=re(g.value!=null?g.value:S),h._wrapperState={initialChecked:C,initialValue:S,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function Te(h,g){g=g.checked,g!=null&&N(h,"checked",g,!1)}function Le(h,g){Te(h,g);var S=re(g.value),C=g.type;if(S!=null)C==="number"?(S===0&&h.value===""||h.value!=S)&&(h.value=""+S):h.value!==""+S&&(h.value=""+S);else if(C==="submit"||C==="reset"){h.removeAttribute("value");return}g.hasOwnProperty("value")?he(h,g.type,S):g.hasOwnProperty("defaultValue")&&he(h,g.type,re(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(h.defaultChecked=!!g.defaultChecked)}function ue(h,g,S){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var C=g.type;if(!(C!=="submit"&&C!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+h._wrapperState.initialValue,S||g===h.value||(h.value=g),h.defaultValue=g}S=h.name,S!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,S!==""&&(h.name=S)}function he(h,g,S){(g!=="number"||ve(h.ownerDocument)!==h)&&(S==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+S&&(h.defaultValue=""+S))}var we=Array.isArray;function Oe(h,g,S,C){if(h=h.options,g){g={};for(var I=0;I<S.length;I++)g["$"+S[I]]=!0;for(S=0;S<h.length;S++)I=g.hasOwnProperty("$"+h[S].value),h[S].selected!==I&&(h[S].selected=I),I&&C&&(h[S].defaultSelected=!0)}else{for(S=""+re(S),g=null,I=0;I<h.length;I++){if(h[I].value===S){h[I].selected=!0,C&&(h[I].defaultSelected=!0);return}g!==null||h[I].disabled||(g=h[I])}g!==null&&(g.selected=!0)}}function be(h,g){if(g.dangerouslySetInnerHTML!=null)throw Error(r(91));return V({},g,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function We(h,g){var S=g.value;if(S==null){if(S=g.children,g=g.defaultValue,S!=null){if(g!=null)throw Error(r(92));if(we(S)){if(1<S.length)throw Error(r(93));S=S[0]}g=S}g==null&&(g=""),S=g}h._wrapperState={initialValue:re(S)}}function Je(h,g){var S=re(g.value),C=re(g.defaultValue);S!=null&&(S=""+S,S!==h.value&&(h.value=S),g.defaultValue==null&&h.defaultValue!==S&&(h.defaultValue=S)),C!=null&&(h.defaultValue=""+C)}function Ye(h){var g=h.textContent;g===h._wrapperState.initialValue&&g!==""&&g!==null&&(h.value=g)}function Ae(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Me(h,g){return h==null||h==="http://www.w3.org/1999/xhtml"?Ae(g):h==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var Re,sr=function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,S,C,I){MSApp.execUnsafeLocalFunction(function(){return h(g,S,C,I)})}:h}(function(h,g){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=g;else{for(Re=Re||document.createElement("div"),Re.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=Re.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;g.firstChild;)h.appendChild(g.firstChild)}});function ut(h,g){if(g){var S=h.firstChild;if(S&&S===h.lastChild&&S.nodeType===3){S.nodeValue=g;return}}h.textContent=g}var wt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ci=["Webkit","ms","Moz","O"];Object.keys(wt).forEach(function(h){ci.forEach(function(g){g=g+h.charAt(0).toUpperCase()+h.substring(1),wt[g]=wt[h]})});function dc(h,g,S){return g==null||typeof g=="boolean"||g===""?"":S||typeof g!="number"||g===0||wt.hasOwnProperty(h)&&wt[h]?(""+g).trim():g+"px"}function fc(h,g){h=h.style;for(var S in g)if(g.hasOwnProperty(S)){var C=S.indexOf("--")===0,I=dc(S,g[S],C);S==="float"&&(S="cssFloat"),C?h.setProperty(S,I):h[S]=I}}var Md=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hc(h,g){if(g){if(Md[h]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(r(137,h));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(r(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(r(61))}if(g.style!=null&&typeof g.style!="object")throw Error(r(62))}}function Rd(h,g){if(h.indexOf("-")===-1)return typeof g.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pc=null;function Id(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Dd=null,To=null,Kt=null;function Yr(h){if(h=rf(h)){if(typeof Dd!="function")throw Error(r(280));var g=h.stateNode;g&&(g=jm(g),Dd(h.stateNode,h.type,g))}}function Xr(h){To?Kt?Kt.push(h):Kt=[h]:To=h}function Ri(){if(To){var h=To,g=Kt;if(Kt=To=null,Yr(h),g)for(h=0;h<g.length;h++)Yr(g[h])}}function un(h,g){return h(g)}function Jr(){}var kn=!1;function $s(h,g,S){if(kn)return h(g,S);kn=!0;try{return un(h,g,S)}finally{kn=!1,(To!==null||Kt!==null)&&(Jr(),Ri())}}function Gt(h,g){var S=h.stateNode;if(S===null)return null;var C=jm(S);if(C===null)return null;S=C[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(h=h.type,C=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!C;break e;default:h=!1}if(h)return null;if(S&&typeof S!="function")throw Error(r(231,g,typeof S));return S}var ui=!1;if(l)try{var Qr={};Object.defineProperty(Qr,"passive",{get:function(){ui=!0}}),window.addEventListener("test",Qr,Qr),window.removeEventListener("test",Qr,Qr)}catch{ui=!1}function Ii(h,g,S,C,I,B,X,oe,ae){var me=Array.prototype.slice.call(arguments,3);try{g.apply(S,me)}catch(Se){this.onError(Se)}}var Di=!1,fs=null,Bn=!1,Bs=null,Ld={onError:function(h){Di=!0,fs=h}};function vW(h,g,S,C,I,B,X,oe,ae){Di=!1,fs=null,Ii.apply(Ld,arguments)}function xW(h,g,S,C,I,B,X,oe,ae){if(vW.apply(this,arguments),Di){if(Di){var me=fs;Di=!1,fs=null}else throw Error(r(198));Bn||(Bn=!0,Bs=me)}}function Ya(h){var g=h,S=h;if(h.alternate)for(;g.return;)g=g.return;else{h=g;do g=h,(g.flags&4098)!==0&&(S=g.return),h=g.return;while(h)}return g.tag===3?S:null}function JC(h){if(h.tag===13){var g=h.memoizedState;if(g===null&&(h=h.alternate,h!==null&&(g=h.memoizedState)),g!==null)return g.dehydrated}return null}function QC(h){if(Ya(h)!==h)throw Error(r(188))}function bW(h){var g=h.alternate;if(!g){if(g=Ya(h),g===null)throw Error(r(188));return g!==h?null:h}for(var S=h,C=g;;){var I=S.return;if(I===null)break;var B=I.alternate;if(B===null){if(C=I.return,C!==null){S=C;continue}break}if(I.child===B.child){for(B=I.child;B;){if(B===S)return QC(I),h;if(B===C)return QC(I),g;B=B.sibling}throw Error(r(188))}if(S.return!==C.return)S=I,C=B;else{for(var X=!1,oe=I.child;oe;){if(oe===S){X=!0,S=I,C=B;break}if(oe===C){X=!0,C=I,S=B;break}oe=oe.sibling}if(!X){for(oe=B.child;oe;){if(oe===S){X=!0,S=B,C=I;break}if(oe===C){X=!0,C=B,S=I;break}oe=oe.sibling}if(!X)throw Error(r(189))}}if(S.alternate!==C)throw Error(r(190))}if(S.tag!==3)throw Error(r(188));return S.stateNode.current===S?h:g}function ZC(h){return h=bW(h),h!==null?eA(h):null}function eA(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var g=eA(h);if(g!==null)return g;h=h.sibling}return null}var tA=e.unstable_scheduleCallback,rA=e.unstable_cancelCallback,wW=e.unstable_shouldYield,jW=e.unstable_requestPaint,or=e.unstable_now,SW=e.unstable_getCurrentPriorityLevel,Vx=e.unstable_ImmediatePriority,nA=e.unstable_UserBlockingPriority,rm=e.unstable_NormalPriority,NW=e.unstable_LowPriority,iA=e.unstable_IdlePriority,nm=null,hs=null;function kW(h){if(hs&&typeof hs.onCommitFiberRoot=="function")try{hs.onCommitFiberRoot(nm,h,void 0,(h.current.flags&128)===128)}catch{}}var Li=Math.clz32?Math.clz32:EW,_W=Math.log,OW=Math.LN2;function EW(h){return h>>>=0,h===0?32:31-(_W(h)/OW|0)|0}var im=64,sm=4194304;function $d(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function om(h,g){var S=h.pendingLanes;if(S===0)return 0;var C=0,I=h.suspendedLanes,B=h.pingedLanes,X=S&268435455;if(X!==0){var oe=X&~I;oe!==0?C=$d(oe):(B&=X,B!==0&&(C=$d(B)))}else X=S&~I,X!==0?C=$d(X):B!==0&&(C=$d(B));if(C===0)return 0;if(g!==0&&g!==C&&(g&I)===0&&(I=C&-C,B=g&-g,I>=B||I===16&&(B&4194240)!==0))return g;if((C&4)!==0&&(C|=S&16),g=h.entangledLanes,g!==0)for(h=h.entanglements,g&=C;0<g;)S=31-Li(g),I=1<<S,C|=h[S],g&=~I;return C}function CW(h,g){switch(h){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AW(h,g){for(var S=h.suspendedLanes,C=h.pingedLanes,I=h.expirationTimes,B=h.pendingLanes;0<B;){var X=31-Li(B),oe=1<<X,ae=I[X];ae===-1?((oe&S)===0||(oe&C)!==0)&&(I[X]=CW(oe,g)):ae<=g&&(h.expiredLanes|=oe),B&=~oe}}function Kx(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function sA(){var h=im;return im<<=1,(im&4194240)===0&&(im=64),h}function Gx(h){for(var g=[],S=0;31>S;S++)g.push(h);return g}function Bd(h,g,S){h.pendingLanes|=g,g!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,g=31-Li(g),h[g]=S}function TW(h,g){var S=h.pendingLanes&~g;h.pendingLanes=g,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=g,h.mutableReadLanes&=g,h.entangledLanes&=g,g=h.entanglements;var C=h.eventTimes;for(h=h.expirationTimes;0<S;){var I=31-Li(S),B=1<<I;g[I]=0,C[I]=-1,h[I]=-1,S&=~B}}function Yx(h,g){var S=h.entangledLanes|=g;for(h=h.entanglements;S;){var C=31-Li(S),I=1<<C;I&g|h[C]&g&&(h[C]|=g),S&=~I}}var jt=0;function oA(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var aA,Xx,lA,cA,uA,Jx=!1,am=[],Po=null,Mo=null,Ro=null,Fd=new Map,qd=new Map,Io=[],PW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dA(h,g){switch(h){case"focusin":case"focusout":Po=null;break;case"dragenter":case"dragleave":Mo=null;break;case"mouseover":case"mouseout":Ro=null;break;case"pointerover":case"pointerout":Fd.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":qd.delete(g.pointerId)}}function zd(h,g,S,C,I,B){return h===null||h.nativeEvent!==B?(h={blockedOn:g,domEventName:S,eventSystemFlags:C,nativeEvent:B,targetContainers:[I]},g!==null&&(g=rf(g),g!==null&&Xx(g)),h):(h.eventSystemFlags|=C,g=h.targetContainers,I!==null&&g.indexOf(I)===-1&&g.push(I),h)}function MW(h,g,S,C,I){switch(g){case"focusin":return Po=zd(Po,h,g,S,C,I),!0;case"dragenter":return Mo=zd(Mo,h,g,S,C,I),!0;case"mouseover":return Ro=zd(Ro,h,g,S,C,I),!0;case"pointerover":var B=I.pointerId;return Fd.set(B,zd(Fd.get(B)||null,h,g,S,C,I)),!0;case"gotpointercapture":return B=I.pointerId,qd.set(B,zd(qd.get(B)||null,h,g,S,C,I)),!0}return!1}function fA(h){var g=Xa(h.target);if(g!==null){var S=Ya(g);if(S!==null){if(g=S.tag,g===13){if(g=JC(S),g!==null){h.blockedOn=g,uA(h.priority,function(){lA(S)});return}}else if(g===3&&S.stateNode.current.memoizedState.isDehydrated){h.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}h.blockedOn=null}function lm(h){if(h.blockedOn!==null)return!1;for(var g=h.targetContainers;0<g.length;){var S=Zx(h.domEventName,h.eventSystemFlags,g[0],h.nativeEvent);if(S===null){S=h.nativeEvent;var C=new S.constructor(S.type,S);pc=C,S.target.dispatchEvent(C),pc=null}else return g=rf(S),g!==null&&Xx(g),h.blockedOn=S,!1;g.shift()}return!0}function hA(h,g,S){lm(h)&&S.delete(g)}function RW(){Jx=!1,Po!==null&&lm(Po)&&(Po=null),Mo!==null&&lm(Mo)&&(Mo=null),Ro!==null&&lm(Ro)&&(Ro=null),Fd.forEach(hA),qd.forEach(hA)}function Ud(h,g){h.blockedOn===g&&(h.blockedOn=null,Jx||(Jx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,RW)))}function Hd(h){function g(I){return Ud(I,h)}if(0<am.length){Ud(am[0],h);for(var S=1;S<am.length;S++){var C=am[S];C.blockedOn===h&&(C.blockedOn=null)}}for(Po!==null&&Ud(Po,h),Mo!==null&&Ud(Mo,h),Ro!==null&&Ud(Ro,h),Fd.forEach(g),qd.forEach(g),S=0;S<Io.length;S++)C=Io[S],C.blockedOn===h&&(C.blockedOn=null);for(;0<Io.length&&(S=Io[0],S.blockedOn===null);)fA(S),S.blockedOn===null&&Io.shift()}var mc=j.ReactCurrentBatchConfig,cm=!0;function IW(h,g,S,C){var I=jt,B=mc.transition;mc.transition=null;try{jt=1,Qx(h,g,S,C)}finally{jt=I,mc.transition=B}}function DW(h,g,S,C){var I=jt,B=mc.transition;mc.transition=null;try{jt=4,Qx(h,g,S,C)}finally{jt=I,mc.transition=B}}function Qx(h,g,S,C){if(cm){var I=Zx(h,g,S,C);if(I===null)gb(h,g,C,um,S),dA(h,C);else if(MW(I,h,g,S,C))C.stopPropagation();else if(dA(h,C),g&4&&-1<PW.indexOf(h)){for(;I!==null;){var B=rf(I);if(B!==null&&aA(B),B=Zx(h,g,S,C),B===null&&gb(h,g,C,um,S),B===I)break;I=B}I!==null&&C.stopPropagation()}else gb(h,g,C,null,S)}}var um=null;function Zx(h,g,S,C){if(um=null,h=Id(C),h=Xa(h),h!==null)if(g=Ya(h),g===null)h=null;else if(S=g.tag,S===13){if(h=JC(g),h!==null)return h;h=null}else if(S===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;h=null}else g!==h&&(h=null);return um=h,null}function pA(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SW()){case Vx:return 1;case nA:return 4;case rm:case NW:return 16;case iA:return 536870912;default:return 16}default:return 16}}var Do=null,eb=null,dm=null;function mA(){if(dm)return dm;var h,g=eb,S=g.length,C,I="value"in Do?Do.value:Do.textContent,B=I.length;for(h=0;h<S&&g[h]===I[h];h++);var X=S-h;for(C=1;C<=X&&g[S-C]===I[B-C];C++);return dm=I.slice(h,1<C?1-C:void 0)}function fm(h){var g=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&g===13&&(h=13)):h=g,h===10&&(h=13),32<=h||h===13?h:0}function hm(){return!0}function gA(){return!1}function Fn(h){function g(S,C,I,B,X){this._reactName=S,this._targetInst=I,this.type=C,this.nativeEvent=B,this.target=X,this.currentTarget=null;for(var oe in h)h.hasOwnProperty(oe)&&(S=h[oe],this[oe]=S?S(B):B[oe]);return this.isDefaultPrevented=(B.defaultPrevented!=null?B.defaultPrevented:B.returnValue===!1)?hm:gA,this.isPropagationStopped=gA,this}return V(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=hm)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=hm)},persist:function(){},isPersistent:hm}),g}var gc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tb=Fn(gc),Wd=V({},gc,{view:0,detail:0}),LW=Fn(Wd),rb,nb,Vd,pm=V({},Wd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sb,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Vd&&(Vd&&h.type==="mousemove"?(rb=h.screenX-Vd.screenX,nb=h.screenY-Vd.screenY):nb=rb=0,Vd=h),rb)},movementY:function(h){return"movementY"in h?h.movementY:nb}}),yA=Fn(pm),$W=V({},pm,{dataTransfer:0}),BW=Fn($W),FW=V({},Wd,{relatedTarget:0}),ib=Fn(FW),qW=V({},gc,{animationName:0,elapsedTime:0,pseudoElement:0}),zW=Fn(qW),UW=V({},gc,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),HW=Fn(UW),WW=V({},gc,{data:0}),vA=Fn(WW),VW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YW(h){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(h):(h=GW[h])?!!g[h]:!1}function sb(){return YW}var XW=V({},Wd,{key:function(h){if(h.key){var g=VW[h.key]||h.key;if(g!=="Unidentified")return g}return h.type==="keypress"?(h=fm(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?KW[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sb,charCode:function(h){return h.type==="keypress"?fm(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?fm(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),JW=Fn(XW),QW=V({},pm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xA=Fn(QW),ZW=V({},Wd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sb}),eV=Fn(ZW),tV=V({},gc,{propertyName:0,elapsedTime:0,pseudoElement:0}),rV=Fn(tV),nV=V({},pm,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),iV=Fn(nV),sV=[9,13,27,32],ob=l&&"CompositionEvent"in window,Kd=null;l&&"documentMode"in document&&(Kd=document.documentMode);var oV=l&&"TextEvent"in window&&!Kd,bA=l&&(!ob||Kd&&8<Kd&&11>=Kd),wA=" ",jA=!1;function SA(h,g){switch(h){case"keyup":return sV.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NA(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var yc=!1;function aV(h,g){switch(h){case"compositionend":return NA(g);case"keypress":return g.which!==32?null:(jA=!0,wA);case"textInput":return h=g.data,h===wA&&jA?null:h;default:return null}}function lV(h,g){if(yc)return h==="compositionend"||!ob&&SA(h,g)?(h=mA(),dm=eb=Do=null,yc=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return bA&&g.locale!=="ko"?null:g.data;default:return null}}var cV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kA(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g==="input"?!!cV[h.type]:g==="textarea"}function _A(h,g,S,C){Xr(C),g=xm(g,"onChange"),0<g.length&&(S=new tb("onChange","change",null,S,C),h.push({event:S,listeners:g}))}var Gd=null,Yd=null;function uV(h){HA(h,0)}function mm(h){var g=jc(h);if(se(g))return h}function dV(h,g){if(h==="change")return g}var OA=!1;if(l){var ab;if(l){var lb="oninput"in document;if(!lb){var EA=document.createElement("div");EA.setAttribute("oninput","return;"),lb=typeof EA.oninput=="function"}ab=lb}else ab=!1;OA=ab&&(!document.documentMode||9<document.documentMode)}function CA(){Gd&&(Gd.detachEvent("onpropertychange",AA),Yd=Gd=null)}function AA(h){if(h.propertyName==="value"&&mm(Yd)){var g=[];_A(g,Yd,h,Id(h)),$s(uV,g)}}function fV(h,g,S){h==="focusin"?(CA(),Gd=g,Yd=S,Gd.attachEvent("onpropertychange",AA)):h==="focusout"&&CA()}function hV(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return mm(Yd)}function pV(h,g){if(h==="click")return mm(g)}function mV(h,g){if(h==="input"||h==="change")return mm(g)}function gV(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var $i=typeof Object.is=="function"?Object.is:gV;function Xd(h,g){if($i(h,g))return!0;if(typeof h!="object"||h===null||typeof g!="object"||g===null)return!1;var S=Object.keys(h),C=Object.keys(g);if(S.length!==C.length)return!1;for(C=0;C<S.length;C++){var I=S[C];if(!c.call(g,I)||!$i(h[I],g[I]))return!1}return!0}function TA(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function PA(h,g){var S=TA(h);h=0;for(var C;S;){if(S.nodeType===3){if(C=h+S.textContent.length,h<=g&&C>=g)return{node:S,offset:g-h};h=C}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=TA(S)}}function MA(h,g){return h&&g?h===g?!0:h&&h.nodeType===3?!1:g&&g.nodeType===3?MA(h,g.parentNode):"contains"in h?h.contains(g):h.compareDocumentPosition?!!(h.compareDocumentPosition(g)&16):!1:!1}function RA(){for(var h=window,g=ve();g instanceof h.HTMLIFrameElement;){try{var S=typeof g.contentWindow.location.href=="string"}catch{S=!1}if(S)h=g.contentWindow;else break;g=ve(h.document)}return g}function cb(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g&&(g==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||g==="textarea"||h.contentEditable==="true")}function yV(h){var g=RA(),S=h.focusedElem,C=h.selectionRange;if(g!==S&&S&&S.ownerDocument&&MA(S.ownerDocument.documentElement,S)){if(C!==null&&cb(S)){if(g=C.start,h=C.end,h===void 0&&(h=g),"selectionStart"in S)S.selectionStart=g,S.selectionEnd=Math.min(h,S.value.length);else if(h=(g=S.ownerDocument||document)&&g.defaultView||window,h.getSelection){h=h.getSelection();var I=S.textContent.length,B=Math.min(C.start,I);C=C.end===void 0?B:Math.min(C.end,I),!h.extend&&B>C&&(I=C,C=B,B=I),I=PA(S,B);var X=PA(S,C);I&&X&&(h.rangeCount!==1||h.anchorNode!==I.node||h.anchorOffset!==I.offset||h.focusNode!==X.node||h.focusOffset!==X.offset)&&(g=g.createRange(),g.setStart(I.node,I.offset),h.removeAllRanges(),B>C?(h.addRange(g),h.extend(X.node,X.offset)):(g.setEnd(X.node,X.offset),h.addRange(g)))}}for(g=[],h=S;h=h.parentNode;)h.nodeType===1&&g.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<g.length;S++)h=g[S],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var vV=l&&"documentMode"in document&&11>=document.documentMode,vc=null,ub=null,Jd=null,db=!1;function IA(h,g,S){var C=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;db||vc==null||vc!==ve(C)||(C=vc,"selectionStart"in C&&cb(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Jd&&Xd(Jd,C)||(Jd=C,C=xm(ub,"onSelect"),0<C.length&&(g=new tb("onSelect","select",null,g,S),h.push({event:g,listeners:C}),g.target=vc)))}function gm(h,g){var S={};return S[h.toLowerCase()]=g.toLowerCase(),S["Webkit"+h]="webkit"+g,S["Moz"+h]="moz"+g,S}var xc={animationend:gm("Animation","AnimationEnd"),animationiteration:gm("Animation","AnimationIteration"),animationstart:gm("Animation","AnimationStart"),transitionend:gm("Transition","TransitionEnd")},fb={},DA={};l&&(DA=document.createElement("div").style,"AnimationEvent"in window||(delete xc.animationend.animation,delete xc.animationiteration.animation,delete xc.animationstart.animation),"TransitionEvent"in window||delete xc.transitionend.transition);function ym(h){if(fb[h])return fb[h];if(!xc[h])return h;var g=xc[h],S;for(S in g)if(g.hasOwnProperty(S)&&S in DA)return fb[h]=g[S];return h}var LA=ym("animationend"),$A=ym("animationiteration"),BA=ym("animationstart"),FA=ym("transitionend"),qA=new Map,zA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lo(h,g){qA.set(h,g),s(g,[h])}for(var hb=0;hb<zA.length;hb++){var pb=zA[hb],xV=pb.toLowerCase(),bV=pb[0].toUpperCase()+pb.slice(1);Lo(xV,"on"+bV)}Lo(LA,"onAnimationEnd"),Lo($A,"onAnimationIteration"),Lo(BA,"onAnimationStart"),Lo("dblclick","onDoubleClick"),Lo("focusin","onFocus"),Lo("focusout","onBlur"),Lo(FA,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qd));function UA(h,g,S){var C=h.type||"unknown-event";h.currentTarget=S,xW(C,g,void 0,h),h.currentTarget=null}function HA(h,g){g=(g&4)!==0;for(var S=0;S<h.length;S++){var C=h[S],I=C.event;C=C.listeners;e:{var B=void 0;if(g)for(var X=C.length-1;0<=X;X--){var oe=C[X],ae=oe.instance,me=oe.currentTarget;if(oe=oe.listener,ae!==B&&I.isPropagationStopped())break e;UA(I,oe,me),B=ae}else for(X=0;X<C.length;X++){if(oe=C[X],ae=oe.instance,me=oe.currentTarget,oe=oe.listener,ae!==B&&I.isPropagationStopped())break e;UA(I,oe,me),B=ae}}}if(Bn)throw h=Bs,Bn=!1,Bs=null,h}function Bt(h,g){var S=g[jb];S===void 0&&(S=g[jb]=new Set);var C=h+"__bubble";S.has(C)||(WA(g,h,2,!1),S.add(C))}function mb(h,g,S){var C=0;g&&(C|=4),WA(S,h,C,g)}var vm="_reactListening"+Math.random().toString(36).slice(2);function Zd(h){if(!h[vm]){h[vm]=!0,n.forEach(function(S){S!=="selectionchange"&&(wV.has(S)||mb(S,!1,h),mb(S,!0,h))});var g=h.nodeType===9?h:h.ownerDocument;g===null||g[vm]||(g[vm]=!0,mb("selectionchange",!1,g))}}function WA(h,g,S,C){switch(pA(g)){case 1:var I=IW;break;case 4:I=DW;break;default:I=Qx}S=I.bind(null,g,S,h),I=void 0,!ui||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(I=!0),C?I!==void 0?h.addEventListener(g,S,{capture:!0,passive:I}):h.addEventListener(g,S,!0):I!==void 0?h.addEventListener(g,S,{passive:I}):h.addEventListener(g,S,!1)}function gb(h,g,S,C,I){var B=C;if((g&1)===0&&(g&2)===0&&C!==null)e:for(;;){if(C===null)return;var X=C.tag;if(X===3||X===4){var oe=C.stateNode.containerInfo;if(oe===I||oe.nodeType===8&&oe.parentNode===I)break;if(X===4)for(X=C.return;X!==null;){var ae=X.tag;if((ae===3||ae===4)&&(ae=X.stateNode.containerInfo,ae===I||ae.nodeType===8&&ae.parentNode===I))return;X=X.return}for(;oe!==null;){if(X=Xa(oe),X===null)return;if(ae=X.tag,ae===5||ae===6){C=B=X;continue e}oe=oe.parentNode}}C=C.return}$s(function(){var me=B,Se=Id(S),_e=[];e:{var je=qA.get(h);if(je!==void 0){var De=tb,Fe=h;switch(h){case"keypress":if(fm(S)===0)break e;case"keydown":case"keyup":De=JW;break;case"focusin":Fe="focus",De=ib;break;case"focusout":Fe="blur",De=ib;break;case"beforeblur":case"afterblur":De=ib;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=yA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=BW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=eV;break;case LA:case $A:case BA:De=zW;break;case FA:De=rV;break;case"scroll":De=LW;break;case"wheel":De=iV;break;case"copy":case"cut":case"paste":De=HW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=xA}var qe=(g&4)!==0,ar=!qe&&h==="scroll",ce=qe?je!==null?je+"Capture":null:je;qe=[];for(var le=me,de;le!==null;){de=le;var Ce=de.stateNode;if(de.tag===5&&Ce!==null&&(de=Ce,ce!==null&&(Ce=Gt(le,ce),Ce!=null&&qe.push(ef(le,Ce,de)))),ar)break;le=le.return}0<qe.length&&(je=new De(je,Fe,null,S,Se),_e.push({event:je,listeners:qe}))}}if((g&7)===0){e:{if(je=h==="mouseover"||h==="pointerover",De=h==="mouseout"||h==="pointerout",je&&S!==pc&&(Fe=S.relatedTarget||S.fromElement)&&(Xa(Fe)||Fe[Fs]))break e;if((De||je)&&(je=Se.window===Se?Se:(je=Se.ownerDocument)?je.defaultView||je.parentWindow:window,De?(Fe=S.relatedTarget||S.toElement,De=me,Fe=Fe?Xa(Fe):null,Fe!==null&&(ar=Ya(Fe),Fe!==ar||Fe.tag!==5&&Fe.tag!==6)&&(Fe=null)):(De=null,Fe=me),De!==Fe)){if(qe=yA,Ce="onMouseLeave",ce="onMouseEnter",le="mouse",(h==="pointerout"||h==="pointerover")&&(qe=xA,Ce="onPointerLeave",ce="onPointerEnter",le="pointer"),ar=De==null?je:jc(De),de=Fe==null?je:jc(Fe),je=new qe(Ce,le+"leave",De,S,Se),je.target=ar,je.relatedTarget=de,Ce=null,Xa(Se)===me&&(qe=new qe(ce,le+"enter",Fe,S,Se),qe.target=de,qe.relatedTarget=ar,Ce=qe),ar=Ce,De&&Fe)t:{for(qe=De,ce=Fe,le=0,de=qe;de;de=bc(de))le++;for(de=0,Ce=ce;Ce;Ce=bc(Ce))de++;for(;0<le-de;)qe=bc(qe),le--;for(;0<de-le;)ce=bc(ce),de--;for(;le--;){if(qe===ce||ce!==null&&qe===ce.alternate)break t;qe=bc(qe),ce=bc(ce)}qe=null}else qe=null;De!==null&&VA(_e,je,De,qe,!1),Fe!==null&&ar!==null&&VA(_e,ar,Fe,qe,!0)}}e:{if(je=me?jc(me):window,De=je.nodeName&&je.nodeName.toLowerCase(),De==="select"||De==="input"&&je.type==="file")var ze=dV;else if(kA(je))if(OA)ze=mV;else{ze=hV;var Ve=fV}else(De=je.nodeName)&&De.toLowerCase()==="input"&&(je.type==="checkbox"||je.type==="radio")&&(ze=pV);if(ze&&(ze=ze(h,me))){_A(_e,ze,S,Se);break e}Ve&&Ve(h,je,me),h==="focusout"&&(Ve=je._wrapperState)&&Ve.controlled&&je.type==="number"&&he(je,"number",je.value)}switch(Ve=me?jc(me):window,h){case"focusin":(kA(Ve)||Ve.contentEditable==="true")&&(vc=Ve,ub=me,Jd=null);break;case"focusout":Jd=ub=vc=null;break;case"mousedown":db=!0;break;case"contextmenu":case"mouseup":case"dragend":db=!1,IA(_e,S,Se);break;case"selectionchange":if(vV)break;case"keydown":case"keyup":IA(_e,S,Se)}var Ke;if(ob)e:{switch(h){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else yc?SA(h,S)&&(Qe="onCompositionEnd"):h==="keydown"&&S.keyCode===229&&(Qe="onCompositionStart");Qe&&(bA&&S.locale!=="ko"&&(yc||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&yc&&(Ke=mA()):(Do=Se,eb="value"in Do?Do.value:Do.textContent,yc=!0)),Ve=xm(me,Qe),0<Ve.length&&(Qe=new vA(Qe,h,null,S,Se),_e.push({event:Qe,listeners:Ve}),Ke?Qe.data=Ke:(Ke=NA(S),Ke!==null&&(Qe.data=Ke)))),(Ke=oV?aV(h,S):lV(h,S))&&(me=xm(me,"onBeforeInput"),0<me.length&&(Se=new vA("onBeforeInput","beforeinput",null,S,Se),_e.push({event:Se,listeners:me}),Se.data=Ke))}HA(_e,g)})}function ef(h,g,S){return{instance:h,listener:g,currentTarget:S}}function xm(h,g){for(var S=g+"Capture",C=[];h!==null;){var I=h,B=I.stateNode;I.tag===5&&B!==null&&(I=B,B=Gt(h,S),B!=null&&C.unshift(ef(h,B,I)),B=Gt(h,g),B!=null&&C.push(ef(h,B,I))),h=h.return}return C}function bc(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function VA(h,g,S,C,I){for(var B=g._reactName,X=[];S!==null&&S!==C;){var oe=S,ae=oe.alternate,me=oe.stateNode;if(ae!==null&&ae===C)break;oe.tag===5&&me!==null&&(oe=me,I?(ae=Gt(S,B),ae!=null&&X.unshift(ef(S,ae,oe))):I||(ae=Gt(S,B),ae!=null&&X.push(ef(S,ae,oe)))),S=S.return}X.length!==0&&h.push({event:g,listeners:X})}var jV=/\r\n?/g,SV=/\u0000|\uFFFD/g;function KA(h){return(typeof h=="string"?h:""+h).replace(jV,`
`).replace(SV,"")}function bm(h,g,S){if(g=KA(g),KA(h)!==g&&S)throw Error(r(425))}function wm(){}var yb=null,vb=null;function xb(h,g){return h==="textarea"||h==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var bb=typeof setTimeout=="function"?setTimeout:void 0,NV=typeof clearTimeout=="function"?clearTimeout:void 0,GA=typeof Promise=="function"?Promise:void 0,kV=typeof queueMicrotask=="function"?queueMicrotask:typeof GA<"u"?function(h){return GA.resolve(null).then(h).catch(_V)}:bb;function _V(h){setTimeout(function(){throw h})}function wb(h,g){var S=g,C=0;do{var I=S.nextSibling;if(h.removeChild(S),I&&I.nodeType===8)if(S=I.data,S==="/$"){if(C===0){h.removeChild(I),Hd(g);return}C--}else S!=="$"&&S!=="$?"&&S!=="$!"||C++;S=I}while(S);Hd(g)}function $o(h){for(;h!=null;h=h.nextSibling){var g=h.nodeType;if(g===1||g===3)break;if(g===8){if(g=h.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return h}function YA(h){h=h.previousSibling;for(var g=0;h;){if(h.nodeType===8){var S=h.data;if(S==="$"||S==="$!"||S==="$?"){if(g===0)return h;g--}else S==="/$"&&g++}h=h.previousSibling}return null}var wc=Math.random().toString(36).slice(2),ps="__reactFiber$"+wc,tf="__reactProps$"+wc,Fs="__reactContainer$"+wc,jb="__reactEvents$"+wc,OV="__reactListeners$"+wc,EV="__reactHandles$"+wc;function Xa(h){var g=h[ps];if(g)return g;for(var S=h.parentNode;S;){if(g=S[Fs]||S[ps]){if(S=g.alternate,g.child!==null||S!==null&&S.child!==null)for(h=YA(h);h!==null;){if(S=h[ps])return S;h=YA(h)}return g}h=S,S=h.parentNode}return null}function rf(h){return h=h[ps]||h[Fs],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function jc(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(r(33))}function jm(h){return h[tf]||null}var Sb=[],Sc=-1;function Bo(h){return{current:h}}function Ft(h){0>Sc||(h.current=Sb[Sc],Sb[Sc]=null,Sc--)}function Mt(h,g){Sc++,Sb[Sc]=h.current,h.current=g}var Fo={},Zr=Bo(Fo),_n=Bo(!1),Ja=Fo;function Nc(h,g){var S=h.type.contextTypes;if(!S)return Fo;var C=h.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===g)return C.__reactInternalMemoizedMaskedChildContext;var I={},B;for(B in S)I[B]=g[B];return C&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=g,h.__reactInternalMemoizedMaskedChildContext=I),I}function On(h){return h=h.childContextTypes,h!=null}function Sm(){Ft(_n),Ft(Zr)}function XA(h,g,S){if(Zr.current!==Fo)throw Error(r(168));Mt(Zr,g),Mt(_n,S)}function JA(h,g,S){var C=h.stateNode;if(g=g.childContextTypes,typeof C.getChildContext!="function")return S;C=C.getChildContext();for(var I in C)if(!(I in g))throw Error(r(108,Y(h)||"Unknown",I));return V({},S,C)}function Nm(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Fo,Ja=Zr.current,Mt(Zr,h),Mt(_n,_n.current),!0}function QA(h,g,S){var C=h.stateNode;if(!C)throw Error(r(169));S?(h=JA(h,g,Ja),C.__reactInternalMemoizedMergedChildContext=h,Ft(_n),Ft(Zr),Mt(Zr,h)):Ft(_n),Mt(_n,S)}var qs=null,km=!1,Nb=!1;function ZA(h){qs===null?qs=[h]:qs.push(h)}function CV(h){km=!0,ZA(h)}function qo(){if(!Nb&&qs!==null){Nb=!0;var h=0,g=jt;try{var S=qs;for(jt=1;h<S.length;h++){var C=S[h];do C=C(!0);while(C!==null)}qs=null,km=!1}catch(I){throw qs!==null&&(qs=qs.slice(h+1)),tA(Vx,qo),I}finally{jt=g,Nb=!1}}return null}var kc=[],_c=0,_m=null,Om=0,di=[],fi=0,Qa=null,zs=1,Us="";function Za(h,g){kc[_c++]=Om,kc[_c++]=_m,_m=h,Om=g}function eT(h,g,S){di[fi++]=zs,di[fi++]=Us,di[fi++]=Qa,Qa=h;var C=zs;h=Us;var I=32-Li(C)-1;C&=~(1<<I),S+=1;var B=32-Li(g)+I;if(30<B){var X=I-I%5;B=(C&(1<<X)-1).toString(32),C>>=X,I-=X,zs=1<<32-Li(g)+I|S<<I|C,Us=B+h}else zs=1<<B|S<<I|C,Us=h}function kb(h){h.return!==null&&(Za(h,1),eT(h,1,0))}function _b(h){for(;h===_m;)_m=kc[--_c],kc[_c]=null,Om=kc[--_c],kc[_c]=null;for(;h===Qa;)Qa=di[--fi],di[fi]=null,Us=di[--fi],di[fi]=null,zs=di[--fi],di[fi]=null}var qn=null,zn=null,Ht=!1,Bi=null;function tT(h,g){var S=gi(5,null,null,0);S.elementType="DELETED",S.stateNode=g,S.return=h,g=h.deletions,g===null?(h.deletions=[S],h.flags|=16):g.push(S)}function rT(h,g){switch(h.tag){case 5:var S=h.type;return g=g.nodeType!==1||S.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(h.stateNode=g,qn=h,zn=$o(g.firstChild),!0):!1;case 6:return g=h.pendingProps===""||g.nodeType!==3?null:g,g!==null?(h.stateNode=g,qn=h,zn=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(S=Qa!==null?{id:zs,overflow:Us}:null,h.memoizedState={dehydrated:g,treeContext:S,retryLane:1073741824},S=gi(18,null,null,0),S.stateNode=g,S.return=h,h.child=S,qn=h,zn=null,!0):!1;default:return!1}}function Ob(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Eb(h){if(Ht){var g=zn;if(g){var S=g;if(!rT(h,g)){if(Ob(h))throw Error(r(418));g=$o(S.nextSibling);var C=qn;g&&rT(h,g)?tT(C,S):(h.flags=h.flags&-4097|2,Ht=!1,qn=h)}}else{if(Ob(h))throw Error(r(418));h.flags=h.flags&-4097|2,Ht=!1,qn=h}}}function nT(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;qn=h}function Em(h){if(h!==qn)return!1;if(!Ht)return nT(h),Ht=!0,!1;var g;if((g=h.tag!==3)&&!(g=h.tag!==5)&&(g=h.type,g=g!=="head"&&g!=="body"&&!xb(h.type,h.memoizedProps)),g&&(g=zn)){if(Ob(h))throw iT(),Error(r(418));for(;g;)tT(h,g),g=$o(g.nextSibling)}if(nT(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,g=0;h;){if(h.nodeType===8){var S=h.data;if(S==="/$"){if(g===0){zn=$o(h.nextSibling);break e}g--}else S!=="$"&&S!=="$!"&&S!=="$?"||g++}h=h.nextSibling}zn=null}}else zn=qn?$o(h.stateNode.nextSibling):null;return!0}function iT(){for(var h=zn;h;)h=$o(h.nextSibling)}function Oc(){zn=qn=null,Ht=!1}function Cb(h){Bi===null?Bi=[h]:Bi.push(h)}var AV=j.ReactCurrentBatchConfig;function nf(h,g,S){if(h=S.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(r(309));var C=S.stateNode}if(!C)throw Error(r(147,h));var I=C,B=""+h;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===B?g.ref:(g=function(X){var oe=I.refs;X===null?delete oe[B]:oe[B]=X},g._stringRef=B,g)}if(typeof h!="string")throw Error(r(284));if(!S._owner)throw Error(r(290,h))}return h}function Cm(h,g){throw h=Object.prototype.toString.call(g),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":h))}function sT(h){var g=h._init;return g(h._payload)}function oT(h){function g(ce,le){if(h){var de=ce.deletions;de===null?(ce.deletions=[le],ce.flags|=16):de.push(le)}}function S(ce,le){if(!h)return null;for(;le!==null;)g(ce,le),le=le.sibling;return null}function C(ce,le){for(ce=new Map;le!==null;)le.key!==null?ce.set(le.key,le):ce.set(le.index,le),le=le.sibling;return ce}function I(ce,le){return ce=Yo(ce,le),ce.index=0,ce.sibling=null,ce}function B(ce,le,de){return ce.index=de,h?(de=ce.alternate,de!==null?(de=de.index,de<le?(ce.flags|=2,le):de):(ce.flags|=2,le)):(ce.flags|=1048576,le)}function X(ce){return h&&ce.alternate===null&&(ce.flags|=2),ce}function oe(ce,le,de,Ce){return le===null||le.tag!==6?(le=bw(de,ce.mode,Ce),le.return=ce,le):(le=I(le,de),le.return=ce,le)}function ae(ce,le,de,Ce){var ze=de.type;return ze===E?Se(ce,le,de.props.children,Ce,de.key):le!==null&&(le.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===z&&sT(ze)===le.type)?(Ce=I(le,de.props),Ce.ref=nf(ce,le,de),Ce.return=ce,Ce):(Ce=Zm(de.type,de.key,de.props,null,ce.mode,Ce),Ce.ref=nf(ce,le,de),Ce.return=ce,Ce)}function me(ce,le,de,Ce){return le===null||le.tag!==4||le.stateNode.containerInfo!==de.containerInfo||le.stateNode.implementation!==de.implementation?(le=ww(de,ce.mode,Ce),le.return=ce,le):(le=I(le,de.children||[]),le.return=ce,le)}function Se(ce,le,de,Ce,ze){return le===null||le.tag!==7?(le=al(de,ce.mode,Ce,ze),le.return=ce,le):(le=I(le,de),le.return=ce,le)}function _e(ce,le,de){if(typeof le=="string"&&le!==""||typeof le=="number")return le=bw(""+le,ce.mode,de),le.return=ce,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case k:return de=Zm(le.type,le.key,le.props,null,ce.mode,de),de.ref=nf(ce,null,le),de.return=ce,de;case _:return le=ww(le,ce.mode,de),le.return=ce,le;case z:var Ce=le._init;return _e(ce,Ce(le._payload),de)}if(we(le)||q(le))return le=al(le,ce.mode,de,null),le.return=ce,le;Cm(ce,le)}return null}function je(ce,le,de,Ce){var ze=le!==null?le.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return ze!==null?null:oe(ce,le,""+de,Ce);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case k:return de.key===ze?ae(ce,le,de,Ce):null;case _:return de.key===ze?me(ce,le,de,Ce):null;case z:return ze=de._init,je(ce,le,ze(de._payload),Ce)}if(we(de)||q(de))return ze!==null?null:Se(ce,le,de,Ce,null);Cm(ce,de)}return null}function De(ce,le,de,Ce,ze){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return ce=ce.get(de)||null,oe(le,ce,""+Ce,ze);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case k:return ce=ce.get(Ce.key===null?de:Ce.key)||null,ae(le,ce,Ce,ze);case _:return ce=ce.get(Ce.key===null?de:Ce.key)||null,me(le,ce,Ce,ze);case z:var Ve=Ce._init;return De(ce,le,de,Ve(Ce._payload),ze)}if(we(Ce)||q(Ce))return ce=ce.get(de)||null,Se(le,ce,Ce,ze,null);Cm(le,Ce)}return null}function Fe(ce,le,de,Ce){for(var ze=null,Ve=null,Ke=le,Qe=le=0,Cr=null;Ke!==null&&Qe<de.length;Qe++){Ke.index>Qe?(Cr=Ke,Ke=null):Cr=Ke.sibling;var mt=je(ce,Ke,de[Qe],Ce);if(mt===null){Ke===null&&(Ke=Cr);break}h&&Ke&&mt.alternate===null&&g(ce,Ke),le=B(mt,le,Qe),Ve===null?ze=mt:Ve.sibling=mt,Ve=mt,Ke=Cr}if(Qe===de.length)return S(ce,Ke),Ht&&Za(ce,Qe),ze;if(Ke===null){for(;Qe<de.length;Qe++)Ke=_e(ce,de[Qe],Ce),Ke!==null&&(le=B(Ke,le,Qe),Ve===null?ze=Ke:Ve.sibling=Ke,Ve=Ke);return Ht&&Za(ce,Qe),ze}for(Ke=C(ce,Ke);Qe<de.length;Qe++)Cr=De(Ke,ce,Qe,de[Qe],Ce),Cr!==null&&(h&&Cr.alternate!==null&&Ke.delete(Cr.key===null?Qe:Cr.key),le=B(Cr,le,Qe),Ve===null?ze=Cr:Ve.sibling=Cr,Ve=Cr);return h&&Ke.forEach(function(Xo){return g(ce,Xo)}),Ht&&Za(ce,Qe),ze}function qe(ce,le,de,Ce){var ze=q(de);if(typeof ze!="function")throw Error(r(150));if(de=ze.call(de),de==null)throw Error(r(151));for(var Ve=ze=null,Ke=le,Qe=le=0,Cr=null,mt=de.next();Ke!==null&&!mt.done;Qe++,mt=de.next()){Ke.index>Qe?(Cr=Ke,Ke=null):Cr=Ke.sibling;var Xo=je(ce,Ke,mt.value,Ce);if(Xo===null){Ke===null&&(Ke=Cr);break}h&&Ke&&Xo.alternate===null&&g(ce,Ke),le=B(Xo,le,Qe),Ve===null?ze=Xo:Ve.sibling=Xo,Ve=Xo,Ke=Cr}if(mt.done)return S(ce,Ke),Ht&&Za(ce,Qe),ze;if(Ke===null){for(;!mt.done;Qe++,mt=de.next())mt=_e(ce,mt.value,Ce),mt!==null&&(le=B(mt,le,Qe),Ve===null?ze=mt:Ve.sibling=mt,Ve=mt);return Ht&&Za(ce,Qe),ze}for(Ke=C(ce,Ke);!mt.done;Qe++,mt=de.next())mt=De(Ke,ce,Qe,mt.value,Ce),mt!==null&&(h&&mt.alternate!==null&&Ke.delete(mt.key===null?Qe:mt.key),le=B(mt,le,Qe),Ve===null?ze=mt:Ve.sibling=mt,Ve=mt);return h&&Ke.forEach(function(cK){return g(ce,cK)}),Ht&&Za(ce,Qe),ze}function ar(ce,le,de,Ce){if(typeof de=="object"&&de!==null&&de.type===E&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case k:e:{for(var ze=de.key,Ve=le;Ve!==null;){if(Ve.key===ze){if(ze=de.type,ze===E){if(Ve.tag===7){S(ce,Ve.sibling),le=I(Ve,de.props.children),le.return=ce,ce=le;break e}}else if(Ve.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===z&&sT(ze)===Ve.type){S(ce,Ve.sibling),le=I(Ve,de.props),le.ref=nf(ce,Ve,de),le.return=ce,ce=le;break e}S(ce,Ve);break}else g(ce,Ve);Ve=Ve.sibling}de.type===E?(le=al(de.props.children,ce.mode,Ce,de.key),le.return=ce,ce=le):(Ce=Zm(de.type,de.key,de.props,null,ce.mode,Ce),Ce.ref=nf(ce,le,de),Ce.return=ce,ce=Ce)}return X(ce);case _:e:{for(Ve=de.key;le!==null;){if(le.key===Ve)if(le.tag===4&&le.stateNode.containerInfo===de.containerInfo&&le.stateNode.implementation===de.implementation){S(ce,le.sibling),le=I(le,de.children||[]),le.return=ce,ce=le;break e}else{S(ce,le);break}else g(ce,le);le=le.sibling}le=ww(de,ce.mode,Ce),le.return=ce,ce=le}return X(ce);case z:return Ve=de._init,ar(ce,le,Ve(de._payload),Ce)}if(we(de))return Fe(ce,le,de,Ce);if(q(de))return qe(ce,le,de,Ce);Cm(ce,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,le!==null&&le.tag===6?(S(ce,le.sibling),le=I(le,de),le.return=ce,ce=le):(S(ce,le),le=bw(de,ce.mode,Ce),le.return=ce,ce=le),X(ce)):S(ce,le)}return ar}var Ec=oT(!0),aT=oT(!1),Am=Bo(null),Tm=null,Cc=null,Ab=null;function Tb(){Ab=Cc=Tm=null}function Pb(h){var g=Am.current;Ft(Am),h._currentValue=g}function Mb(h,g,S){for(;h!==null;){var C=h.alternate;if((h.childLanes&g)!==g?(h.childLanes|=g,C!==null&&(C.childLanes|=g)):C!==null&&(C.childLanes&g)!==g&&(C.childLanes|=g),h===S)break;h=h.return}}function Ac(h,g){Tm=h,Ab=Cc=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&g)!==0&&(En=!0),h.firstContext=null)}function hi(h){var g=h._currentValue;if(Ab!==h)if(h={context:h,memoizedValue:g,next:null},Cc===null){if(Tm===null)throw Error(r(308));Cc=h,Tm.dependencies={lanes:0,firstContext:h}}else Cc=Cc.next=h;return g}var el=null;function Rb(h){el===null?el=[h]:el.push(h)}function lT(h,g,S,C){var I=g.interleaved;return I===null?(S.next=S,Rb(g)):(S.next=I.next,I.next=S),g.interleaved=S,Hs(h,C)}function Hs(h,g){h.lanes|=g;var S=h.alternate;for(S!==null&&(S.lanes|=g),S=h,h=h.return;h!==null;)h.childLanes|=g,S=h.alternate,S!==null&&(S.childLanes|=g),S=h,h=h.return;return S.tag===3?S.stateNode:null}var zo=!1;function Ib(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cT(h,g){h=h.updateQueue,g.updateQueue===h&&(g.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Ws(h,g){return{eventTime:h,lane:g,tag:0,payload:null,callback:null,next:null}}function Uo(h,g,S){var C=h.updateQueue;if(C===null)return null;if(C=C.shared,(pt&2)!==0){var I=C.pending;return I===null?g.next=g:(g.next=I.next,I.next=g),C.pending=g,Hs(h,S)}return I=C.interleaved,I===null?(g.next=g,Rb(C)):(g.next=I.next,I.next=g),C.interleaved=g,Hs(h,S)}function Pm(h,g,S){if(g=g.updateQueue,g!==null&&(g=g.shared,(S&4194240)!==0)){var C=g.lanes;C&=h.pendingLanes,S|=C,g.lanes=S,Yx(h,S)}}function uT(h,g){var S=h.updateQueue,C=h.alternate;if(C!==null&&(C=C.updateQueue,S===C)){var I=null,B=null;if(S=S.firstBaseUpdate,S!==null){do{var X={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};B===null?I=B=X:B=B.next=X,S=S.next}while(S!==null);B===null?I=B=g:B=B.next=g}else I=B=g;S={baseState:C.baseState,firstBaseUpdate:I,lastBaseUpdate:B,shared:C.shared,effects:C.effects},h.updateQueue=S;return}h=S.lastBaseUpdate,h===null?S.firstBaseUpdate=g:h.next=g,S.lastBaseUpdate=g}function Mm(h,g,S,C){var I=h.updateQueue;zo=!1;var B=I.firstBaseUpdate,X=I.lastBaseUpdate,oe=I.shared.pending;if(oe!==null){I.shared.pending=null;var ae=oe,me=ae.next;ae.next=null,X===null?B=me:X.next=me,X=ae;var Se=h.alternate;Se!==null&&(Se=Se.updateQueue,oe=Se.lastBaseUpdate,oe!==X&&(oe===null?Se.firstBaseUpdate=me:oe.next=me,Se.lastBaseUpdate=ae))}if(B!==null){var _e=I.baseState;X=0,Se=me=ae=null,oe=B;do{var je=oe.lane,De=oe.eventTime;if((C&je)===je){Se!==null&&(Se=Se.next={eventTime:De,lane:0,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null});e:{var Fe=h,qe=oe;switch(je=g,De=S,qe.tag){case 1:if(Fe=qe.payload,typeof Fe=="function"){_e=Fe.call(De,_e,je);break e}_e=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=qe.payload,je=typeof Fe=="function"?Fe.call(De,_e,je):Fe,je==null)break e;_e=V({},_e,je);break e;case 2:zo=!0}}oe.callback!==null&&oe.lane!==0&&(h.flags|=64,je=I.effects,je===null?I.effects=[oe]:je.push(oe))}else De={eventTime:De,lane:je,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},Se===null?(me=Se=De,ae=_e):Se=Se.next=De,X|=je;if(oe=oe.next,oe===null){if(oe=I.shared.pending,oe===null)break;je=oe,oe=je.next,je.next=null,I.lastBaseUpdate=je,I.shared.pending=null}}while(!0);if(Se===null&&(ae=_e),I.baseState=ae,I.firstBaseUpdate=me,I.lastBaseUpdate=Se,g=I.shared.interleaved,g!==null){I=g;do X|=I.lane,I=I.next;while(I!==g)}else B===null&&(I.shared.lanes=0);nl|=X,h.lanes=X,h.memoizedState=_e}}function dT(h,g,S){if(h=g.effects,g.effects=null,h!==null)for(g=0;g<h.length;g++){var C=h[g],I=C.callback;if(I!==null){if(C.callback=null,C=S,typeof I!="function")throw Error(r(191,I));I.call(C)}}}var sf={},ms=Bo(sf),of=Bo(sf),af=Bo(sf);function tl(h){if(h===sf)throw Error(r(174));return h}function Db(h,g){switch(Mt(af,g),Mt(of,h),Mt(ms,sf),h=g.nodeType,h){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:Me(null,"");break;default:h=h===8?g.parentNode:g,g=h.namespaceURI||null,h=h.tagName,g=Me(g,h)}Ft(ms),Mt(ms,g)}function Tc(){Ft(ms),Ft(of),Ft(af)}function fT(h){tl(af.current);var g=tl(ms.current),S=Me(g,h.type);g!==S&&(Mt(of,h),Mt(ms,S))}function Lb(h){of.current===h&&(Ft(ms),Ft(of))}var Yt=Bo(0);function Rm(h){for(var g=h;g!==null;){if(g.tag===13){var S=g.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||S.data==="$?"||S.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var $b=[];function Bb(){for(var h=0;h<$b.length;h++)$b[h]._workInProgressVersionPrimary=null;$b.length=0}var Im=j.ReactCurrentDispatcher,Fb=j.ReactCurrentBatchConfig,rl=0,Xt=null,vr=null,Or=null,Dm=!1,lf=!1,cf=0,TV=0;function en(){throw Error(r(321))}function qb(h,g){if(g===null)return!1;for(var S=0;S<g.length&&S<h.length;S++)if(!$i(h[S],g[S]))return!1;return!0}function zb(h,g,S,C,I,B){if(rl=B,Xt=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Im.current=h===null||h.memoizedState===null?IV:DV,h=S(C,I),lf){B=0;do{if(lf=!1,cf=0,25<=B)throw Error(r(301));B+=1,Or=vr=null,g.updateQueue=null,Im.current=LV,h=S(C,I)}while(lf)}if(Im.current=Bm,g=vr!==null&&vr.next!==null,rl=0,Or=vr=Xt=null,Dm=!1,g)throw Error(r(300));return h}function Ub(){var h=cf!==0;return cf=0,h}function gs(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?Xt.memoizedState=Or=h:Or=Or.next=h,Or}function pi(){if(vr===null){var h=Xt.alternate;h=h!==null?h.memoizedState:null}else h=vr.next;var g=Or===null?Xt.memoizedState:Or.next;if(g!==null)Or=g,vr=h;else{if(h===null)throw Error(r(310));vr=h,h={memoizedState:vr.memoizedState,baseState:vr.baseState,baseQueue:vr.baseQueue,queue:vr.queue,next:null},Or===null?Xt.memoizedState=Or=h:Or=Or.next=h}return Or}function uf(h,g){return typeof g=="function"?g(h):g}function Hb(h){var g=pi(),S=g.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=h;var C=vr,I=C.baseQueue,B=S.pending;if(B!==null){if(I!==null){var X=I.next;I.next=B.next,B.next=X}C.baseQueue=I=B,S.pending=null}if(I!==null){B=I.next,C=C.baseState;var oe=X=null,ae=null,me=B;do{var Se=me.lane;if((rl&Se)===Se)ae!==null&&(ae=ae.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),C=me.hasEagerState?me.eagerState:h(C,me.action);else{var _e={lane:Se,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};ae===null?(oe=ae=_e,X=C):ae=ae.next=_e,Xt.lanes|=Se,nl|=Se}me=me.next}while(me!==null&&me!==B);ae===null?X=C:ae.next=oe,$i(C,g.memoizedState)||(En=!0),g.memoizedState=C,g.baseState=X,g.baseQueue=ae,S.lastRenderedState=C}if(h=S.interleaved,h!==null){I=h;do B=I.lane,Xt.lanes|=B,nl|=B,I=I.next;while(I!==h)}else I===null&&(S.lanes=0);return[g.memoizedState,S.dispatch]}function Wb(h){var g=pi(),S=g.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=h;var C=S.dispatch,I=S.pending,B=g.memoizedState;if(I!==null){S.pending=null;var X=I=I.next;do B=h(B,X.action),X=X.next;while(X!==I);$i(B,g.memoizedState)||(En=!0),g.memoizedState=B,g.baseQueue===null&&(g.baseState=B),S.lastRenderedState=B}return[B,C]}function hT(){}function pT(h,g){var S=Xt,C=pi(),I=g(),B=!$i(C.memoizedState,I);if(B&&(C.memoizedState=I,En=!0),C=C.queue,Vb(yT.bind(null,S,C,h),[h]),C.getSnapshot!==g||B||Or!==null&&Or.memoizedState.tag&1){if(S.flags|=2048,df(9,gT.bind(null,S,C,I,g),void 0,null),Er===null)throw Error(r(349));(rl&30)!==0||mT(S,g,I)}return I}function mT(h,g,S){h.flags|=16384,h={getSnapshot:g,value:S},g=Xt.updateQueue,g===null?(g={lastEffect:null,stores:null},Xt.updateQueue=g,g.stores=[h]):(S=g.stores,S===null?g.stores=[h]:S.push(h))}function gT(h,g,S,C){g.value=S,g.getSnapshot=C,vT(g)&&xT(h)}function yT(h,g,S){return S(function(){vT(g)&&xT(h)})}function vT(h){var g=h.getSnapshot;h=h.value;try{var S=g();return!$i(h,S)}catch{return!0}}function xT(h){var g=Hs(h,1);g!==null&&Ui(g,h,1,-1)}function bT(h){var g=gs();return typeof h=="function"&&(h=h()),g.memoizedState=g.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uf,lastRenderedState:h},g.queue=h,h=h.dispatch=RV.bind(null,Xt,h),[g.memoizedState,h]}function df(h,g,S,C){return h={tag:h,create:g,destroy:S,deps:C,next:null},g=Xt.updateQueue,g===null?(g={lastEffect:null,stores:null},Xt.updateQueue=g,g.lastEffect=h.next=h):(S=g.lastEffect,S===null?g.lastEffect=h.next=h:(C=S.next,S.next=h,h.next=C,g.lastEffect=h)),h}function wT(){return pi().memoizedState}function Lm(h,g,S,C){var I=gs();Xt.flags|=h,I.memoizedState=df(1|g,S,void 0,C===void 0?null:C)}function $m(h,g,S,C){var I=pi();C=C===void 0?null:C;var B=void 0;if(vr!==null){var X=vr.memoizedState;if(B=X.destroy,C!==null&&qb(C,X.deps)){I.memoizedState=df(g,S,B,C);return}}Xt.flags|=h,I.memoizedState=df(1|g,S,B,C)}function jT(h,g){return Lm(8390656,8,h,g)}function Vb(h,g){return $m(2048,8,h,g)}function ST(h,g){return $m(4,2,h,g)}function NT(h,g){return $m(4,4,h,g)}function kT(h,g){if(typeof g=="function")return h=h(),g(h),function(){g(null)};if(g!=null)return h=h(),g.current=h,function(){g.current=null}}function _T(h,g,S){return S=S!=null?S.concat([h]):null,$m(4,4,kT.bind(null,g,h),S)}function Kb(){}function OT(h,g){var S=pi();g=g===void 0?null:g;var C=S.memoizedState;return C!==null&&g!==null&&qb(g,C[1])?C[0]:(S.memoizedState=[h,g],h)}function ET(h,g){var S=pi();g=g===void 0?null:g;var C=S.memoizedState;return C!==null&&g!==null&&qb(g,C[1])?C[0]:(h=h(),S.memoizedState=[h,g],h)}function CT(h,g,S){return(rl&21)===0?(h.baseState&&(h.baseState=!1,En=!0),h.memoizedState=S):($i(S,g)||(S=sA(),Xt.lanes|=S,nl|=S,h.baseState=!0),g)}function PV(h,g){var S=jt;jt=S!==0&&4>S?S:4,h(!0);var C=Fb.transition;Fb.transition={};try{h(!1),g()}finally{jt=S,Fb.transition=C}}function AT(){return pi().memoizedState}function MV(h,g,S){var C=Ko(h);if(S={lane:C,action:S,hasEagerState:!1,eagerState:null,next:null},TT(h))PT(g,S);else if(S=lT(h,g,S,C),S!==null){var I=fn();Ui(S,h,C,I),MT(S,g,C)}}function RV(h,g,S){var C=Ko(h),I={lane:C,action:S,hasEagerState:!1,eagerState:null,next:null};if(TT(h))PT(g,I);else{var B=h.alternate;if(h.lanes===0&&(B===null||B.lanes===0)&&(B=g.lastRenderedReducer,B!==null))try{var X=g.lastRenderedState,oe=B(X,S);if(I.hasEagerState=!0,I.eagerState=oe,$i(oe,X)){var ae=g.interleaved;ae===null?(I.next=I,Rb(g)):(I.next=ae.next,ae.next=I),g.interleaved=I;return}}catch{}finally{}S=lT(h,g,I,C),S!==null&&(I=fn(),Ui(S,h,C,I),MT(S,g,C))}}function TT(h){var g=h.alternate;return h===Xt||g!==null&&g===Xt}function PT(h,g){lf=Dm=!0;var S=h.pending;S===null?g.next=g:(g.next=S.next,S.next=g),h.pending=g}function MT(h,g,S){if((S&4194240)!==0){var C=g.lanes;C&=h.pendingLanes,S|=C,g.lanes=S,Yx(h,S)}}var Bm={readContext:hi,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},IV={readContext:hi,useCallback:function(h,g){return gs().memoizedState=[h,g===void 0?null:g],h},useContext:hi,useEffect:jT,useImperativeHandle:function(h,g,S){return S=S!=null?S.concat([h]):null,Lm(4194308,4,kT.bind(null,g,h),S)},useLayoutEffect:function(h,g){return Lm(4194308,4,h,g)},useInsertionEffect:function(h,g){return Lm(4,2,h,g)},useMemo:function(h,g){var S=gs();return g=g===void 0?null:g,h=h(),S.memoizedState=[h,g],h},useReducer:function(h,g,S){var C=gs();return g=S!==void 0?S(g):g,C.memoizedState=C.baseState=g,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:g},C.queue=h,h=h.dispatch=MV.bind(null,Xt,h),[C.memoizedState,h]},useRef:function(h){var g=gs();return h={current:h},g.memoizedState=h},useState:bT,useDebugValue:Kb,useDeferredValue:function(h){return gs().memoizedState=h},useTransition:function(){var h=bT(!1),g=h[0];return h=PV.bind(null,h[1]),gs().memoizedState=h,[g,h]},useMutableSource:function(){},useSyncExternalStore:function(h,g,S){var C=Xt,I=gs();if(Ht){if(S===void 0)throw Error(r(407));S=S()}else{if(S=g(),Er===null)throw Error(r(349));(rl&30)!==0||mT(C,g,S)}I.memoizedState=S;var B={value:S,getSnapshot:g};return I.queue=B,jT(yT.bind(null,C,B,h),[h]),C.flags|=2048,df(9,gT.bind(null,C,B,S,g),void 0,null),S},useId:function(){var h=gs(),g=Er.identifierPrefix;if(Ht){var S=Us,C=zs;S=(C&~(1<<32-Li(C)-1)).toString(32)+S,g=":"+g+"R"+S,S=cf++,0<S&&(g+="H"+S.toString(32)),g+=":"}else S=TV++,g=":"+g+"r"+S.toString(32)+":";return h.memoizedState=g},unstable_isNewReconciler:!1},DV={readContext:hi,useCallback:OT,useContext:hi,useEffect:Vb,useImperativeHandle:_T,useInsertionEffect:ST,useLayoutEffect:NT,useMemo:ET,useReducer:Hb,useRef:wT,useState:function(){return Hb(uf)},useDebugValue:Kb,useDeferredValue:function(h){var g=pi();return CT(g,vr.memoizedState,h)},useTransition:function(){var h=Hb(uf)[0],g=pi().memoizedState;return[h,g]},useMutableSource:hT,useSyncExternalStore:pT,useId:AT,unstable_isNewReconciler:!1},LV={readContext:hi,useCallback:OT,useContext:hi,useEffect:Vb,useImperativeHandle:_T,useInsertionEffect:ST,useLayoutEffect:NT,useMemo:ET,useReducer:Wb,useRef:wT,useState:function(){return Wb(uf)},useDebugValue:Kb,useDeferredValue:function(h){var g=pi();return vr===null?g.memoizedState=h:CT(g,vr.memoizedState,h)},useTransition:function(){var h=Wb(uf)[0],g=pi().memoizedState;return[h,g]},useMutableSource:hT,useSyncExternalStore:pT,useId:AT,unstable_isNewReconciler:!1};function Fi(h,g){if(h&&h.defaultProps){g=V({},g),h=h.defaultProps;for(var S in h)g[S]===void 0&&(g[S]=h[S]);return g}return g}function Gb(h,g,S,C){g=h.memoizedState,S=S(C,g),S=S==null?g:V({},g,S),h.memoizedState=S,h.lanes===0&&(h.updateQueue.baseState=S)}var Fm={isMounted:function(h){return(h=h._reactInternals)?Ya(h)===h:!1},enqueueSetState:function(h,g,S){h=h._reactInternals;var C=fn(),I=Ko(h),B=Ws(C,I);B.payload=g,S!=null&&(B.callback=S),g=Uo(h,B,I),g!==null&&(Ui(g,h,I,C),Pm(g,h,I))},enqueueReplaceState:function(h,g,S){h=h._reactInternals;var C=fn(),I=Ko(h),B=Ws(C,I);B.tag=1,B.payload=g,S!=null&&(B.callback=S),g=Uo(h,B,I),g!==null&&(Ui(g,h,I,C),Pm(g,h,I))},enqueueForceUpdate:function(h,g){h=h._reactInternals;var S=fn(),C=Ko(h),I=Ws(S,C);I.tag=2,g!=null&&(I.callback=g),g=Uo(h,I,C),g!==null&&(Ui(g,h,C,S),Pm(g,h,C))}};function RT(h,g,S,C,I,B,X){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(C,B,X):g.prototype&&g.prototype.isPureReactComponent?!Xd(S,C)||!Xd(I,B):!0}function IT(h,g,S){var C=!1,I=Fo,B=g.contextType;return typeof B=="object"&&B!==null?B=hi(B):(I=On(g)?Ja:Zr.current,C=g.contextTypes,B=(C=C!=null)?Nc(h,I):Fo),g=new g(S,B),h.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Fm,h.stateNode=g,g._reactInternals=h,C&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=I,h.__reactInternalMemoizedMaskedChildContext=B),g}function DT(h,g,S,C){h=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(S,C),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(S,C),g.state!==h&&Fm.enqueueReplaceState(g,g.state,null)}function Yb(h,g,S,C){var I=h.stateNode;I.props=S,I.state=h.memoizedState,I.refs={},Ib(h);var B=g.contextType;typeof B=="object"&&B!==null?I.context=hi(B):(B=On(g)?Ja:Zr.current,I.context=Nc(h,B)),I.state=h.memoizedState,B=g.getDerivedStateFromProps,typeof B=="function"&&(Gb(h,g,B,S),I.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(g=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),g!==I.state&&Fm.enqueueReplaceState(I,I.state,null),Mm(h,S,I,C),I.state=h.memoizedState),typeof I.componentDidMount=="function"&&(h.flags|=4194308)}function Pc(h,g){try{var S="",C=g;do S+=Q(C),C=C.return;while(C);var I=S}catch(B){I=`
Error generating stack: `+B.message+`
`+B.stack}return{value:h,source:g,stack:I,digest:null}}function Xb(h,g,S){return{value:h,source:null,stack:S??null,digest:g??null}}function Jb(h,g){try{console.error(g.value)}catch(S){setTimeout(function(){throw S})}}var $V=typeof WeakMap=="function"?WeakMap:Map;function LT(h,g,S){S=Ws(-1,S),S.tag=3,S.payload={element:null};var C=g.value;return S.callback=function(){Km||(Km=!0,fw=C),Jb(h,g)},S}function $T(h,g,S){S=Ws(-1,S),S.tag=3;var C=h.type.getDerivedStateFromError;if(typeof C=="function"){var I=g.value;S.payload=function(){return C(I)},S.callback=function(){Jb(h,g)}}var B=h.stateNode;return B!==null&&typeof B.componentDidCatch=="function"&&(S.callback=function(){Jb(h,g),typeof C!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var X=g.stack;this.componentDidCatch(g.value,{componentStack:X!==null?X:""})}),S}function BT(h,g,S){var C=h.pingCache;if(C===null){C=h.pingCache=new $V;var I=new Set;C.set(g,I)}else I=C.get(g),I===void 0&&(I=new Set,C.set(g,I));I.has(S)||(I.add(S),h=QV.bind(null,h,g,S),g.then(h,h))}function FT(h){do{var g;if((g=h.tag===13)&&(g=h.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return h;h=h.return}while(h!==null);return null}function qT(h,g,S,C,I){return(h.mode&1)===0?(h===g?h.flags|=65536:(h.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(g=Ws(-1,1),g.tag=2,Uo(S,g,1))),S.lanes|=1),h):(h.flags|=65536,h.lanes=I,h)}var BV=j.ReactCurrentOwner,En=!1;function dn(h,g,S,C){g.child=h===null?aT(g,null,S,C):Ec(g,h.child,S,C)}function zT(h,g,S,C,I){S=S.render;var B=g.ref;return Ac(g,I),C=zb(h,g,S,C,B,I),S=Ub(),h!==null&&!En?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~I,Vs(h,g,I)):(Ht&&S&&kb(g),g.flags|=1,dn(h,g,C,I),g.child)}function UT(h,g,S,C,I){if(h===null){var B=S.type;return typeof B=="function"&&!xw(B)&&B.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(g.tag=15,g.type=B,HT(h,g,B,C,I)):(h=Zm(S.type,null,C,g,g.mode,I),h.ref=g.ref,h.return=g,g.child=h)}if(B=h.child,(h.lanes&I)===0){var X=B.memoizedProps;if(S=S.compare,S=S!==null?S:Xd,S(X,C)&&h.ref===g.ref)return Vs(h,g,I)}return g.flags|=1,h=Yo(B,C),h.ref=g.ref,h.return=g,g.child=h}function HT(h,g,S,C,I){if(h!==null){var B=h.memoizedProps;if(Xd(B,C)&&h.ref===g.ref)if(En=!1,g.pendingProps=C=B,(h.lanes&I)!==0)(h.flags&131072)!==0&&(En=!0);else return g.lanes=h.lanes,Vs(h,g,I)}return Qb(h,g,S,C,I)}function WT(h,g,S){var C=g.pendingProps,I=C.children,B=h!==null?h.memoizedState:null;if(C.mode==="hidden")if((g.mode&1)===0)g.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(Rc,Un),Un|=S;else{if((S&1073741824)===0)return h=B!==null?B.baseLanes|S:S,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:h,cachePool:null,transitions:null},g.updateQueue=null,Mt(Rc,Un),Un|=h,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=B!==null?B.baseLanes:S,Mt(Rc,Un),Un|=C}else B!==null?(C=B.baseLanes|S,g.memoizedState=null):C=S,Mt(Rc,Un),Un|=C;return dn(h,g,I,S),g.child}function VT(h,g){var S=g.ref;(h===null&&S!==null||h!==null&&h.ref!==S)&&(g.flags|=512,g.flags|=2097152)}function Qb(h,g,S,C,I){var B=On(S)?Ja:Zr.current;return B=Nc(g,B),Ac(g,I),S=zb(h,g,S,C,B,I),C=Ub(),h!==null&&!En?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~I,Vs(h,g,I)):(Ht&&C&&kb(g),g.flags|=1,dn(h,g,S,I),g.child)}function KT(h,g,S,C,I){if(On(S)){var B=!0;Nm(g)}else B=!1;if(Ac(g,I),g.stateNode===null)zm(h,g),IT(g,S,C),Yb(g,S,C,I),C=!0;else if(h===null){var X=g.stateNode,oe=g.memoizedProps;X.props=oe;var ae=X.context,me=S.contextType;typeof me=="object"&&me!==null?me=hi(me):(me=On(S)?Ja:Zr.current,me=Nc(g,me));var Se=S.getDerivedStateFromProps,_e=typeof Se=="function"||typeof X.getSnapshotBeforeUpdate=="function";_e||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(oe!==C||ae!==me)&&DT(g,X,C,me),zo=!1;var je=g.memoizedState;X.state=je,Mm(g,C,X,I),ae=g.memoizedState,oe!==C||je!==ae||_n.current||zo?(typeof Se=="function"&&(Gb(g,S,Se,C),ae=g.memoizedState),(oe=zo||RT(g,S,oe,C,je,ae,me))?(_e||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(g.flags|=4194308)):(typeof X.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=C,g.memoizedState=ae),X.props=C,X.state=ae,X.context=me,C=oe):(typeof X.componentDidMount=="function"&&(g.flags|=4194308),C=!1)}else{X=g.stateNode,cT(h,g),oe=g.memoizedProps,me=g.type===g.elementType?oe:Fi(g.type,oe),X.props=me,_e=g.pendingProps,je=X.context,ae=S.contextType,typeof ae=="object"&&ae!==null?ae=hi(ae):(ae=On(S)?Ja:Zr.current,ae=Nc(g,ae));var De=S.getDerivedStateFromProps;(Se=typeof De=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(oe!==_e||je!==ae)&&DT(g,X,C,ae),zo=!1,je=g.memoizedState,X.state=je,Mm(g,C,X,I);var Fe=g.memoizedState;oe!==_e||je!==Fe||_n.current||zo?(typeof De=="function"&&(Gb(g,S,De,C),Fe=g.memoizedState),(me=zo||RT(g,S,me,C,je,Fe,ae)||!1)?(Se||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(C,Fe,ae),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(C,Fe,ae)),typeof X.componentDidUpdate=="function"&&(g.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof X.componentDidUpdate!="function"||oe===h.memoizedProps&&je===h.memoizedState||(g.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||oe===h.memoizedProps&&je===h.memoizedState||(g.flags|=1024),g.memoizedProps=C,g.memoizedState=Fe),X.props=C,X.state=Fe,X.context=ae,C=me):(typeof X.componentDidUpdate!="function"||oe===h.memoizedProps&&je===h.memoizedState||(g.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||oe===h.memoizedProps&&je===h.memoizedState||(g.flags|=1024),C=!1)}return Zb(h,g,S,C,B,I)}function Zb(h,g,S,C,I,B){VT(h,g);var X=(g.flags&128)!==0;if(!C&&!X)return I&&QA(g,S,!1),Vs(h,g,B);C=g.stateNode,BV.current=g;var oe=X&&typeof S.getDerivedStateFromError!="function"?null:C.render();return g.flags|=1,h!==null&&X?(g.child=Ec(g,h.child,null,B),g.child=Ec(g,null,oe,B)):dn(h,g,oe,B),g.memoizedState=C.state,I&&QA(g,S,!0),g.child}function GT(h){var g=h.stateNode;g.pendingContext?XA(h,g.pendingContext,g.pendingContext!==g.context):g.context&&XA(h,g.context,!1),Db(h,g.containerInfo)}function YT(h,g,S,C,I){return Oc(),Cb(I),g.flags|=256,dn(h,g,S,C),g.child}var ew={dehydrated:null,treeContext:null,retryLane:0};function tw(h){return{baseLanes:h,cachePool:null,transitions:null}}function XT(h,g,S){var C=g.pendingProps,I=Yt.current,B=!1,X=(g.flags&128)!==0,oe;if((oe=X)||(oe=h!==null&&h.memoizedState===null?!1:(I&2)!==0),oe?(B=!0,g.flags&=-129):(h===null||h.memoizedState!==null)&&(I|=1),Mt(Yt,I&1),h===null)return Eb(g),h=g.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((g.mode&1)===0?g.lanes=1:h.data==="$!"?g.lanes=8:g.lanes=1073741824,null):(X=C.children,h=C.fallback,B?(C=g.mode,B=g.child,X={mode:"hidden",children:X},(C&1)===0&&B!==null?(B.childLanes=0,B.pendingProps=X):B=eg(X,C,0,null),h=al(h,C,S,null),B.return=g,h.return=g,B.sibling=h,g.child=B,g.child.memoizedState=tw(S),g.memoizedState=ew,h):rw(g,X));if(I=h.memoizedState,I!==null&&(oe=I.dehydrated,oe!==null))return FV(h,g,X,C,oe,I,S);if(B){B=C.fallback,X=g.mode,I=h.child,oe=I.sibling;var ae={mode:"hidden",children:C.children};return(X&1)===0&&g.child!==I?(C=g.child,C.childLanes=0,C.pendingProps=ae,g.deletions=null):(C=Yo(I,ae),C.subtreeFlags=I.subtreeFlags&14680064),oe!==null?B=Yo(oe,B):(B=al(B,X,S,null),B.flags|=2),B.return=g,C.return=g,C.sibling=B,g.child=C,C=B,B=g.child,X=h.child.memoizedState,X=X===null?tw(S):{baseLanes:X.baseLanes|S,cachePool:null,transitions:X.transitions},B.memoizedState=X,B.childLanes=h.childLanes&~S,g.memoizedState=ew,C}return B=h.child,h=B.sibling,C=Yo(B,{mode:"visible",children:C.children}),(g.mode&1)===0&&(C.lanes=S),C.return=g,C.sibling=null,h!==null&&(S=g.deletions,S===null?(g.deletions=[h],g.flags|=16):S.push(h)),g.child=C,g.memoizedState=null,C}function rw(h,g){return g=eg({mode:"visible",children:g},h.mode,0,null),g.return=h,h.child=g}function qm(h,g,S,C){return C!==null&&Cb(C),Ec(g,h.child,null,S),h=rw(g,g.pendingProps.children),h.flags|=2,g.memoizedState=null,h}function FV(h,g,S,C,I,B,X){if(S)return g.flags&256?(g.flags&=-257,C=Xb(Error(r(422))),qm(h,g,X,C)):g.memoizedState!==null?(g.child=h.child,g.flags|=128,null):(B=C.fallback,I=g.mode,C=eg({mode:"visible",children:C.children},I,0,null),B=al(B,I,X,null),B.flags|=2,C.return=g,B.return=g,C.sibling=B,g.child=C,(g.mode&1)!==0&&Ec(g,h.child,null,X),g.child.memoizedState=tw(X),g.memoizedState=ew,B);if((g.mode&1)===0)return qm(h,g,X,null);if(I.data==="$!"){if(C=I.nextSibling&&I.nextSibling.dataset,C)var oe=C.dgst;return C=oe,B=Error(r(419)),C=Xb(B,C,void 0),qm(h,g,X,C)}if(oe=(X&h.childLanes)!==0,En||oe){if(C=Er,C!==null){switch(X&-X){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}I=(I&(C.suspendedLanes|X))!==0?0:I,I!==0&&I!==B.retryLane&&(B.retryLane=I,Hs(h,I),Ui(C,h,I,-1))}return vw(),C=Xb(Error(r(421))),qm(h,g,X,C)}return I.data==="$?"?(g.flags|=128,g.child=h.child,g=ZV.bind(null,h),I._reactRetry=g,null):(h=B.treeContext,zn=$o(I.nextSibling),qn=g,Ht=!0,Bi=null,h!==null&&(di[fi++]=zs,di[fi++]=Us,di[fi++]=Qa,zs=h.id,Us=h.overflow,Qa=g),g=rw(g,C.children),g.flags|=4096,g)}function JT(h,g,S){h.lanes|=g;var C=h.alternate;C!==null&&(C.lanes|=g),Mb(h.return,g,S)}function nw(h,g,S,C,I){var B=h.memoizedState;B===null?h.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:C,tail:S,tailMode:I}:(B.isBackwards=g,B.rendering=null,B.renderingStartTime=0,B.last=C,B.tail=S,B.tailMode=I)}function QT(h,g,S){var C=g.pendingProps,I=C.revealOrder,B=C.tail;if(dn(h,g,C.children,S),C=Yt.current,(C&2)!==0)C=C&1|2,g.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=g.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&JT(h,S,g);else if(h.tag===19)JT(h,S,g);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===g)break e;for(;h.sibling===null;){if(h.return===null||h.return===g)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}C&=1}if(Mt(Yt,C),(g.mode&1)===0)g.memoizedState=null;else switch(I){case"forwards":for(S=g.child,I=null;S!==null;)h=S.alternate,h!==null&&Rm(h)===null&&(I=S),S=S.sibling;S=I,S===null?(I=g.child,g.child=null):(I=S.sibling,S.sibling=null),nw(g,!1,I,S,B);break;case"backwards":for(S=null,I=g.child,g.child=null;I!==null;){if(h=I.alternate,h!==null&&Rm(h)===null){g.child=I;break}h=I.sibling,I.sibling=S,S=I,I=h}nw(g,!0,S,null,B);break;case"together":nw(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function zm(h,g){(g.mode&1)===0&&h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2)}function Vs(h,g,S){if(h!==null&&(g.dependencies=h.dependencies),nl|=g.lanes,(S&g.childLanes)===0)return null;if(h!==null&&g.child!==h.child)throw Error(r(153));if(g.child!==null){for(h=g.child,S=Yo(h,h.pendingProps),g.child=S,S.return=g;h.sibling!==null;)h=h.sibling,S=S.sibling=Yo(h,h.pendingProps),S.return=g;S.sibling=null}return g.child}function qV(h,g,S){switch(g.tag){case 3:GT(g),Oc();break;case 5:fT(g);break;case 1:On(g.type)&&Nm(g);break;case 4:Db(g,g.stateNode.containerInfo);break;case 10:var C=g.type._context,I=g.memoizedProps.value;Mt(Am,C._currentValue),C._currentValue=I;break;case 13:if(C=g.memoizedState,C!==null)return C.dehydrated!==null?(Mt(Yt,Yt.current&1),g.flags|=128,null):(S&g.child.childLanes)!==0?XT(h,g,S):(Mt(Yt,Yt.current&1),h=Vs(h,g,S),h!==null?h.sibling:null);Mt(Yt,Yt.current&1);break;case 19:if(C=(S&g.childLanes)!==0,(h.flags&128)!==0){if(C)return QT(h,g,S);g.flags|=128}if(I=g.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),Mt(Yt,Yt.current),C)break;return null;case 22:case 23:return g.lanes=0,WT(h,g,S)}return Vs(h,g,S)}var ZT,iw,eP,tP;ZT=function(h,g){for(var S=g.child;S!==null;){if(S.tag===5||S.tag===6)h.appendChild(S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===g)break;for(;S.sibling===null;){if(S.return===null||S.return===g)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},iw=function(){},eP=function(h,g,S,C){var I=h.memoizedProps;if(I!==C){h=g.stateNode,tl(ms.current);var B=null;switch(S){case"input":I=ie(h,I),C=ie(h,C),B=[];break;case"select":I=V({},I,{value:void 0}),C=V({},C,{value:void 0}),B=[];break;case"textarea":I=be(h,I),C=be(h,C),B=[];break;default:typeof I.onClick!="function"&&typeof C.onClick=="function"&&(h.onclick=wm)}hc(S,C);var X;S=null;for(me in I)if(!C.hasOwnProperty(me)&&I.hasOwnProperty(me)&&I[me]!=null)if(me==="style"){var oe=I[me];for(X in oe)oe.hasOwnProperty(X)&&(S||(S={}),S[X]="")}else me!=="dangerouslySetInnerHTML"&&me!=="children"&&me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&me!=="autoFocus"&&(i.hasOwnProperty(me)?B||(B=[]):(B=B||[]).push(me,null));for(me in C){var ae=C[me];if(oe=I!=null?I[me]:void 0,C.hasOwnProperty(me)&&ae!==oe&&(ae!=null||oe!=null))if(me==="style")if(oe){for(X in oe)!oe.hasOwnProperty(X)||ae&&ae.hasOwnProperty(X)||(S||(S={}),S[X]="");for(X in ae)ae.hasOwnProperty(X)&&oe[X]!==ae[X]&&(S||(S={}),S[X]=ae[X])}else S||(B||(B=[]),B.push(me,S)),S=ae;else me==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,oe=oe?oe.__html:void 0,ae!=null&&oe!==ae&&(B=B||[]).push(me,ae)):me==="children"?typeof ae!="string"&&typeof ae!="number"||(B=B||[]).push(me,""+ae):me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&(i.hasOwnProperty(me)?(ae!=null&&me==="onScroll"&&Bt("scroll",h),B||oe===ae||(B=[])):(B=B||[]).push(me,ae))}S&&(B=B||[]).push("style",S);var me=B;(g.updateQueue=me)&&(g.flags|=4)}},tP=function(h,g,S,C){S!==C&&(g.flags|=4)};function ff(h,g){if(!Ht)switch(h.tailMode){case"hidden":g=h.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?h.tail=null:S.sibling=null;break;case"collapsed":S=h.tail;for(var C=null;S!==null;)S.alternate!==null&&(C=S),S=S.sibling;C===null?g||h.tail===null?h.tail=null:h.tail.sibling=null:C.sibling=null}}function tn(h){var g=h.alternate!==null&&h.alternate.child===h.child,S=0,C=0;if(g)for(var I=h.child;I!==null;)S|=I.lanes|I.childLanes,C|=I.subtreeFlags&14680064,C|=I.flags&14680064,I.return=h,I=I.sibling;else for(I=h.child;I!==null;)S|=I.lanes|I.childLanes,C|=I.subtreeFlags,C|=I.flags,I.return=h,I=I.sibling;return h.subtreeFlags|=C,h.childLanes=S,g}function zV(h,g,S){var C=g.pendingProps;switch(_b(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(g),null;case 1:return On(g.type)&&Sm(),tn(g),null;case 3:return C=g.stateNode,Tc(),Ft(_n),Ft(Zr),Bb(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(h===null||h.child===null)&&(Em(g)?g.flags|=4:h===null||h.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,Bi!==null&&(mw(Bi),Bi=null))),iw(h,g),tn(g),null;case 5:Lb(g);var I=tl(af.current);if(S=g.type,h!==null&&g.stateNode!=null)eP(h,g,S,C,I),h.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!C){if(g.stateNode===null)throw Error(r(166));return tn(g),null}if(h=tl(ms.current),Em(g)){C=g.stateNode,S=g.type;var B=g.memoizedProps;switch(C[ps]=g,C[tf]=B,h=(g.mode&1)!==0,S){case"dialog":Bt("cancel",C),Bt("close",C);break;case"iframe":case"object":case"embed":Bt("load",C);break;case"video":case"audio":for(I=0;I<Qd.length;I++)Bt(Qd[I],C);break;case"source":Bt("error",C);break;case"img":case"image":case"link":Bt("error",C),Bt("load",C);break;case"details":Bt("toggle",C);break;case"input":ye(C,B),Bt("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!B.multiple},Bt("invalid",C);break;case"textarea":We(C,B),Bt("invalid",C)}hc(S,B),I=null;for(var X in B)if(B.hasOwnProperty(X)){var oe=B[X];X==="children"?typeof oe=="string"?C.textContent!==oe&&(B.suppressHydrationWarning!==!0&&bm(C.textContent,oe,h),I=["children",oe]):typeof oe=="number"&&C.textContent!==""+oe&&(B.suppressHydrationWarning!==!0&&bm(C.textContent,oe,h),I=["children",""+oe]):i.hasOwnProperty(X)&&oe!=null&&X==="onScroll"&&Bt("scroll",C)}switch(S){case"input":te(C),ue(C,B,!0);break;case"textarea":te(C),Ye(C);break;case"select":case"option":break;default:typeof B.onClick=="function"&&(C.onclick=wm)}C=I,g.updateQueue=C,C!==null&&(g.flags|=4)}else{X=I.nodeType===9?I:I.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=Ae(S)),h==="http://www.w3.org/1999/xhtml"?S==="script"?(h=X.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof C.is=="string"?h=X.createElement(S,{is:C.is}):(h=X.createElement(S),S==="select"&&(X=h,C.multiple?X.multiple=!0:C.size&&(X.size=C.size))):h=X.createElementNS(h,S),h[ps]=g,h[tf]=C,ZT(h,g,!1,!1),g.stateNode=h;e:{switch(X=Rd(S,C),S){case"dialog":Bt("cancel",h),Bt("close",h),I=C;break;case"iframe":case"object":case"embed":Bt("load",h),I=C;break;case"video":case"audio":for(I=0;I<Qd.length;I++)Bt(Qd[I],h);I=C;break;case"source":Bt("error",h),I=C;break;case"img":case"image":case"link":Bt("error",h),Bt("load",h),I=C;break;case"details":Bt("toggle",h),I=C;break;case"input":ye(h,C),I=ie(h,C),Bt("invalid",h);break;case"option":I=C;break;case"select":h._wrapperState={wasMultiple:!!C.multiple},I=V({},C,{value:void 0}),Bt("invalid",h);break;case"textarea":We(h,C),I=be(h,C),Bt("invalid",h);break;default:I=C}hc(S,I),oe=I;for(B in oe)if(oe.hasOwnProperty(B)){var ae=oe[B];B==="style"?fc(h,ae):B==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ae!=null&&sr(h,ae)):B==="children"?typeof ae=="string"?(S!=="textarea"||ae!=="")&&ut(h,ae):typeof ae=="number"&&ut(h,""+ae):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(i.hasOwnProperty(B)?ae!=null&&B==="onScroll"&&Bt("scroll",h):ae!=null&&N(h,B,ae,X))}switch(S){case"input":te(h),ue(h,C,!1);break;case"textarea":te(h),Ye(h);break;case"option":C.value!=null&&h.setAttribute("value",""+re(C.value));break;case"select":h.multiple=!!C.multiple,B=C.value,B!=null?Oe(h,!!C.multiple,B,!1):C.defaultValue!=null&&Oe(h,!!C.multiple,C.defaultValue,!0);break;default:typeof I.onClick=="function"&&(h.onclick=wm)}switch(S){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}}C&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return tn(g),null;case 6:if(h&&g.stateNode!=null)tP(h,g,h.memoizedProps,C);else{if(typeof C!="string"&&g.stateNode===null)throw Error(r(166));if(S=tl(af.current),tl(ms.current),Em(g)){if(C=g.stateNode,S=g.memoizedProps,C[ps]=g,(B=C.nodeValue!==S)&&(h=qn,h!==null))switch(h.tag){case 3:bm(C.nodeValue,S,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&bm(C.nodeValue,S,(h.mode&1)!==0)}B&&(g.flags|=4)}else C=(S.nodeType===9?S:S.ownerDocument).createTextNode(C),C[ps]=g,g.stateNode=C}return tn(g),null;case 13:if(Ft(Yt),C=g.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(Ht&&zn!==null&&(g.mode&1)!==0&&(g.flags&128)===0)iT(),Oc(),g.flags|=98560,B=!1;else if(B=Em(g),C!==null&&C.dehydrated!==null){if(h===null){if(!B)throw Error(r(318));if(B=g.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(r(317));B[ps]=g}else Oc(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;tn(g),B=!1}else Bi!==null&&(mw(Bi),Bi=null),B=!0;if(!B)return g.flags&65536?g:null}return(g.flags&128)!==0?(g.lanes=S,g):(C=C!==null,C!==(h!==null&&h.memoizedState!==null)&&C&&(g.child.flags|=8192,(g.mode&1)!==0&&(h===null||(Yt.current&1)!==0?xr===0&&(xr=3):vw())),g.updateQueue!==null&&(g.flags|=4),tn(g),null);case 4:return Tc(),iw(h,g),h===null&&Zd(g.stateNode.containerInfo),tn(g),null;case 10:return Pb(g.type._context),tn(g),null;case 17:return On(g.type)&&Sm(),tn(g),null;case 19:if(Ft(Yt),B=g.memoizedState,B===null)return tn(g),null;if(C=(g.flags&128)!==0,X=B.rendering,X===null)if(C)ff(B,!1);else{if(xr!==0||h!==null&&(h.flags&128)!==0)for(h=g.child;h!==null;){if(X=Rm(h),X!==null){for(g.flags|=128,ff(B,!1),C=X.updateQueue,C!==null&&(g.updateQueue=C,g.flags|=4),g.subtreeFlags=0,C=S,S=g.child;S!==null;)B=S,h=C,B.flags&=14680066,X=B.alternate,X===null?(B.childLanes=0,B.lanes=h,B.child=null,B.subtreeFlags=0,B.memoizedProps=null,B.memoizedState=null,B.updateQueue=null,B.dependencies=null,B.stateNode=null):(B.childLanes=X.childLanes,B.lanes=X.lanes,B.child=X.child,B.subtreeFlags=0,B.deletions=null,B.memoizedProps=X.memoizedProps,B.memoizedState=X.memoizedState,B.updateQueue=X.updateQueue,B.type=X.type,h=X.dependencies,B.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),S=S.sibling;return Mt(Yt,Yt.current&1|2),g.child}h=h.sibling}B.tail!==null&&or()>Ic&&(g.flags|=128,C=!0,ff(B,!1),g.lanes=4194304)}else{if(!C)if(h=Rm(X),h!==null){if(g.flags|=128,C=!0,S=h.updateQueue,S!==null&&(g.updateQueue=S,g.flags|=4),ff(B,!0),B.tail===null&&B.tailMode==="hidden"&&!X.alternate&&!Ht)return tn(g),null}else 2*or()-B.renderingStartTime>Ic&&S!==1073741824&&(g.flags|=128,C=!0,ff(B,!1),g.lanes=4194304);B.isBackwards?(X.sibling=g.child,g.child=X):(S=B.last,S!==null?S.sibling=X:g.child=X,B.last=X)}return B.tail!==null?(g=B.tail,B.rendering=g,B.tail=g.sibling,B.renderingStartTime=or(),g.sibling=null,S=Yt.current,Mt(Yt,C?S&1|2:S&1),g):(tn(g),null);case 22:case 23:return yw(),C=g.memoizedState!==null,h!==null&&h.memoizedState!==null!==C&&(g.flags|=8192),C&&(g.mode&1)!==0?(Un&1073741824)!==0&&(tn(g),g.subtreeFlags&6&&(g.flags|=8192)):tn(g),null;case 24:return null;case 25:return null}throw Error(r(156,g.tag))}function UV(h,g){switch(_b(g),g.tag){case 1:return On(g.type)&&Sm(),h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 3:return Tc(),Ft(_n),Ft(Zr),Bb(),h=g.flags,(h&65536)!==0&&(h&128)===0?(g.flags=h&-65537|128,g):null;case 5:return Lb(g),null;case 13:if(Ft(Yt),h=g.memoizedState,h!==null&&h.dehydrated!==null){if(g.alternate===null)throw Error(r(340));Oc()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 19:return Ft(Yt),null;case 4:return Tc(),null;case 10:return Pb(g.type._context),null;case 22:case 23:return yw(),null;case 24:return null;default:return null}}var Um=!1,rn=!1,HV=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Mc(h,g){var S=h.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(C){Zt(h,g,C)}else S.current=null}function sw(h,g,S){try{S()}catch(C){Zt(h,g,C)}}var rP=!1;function WV(h,g){if(yb=cm,h=RA(),cb(h)){if("selectionStart"in h)var S={start:h.selectionStart,end:h.selectionEnd};else e:{S=(S=h.ownerDocument)&&S.defaultView||window;var C=S.getSelection&&S.getSelection();if(C&&C.rangeCount!==0){S=C.anchorNode;var I=C.anchorOffset,B=C.focusNode;C=C.focusOffset;try{S.nodeType,B.nodeType}catch{S=null;break e}var X=0,oe=-1,ae=-1,me=0,Se=0,_e=h,je=null;t:for(;;){for(var De;_e!==S||I!==0&&_e.nodeType!==3||(oe=X+I),_e!==B||C!==0&&_e.nodeType!==3||(ae=X+C),_e.nodeType===3&&(X+=_e.nodeValue.length),(De=_e.firstChild)!==null;)je=_e,_e=De;for(;;){if(_e===h)break t;if(je===S&&++me===I&&(oe=X),je===B&&++Se===C&&(ae=X),(De=_e.nextSibling)!==null)break;_e=je,je=_e.parentNode}_e=De}S=oe===-1||ae===-1?null:{start:oe,end:ae}}else S=null}S=S||{start:0,end:0}}else S=null;for(vb={focusedElem:h,selectionRange:S},cm=!1,$e=g;$e!==null;)if(g=$e,h=g.child,(g.subtreeFlags&1028)!==0&&h!==null)h.return=g,$e=h;else for(;$e!==null;){g=$e;try{var Fe=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(Fe!==null){var qe=Fe.memoizedProps,ar=Fe.memoizedState,ce=g.stateNode,le=ce.getSnapshotBeforeUpdate(g.elementType===g.type?qe:Fi(g.type,qe),ar);ce.__reactInternalSnapshotBeforeUpdate=le}break;case 3:var de=g.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ce){Zt(g,g.return,Ce)}if(h=g.sibling,h!==null){h.return=g.return,$e=h;break}$e=g.return}return Fe=rP,rP=!1,Fe}function hf(h,g,S){var C=g.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var I=C=C.next;do{if((I.tag&h)===h){var B=I.destroy;I.destroy=void 0,B!==void 0&&sw(g,S,B)}I=I.next}while(I!==C)}}function Hm(h,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&h)===h){var C=S.create;S.destroy=C()}S=S.next}while(S!==g)}}function ow(h){var g=h.ref;if(g!==null){var S=h.stateNode;switch(h.tag){case 5:h=S;break;default:h=S}typeof g=="function"?g(h):g.current=h}}function nP(h){var g=h.alternate;g!==null&&(h.alternate=null,nP(g)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(g=h.stateNode,g!==null&&(delete g[ps],delete g[tf],delete g[jb],delete g[OV],delete g[EV])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function iP(h){return h.tag===5||h.tag===3||h.tag===4}function sP(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||iP(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function aw(h,g,S){var C=h.tag;if(C===5||C===6)h=h.stateNode,g?S.nodeType===8?S.parentNode.insertBefore(h,g):S.insertBefore(h,g):(S.nodeType===8?(g=S.parentNode,g.insertBefore(h,S)):(g=S,g.appendChild(h)),S=S._reactRootContainer,S!=null||g.onclick!==null||(g.onclick=wm));else if(C!==4&&(h=h.child,h!==null))for(aw(h,g,S),h=h.sibling;h!==null;)aw(h,g,S),h=h.sibling}function lw(h,g,S){var C=h.tag;if(C===5||C===6)h=h.stateNode,g?S.insertBefore(h,g):S.appendChild(h);else if(C!==4&&(h=h.child,h!==null))for(lw(h,g,S),h=h.sibling;h!==null;)lw(h,g,S),h=h.sibling}var qr=null,qi=!1;function Ho(h,g,S){for(S=S.child;S!==null;)oP(h,g,S),S=S.sibling}function oP(h,g,S){if(hs&&typeof hs.onCommitFiberUnmount=="function")try{hs.onCommitFiberUnmount(nm,S)}catch{}switch(S.tag){case 5:rn||Mc(S,g);case 6:var C=qr,I=qi;qr=null,Ho(h,g,S),qr=C,qi=I,qr!==null&&(qi?(h=qr,S=S.stateNode,h.nodeType===8?h.parentNode.removeChild(S):h.removeChild(S)):qr.removeChild(S.stateNode));break;case 18:qr!==null&&(qi?(h=qr,S=S.stateNode,h.nodeType===8?wb(h.parentNode,S):h.nodeType===1&&wb(h,S),Hd(h)):wb(qr,S.stateNode));break;case 4:C=qr,I=qi,qr=S.stateNode.containerInfo,qi=!0,Ho(h,g,S),qr=C,qi=I;break;case 0:case 11:case 14:case 15:if(!rn&&(C=S.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){I=C=C.next;do{var B=I,X=B.destroy;B=B.tag,X!==void 0&&((B&2)!==0||(B&4)!==0)&&sw(S,g,X),I=I.next}while(I!==C)}Ho(h,g,S);break;case 1:if(!rn&&(Mc(S,g),C=S.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=S.memoizedProps,C.state=S.memoizedState,C.componentWillUnmount()}catch(oe){Zt(S,g,oe)}Ho(h,g,S);break;case 21:Ho(h,g,S);break;case 22:S.mode&1?(rn=(C=rn)||S.memoizedState!==null,Ho(h,g,S),rn=C):Ho(h,g,S);break;default:Ho(h,g,S)}}function aP(h){var g=h.updateQueue;if(g!==null){h.updateQueue=null;var S=h.stateNode;S===null&&(S=h.stateNode=new HV),g.forEach(function(C){var I=eK.bind(null,h,C);S.has(C)||(S.add(C),C.then(I,I))})}}function zi(h,g){var S=g.deletions;if(S!==null)for(var C=0;C<S.length;C++){var I=S[C];try{var B=h,X=g,oe=X;e:for(;oe!==null;){switch(oe.tag){case 5:qr=oe.stateNode,qi=!1;break e;case 3:qr=oe.stateNode.containerInfo,qi=!0;break e;case 4:qr=oe.stateNode.containerInfo,qi=!0;break e}oe=oe.return}if(qr===null)throw Error(r(160));oP(B,X,I),qr=null,qi=!1;var ae=I.alternate;ae!==null&&(ae.return=null),I.return=null}catch(me){Zt(I,g,me)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)lP(g,h),g=g.sibling}function lP(h,g){var S=h.alternate,C=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(zi(g,h),ys(h),C&4){try{hf(3,h,h.return),Hm(3,h)}catch(qe){Zt(h,h.return,qe)}try{hf(5,h,h.return)}catch(qe){Zt(h,h.return,qe)}}break;case 1:zi(g,h),ys(h),C&512&&S!==null&&Mc(S,S.return);break;case 5:if(zi(g,h),ys(h),C&512&&S!==null&&Mc(S,S.return),h.flags&32){var I=h.stateNode;try{ut(I,"")}catch(qe){Zt(h,h.return,qe)}}if(C&4&&(I=h.stateNode,I!=null)){var B=h.memoizedProps,X=S!==null?S.memoizedProps:B,oe=h.type,ae=h.updateQueue;if(h.updateQueue=null,ae!==null)try{oe==="input"&&B.type==="radio"&&B.name!=null&&Te(I,B),Rd(oe,X);var me=Rd(oe,B);for(X=0;X<ae.length;X+=2){var Se=ae[X],_e=ae[X+1];Se==="style"?fc(I,_e):Se==="dangerouslySetInnerHTML"?sr(I,_e):Se==="children"?ut(I,_e):N(I,Se,_e,me)}switch(oe){case"input":Le(I,B);break;case"textarea":Je(I,B);break;case"select":var je=I._wrapperState.wasMultiple;I._wrapperState.wasMultiple=!!B.multiple;var De=B.value;De!=null?Oe(I,!!B.multiple,De,!1):je!==!!B.multiple&&(B.defaultValue!=null?Oe(I,!!B.multiple,B.defaultValue,!0):Oe(I,!!B.multiple,B.multiple?[]:"",!1))}I[tf]=B}catch(qe){Zt(h,h.return,qe)}}break;case 6:if(zi(g,h),ys(h),C&4){if(h.stateNode===null)throw Error(r(162));I=h.stateNode,B=h.memoizedProps;try{I.nodeValue=B}catch(qe){Zt(h,h.return,qe)}}break;case 3:if(zi(g,h),ys(h),C&4&&S!==null&&S.memoizedState.isDehydrated)try{Hd(g.containerInfo)}catch(qe){Zt(h,h.return,qe)}break;case 4:zi(g,h),ys(h);break;case 13:zi(g,h),ys(h),I=h.child,I.flags&8192&&(B=I.memoizedState!==null,I.stateNode.isHidden=B,!B||I.alternate!==null&&I.alternate.memoizedState!==null||(dw=or())),C&4&&aP(h);break;case 22:if(Se=S!==null&&S.memoizedState!==null,h.mode&1?(rn=(me=rn)||Se,zi(g,h),rn=me):zi(g,h),ys(h),C&8192){if(me=h.memoizedState!==null,(h.stateNode.isHidden=me)&&!Se&&(h.mode&1)!==0)for($e=h,Se=h.child;Se!==null;){for(_e=$e=Se;$e!==null;){switch(je=$e,De=je.child,je.tag){case 0:case 11:case 14:case 15:hf(4,je,je.return);break;case 1:Mc(je,je.return);var Fe=je.stateNode;if(typeof Fe.componentWillUnmount=="function"){C=je,S=je.return;try{g=C,Fe.props=g.memoizedProps,Fe.state=g.memoizedState,Fe.componentWillUnmount()}catch(qe){Zt(C,S,qe)}}break;case 5:Mc(je,je.return);break;case 22:if(je.memoizedState!==null){dP(_e);continue}}De!==null?(De.return=je,$e=De):dP(_e)}Se=Se.sibling}e:for(Se=null,_e=h;;){if(_e.tag===5){if(Se===null){Se=_e;try{I=_e.stateNode,me?(B=I.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none"):(oe=_e.stateNode,ae=_e.memoizedProps.style,X=ae!=null&&ae.hasOwnProperty("display")?ae.display:null,oe.style.display=dc("display",X))}catch(qe){Zt(h,h.return,qe)}}}else if(_e.tag===6){if(Se===null)try{_e.stateNode.nodeValue=me?"":_e.memoizedProps}catch(qe){Zt(h,h.return,qe)}}else if((_e.tag!==22&&_e.tag!==23||_e.memoizedState===null||_e===h)&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===h)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===h)break e;Se===_e&&(Se=null),_e=_e.return}Se===_e&&(Se=null),_e.sibling.return=_e.return,_e=_e.sibling}}break;case 19:zi(g,h),ys(h),C&4&&aP(h);break;case 21:break;default:zi(g,h),ys(h)}}function ys(h){var g=h.flags;if(g&2){try{e:{for(var S=h.return;S!==null;){if(iP(S)){var C=S;break e}S=S.return}throw Error(r(160))}switch(C.tag){case 5:var I=C.stateNode;C.flags&32&&(ut(I,""),C.flags&=-33);var B=sP(h);lw(h,B,I);break;case 3:case 4:var X=C.stateNode.containerInfo,oe=sP(h);aw(h,oe,X);break;default:throw Error(r(161))}}catch(ae){Zt(h,h.return,ae)}h.flags&=-3}g&4096&&(h.flags&=-4097)}function VV(h,g,S){$e=h,cP(h)}function cP(h,g,S){for(var C=(h.mode&1)!==0;$e!==null;){var I=$e,B=I.child;if(I.tag===22&&C){var X=I.memoizedState!==null||Um;if(!X){var oe=I.alternate,ae=oe!==null&&oe.memoizedState!==null||rn;oe=Um;var me=rn;if(Um=X,(rn=ae)&&!me)for($e=I;$e!==null;)X=$e,ae=X.child,X.tag===22&&X.memoizedState!==null?fP(I):ae!==null?(ae.return=X,$e=ae):fP(I);for(;B!==null;)$e=B,cP(B),B=B.sibling;$e=I,Um=oe,rn=me}uP(h)}else(I.subtreeFlags&8772)!==0&&B!==null?(B.return=I,$e=B):uP(h)}}function uP(h){for(;$e!==null;){var g=$e;if((g.flags&8772)!==0){var S=g.alternate;try{if((g.flags&8772)!==0)switch(g.tag){case 0:case 11:case 15:rn||Hm(5,g);break;case 1:var C=g.stateNode;if(g.flags&4&&!rn)if(S===null)C.componentDidMount();else{var I=g.elementType===g.type?S.memoizedProps:Fi(g.type,S.memoizedProps);C.componentDidUpdate(I,S.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var B=g.updateQueue;B!==null&&dT(g,B,C);break;case 3:var X=g.updateQueue;if(X!==null){if(S=null,g.child!==null)switch(g.child.tag){case 5:S=g.child.stateNode;break;case 1:S=g.child.stateNode}dT(g,X,S)}break;case 5:var oe=g.stateNode;if(S===null&&g.flags&4){S=oe;var ae=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":ae.autoFocus&&S.focus();break;case"img":ae.src&&(S.src=ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var me=g.alternate;if(me!==null){var Se=me.memoizedState;if(Se!==null){var _e=Se.dehydrated;_e!==null&&Hd(_e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}rn||g.flags&512&&ow(g)}catch(je){Zt(g,g.return,je)}}if(g===h){$e=null;break}if(S=g.sibling,S!==null){S.return=g.return,$e=S;break}$e=g.return}}function dP(h){for(;$e!==null;){var g=$e;if(g===h){$e=null;break}var S=g.sibling;if(S!==null){S.return=g.return,$e=S;break}$e=g.return}}function fP(h){for(;$e!==null;){var g=$e;try{switch(g.tag){case 0:case 11:case 15:var S=g.return;try{Hm(4,g)}catch(ae){Zt(g,S,ae)}break;case 1:var C=g.stateNode;if(typeof C.componentDidMount=="function"){var I=g.return;try{C.componentDidMount()}catch(ae){Zt(g,I,ae)}}var B=g.return;try{ow(g)}catch(ae){Zt(g,B,ae)}break;case 5:var X=g.return;try{ow(g)}catch(ae){Zt(g,X,ae)}}}catch(ae){Zt(g,g.return,ae)}if(g===h){$e=null;break}var oe=g.sibling;if(oe!==null){oe.return=g.return,$e=oe;break}$e=g.return}}var KV=Math.ceil,Wm=j.ReactCurrentDispatcher,cw=j.ReactCurrentOwner,mi=j.ReactCurrentBatchConfig,pt=0,Er=null,dr=null,zr=0,Un=0,Rc=Bo(0),xr=0,pf=null,nl=0,Vm=0,uw=0,mf=null,Cn=null,dw=0,Ic=1/0,Ks=null,Km=!1,fw=null,Wo=null,Gm=!1,Vo=null,Ym=0,gf=0,hw=null,Xm=-1,Jm=0;function fn(){return(pt&6)!==0?or():Xm!==-1?Xm:Xm=or()}function Ko(h){return(h.mode&1)===0?1:(pt&2)!==0&&zr!==0?zr&-zr:AV.transition!==null?(Jm===0&&(Jm=sA()),Jm):(h=jt,h!==0||(h=window.event,h=h===void 0?16:pA(h.type)),h)}function Ui(h,g,S,C){if(50<gf)throw gf=0,hw=null,Error(r(185));Bd(h,S,C),((pt&2)===0||h!==Er)&&(h===Er&&((pt&2)===0&&(Vm|=S),xr===4&&Go(h,zr)),An(h,C),S===1&&pt===0&&(g.mode&1)===0&&(Ic=or()+500,km&&qo()))}function An(h,g){var S=h.callbackNode;AW(h,g);var C=om(h,h===Er?zr:0);if(C===0)S!==null&&rA(S),h.callbackNode=null,h.callbackPriority=0;else if(g=C&-C,h.callbackPriority!==g){if(S!=null&&rA(S),g===1)h.tag===0?CV(pP.bind(null,h)):ZA(pP.bind(null,h)),kV(function(){(pt&6)===0&&qo()}),S=null;else{switch(oA(C)){case 1:S=Vx;break;case 4:S=nA;break;case 16:S=rm;break;case 536870912:S=iA;break;default:S=rm}S=jP(S,hP.bind(null,h))}h.callbackPriority=g,h.callbackNode=S}}function hP(h,g){if(Xm=-1,Jm=0,(pt&6)!==0)throw Error(r(327));var S=h.callbackNode;if(Dc()&&h.callbackNode!==S)return null;var C=om(h,h===Er?zr:0);if(C===0)return null;if((C&30)!==0||(C&h.expiredLanes)!==0||g)g=Qm(h,C);else{g=C;var I=pt;pt|=2;var B=gP();(Er!==h||zr!==g)&&(Ks=null,Ic=or()+500,sl(h,g));do try{XV();break}catch(oe){mP(h,oe)}while(!0);Tb(),Wm.current=B,pt=I,dr!==null?g=0:(Er=null,zr=0,g=xr)}if(g!==0){if(g===2&&(I=Kx(h),I!==0&&(C=I,g=pw(h,I))),g===1)throw S=pf,sl(h,0),Go(h,C),An(h,or()),S;if(g===6)Go(h,C);else{if(I=h.current.alternate,(C&30)===0&&!GV(I)&&(g=Qm(h,C),g===2&&(B=Kx(h),B!==0&&(C=B,g=pw(h,B))),g===1))throw S=pf,sl(h,0),Go(h,C),An(h,or()),S;switch(h.finishedWork=I,h.finishedLanes=C,g){case 0:case 1:throw Error(r(345));case 2:ol(h,Cn,Ks);break;case 3:if(Go(h,C),(C&130023424)===C&&(g=dw+500-or(),10<g)){if(om(h,0)!==0)break;if(I=h.suspendedLanes,(I&C)!==C){fn(),h.pingedLanes|=h.suspendedLanes&I;break}h.timeoutHandle=bb(ol.bind(null,h,Cn,Ks),g);break}ol(h,Cn,Ks);break;case 4:if(Go(h,C),(C&4194240)===C)break;for(g=h.eventTimes,I=-1;0<C;){var X=31-Li(C);B=1<<X,X=g[X],X>I&&(I=X),C&=~B}if(C=I,C=or()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*KV(C/1960))-C,10<C){h.timeoutHandle=bb(ol.bind(null,h,Cn,Ks),C);break}ol(h,Cn,Ks);break;case 5:ol(h,Cn,Ks);break;default:throw Error(r(329))}}}return An(h,or()),h.callbackNode===S?hP.bind(null,h):null}function pw(h,g){var S=mf;return h.current.memoizedState.isDehydrated&&(sl(h,g).flags|=256),h=Qm(h,g),h!==2&&(g=Cn,Cn=S,g!==null&&mw(g)),h}function mw(h){Cn===null?Cn=h:Cn.push.apply(Cn,h)}function GV(h){for(var g=h;;){if(g.flags&16384){var S=g.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var C=0;C<S.length;C++){var I=S[C],B=I.getSnapshot;I=I.value;try{if(!$i(B(),I))return!1}catch{return!1}}}if(S=g.child,g.subtreeFlags&16384&&S!==null)S.return=g,g=S;else{if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Go(h,g){for(g&=~uw,g&=~Vm,h.suspendedLanes|=g,h.pingedLanes&=~g,h=h.expirationTimes;0<g;){var S=31-Li(g),C=1<<S;h[S]=-1,g&=~C}}function pP(h){if((pt&6)!==0)throw Error(r(327));Dc();var g=om(h,0);if((g&1)===0)return An(h,or()),null;var S=Qm(h,g);if(h.tag!==0&&S===2){var C=Kx(h);C!==0&&(g=C,S=pw(h,C))}if(S===1)throw S=pf,sl(h,0),Go(h,g),An(h,or()),S;if(S===6)throw Error(r(345));return h.finishedWork=h.current.alternate,h.finishedLanes=g,ol(h,Cn,Ks),An(h,or()),null}function gw(h,g){var S=pt;pt|=1;try{return h(g)}finally{pt=S,pt===0&&(Ic=or()+500,km&&qo())}}function il(h){Vo!==null&&Vo.tag===0&&(pt&6)===0&&Dc();var g=pt;pt|=1;var S=mi.transition,C=jt;try{if(mi.transition=null,jt=1,h)return h()}finally{jt=C,mi.transition=S,pt=g,(pt&6)===0&&qo()}}function yw(){Un=Rc.current,Ft(Rc)}function sl(h,g){h.finishedWork=null,h.finishedLanes=0;var S=h.timeoutHandle;if(S!==-1&&(h.timeoutHandle=-1,NV(S)),dr!==null)for(S=dr.return;S!==null;){var C=S;switch(_b(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&Sm();break;case 3:Tc(),Ft(_n),Ft(Zr),Bb();break;case 5:Lb(C);break;case 4:Tc();break;case 13:Ft(Yt);break;case 19:Ft(Yt);break;case 10:Pb(C.type._context);break;case 22:case 23:yw()}S=S.return}if(Er=h,dr=h=Yo(h.current,null),zr=Un=g,xr=0,pf=null,uw=Vm=nl=0,Cn=mf=null,el!==null){for(g=0;g<el.length;g++)if(S=el[g],C=S.interleaved,C!==null){S.interleaved=null;var I=C.next,B=S.pending;if(B!==null){var X=B.next;B.next=I,C.next=X}S.pending=C}el=null}return h}function mP(h,g){do{var S=dr;try{if(Tb(),Im.current=Bm,Dm){for(var C=Xt.memoizedState;C!==null;){var I=C.queue;I!==null&&(I.pending=null),C=C.next}Dm=!1}if(rl=0,Or=vr=Xt=null,lf=!1,cf=0,cw.current=null,S===null||S.return===null){xr=1,pf=g,dr=null;break}e:{var B=h,X=S.return,oe=S,ae=g;if(g=zr,oe.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var me=ae,Se=oe,_e=Se.tag;if((Se.mode&1)===0&&(_e===0||_e===11||_e===15)){var je=Se.alternate;je?(Se.updateQueue=je.updateQueue,Se.memoizedState=je.memoizedState,Se.lanes=je.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var De=FT(X);if(De!==null){De.flags&=-257,qT(De,X,oe,B,g),De.mode&1&&BT(B,me,g),g=De,ae=me;var Fe=g.updateQueue;if(Fe===null){var qe=new Set;qe.add(ae),g.updateQueue=qe}else Fe.add(ae);break e}else{if((g&1)===0){BT(B,me,g),vw();break e}ae=Error(r(426))}}else if(Ht&&oe.mode&1){var ar=FT(X);if(ar!==null){(ar.flags&65536)===0&&(ar.flags|=256),qT(ar,X,oe,B,g),Cb(Pc(ae,oe));break e}}B=ae=Pc(ae,oe),xr!==4&&(xr=2),mf===null?mf=[B]:mf.push(B),B=X;do{switch(B.tag){case 3:B.flags|=65536,g&=-g,B.lanes|=g;var ce=LT(B,ae,g);uT(B,ce);break e;case 1:oe=ae;var le=B.type,de=B.stateNode;if((B.flags&128)===0&&(typeof le.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(Wo===null||!Wo.has(de)))){B.flags|=65536,g&=-g,B.lanes|=g;var Ce=$T(B,oe,g);uT(B,Ce);break e}}B=B.return}while(B!==null)}vP(S)}catch(ze){g=ze,dr===S&&S!==null&&(dr=S=S.return);continue}break}while(!0)}function gP(){var h=Wm.current;return Wm.current=Bm,h===null?Bm:h}function vw(){(xr===0||xr===3||xr===2)&&(xr=4),Er===null||(nl&268435455)===0&&(Vm&268435455)===0||Go(Er,zr)}function Qm(h,g){var S=pt;pt|=2;var C=gP();(Er!==h||zr!==g)&&(Ks=null,sl(h,g));do try{YV();break}catch(I){mP(h,I)}while(!0);if(Tb(),pt=S,Wm.current=C,dr!==null)throw Error(r(261));return Er=null,zr=0,xr}function YV(){for(;dr!==null;)yP(dr)}function XV(){for(;dr!==null&&!wW();)yP(dr)}function yP(h){var g=wP(h.alternate,h,Un);h.memoizedProps=h.pendingProps,g===null?vP(h):dr=g,cw.current=null}function vP(h){var g=h;do{var S=g.alternate;if(h=g.return,(g.flags&32768)===0){if(S=zV(S,g,Un),S!==null){dr=S;return}}else{if(S=UV(S,g),S!==null){S.flags&=32767,dr=S;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{xr=6,dr=null;return}}if(g=g.sibling,g!==null){dr=g;return}dr=g=h}while(g!==null);xr===0&&(xr=5)}function ol(h,g,S){var C=jt,I=mi.transition;try{mi.transition=null,jt=1,JV(h,g,S,C)}finally{mi.transition=I,jt=C}return null}function JV(h,g,S,C){do Dc();while(Vo!==null);if((pt&6)!==0)throw Error(r(327));S=h.finishedWork;var I=h.finishedLanes;if(S===null)return null;if(h.finishedWork=null,h.finishedLanes=0,S===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0;var B=S.lanes|S.childLanes;if(TW(h,B),h===Er&&(dr=Er=null,zr=0),(S.subtreeFlags&2064)===0&&(S.flags&2064)===0||Gm||(Gm=!0,jP(rm,function(){return Dc(),null})),B=(S.flags&15990)!==0,(S.subtreeFlags&15990)!==0||B){B=mi.transition,mi.transition=null;var X=jt;jt=1;var oe=pt;pt|=4,cw.current=null,WV(h,S),lP(S,h),yV(vb),cm=!!yb,vb=yb=null,h.current=S,VV(S),jW(),pt=oe,jt=X,mi.transition=B}else h.current=S;if(Gm&&(Gm=!1,Vo=h,Ym=I),B=h.pendingLanes,B===0&&(Wo=null),kW(S.stateNode),An(h,or()),g!==null)for(C=h.onRecoverableError,S=0;S<g.length;S++)I=g[S],C(I.value,{componentStack:I.stack,digest:I.digest});if(Km)throw Km=!1,h=fw,fw=null,h;return(Ym&1)!==0&&h.tag!==0&&Dc(),B=h.pendingLanes,(B&1)!==0?h===hw?gf++:(gf=0,hw=h):gf=0,qo(),null}function Dc(){if(Vo!==null){var h=oA(Ym),g=mi.transition,S=jt;try{if(mi.transition=null,jt=16>h?16:h,Vo===null)var C=!1;else{if(h=Vo,Vo=null,Ym=0,(pt&6)!==0)throw Error(r(331));var I=pt;for(pt|=4,$e=h.current;$e!==null;){var B=$e,X=B.child;if(($e.flags&16)!==0){var oe=B.deletions;if(oe!==null){for(var ae=0;ae<oe.length;ae++){var me=oe[ae];for($e=me;$e!==null;){var Se=$e;switch(Se.tag){case 0:case 11:case 15:hf(8,Se,B)}var _e=Se.child;if(_e!==null)_e.return=Se,$e=_e;else for(;$e!==null;){Se=$e;var je=Se.sibling,De=Se.return;if(nP(Se),Se===me){$e=null;break}if(je!==null){je.return=De,$e=je;break}$e=De}}}var Fe=B.alternate;if(Fe!==null){var qe=Fe.child;if(qe!==null){Fe.child=null;do{var ar=qe.sibling;qe.sibling=null,qe=ar}while(qe!==null)}}$e=B}}if((B.subtreeFlags&2064)!==0&&X!==null)X.return=B,$e=X;else e:for(;$e!==null;){if(B=$e,(B.flags&2048)!==0)switch(B.tag){case 0:case 11:case 15:hf(9,B,B.return)}var ce=B.sibling;if(ce!==null){ce.return=B.return,$e=ce;break e}$e=B.return}}var le=h.current;for($e=le;$e!==null;){X=$e;var de=X.child;if((X.subtreeFlags&2064)!==0&&de!==null)de.return=X,$e=de;else e:for(X=le;$e!==null;){if(oe=$e,(oe.flags&2048)!==0)try{switch(oe.tag){case 0:case 11:case 15:Hm(9,oe)}}catch(ze){Zt(oe,oe.return,ze)}if(oe===X){$e=null;break e}var Ce=oe.sibling;if(Ce!==null){Ce.return=oe.return,$e=Ce;break e}$e=oe.return}}if(pt=I,qo(),hs&&typeof hs.onPostCommitFiberRoot=="function")try{hs.onPostCommitFiberRoot(nm,h)}catch{}C=!0}return C}finally{jt=S,mi.transition=g}}return!1}function xP(h,g,S){g=Pc(S,g),g=LT(h,g,1),h=Uo(h,g,1),g=fn(),h!==null&&(Bd(h,1,g),An(h,g))}function Zt(h,g,S){if(h.tag===3)xP(h,h,S);else for(;g!==null;){if(g.tag===3){xP(g,h,S);break}else if(g.tag===1){var C=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Wo===null||!Wo.has(C))){h=Pc(S,h),h=$T(g,h,1),g=Uo(g,h,1),h=fn(),g!==null&&(Bd(g,1,h),An(g,h));break}}g=g.return}}function QV(h,g,S){var C=h.pingCache;C!==null&&C.delete(g),g=fn(),h.pingedLanes|=h.suspendedLanes&S,Er===h&&(zr&S)===S&&(xr===4||xr===3&&(zr&130023424)===zr&&500>or()-dw?sl(h,0):uw|=S),An(h,g)}function bP(h,g){g===0&&((h.mode&1)===0?g=1:(g=sm,sm<<=1,(sm&130023424)===0&&(sm=4194304)));var S=fn();h=Hs(h,g),h!==null&&(Bd(h,g,S),An(h,S))}function ZV(h){var g=h.memoizedState,S=0;g!==null&&(S=g.retryLane),bP(h,S)}function eK(h,g){var S=0;switch(h.tag){case 13:var C=h.stateNode,I=h.memoizedState;I!==null&&(S=I.retryLane);break;case 19:C=h.stateNode;break;default:throw Error(r(314))}C!==null&&C.delete(g),bP(h,S)}var wP;wP=function(h,g,S){if(h!==null)if(h.memoizedProps!==g.pendingProps||_n.current)En=!0;else{if((h.lanes&S)===0&&(g.flags&128)===0)return En=!1,qV(h,g,S);En=(h.flags&131072)!==0}else En=!1,Ht&&(g.flags&1048576)!==0&&eT(g,Om,g.index);switch(g.lanes=0,g.tag){case 2:var C=g.type;zm(h,g),h=g.pendingProps;var I=Nc(g,Zr.current);Ac(g,S),I=zb(null,g,C,h,I,S);var B=Ub();return g.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,On(C)?(B=!0,Nm(g)):B=!1,g.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,Ib(g),I.updater=Fm,g.stateNode=I,I._reactInternals=g,Yb(g,C,h,S),g=Zb(null,g,C,!0,B,S)):(g.tag=0,Ht&&B&&kb(g),dn(null,g,I,S),g=g.child),g;case 16:C=g.elementType;e:{switch(zm(h,g),h=g.pendingProps,I=C._init,C=I(C._payload),g.type=C,I=g.tag=rK(C),h=Fi(C,h),I){case 0:g=Qb(null,g,C,h,S);break e;case 1:g=KT(null,g,C,h,S);break e;case 11:g=zT(null,g,C,h,S);break e;case 14:g=UT(null,g,C,Fi(C.type,h),S);break e}throw Error(r(306,C,""))}return g;case 0:return C=g.type,I=g.pendingProps,I=g.elementType===C?I:Fi(C,I),Qb(h,g,C,I,S);case 1:return C=g.type,I=g.pendingProps,I=g.elementType===C?I:Fi(C,I),KT(h,g,C,I,S);case 3:e:{if(GT(g),h===null)throw Error(r(387));C=g.pendingProps,B=g.memoizedState,I=B.element,cT(h,g),Mm(g,C,null,S);var X=g.memoizedState;if(C=X.element,B.isDehydrated)if(B={element:C,isDehydrated:!1,cache:X.cache,pendingSuspenseBoundaries:X.pendingSuspenseBoundaries,transitions:X.transitions},g.updateQueue.baseState=B,g.memoizedState=B,g.flags&256){I=Pc(Error(r(423)),g),g=YT(h,g,C,S,I);break e}else if(C!==I){I=Pc(Error(r(424)),g),g=YT(h,g,C,S,I);break e}else for(zn=$o(g.stateNode.containerInfo.firstChild),qn=g,Ht=!0,Bi=null,S=aT(g,null,C,S),g.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(Oc(),C===I){g=Vs(h,g,S);break e}dn(h,g,C,S)}g=g.child}return g;case 5:return fT(g),h===null&&Eb(g),C=g.type,I=g.pendingProps,B=h!==null?h.memoizedProps:null,X=I.children,xb(C,I)?X=null:B!==null&&xb(C,B)&&(g.flags|=32),VT(h,g),dn(h,g,X,S),g.child;case 6:return h===null&&Eb(g),null;case 13:return XT(h,g,S);case 4:return Db(g,g.stateNode.containerInfo),C=g.pendingProps,h===null?g.child=Ec(g,null,C,S):dn(h,g,C,S),g.child;case 11:return C=g.type,I=g.pendingProps,I=g.elementType===C?I:Fi(C,I),zT(h,g,C,I,S);case 7:return dn(h,g,g.pendingProps,S),g.child;case 8:return dn(h,g,g.pendingProps.children,S),g.child;case 12:return dn(h,g,g.pendingProps.children,S),g.child;case 10:e:{if(C=g.type._context,I=g.pendingProps,B=g.memoizedProps,X=I.value,Mt(Am,C._currentValue),C._currentValue=X,B!==null)if($i(B.value,X)){if(B.children===I.children&&!_n.current){g=Vs(h,g,S);break e}}else for(B=g.child,B!==null&&(B.return=g);B!==null;){var oe=B.dependencies;if(oe!==null){X=B.child;for(var ae=oe.firstContext;ae!==null;){if(ae.context===C){if(B.tag===1){ae=Ws(-1,S&-S),ae.tag=2;var me=B.updateQueue;if(me!==null){me=me.shared;var Se=me.pending;Se===null?ae.next=ae:(ae.next=Se.next,Se.next=ae),me.pending=ae}}B.lanes|=S,ae=B.alternate,ae!==null&&(ae.lanes|=S),Mb(B.return,S,g),oe.lanes|=S;break}ae=ae.next}}else if(B.tag===10)X=B.type===g.type?null:B.child;else if(B.tag===18){if(X=B.return,X===null)throw Error(r(341));X.lanes|=S,oe=X.alternate,oe!==null&&(oe.lanes|=S),Mb(X,S,g),X=B.sibling}else X=B.child;if(X!==null)X.return=B;else for(X=B;X!==null;){if(X===g){X=null;break}if(B=X.sibling,B!==null){B.return=X.return,X=B;break}X=X.return}B=X}dn(h,g,I.children,S),g=g.child}return g;case 9:return I=g.type,C=g.pendingProps.children,Ac(g,S),I=hi(I),C=C(I),g.flags|=1,dn(h,g,C,S),g.child;case 14:return C=g.type,I=Fi(C,g.pendingProps),I=Fi(C.type,I),UT(h,g,C,I,S);case 15:return HT(h,g,g.type,g.pendingProps,S);case 17:return C=g.type,I=g.pendingProps,I=g.elementType===C?I:Fi(C,I),zm(h,g),g.tag=1,On(C)?(h=!0,Nm(g)):h=!1,Ac(g,S),IT(g,C,I),Yb(g,C,I,S),Zb(null,g,C,!0,h,S);case 19:return QT(h,g,S);case 22:return WT(h,g,S)}throw Error(r(156,g.tag))};function jP(h,g){return tA(h,g)}function tK(h,g,S,C){this.tag=h,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(h,g,S,C){return new tK(h,g,S,C)}function xw(h){return h=h.prototype,!(!h||!h.isReactComponent)}function rK(h){if(typeof h=="function")return xw(h)?1:0;if(h!=null){if(h=h.$$typeof,h===R)return 11;if(h===F)return 14}return 2}function Yo(h,g){var S=h.alternate;return S===null?(S=gi(h.tag,g,h.key,h.mode),S.elementType=h.elementType,S.type=h.type,S.stateNode=h.stateNode,S.alternate=h,h.alternate=S):(S.pendingProps=g,S.type=h.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=h.flags&14680064,S.childLanes=h.childLanes,S.lanes=h.lanes,S.child=h.child,S.memoizedProps=h.memoizedProps,S.memoizedState=h.memoizedState,S.updateQueue=h.updateQueue,g=h.dependencies,S.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},S.sibling=h.sibling,S.index=h.index,S.ref=h.ref,S}function Zm(h,g,S,C,I,B){var X=2;if(C=h,typeof h=="function")xw(h)&&(X=1);else if(typeof h=="string")X=5;else e:switch(h){case E:return al(S.children,I,B,g);case A:X=8,I|=8;break;case T:return h=gi(12,S,g,I|2),h.elementType=T,h.lanes=B,h;case L:return h=gi(13,S,g,I),h.elementType=L,h.lanes=B,h;case $:return h=gi(19,S,g,I),h.elementType=$,h.lanes=B,h;case W:return eg(S,I,B,g);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case M:X=10;break e;case P:X=9;break e;case R:X=11;break e;case F:X=14;break e;case z:X=16,C=null;break e}throw Error(r(130,h==null?h:typeof h,""))}return g=gi(X,S,g,I),g.elementType=h,g.type=C,g.lanes=B,g}function al(h,g,S,C){return h=gi(7,h,C,g),h.lanes=S,h}function eg(h,g,S,C){return h=gi(22,h,C,g),h.elementType=W,h.lanes=S,h.stateNode={isHidden:!1},h}function bw(h,g,S){return h=gi(6,h,null,g),h.lanes=S,h}function ww(h,g,S){return g=gi(4,h.children!==null?h.children:[],h.key,g),g.lanes=S,g.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},g}function nK(h,g,S,C,I){this.tag=g,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gx(0),this.expirationTimes=Gx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gx(0),this.identifierPrefix=C,this.onRecoverableError=I,this.mutableSourceEagerHydrationData=null}function jw(h,g,S,C,I,B,X,oe,ae){return h=new nK(h,g,S,oe,ae),g===1?(g=1,B===!0&&(g|=8)):g=0,B=gi(3,null,null,g),h.current=B,B.stateNode=h,B.memoizedState={element:C,isDehydrated:S,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ib(B),h}function iK(h,g,S){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:C==null?null:""+C,children:h,containerInfo:g,implementation:S}}function SP(h){if(!h)return Fo;h=h._reactInternals;e:{if(Ya(h)!==h||h.tag!==1)throw Error(r(170));var g=h;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(On(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(r(171))}if(h.tag===1){var S=h.type;if(On(S))return JA(h,S,g)}return g}function NP(h,g,S,C,I,B,X,oe,ae){return h=jw(S,C,!0,h,I,B,X,oe,ae),h.context=SP(null),S=h.current,C=fn(),I=Ko(S),B=Ws(C,I),B.callback=g??null,Uo(S,B,I),h.current.lanes=I,Bd(h,I,C),An(h,C),h}function tg(h,g,S,C){var I=g.current,B=fn(),X=Ko(I);return S=SP(S),g.context===null?g.context=S:g.pendingContext=S,g=Ws(B,X),g.payload={element:h},C=C===void 0?null:C,C!==null&&(g.callback=C),h=Uo(I,g,X),h!==null&&(Ui(h,I,X,B),Pm(h,I,X)),X}function rg(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function kP(h,g){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var S=h.retryLane;h.retryLane=S!==0&&S<g?S:g}}function Sw(h,g){kP(h,g),(h=h.alternate)&&kP(h,g)}function sK(){return null}var _P=typeof reportError=="function"?reportError:function(h){console.error(h)};function Nw(h){this._internalRoot=h}ng.prototype.render=Nw.prototype.render=function(h){var g=this._internalRoot;if(g===null)throw Error(r(409));tg(h,g,null,null)},ng.prototype.unmount=Nw.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var g=h.containerInfo;il(function(){tg(null,h,null,null)}),g[Fs]=null}};function ng(h){this._internalRoot=h}ng.prototype.unstable_scheduleHydration=function(h){if(h){var g=cA();h={blockedOn:null,target:h,priority:g};for(var S=0;S<Io.length&&g!==0&&g<Io[S].priority;S++);Io.splice(S,0,h),S===0&&fA(h)}};function kw(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function ig(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function OP(){}function oK(h,g,S,C,I){if(I){if(typeof C=="function"){var B=C;C=function(){var me=rg(X);B.call(me)}}var X=NP(g,C,h,0,null,!1,!1,"",OP);return h._reactRootContainer=X,h[Fs]=X.current,Zd(h.nodeType===8?h.parentNode:h),il(),X}for(;I=h.lastChild;)h.removeChild(I);if(typeof C=="function"){var oe=C;C=function(){var me=rg(ae);oe.call(me)}}var ae=jw(h,0,!1,null,null,!1,!1,"",OP);return h._reactRootContainer=ae,h[Fs]=ae.current,Zd(h.nodeType===8?h.parentNode:h),il(function(){tg(g,ae,S,C)}),ae}function sg(h,g,S,C,I){var B=S._reactRootContainer;if(B){var X=B;if(typeof I=="function"){var oe=I;I=function(){var ae=rg(X);oe.call(ae)}}tg(g,X,h,I)}else X=oK(S,g,h,I,C);return rg(X)}aA=function(h){switch(h.tag){case 3:var g=h.stateNode;if(g.current.memoizedState.isDehydrated){var S=$d(g.pendingLanes);S!==0&&(Yx(g,S|1),An(g,or()),(pt&6)===0&&(Ic=or()+500,qo()))}break;case 13:il(function(){var C=Hs(h,1);if(C!==null){var I=fn();Ui(C,h,1,I)}}),Sw(h,1)}},Xx=function(h){if(h.tag===13){var g=Hs(h,134217728);if(g!==null){var S=fn();Ui(g,h,134217728,S)}Sw(h,134217728)}},lA=function(h){if(h.tag===13){var g=Ko(h),S=Hs(h,g);if(S!==null){var C=fn();Ui(S,h,g,C)}Sw(h,g)}},cA=function(){return jt},uA=function(h,g){var S=jt;try{return jt=h,g()}finally{jt=S}},Dd=function(h,g,S){switch(g){case"input":if(Le(h,S),g=S.name,S.type==="radio"&&g!=null){for(S=h;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<S.length;g++){var C=S[g];if(C!==h&&C.form===h.form){var I=jm(C);if(!I)throw Error(r(90));se(C),Le(C,I)}}}break;case"textarea":Je(h,S);break;case"select":g=S.value,g!=null&&Oe(h,!!S.multiple,g,!1)}},un=gw,Jr=il;var aK={usingClientEntryPoint:!1,Events:[rf,jc,jm,Xr,Ri,gw]},yf={findFiberByHostInstance:Xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lK={bundleType:yf.bundleType,version:yf.version,rendererPackageName:yf.rendererPackageName,rendererConfig:yf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=ZC(h),h===null?null:h.stateNode},findFiberByHostInstance:yf.findFiberByHostInstance||sK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var og=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!og.isDisabled&&og.supportsFiber)try{nm=og.inject(lK),hs=og}catch{}}return Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aK,Tn.createPortal=function(h,g){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kw(g))throw Error(r(200));return iK(h,g,null,S)},Tn.createRoot=function(h,g){if(!kw(h))throw Error(r(299));var S=!1,C="",I=_P;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(C=g.identifierPrefix),g.onRecoverableError!==void 0&&(I=g.onRecoverableError)),g=jw(h,1,!1,null,null,S,!1,C,I),h[Fs]=g.current,Zd(h.nodeType===8?h.parentNode:h),new Nw(g)},Tn.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var g=h._reactInternals;if(g===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=ZC(g),h=h===null?null:h.stateNode,h},Tn.flushSync=function(h){return il(h)},Tn.hydrate=function(h,g,S){if(!ig(g))throw Error(r(200));return sg(null,h,g,!0,S)},Tn.hydrateRoot=function(h,g,S){if(!kw(h))throw Error(r(405));var C=S!=null&&S.hydratedSources||null,I=!1,B="",X=_P;if(S!=null&&(S.unstable_strictMode===!0&&(I=!0),S.identifierPrefix!==void 0&&(B=S.identifierPrefix),S.onRecoverableError!==void 0&&(X=S.onRecoverableError)),g=NP(g,null,h,1,S??null,I,!1,B,X),h[Fs]=g.current,Zd(h),C)for(h=0;h<C.length;h++)S=C[h],I=S._getVersion,I=I(S._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[S,I]:g.mutableSourceEagerHydrationData.push(S,I);return new ng(g)},Tn.render=function(h,g,S){if(!ig(g))throw Error(r(200));return sg(null,h,g,!1,S)},Tn.unmountComponentAtNode=function(h){if(!ig(h))throw Error(r(40));return h._reactRootContainer?(il(function(){sg(null,null,h,!1,function(){h._reactRootContainer=null,h[Fs]=null})}),!0):!1},Tn.unstable_batchedUpdates=gw,Tn.unstable_renderSubtreeIntoContainer=function(h,g,S,C){if(!ig(S))throw Error(r(200));if(h==null||h._reactInternals===void 0)throw Error(r(38));return sg(h,g,S,!1,C)},Tn.version="18.3.1-next-f1338f8080-20240426",Tn}var IP;function xO(){if(IP)return Ew.exports;IP=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ew.exports=xK(),Ew.exports}var DP;function bK(){if(DP)return lg;DP=1;var t=xO();return lg.createRoot=t.createRoot,lg.hydrateRoot=t.hydrateRoot,lg}var wK=bK();const jK=ht(wK);var js=xO();const tB=ht(js);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xh(){return xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xh.apply(this,arguments)}var ga;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ga||(ga={}));const LP="popstate";function SK(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:l}=n.location;return qk("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:dy(i)}return kK(e,r,null,t)}function lr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rB(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NK(){return Math.random().toString(36).substr(2,8)}function $P(t,e){return{usr:t.state,key:t.key,idx:e}}function qk(t,e,r,n){return r===void 0&&(r=null),xh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ld(e):e,{state:r,key:e&&e.key||n||NK()})}function dy(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ld(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function kK(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,l=ga.Pop,c=null,u=f();u==null&&(u=0,o.replaceState(xh({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function d(){l=ga.Pop;let v=f(),b=v==null?null:v-u;u=v,c&&c({action:l,location:y.location,delta:b})}function p(v,b){l=ga.Push;let w=qk(y.location,v,b);u=f()+1;let N=$P(w,u),j=y.createHref(w);try{o.pushState(N,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(j)}s&&c&&c({action:l,location:y.location,delta:1})}function m(v,b){l=ga.Replace;let w=qk(y.location,v,b);u=f();let N=$P(w,u),j=y.createHref(w);o.replaceState(N,"",j),s&&c&&c({action:l,location:y.location,delta:0})}function x(v){let b=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof v=="string"?v:dy(v);return w=w.replace(/ $/,"%20"),lr(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let y={get action(){return l},get location(){return t(i,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(LP,d),c=v,()=>{i.removeEventListener(LP,d),c=null}},createHref(v){return e(i,v)},createURL:x,encodeLocation(v){let b=x(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:m,go(v){return o.go(v)}};return y}var BP;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(BP||(BP={}));function _K(t,e,r){return r===void 0&&(r="/"),OK(t,e,r)}function OK(t,e,r,n){let i=typeof e=="string"?ld(e):e,s=bO(i.pathname||"/",r);if(s==null)return null;let o=nB(t);EK(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=FK(s);l=LK(o[c],u)}return l}function nB(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(lr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=wa([n,c.relativePath]),f=r.concat(c);s.children&&s.children.length>0&&(lr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),nB(s.children,e,f,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:IK(u,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of iB(s.path))i(s,o,c)}),e}function iB(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=iB(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function EK(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:DK(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const CK=/^:[\w-]+$/,AK=3,TK=2,PK=1,MK=10,RK=-2,FP=t=>t==="*";function IK(t,e){let r=t.split("/"),n=r.length;return r.some(FP)&&(n+=RK),e&&(n+=TK),r.filter(i=>!FP(i)).reduce((i,s)=>i+(CK.test(s)?AK:s===""?PK:MK),n)}function DK(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function LK(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,f=s==="/"?e:e.slice(s.length)||"/",d=$K({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),p=c.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:wa([s,d.pathname]),pathnameBase:HK(wa([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=wa([s,d.pathnameBase]))}return o}function $K(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=BK(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((u,f,d)=>{let{paramName:p,isOptional:m}=f;if(p==="*"){let y=l[d]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const x=l[d];return m&&!x?u[p]=void 0:u[p]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function BK(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),rB(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function FK(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rB(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bO(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function qK(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?ld(t):t;return{pathname:r?r.startsWith("/")?r:zK(r,e):e,search:WK(n),hash:VK(i)}}function zK(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Tw(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UK(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function wO(t,e){let r=UK(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function jO(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=ld(t):(i=xh({},t),lr(!i.pathname||!i.pathname.includes("?"),Tw("?","pathname","search",i)),lr(!i.pathname||!i.pathname.includes("#"),Tw("#","pathname","hash",i)),lr(!i.search||!i.search.includes("#"),Tw("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=r;else{let d=e.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}l=d>=0?e[d]:"/"}let c=qK(i,l),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const wa=t=>t.join("/").replace(/\/\/+/g,"/"),HK=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),WK=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VK=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function KK(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const sB=["post","put","patch","delete"];new Set(sB);const GK=["get",...sB];new Set(GK);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bh(){return bh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bh.apply(this,arguments)}const SO=O.createContext(null),YK=O.createContext(null),$a=O.createContext(null),_0=O.createContext(null),No=O.createContext({outlet:null,matches:[],isDataRoute:!1}),oB=O.createContext(null);function XK(t,e){let{relative:r}=e===void 0?{}:e;cd()||lr(!1);let{basename:n,navigator:i}=O.useContext($a),{hash:s,pathname:o,search:l}=lB(t,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:wa([n,o])),i.createHref({pathname:c,search:l,hash:s})}function cd(){return O.useContext(_0)!=null}function rc(){return cd()||lr(!1),O.useContext(_0).location}function aB(t){O.useContext($a).static||O.useLayoutEffect(t)}function Ti(){let{isDataRoute:t}=O.useContext(No);return t?cG():JK()}function JK(){cd()||lr(!1);let t=O.useContext(SO),{basename:e,future:r,navigator:n}=O.useContext($a),{matches:i}=O.useContext(No),{pathname:s}=rc(),o=JSON.stringify(wO(i,r.v7_relativeSplatPath)),l=O.useRef(!1);return aB(()=>{l.current=!0}),O.useCallback(function(u,f){if(f===void 0&&(f={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let d=jO(u,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:wa([e,d.pathname])),(f.replace?n.replace:n.push)(d,f.state,f)},[e,n,o,s,t])}function us(){let{matches:t}=O.useContext(No),e=t[t.length-1];return e?e.params:{}}function lB(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=O.useContext($a),{matches:i}=O.useContext(No),{pathname:s}=rc(),o=JSON.stringify(wO(i,n.v7_relativeSplatPath));return O.useMemo(()=>jO(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function QK(t,e){return ZK(t,e)}function ZK(t,e,r,n){cd()||lr(!1);let{navigator:i,static:s}=O.useContext($a),{matches:o}=O.useContext(No),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let f=rc(),d;if(e){var p;let b=typeof e=="string"?ld(e):e;u==="/"||(p=b.pathname)!=null&&p.startsWith(u)||lr(!1),d=b}else d=f;let m=d.pathname||"/",x=m;if(u!=="/"){let b=u.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=_K(t,{pathname:x}),v=iG(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:wa([u,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:wa([u,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,r,n);return e&&v?O.createElement(_0.Provider,{value:{location:bh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ga.Pop}},v):v}function eG(){let t=lG(),e=KK(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),r?O.createElement("pre",{style:i},r):null,null)}const tG=O.createElement(eG,null);class rG extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?O.createElement(No.Provider,{value:this.props.routeContext},O.createElement(oB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nG(t){let{routeContext:e,match:r,children:n}=t,i=O.useContext(SO);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),O.createElement(No.Provider,{value:e},n)}function iG(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(i=r)==null?void 0:i.errors;if(l!=null){let f=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);f>=0||lr(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<o.length;f++){let d=o[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:p,errors:m}=r,x=d.route.loader&&p[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,d,p)=>{let m,x=!1,y=null,v=null;r&&(m=l&&d.route.id?l[d.route.id]:void 0,y=d.route.errorElement||tG,c&&(u<0&&p===0?(uG("route-fallback"),x=!0,v=null):u===p&&(x=!0,v=d.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,p+1)),w=()=>{let N;return m?N=y:x?N=v:d.route.Component?N=O.createElement(d.route.Component,null):d.route.element?N=d.route.element:N=f,O.createElement(nG,{match:d,routeContext:{outlet:f,matches:b,isDataRoute:r!=null},children:N})};return r&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?O.createElement(rG,{location:r.location,revalidation:r.revalidation,component:y,error:m,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var cB=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(cB||{}),uB=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(uB||{});function sG(t){let e=O.useContext(SO);return e||lr(!1),e}function oG(t){let e=O.useContext(YK);return e||lr(!1),e}function aG(t){let e=O.useContext(No);return e||lr(!1),e}function dB(t){let e=aG(),r=e.matches[e.matches.length-1];return r.route.id||lr(!1),r.route.id}function lG(){var t;let e=O.useContext(oB),r=oG(),n=dB();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function cG(){let{router:t}=sG(cB.UseNavigateStable),e=dB(uB.UseNavigateStable),r=O.useRef(!1);return aB(()=>{r.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,bh({fromRouteId:e},s)))},[t,e])}const qP={};function uG(t,e,r){qP[t]||(qP[t]=!0)}function dG(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function da(t){let{to:e,replace:r,state:n,relative:i}=t;cd()||lr(!1);let{future:s,static:o}=O.useContext($a),{matches:l}=O.useContext(No),{pathname:c}=rc(),u=Ti(),f=jO(e,wO(l,s.v7_relativeSplatPath),c,i==="path"),d=JSON.stringify(f);return O.useEffect(()=>u(JSON.parse(d),{replace:r,state:n,relative:i}),[u,d,i,r,n]),null}function rt(t){lr(!1)}function fG(t){let{basename:e="/",children:r=null,location:n,navigationType:i=ga.Pop,navigator:s,static:o=!1,future:l}=t;cd()&&lr(!1);let c=e.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:c,navigator:s,static:o,future:bh({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof n=="string"&&(n=ld(n));let{pathname:f="/",search:d="",hash:p="",state:m=null,key:x="default"}=n,y=O.useMemo(()=>{let v=bO(f,c);return v==null?null:{location:{pathname:v,search:d,hash:p,state:m,key:x},navigationType:i}},[c,f,d,p,m,x,i]);return y==null?null:O.createElement($a.Provider,{value:u},O.createElement(_0.Provider,{children:r,value:y}))}function hG(t){let{children:e,location:r}=t;return QK(zk(e),r)}new Promise(()=>{});function zk(t,e){e===void 0&&(e=[]);let r=[];return O.Children.forEach(t,(n,i)=>{if(!O.isValidElement(n))return;let s=[...e,i];if(n.type===O.Fragment){r.push.apply(r,zk(n.props.children,s));return}n.type!==rt&&lr(!1),!n.props.index||!n.props.children||lr(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=zk(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uk(){return Uk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Uk.apply(this,arguments)}function pG(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function mG(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gG(t,e){return t.button===0&&(!e||e==="_self")&&!mG(t)}const yG=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vG="6";try{window.__reactRouterVersion=vG}catch{}const xG="startTransition",zP=eB[xG];function bG(t){let{basename:e,children:r,future:n,window:i}=t,s=O.useRef();s.current==null&&(s.current=SK({window:i,v5Compat:!0}));let o=s.current,[l,c]=O.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},f=O.useCallback(d=>{u&&zP?zP(()=>c(d)):c(d)},[c,u]);return O.useLayoutEffect(()=>o.listen(f),[o,f]),O.useEffect(()=>dG(n),[n]),O.createElement(fG,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const wG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qn=O.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:f,viewTransition:d}=e,p=pG(e,yG),{basename:m}=O.useContext($a),x,y=!1;if(typeof u=="string"&&jG.test(u)&&(x=u,wG))try{let N=new URL(window.location.href),j=u.startsWith("//")?new URL(N.protocol+u):new URL(u),k=bO(j.pathname,m);j.origin===N.origin&&k!=null?u=k+j.search+j.hash:y=!0}catch{}let v=XK(u,{relative:i}),b=SG(u,{replace:o,state:l,target:c,preventScrollReset:f,relative:i,viewTransition:d});function w(N){n&&n(N),N.defaultPrevented||b(N)}return O.createElement("a",Uk({},p,{href:x||v,onClick:y||s?n:w,ref:r,target:c}))});var UP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(UP||(UP={}));var HP;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(HP||(HP={}));function SG(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,c=Ti(),u=rc(),f=lB(t,{relative:o});return O.useCallback(d=>{if(gG(d,r)){d.preventDefault();let p=n!==void 0?n:dy(u)===dy(f);c(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,f,n,i,r,t,s,o,l])}const NG="modulepreload",kG=function(t){return"/"+t},WP={},_p=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=kG(c),c in WP)return;WP[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":NG,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},_G=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>_p(async()=>{const{default:n}=await Promise.resolve().then(()=>ud);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class NO extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class OG extends NO{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class VP extends NO{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class KP extends NO{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Hk;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Hk||(Hk={}));var EG=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(f){try{u(n.next(f))}catch(d){o(d)}}function c(f){try{u(n.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):i(f.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class CG{constructor(e,{headers:r={},customFetch:n,region:i=Hk.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=_G(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return EG(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let f;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=o):typeof o=="string"?(l["Content-Type"]="text/plain",f=o):typeof FormData<"u"&&o instanceof FormData?f=o:(l["Content-Type"]="application/json",f=JSON.stringify(o)));const d=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:f}).catch(y=>{throw new OG(y)}),p=d.headers.get("x-relay-error");if(p&&p==="true")throw new VP(d);if(!d.ok)throw new KP(d);let m=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return m==="application/json"?x=yield d.json():m==="application/octet-stream"?x=yield d.blob():m==="text/event-stream"?x=d:m==="multipart/form-data"?x=yield d.formData():x=yield d.text(),{data:x,error:null,response:d}}catch(i){return{data:null,error:i,response:i instanceof KP||i instanceof VP?i.context:void 0}}})}}var Ar={},Lc={},$c={},Bc={},Fc={},qc={},AG=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_u=AG();const TG=_u.fetch,fB=_u.fetch.bind(_u),hB=_u.Headers,PG=_u.Request,MG=_u.Response,ud=Object.freeze(Object.defineProperty({__proto__:null,Headers:hB,Request:PG,Response:MG,default:fB,fetch:TG},Symbol.toStringTag,{value:"Module"})),RG=hK(ud);var cg={},GP;function pB(){if(GP)return cg;GP=1,Object.defineProperty(cg,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return cg.default=t,cg}var YP;function mB(){if(YP)return qc;YP=1;var t=qc&&qc.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(qc,"__esModule",{value:!0});const e=t(RG),r=t(pB());class n{constructor(s){var o,l;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(o=s.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=s.signal,this.isMaybeSingle=(l=s.isMaybeSingle)!==null&&l!==void 0?l:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=new Headers(this.headers),this.headers.set(s,o),this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var f,d,p,m;let x=null,y=null,v=null,b=u.status,w=u.statusText;if(u.ok){if(this.method!=="HEAD"){const _=await u.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?y=_:y=JSON.parse(_))}const j=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),k=(p=u.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");j&&k&&k.length>1&&(v=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(x={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,v=null,b=406,w="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const j=await u.text();try{x=JSON.parse(j),Array.isArray(x)&&u.status===404&&(y=[],x=null,b=200,w="OK")}catch{u.status===404&&j===""?(b=204,w="No Content"):x={message:j}}if(x&&this.isMaybeSingle&&(!((m=x==null?void 0:x.details)===null||m===void 0)&&m.includes("0 rows"))&&(x=null,b=200,w="OK"),x&&this.shouldThrowOnError)throw new r.default(x)}return{error:x,data:y,count:v,status:b,statusText:w}});return this.shouldThrowOnError||(c=c.catch(u=>{var f,d,p;return{error:{message:`${(f=u==null?void 0:u.name)!==null&&f!==void 0?f:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(d=u==null?void 0:u.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(p=u==null?void 0:u.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),c.then(s,o)}returns(){return this}overrideTypes(){return this}}return qc.default=n,qc}var XP;function gB(){if(XP)return Fc;XP=1;var t=Fc&&Fc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Fc,"__esModule",{value:!0});const e=t(mB());class r extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",f=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${f?`${f},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var f;const d=[i?"analyze":null,s?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${p}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Fc.default=r,Fc}var JP;function kO(){if(JP)return Bc;JP=1;var t=Bc&&Bc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Bc,"__esModule",{value:!0});const e=t(gB());class r extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${c}fts${u}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return Bc.default=r,Bc}var QP;function yB(){if(QP)return $c;QP=1;var t=$c&&$c.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($c,"__esModule",{value:!0});const e=t(kO());class r{constructor(i,{headers:s={},schema:o,fetch:l}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=l}select(i,{head:s=!1,count:o}={}){const l=s?"HEAD":"GET";let c=!1;const u=(i??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",u),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var l;const c="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(u.length>0){const f=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var u;const f="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(d.length>0){const p=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:s}={}){var o;const l="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return $c.default=r,$c}var ZP;function IG(){if(ZP)return Lc;ZP=1;var t=Lc&&Lc.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Lc,"__esModule",{value:!0});const e=t(yB()),r=t(kO());class n{constructor(s,{headers:o={},schema:l,fetch:c}={}){this.url=s,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(s){const o=new URL(`${this.url}/${s}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new n(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:l=!1,get:c=!1,count:u}={}){var f;let d;const p=new URL(`${this.url}/rpc/${s}`);let m;l||c?(d=l?"HEAD":"GET",Object.entries(o).filter(([y,v])=>v!==void 0).map(([y,v])=>[y,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([y,v])=>{p.searchParams.append(y,v)})):(d="POST",m=o);const x=new Headers(this.headers);return u&&x.set("Prefer",`count=${u}`),new r.default({method:d,url:p,headers:x,schema:this.schemaName,body:m,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return Lc.default=n,Lc}var eM;function DG(){if(eM)return Ar;eM=1;var t=Ar&&Ar.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.PostgrestError=Ar.PostgrestBuilder=Ar.PostgrestTransformBuilder=Ar.PostgrestFilterBuilder=Ar.PostgrestQueryBuilder=Ar.PostgrestClient=void 0;const e=t(IG());Ar.PostgrestClient=e.default;const r=t(yB());Ar.PostgrestQueryBuilder=r.default;const n=t(kO());Ar.PostgrestFilterBuilder=n.default;const i=t(gB());Ar.PostgrestTransformBuilder=i.default;const s=t(mB());Ar.PostgrestBuilder=s.default;const o=t(pB());return Ar.PostgrestError=o.default,Ar.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},Ar}var LG=DG();const $G=ht(LG),{PostgrestClient:BG,PostgrestQueryBuilder:SEe,PostgrestFilterBuilder:NEe,PostgrestTransformBuilder:kEe,PostgrestBuilder:_Ee,PostgrestError:OEe}=$G;class FG{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const qG="2.15.1",zG=`realtime-js/${qG}`,UG="1.0.0",Wk=1e4,HG=1e3,WG=100;var Xf;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Xf||(Xf={}));var wr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(wr||(wr={}));var Yi;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Yi||(Yi={}));var Vk;(function(t){t.websocket="websocket"})(Vk||(Vk={}));var wl;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(wl||(wl={}));class VG{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const i=r.getUint8(1),s=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+i));o=o+i;const c=n.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class vB{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Rt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Rt||(Rt={}));const tM=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,o)=>(s[o]=KG(o,t,e,i),s),{})},KG=(t,e,r,n)=>{const i=e.find(l=>l.name===t),s=i==null?void 0:i.type,o=r[t];return s&&!n.includes(s)?xB(s,o):Kk(o)},xB=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return JG(e,r)}switch(t){case Rt.bool:return GG(e);case Rt.float4:case Rt.float8:case Rt.int2:case Rt.int4:case Rt.int8:case Rt.numeric:case Rt.oid:return YG(e);case Rt.json:case Rt.jsonb:return XG(e);case Rt.timestamp:return QG(e);case Rt.abstime:case Rt.date:case Rt.daterange:case Rt.int4range:case Rt.int8range:case Rt.money:case Rt.reltime:case Rt.text:case Rt.time:case Rt.timestamptz:case Rt.timetz:case Rt.tsrange:case Rt.tstzrange:return Kk(e);default:return Kk(e)}},Kk=t=>t,GG=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},YG=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},XG=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},JG=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let s;const o=t.slice(1,r);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>xB(e,l))}return t},QG=t=>typeof t=="string"?t.replace(" ","T"):t,bB=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Pw{constructor(e,r,n={},i=Wk){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var rM;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(rM||(rM={}));class Jf{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jf.syncState(this.state,i,s,o),this.pendingDiffs.forEach(c=>{this.state=Jf.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Jf.syncDiff(this.state,i,s,o),l())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const s=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(s,(u,f)=>{o[u]||(c[u]=f)}),this.map(o,(u,f)=>{const d=s[u];if(d){const p=f.map(v=>v.presence_ref),m=d.map(v=>v.presence_ref),x=f.filter(v=>m.indexOf(v.presence_ref)<0),y=d.filter(v=>p.indexOf(v.presence_ref)<0);x.length>0&&(l[u]=x),y.length>0&&(c[u]=y)}else l[u]=f}),this.syncDiff(s,{joins:l,leaves:c},n,i)}static syncDiff(e,r,n,i){const{joins:s,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(l,c)=>{var u;const f=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),f.length>0){const d=e[l].map(m=>m.presence_ref),p=f.filter(m=>d.indexOf(m.presence_ref)<0);e[l].unshift(...p)}n(l,f,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const f=c.map(d=>d.presence_ref);u=u.filter(d=>f.indexOf(d.presence_ref)<0),e[l]=u,i(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nM;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(nM||(nM={}));var Qf;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Qf||(Qf={}));var to;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(to||(to={}));class _O{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=wr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Pw(this,Yi.join,this.params,this.timeout),this.rejoinTimer=new vB(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yi.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Jf(this),this.broadcastEndpointURL=bB(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==wr.closed){const{config:{broadcast:s,presence:o,private:l}}=this.params,c=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Qf.PRESENCE]&&this.bindings[Qf.PRESENCE].length>0,f={},d={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(to.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(to.CLOSED)),this.updateJoinPayload(Object.assign({config:d},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket.setAuth(),p===void 0){e==null||e(to.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,y=(m=x==null?void 0:x.length)!==null&&m!==void 0?m:0,v=[];for(let b=0;b<y;b++){const w=x[b],{filter:{event:N,schema:j,table:k,filter:_}}=w,E=p&&p[b];if(E&&E.event===N&&E.schema===j&&E.table===k&&E.filter===_)v.push(Object.assign(Object.assign({},w),{id:E.id}));else{this.unsubscribe(),this.state=wr.errored,e==null||e(to.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(to.SUBSCRIBED);return}}).receive("error",p=>{this.state=wr.errored,e==null||e(to.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(to.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===wr.joined&&e===Qf.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=wr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yi.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Pw(this,Yi.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wr.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Pw(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>WG){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,s;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:f}=Yi;if(n&&[l,c,u,f].indexOf(o)>=0&&n!==this._joinRef())return;let p=this._onMessage(o,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var x,y,v;return((x=m.filter)===null||x===void 0?void 0:x.event)==="*"||((v=(y=m.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(m=>m.callback(p,n)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var x,y,v,b,w,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const j=m.id,k=(x=m.filter)===null||x===void 0?void 0:x.event;return j&&((y=r.ids)===null||y===void 0?void 0:y.includes(j))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const j=(w=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return j==="*"||j===((N=r==null?void 0:r.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const x=p.data,{schema:y,table:v,commit_timestamp:b,type:w,errors:N}=x;p=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:b,eventType:w,new:{},old:{},errors:N}),this._getPayloadRecords(x))}m.callback(p,n)})}_isClosed(){return this.state===wr.closed}_isJoined(){return this.state===wr.joined}_isJoining(){return this.state===wr.joining}_isLeaving(){return this.state===wr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&_O.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Yi.close,{},e)}_onError(e){this._on(Yi.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=tM(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=tM(e.columns,e.old_record)),r}}const iM=()=>{},ug={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ZG=[1e3,2e3,5e3,1e4],eY=1e4,tY=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class rY{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Wk,this.transport=null,this.heartbeatIntervalMs=ug.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=iM,this.ref=0,this.reconnectTimer=null,this.logger=iM,this.conn=null,this.sendBuffer=[],this.serializer=new VG,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>_p(async()=>{const{default:l}=await Promise.resolve().then(()=>ud);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Vk.websocket}`,this.httpEndpoint=bB(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=FG.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:UG}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Xf.connecting:return wl.Connecting;case Xf.open:return wl.Open;case Xf.closing:return wl.Closing;default:return wl.Closed}}isConnected(){return this.connectionState()===wl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new _O(`realtime:${e}`,r,this);return this.channels.push(s),s}}push(e){const{topic:r,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(HG,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ug.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:s,ref:o}=r,l=o?`(${o})`:"",c=s.status||"";this.log("receive",`${c} ${n} ${i} ${l}`.trim(),s),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Yi.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([tY],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:zG};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Yi.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new vB(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ug.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,s,o,l,c,u;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Wk,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:ug.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:f=>ZG[f-1]||eY,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(f,d)=>d(JSON.stringify(f)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class OO extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function jr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class nY extends OO{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Gk extends OO{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var iY=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(f){try{u(n.next(f))}catch(d){o(d)}}function c(f){try{u(n.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):i(f.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const wB=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>_p(async()=>{const{default:n}=await Promise.resolve().then(()=>ud);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},sY=()=>iY(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield _p(()=>Promise.resolve().then(()=>ud),void 0)).Response:Response}),Yk=t=>{if(Array.isArray(t))return t.map(r=>Yk(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Yk(n)}),e},oY=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var nc=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(f){try{u(n.next(f))}catch(d){o(d)}}function c(f){try{u(n.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):i(f.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Mw=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),aY=(t,e,r)=>nc(void 0,void 0,void 0,function*(){const n=yield sY();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const s=t.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new nY(Mw(i),s,o))}).catch(i=>{e(new Gk(Mw(i),i))}):e(new Gk(Mw(t),t))}),lY=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(oY(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function Op(t,e,r,n,i,s){return nc(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,lY(e,n,i,s)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>aY(c,l,n))})})}function fy(t,e,r,n){return nc(this,void 0,void 0,function*(){return Op(t,"GET",e,r,n)})}function vs(t,e,r,n,i){return nc(this,void 0,void 0,function*(){return Op(t,"POST",e,n,i,r)})}function Xk(t,e,r,n,i){return nc(this,void 0,void 0,function*(){return Op(t,"PUT",e,n,i,r)})}function cY(t,e,r,n){return nc(this,void 0,void 0,function*(){return Op(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function jB(t,e,r,n,i){return nc(this,void 0,void 0,function*(){return Op(t,"DELETE",e,n,i,r)})}var hn=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(f){try{u(n.next(f))}catch(d){o(d)}}function c(f){try{u(n.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):i(f.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const uY={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sM={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class dY{constructor(e,r={},n,i){this.url=e,this.headers=r,this.bucketId=n,this.fetch=wB(i)}uploadOrUpdate(e,r,n,i){return hn(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},sM),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const u=this._removeEmptyFolders(r),f=this._getFinalPath(u),d=yield(e=="PUT"?Xk:vs)(this.fetch,`${this.url}/object/${f}`,s,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(jr(s))return{data:null,error:s};throw s}})}upload(e,r,n){return hn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return hn(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:sM.upsert},i),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const d=yield Xk(this.fetch,l.toString(),c,{headers:f});return{data:{path:s,fullPath:d.Key},error:null}}catch(c){if(jr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return hn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const s=yield vs(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new OO("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(jr(n))return{data:null,error:n};throw n}})}update(e,r,n){return hn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return hn(this,void 0,void 0,function*(){try{return{data:yield vs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(jr(i))return{data:null,error:i};throw i}})}copy(e,r,n){return hn(this,void 0,void 0,function*(){try{return{data:{path:(yield vs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(jr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return hn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield vs(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(jr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return hn(this,void 0,void 0,function*(){try{const i=yield vs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(jr(i))return{data:null,error:i};throw i}})}download(e,r){return hn(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=s?`?${s}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield fy(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(jr(l))return{data:null,error:l};throw l}})}info(e){return hn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield fy(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Yk(n),error:null}}catch(n){if(jr(n))return{data:null,error:n};throw n}})}exists(e){return hn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield cY(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(jr(n)&&n instanceof Gk){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return hn(this,void 0,void 0,function*(){try{return{data:yield jB(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(jr(r))return{data:null,error:r};throw r}})}list(e,r,n){return hn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},uY),r),{prefix:e||""});return{data:yield vs(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(jr(i))return{data:null,error:i};throw i}})}listV2(e,r){return hn(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield vs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(jr(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const fY="2.11.0",hY={"X-Client-Info":`storage-js/${fY}`};var zc=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(f){try{u(n.next(f))}catch(d){o(d)}}function c(f){try{u(n.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):i(f.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class pY{constructor(e,r={},n,i){const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},hY),r),this.fetch=wB(n)}listBuckets(){return zc(this,void 0,void 0,function*(){try{return{data:yield fy(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(jr(e))return{data:null,error:e};throw e}})}getBucket(e){return zc(this,void 0,void 0,function*(){try{return{data:yield fy(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(jr(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return zc(this,void 0,void 0,function*(){try{return{data:yield vs(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(jr(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return zc(this,void 0,void 0,function*(){try{return{data:yield Xk(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(jr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return zc(this,void 0,void 0,function*(){try{return{data:yield vs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(jr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return zc(this,void 0,void 0,function*(){try{return{data:yield jB(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(jr(r))return{data:null,error:r};throw r}})}}class mY extends pY{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new dY(this.url,this.headers,e,this.fetch)}}const gY="2.56.0";let Df="";typeof Deno<"u"?Df="deno":typeof document<"u"?Df="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Df="react-native":Df="node";const yY={"X-Client-Info":`supabase-js-${Df}/${gY}`},vY={headers:yY},xY={schema:"public"},bY={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wY={};var jY=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(f){try{u(n.next(f))}catch(d){o(d)}}function c(f){try{u(n.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):i(f.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const SY=t=>{let e;return t?e=t:typeof fetch>"u"?e=fB:e=fetch,(...r)=>e(...r)},NY=()=>typeof Headers>"u"?hB:Headers,kY=(t,e,r)=>{const n=SY(r),i=NY();return(s,o)=>jY(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(s,Object.assign(Object.assign({},o),{headers:u}))})};var _Y=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(f){try{u(n.next(f))}catch(d){o(d)}}function c(f){try{u(n.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):i(f.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function OY(t){return t.endsWith("/")?t:t+"/"}function EY(t,e){var r,n;const{db:i,auth:s,realtime:o,global:l}=t,{db:c,auth:u,realtime:f,global:d}=e,p={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},f),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>_Y(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}const SB="2.71.1",nu=30*1e3,Jk=3,Rw=Jk*nu,CY="http://localhost:9999",AY="supabase.auth.token",TY={"X-Client-Info":`gotrue-js/${SB}`},Qk="X-Supabase-Api-Version",NB={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},PY=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,MY=10*60*1e3;class EO extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function nt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class RY extends EO{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function IY(t){return nt(t)&&t.name==="AuthApiError"}class kB extends EO{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Ba extends EO{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class na extends Ba{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function DY(t){return nt(t)&&t.name==="AuthSessionMissingError"}class dg extends Ba{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fg extends Ba{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class hg extends Ba{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function LY(t){return nt(t)&&t.name==="AuthImplicitGrantRedirectError"}class oM extends Ba{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Zk extends Ba{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Iw(t){return nt(t)&&t.name==="AuthRetryableFetchError"}class aM extends Ba{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class e_ extends Ba{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const hy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lM=` 	
\r=`.split(""),$Y=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<lM.length;e+=1)t[lM[e].charCodeAt(0)]=-2;for(let e=0;e<hy.length;e+=1)t[hy[e].charCodeAt(0)]=e;return t})();function cM(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(hy[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(hy[n]),e.queuedBits-=6}}function _B(t,e,r){const n=$Y[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function uM(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{qY(o,n,r)};for(let o=0;o<t.length;o+=1)_B(t.charCodeAt(o),i,s);return e.join("")}function BY(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function FY(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}BY(n,e)}}function qY(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function zY(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)_B(t.charCodeAt(i),r,n);return new Uint8Array(e)}function UY(t){const e=[];return FY(t,r=>e.push(r)),new Uint8Array(e)}function HY(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>cM(i,r,n)),cM(null,r,n),e.join("")}function WY(t){return Math.round(Date.now()/1e3)+t}function VY(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ki=()=>typeof window<"u"&&typeof document<"u",ll={tested:!1,writable:!1},OB=()=>{if(!Ki())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ll.tested)return ll.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ll.tested=!0,ll.writable=!0}catch{ll.tested=!0,ll.writable=!1}return ll.writable};function KY(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const EB=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>_p(async()=>{const{default:n}=await Promise.resolve().then(()=>ud);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},GY=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",iu=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},cl=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Jo=async(t,e)=>{await t.removeItem(e)};class O0{constructor(){this.promise=new O0.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}O0.promiseConstructor=Promise;function Dw(t){const e=t.split(".");if(e.length!==3)throw new e_("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!PY.test(e[n]))throw new e_("JWT not in base64url format");return{header:JSON.parse(uM(e[0])),payload:JSON.parse(uM(e[1])),signature:zY(e[2]),raw:{header:e[0],payload:e[1]}}}async function YY(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function XY(t,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function JY(t){return("0"+t.toString(16)).substr(-2)}function QY(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,JY).join("")}async function ZY(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function eX(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await ZY(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Uc(t,e,r=!1){const n=QY();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await iu(t,`${e}-code-verifier`,i);const s=await eX(n);return[s,n===s?"plain":"s256"]}const tX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function rX(t){const e=t.headers.get(Qk);if(!e||!e.match(tX))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function nX(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function iX(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const sX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hc(t){if(!sX.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lw(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dM(t){return JSON.parse(JSON.stringify(t))}var oX=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const yl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),aX=[502,503,504];async function fM(t){var e;if(!GY(t))throw new Zk(yl(t),0);if(aX.includes(t.status))throw new Zk(yl(t),t.status);let r;try{r=await t.json()}catch(s){throw new kB(yl(s),s)}let n;const i=rX(t);if(i&&i.getTime()>=NB["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new aM(yl(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new na}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new aM(yl(r),t.status,r.weak_password.reasons);throw new RY(yl(r),t.status||500,n)}const lX=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function dt(t,e,r,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[Qk]||(s[Qk]=NB["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await cX(t,e,r+l,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function cX(t,e,r,n,i,s){const o=lX(e,n,i,s);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new Zk(yl(c),0)}if(l.ok||await fM(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await fM(c)}}function Zs(t){var e;let r=null;hX(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=WY(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function hM(t){const e=Zs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function fa(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function uX(t){return{data:t,error:null}}function dX(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=t,o=oX(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function fX(t){return t}function hX(t){return t.access_token&&t.refresh_token&&t.expires_in}const $w=["global","local","others"];var pX=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class mX{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=EB(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=$w[0]){if($w.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$w.join(", ")}`);try{return await dt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:fa})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=pX(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:dX,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(nt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await dt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:fa})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,s,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:fX});if(f.error)throw f.error;const d=await f.json(),p=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(x=>{const y=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(x.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(nt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Hc(e);try{return await dt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:fa})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Hc(e);try{return await dt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:fa})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Hc(e);try{return await dt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:fa})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Hc(e.userId);try{const{data:r,error:n}=await dt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Hc(e.userId),Hc(e.id);try{return{data:await dt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}}function pM(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function gX(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Wc={debug:!!(globalThis&&OB()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class CB extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class yX extends CB{}async function vX(t,e,r){Wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Wc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{Wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new yX(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Wc.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}gX();const xX={url:CY,storageKey:AY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:TY,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mM(t,e,r){return await r()}const Vc={};class wh{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=wh.nextInstanceID,wh.nextInstanceID+=1,this.instanceID>0&&Ki()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},xX),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new mX({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=EB(i.fetch),this.lock=i.lock||mM,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ki()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=vX:this.lock=mM,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:OB()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=pM(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=pM(this.memoryStorage)),Ki()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Vc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Vc[this.storageKey]=Object.assign(Object.assign({},Vc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Vc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Vc[this.storageKey]=Object.assign(Object.assign({},Vc[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${SB}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=KY(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ki()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),LY(s)){const c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return nt(r)?{error:r}:{error:new kB("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const s=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Zs}),{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var r,n,i;try{let s;if("email"in e){const{email:f,password:d,options:p}=e;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await Uc(this.storage,this.storageKey)),s=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:f,password:d,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:x},xform:Zs})}else if("phone"in e){const{phone:f,password:d,options:p}=e;s=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:d,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Zs})}else throw new fg("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let r;if("email"in e){const{email:s,password:o,options:l}=e;r=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:hM})}else if("phone"in e){const{phone:s,password:o,options:l}=e;r=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:hM})}else throw new fg("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new dg}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,i,s,o,l,c,u,f,d,p,m;let x,y;if("message"in e)x=e.message,y=e.signature;else{const{chain:v,wallet:b,statement:w,options:N}=e;let j;if(Ki())if(typeof b=="object")j=b;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))j=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=b}const k=new URL((r=N==null?void 0:N.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const _=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),w?{statement:w}:null));let E;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")E=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)E=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)x=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),y=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(i=(n=N==null?void 0:N.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=N==null?void 0:N.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((o=N==null?void 0:N.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((c=N==null?void 0:N.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((u=N==null?void 0:N.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((d=(f=N==null?void 0:N.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||d===void 0)&&d.length?["Resources",...N.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const _=await j.signMessage(new TextEncoder().encode(x),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=_}}try{const{data:v,error:b}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:HY(y)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Zs});if(b)throw b;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new dg}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:b})}catch(v){if(nt(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const r=await cl(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:s,error:o}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Zs});if(await Jo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new dg}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(nt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:s,nonce:o}=e,l=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Zs}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new dg}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,i,s,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await Uc(this.storage,this.storageKey));const{error:d}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:f}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new fg("You must provide either an email or phone number.")}catch(l){if(nt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let i,s;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Zs});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(nt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,n,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Uc(this.storage,this.storageKey)),await dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:uX})}catch(s){if(nt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new na;const{error:i}=await dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(nt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await dt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:l}=await dt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new fg("You must provide either an email or phone number and a type")}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await cl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Rw:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await cl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Lw()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,f)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,f))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:fa}):await this._useSession(async r=>{var n,i,s;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new na}:await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:fa})})}catch(r){if(nt(r))return DY(r)&&(await this._removeSession(),await Jo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new na;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Uc(this.storage,this.storageKey));const{data:u,error:f}=await dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:fa});if(f)throw f;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new na;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:o}=Dw(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(nt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new na;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Ki())throw new hg("No browser detected.");if(e.error||e.error_description||e.error_code)throw new hg(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new oM("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hg("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new oM("No code detected.");const{data:w,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!s||!l||!o||!u)throw new hg("No session defined in URL");const f=Math.round(Date.now()/1e3),d=parseInt(l);let p=f+d;c&&(p=parseInt(c));const m=p-f;m*1e3<=nu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const x=p-d;f-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,p,f):f-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,p,f);const{data:y,error:v}=await this._getUser(s);if(v)throw v;const b={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:p,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(n){if(nt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await cl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{error:s};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(IY(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Jo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=VY(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Uc(this.storage,this.storageKey,!0));try{return await dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(nt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var o,l,c,u,f;const{data:d,error:p}=s;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await dt(this.fetch,"GET",m,{headers:this.headers,jwt:(f=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(i)throw i;return Ki()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(nt(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)throw o;return await dt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await XY(async i=>(i>0&&await YY(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Zs})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Iw(s)&&Date.now()+o-n<nu})}catch(n){if(this._debug(r,"error",n),nt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ki()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await cl(this.storage,this.storageKey);if(i&&this.userStorage){let o=await cl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await iu(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Lw()}else if(i&&!i.user&&!i.user){const o=await cl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Jo(this.storage,this.storageKey+"-user"),await iu(this.storage,this.storageKey,i)):i.user=Lw()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Rw;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Rw}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Iw(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new na;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new O0;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new na;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),nt(s)){const o={session:null,error:s};return Iw(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await iu(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=dM(i);await iu(this.storage,this.storageKey,s)}else{const i=dM(r);await iu(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Jo(this.storage,this.storageKey),await Jo(this.storage,this.storageKey+"-code-verifier"),await Jo(this.storage,this.storageKey+"-user"),this.userStorage&&await Jo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ki()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),nu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/nu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${nu}ms, refresh threshold is ${Jk} ticks`),i<=Jk&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof CB)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ki()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await Uc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await dt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await dt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{data:null,error:s};const{data:o,error:l}=await dt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(nt(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await dt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(nt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Dw(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const f=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+MY>i)return n;const{data:s,error:o}=await dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:m,error:x}=await this.getSession();if(x||!m.session)return{data:null,error:x};n=m.session.access_token}const{header:i,payload:s,signature:o,raw:{header:l,payload:c}}=Dw(n);r!=null&&r.allowExpired||nX(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:s,header:i,signature:o},error:null}}const f=iX(i.alg),d=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,d,o,UY(`${l}.${c}`)))throw new e_("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}}wh.nextInstanceID=0;const bX=wh;class wX extends bX{constructor(e){super(e)}}var jX=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(f){try{u(n.next(f))}catch(d){o(d)}}function c(f){try{u(n.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):i(f.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class SX{constructor(e,r,n){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=OY(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:xY,realtime:wY,auth:Object.assign(Object.assign({},bY),{storageKey:u}),global:vY},d=EY(n??{},f);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=kY(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new BG(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new mY(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new CG(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return jX(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,storageKey:s,flowType:o,lock:l,debug:c},u,f){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wX({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:s,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,flowType:o,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new rY(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const NX=(t,e,r)=>new SX(t,e,r);function kX(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}kX()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _X="https://givgsxytkbsdrlmoxzkp.supabase.co",OX="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpdmdzeHl0a2JzZHJsbW94emtwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwOTM1NTQsImV4cCI6MjA3MTY2OTU1NH0.dUHOfO0-8i90ebOy0HsrZqsoYqwNx1hpbUTRurLcMBA",pe=NX(_X,OX),xn={ai_agent:{label:"AI Agents",color:"#3B82F6",description:"Intelligent AI agents with custom prompts"},video:{label:"Videos",color:"#EF4444",description:"Educational videos with transcriptions"},document:{label:"Documents",color:"#10B981",description:"Rich text documents and guides"},prompt:{label:"Prompts",color:"#8B5CF6",description:"Reusable prompt templates"},automation:{label:"Automations",color:"#F59E0B",description:"Process automations and workflows"}},AB=O.createContext(void 0);function Ln(){const t=O.useContext(AB);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function EX({children:t}){const[e,r]=O.useState(null),[n,i]=O.useState(null),[s,o]=O.useState(!0),[l,c]=O.useState(!1),u=O.useRef(!0),f=O.useRef(null);O.useEffect(()=>{const y=setTimeout(()=>{u.current&&(console.warn("Auth loading timeout reached - switching to production auth"),c(!0),o(!1))},1e4);return()=>clearTimeout(y)},[]);const d=O.useCallback(async y=>{console.log(" Fetching admin data for user:",y);try{const{data:v,error:b}=await pe.from("admins").select("*").eq("id",y).maybeSingle();return console.log(" Admin query result:",{data:v,error:b}),b?(console.error(" Admin lookup error:",b),null):(v?console.log(" Admin data found:",v):console.log(" No admin data found for user:",y),v)}catch(v){return console.error(" Admin fetch failed with exception:",v),null}},[]);O.useEffect(()=>{let y=!0;const v=new AbortController;(async()=>{var N;try{o(!0);const{data:{user:j},error:k}=await pe.auth.getUser();if(!y)return;k&&!((N=k.message)!=null&&N.includes("Auth session missing"))&&console.error("Auth initialization error:",k);const _=j||null;if(r(_),_){const E=await d(_.id);y&&i(E)}else i(null);y&&o(!1)}catch(j){console.error("Auth initialization failed:",j),y&&(r(null),i(null),o(!1))}})();const{data:{subscription:w}}=pe.auth.onAuthStateChange(async(N,j)=>{var _;if(!y)return;console.log("Auth state change:",N,(_=j==null?void 0:j.user)==null?void 0:_.id);const k=(j==null?void 0:j.user)||null;if(console.log(" Processing auth state change:",{event:N,userId:k==null?void 0:k.id}),r(k),k){console.log(" User authenticated, fetching admin data...");try{const E=await d(k.id);y&&(console.log(" Setting admin data:",E),i(E))}catch(E){console.error(" Failed to fetch admin data:",E),y&&i(null)}}else console.log(" No user, clearing admin data"),i(null);y&&o(!1)});return()=>{y=!1,v.abort(),w.unsubscribe()}},[d]),O.useEffect(()=>()=>{u.current=!1,f.current&&clearTimeout(f.current)},[]);const p=O.useCallback(async(y,v)=>{try{o(!0);const{error:b}=await pe.auth.signInWithPassword({email:y,password:v});return b?(o(!1),{error:b.message}):{}}catch{return o(!1),{error:"Sign in failed"}}},[]),m=O.useCallback(async()=>{try{o(!0),await pe.auth.signOut()}catch(y){console.error("Sign out error:",y),o(!1)}},[]),x=O.useMemo(()=>({user:e,admin:n,loading:s,signIn:p,signOut:m}),[e==null?void 0:e.id,n==null?void 0:n.id,s,p,m]);return a.jsx(AB.Provider,{value:x,children:t})}/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(t,e)=>{const r=O.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:c,...u},f)=>O.createElement("svg",{ref:f,...CX,width:i,height:i,stroke:n,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${AX(t)}`,l].join(" "),...u},[...e.map(([d,p])=>O.createElement(d,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=ke("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=ke("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=ke("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=ke("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=ke("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=ke("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=ke("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=ke("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=ke("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=ke("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=ke("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=ke("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=ke("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=ke("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=ke("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=ke("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=ke("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=ke("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=ke("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=ke("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=ke("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=ke("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=ke("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=ke("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=ke("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=ke("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=ke("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=ke("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=ke("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=ke("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=ke("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=ke("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=ke("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=ke("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=ke("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=ke("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=ke("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=ke("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=ke("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=ke("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=ke("Heading",[["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M6 20V4",key:"1w1bmo"}],["path",{d:"M18 20V4",key:"o2hl4u"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=ke("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=ke("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=ke("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=ke("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=ke("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=ke("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=ke("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=ke("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=ke("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=ke("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=ke("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=ke("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=ke("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=ke("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=ke("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=ke("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=ke("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=ke("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=ke("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=ke("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=ke("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=ke("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=ke("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=ke("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=ke("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=ke("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=ke("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=ke("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=ke("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=ke("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=ke("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=ke("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=ke("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=ke("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=ke("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=ke("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=ke("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=ke("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=ke("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=ke("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=ke("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=ke("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=ke("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=ke("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=ke("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=ke("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=ke("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=ke("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);class Nh extends Z.Component{constructor(r){super(r);vf(this,"retryCount",0);vf(this,"maxRetries",3);vf(this,"handleRetry",()=>{this.retryCount<this.maxRetries?(this.retryCount++,console.log(` Error Boundary Retry Attempt ${this.retryCount}/${this.maxRetries}`),this.setState({hasError:!1,error:null,errorId:Date.now().toString(36)})):(console.warn(" Max retry attempts reached, manual intervention required"),window.location.reload())});vf(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorId:Date.now().toString(36)}}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorId:Date.now().toString(36)}}componentDidCatch(r,n){var i,s;console.group(" Error Boundary Caught Error"),console.error("Error:",r),console.error("Error Info:",n),console.error("Component Stack:",n.componentStack),console.groupEnd(),(s=(i=this.props).onError)==null||s.call(i,r,n),console.warn("Production error reporting not configured")}render(){var r,n,i,s,o,l;if(this.state.hasError){if(this.props.fallback){const f=this.props.fallback;return a.jsx(f,{error:this.state.error,retry:this.handleRetry})}const c=(n=(r=this.state.error)==null?void 0:r.message)==null?void 0:n.includes("Maximum update depth exceeded"),u=((s=(i=this.state.error)==null?void 0:i.message)==null?void 0:s.includes("navigate"))||((l=(o=this.state.error)==null?void 0:o.message)==null?void 0:l.includes("router"));return a.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:a.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(Pl,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:c?"System Stability Error":u?"Navigation Error":"Something went wrong"}),a.jsx("p",{className:"text-sm text-gray-600 mb-6",children:c?"The application encountered a rendering loop. This has been automatically contained.":u?"There was an issue with page navigation. You can safely continue using the application.":"An unexpected error occurred, but the system remains stable."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:this.handleRetry,disabled:this.retryCount>=this.maxRetries,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(IO,{className:"h-4 w-4 mr-2"}),this.retryCount>=this.maxRetries?"Max Retries Reached":`Try Again (${this.retryCount}/${this.maxRetries})`]}),a.jsxs("button",{onClick:this.handleGoHome,className:"w-full flex justify-center items-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(PO,{className:"h-4 w-4 mr-2"}),"Go to Dashboard"]})]}),!1]})})})}return this.props.children}}function HB(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=HB(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function it(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=HB(t))&&(n&&(n+=" "),n+=e);return n}const LO="-",GX=t=>{const e=XX(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(LO);return l[0]===""&&l.length!==1&&l.shift(),WB(l,e)||YX(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},WB=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),i=n?WB(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(LO);return(o=e.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},kM=/^\[(.+)\]$/,YX=t=>{if(kM.test(t)){const e=kM.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},XX=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return QX(Object.entries(t.classGroups),r).forEach(([s,o])=>{o_(o,n,s,e)}),n},o_=(t,e,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:_M(e,i);s.classGroupId=r;return}if(typeof i=="function"){if(JX(i)){o_(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([s,o])=>{o_(o,_M(e,s),r,n)})})},_M=(t,e)=>{let r=t;return e.split(LO).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},JX=t=>t.isThemeGetter,QX=(t,e)=>e?t.map(([r,n])=>{const i=n.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[e+o,l])):s);return[r,i]}):t,ZX=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const i=(s,o)=>{r.set(s,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(s){let o=r.get(s);if(o!==void 0)return o;if((o=n.get(s))!==void 0)return i(s,o),o},set(s,o){r.has(s)?r.set(s,o):i(s,o)}}},VB="!",eJ=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,i=e[0],s=e.length,o=l=>{const c=[];let u=0,f=0,d;for(let v=0;v<l.length;v++){let b=l[v];if(u===0){if(b===i&&(n||l.slice(v,v+s)===e)){c.push(l.slice(f,v)),f=v+s;continue}if(b==="/"){d=v;continue}}b==="["?u++:b==="]"&&u--}const p=c.length===0?l:l.substring(f),m=p.startsWith(VB),x=m?p.substring(1):p,y=d&&d>f?d-f:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:y}};return r?l=>r({className:l,parseClassName:o}):o},tJ=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},rJ=t=>({cache:ZX(t.cacheSize),parseClassName:eJ(t),...GX(t)}),nJ=/\s+/,iJ=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(nJ);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:f,hasImportantModifier:d,baseClassName:p,maybePostfixModifierPosition:m}=r(u);let x=!!m,y=n(x?p.substring(0,m):p);if(!y){if(!x){l=u+(l.length>0?" "+l:l);continue}if(y=n(p),!y){l=u+(l.length>0?" "+l:l);continue}x=!1}const v=tJ(f).join(":"),b=d?v+VB:v,w=b+y;if(s.includes(w))continue;s.push(w);const N=i(y,x);for(let j=0;j<N.length;++j){const k=N[j];s.push(b+k)}l=u+(l.length>0?" "+l:l)}return l};function sJ(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=KB(e))&&(n&&(n+=" "),n+=r);return n}const KB=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=KB(t[n]))&&(r&&(r+=" "),r+=e);return r};function oJ(t,...e){let r,n,i,s=o;function o(c){const u=e.reduce((f,d)=>d(f),t());return r=rJ(u),n=r.cache.get,i=r.cache.set,s=l,l(c)}function l(c){const u=n(c);if(u)return u;const f=iJ(c,r);return i(c,f),f}return function(){return s(sJ.apply(null,arguments))}}const qt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},GB=/^\[(?:([a-z-]+):)?(.+)\]$/i,aJ=/^\d+\/\d+$/,lJ=new Set(["px","full","screen"]),cJ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uJ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dJ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,fJ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hJ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gs=t=>gu(t)||lJ.has(t)||aJ.test(t),Qo=t=>fd(t,"length",wJ),gu=t=>!!t&&!Number.isNaN(Number(t)),qw=t=>fd(t,"number",gu),bf=t=>!!t&&Number.isInteger(Number(t)),pJ=t=>t.endsWith("%")&&gu(t.slice(0,-1)),st=t=>GB.test(t),Zo=t=>cJ.test(t),mJ=new Set(["length","size","percentage"]),gJ=t=>fd(t,mJ,YB),yJ=t=>fd(t,"position",YB),vJ=new Set(["image","url"]),xJ=t=>fd(t,vJ,SJ),bJ=t=>fd(t,"",jJ),wf=()=>!0,fd=(t,e,r)=>{const n=GB.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},wJ=t=>uJ.test(t)&&!dJ.test(t),YB=()=>!1,jJ=t=>fJ.test(t),SJ=t=>hJ.test(t),NJ=()=>{const t=qt("colors"),e=qt("spacing"),r=qt("blur"),n=qt("brightness"),i=qt("borderColor"),s=qt("borderRadius"),o=qt("borderSpacing"),l=qt("borderWidth"),c=qt("contrast"),u=qt("grayscale"),f=qt("hueRotate"),d=qt("invert"),p=qt("gap"),m=qt("gradientColorStops"),x=qt("gradientColorStopPositions"),y=qt("inset"),v=qt("margin"),b=qt("opacity"),w=qt("padding"),N=qt("saturate"),j=qt("scale"),k=qt("sepia"),_=qt("skew"),E=qt("space"),A=qt("translate"),T=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",st,e],R=()=>[st,e],L=()=>["",Gs,Qo],$=()=>["auto",gu,st],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",st],V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>[gu,st];return{cacheSize:500,separator:":",theme:{colors:[wf],spacing:[Gs,Qo],blur:["none","",Zo,st],brightness:D(),borderColor:[t],borderRadius:["none","","full",Zo,st],borderSpacing:R(),borderWidth:L(),contrast:D(),grayscale:q(),hueRotate:D(),invert:q(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[pJ,Qo],inset:P(),margin:P(),opacity:D(),padding:R(),saturate:D(),scale:D(),sepia:q(),skew:D(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",st]}],container:["container"],columns:[{columns:[Zo]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),st]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",bf,st]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",st]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",bf,st]}],"grid-cols":[{"grid-cols":[wf]}],"col-start-end":[{col:["auto",{span:["full",bf,st]},st]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[wf]}],"row-start-end":[{row:["auto",{span:[bf,st]},st]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",st]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",st]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",st,e]}],"min-w":[{"min-w":[st,e,"min","max","fit"]}],"max-w":[{"max-w":[st,e,"none","full","min","max","fit","prose",{screen:[Zo]},Zo]}],h:[{h:[st,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[st,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[st,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[st,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Zo,Qo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",qw]}],"font-family":[{font:[wf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",st]}],"line-clamp":[{"line-clamp":["none",gu,qw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Gs,st]}],"list-image":[{"list-image":["none",st]}],"list-style-type":[{list:["none","disc","decimal",st]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Gs,Qo]}],"underline-offset":[{"underline-offset":["auto",Gs,st]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",st]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",st]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),yJ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gJ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},xJ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[Gs,st]}],"outline-w":[{outline:[Gs,Qo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Gs,Qo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Zo,bJ]}],"shadow-color":[{shadow:[wf]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...W(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Zo,st]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[N]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",st]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",st]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",st]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[bf,st]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",st]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",st]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",st]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Gs,Qo,qw]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},kJ=oJ(NJ);function ge(...t){return kJ(it(t))}function cr({size:t="md",className:e}){const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return a.jsx("div",{className:ge("animate-spin rounded-full border-2 border-gray-300 border-t-blue-600",r[t],e)})}function ft({children:t,requireAdmin:e=!1}){const{user:r,admin:n,loading:i}=Ln(),[s,o]=O.useState(!1),l=O.useRef(null),c=O.useRef(!0);if(O.useEffect(()=>(i?l.current=setTimeout(()=>{c.current&&(console.warn("ProtectedRoute: Loading timeout reached - authentication may have failed"),o(!0))},15e3):(l.current&&(clearTimeout(l.current),l.current=null),o(!1)),()=>{l.current&&clearTimeout(l.current)}),[i]),O.useEffect(()=>()=>{c.current=!1,l.current&&clearTimeout(l.current)},[]),i&&!s)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx(cr,{size:"lg"}),a.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Verifying authentication..."})]})});if(s)return console.warn("ProtectedRoute: Authentication timeout - redirecting to login"),a.jsx(da,{to:"/login",replace:!0});if(!r)return a.jsx(da,{to:"/login",replace:!0});if(e){if(console.log(" Checking admin access:",{user:!!r,admin:n,loading:i}),n===null)return console.log(" Access denied - user is not an admin"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600",children:"You don't have permission to access this page."}),a.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["User ID: ",r==null?void 0:r.id]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Admin Status: ",n===null?"Not Admin":n===void 0?"Loading...":"Admin"]}),a.jsx("button",{onClick:()=>window.location.href="/login",className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Return to Login"})]})});if(n===void 0)return console.log(" Admin status still loading..."),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx(cr,{size:"lg"}),a.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Verifying admin permissions..."})]})});console.log(" Admin access granted:",n)}return a.jsx(a.Fragment,{children:t})}function _J(){var y,v;const[t,e]=O.useState(""),[r,n]=O.useState(""),[i,s]=O.useState(!1),[o,l]=O.useState(""),[c,u]=O.useState(!1),{user:f,signIn:d}=Ln(),m=((v=(y=rc().state)==null?void 0:y.from)==null?void 0:v.pathname)||"/dashboard";if(f)return a.jsx(da,{to:m,replace:!0});const x=async b=>{b.preventDefault(),l(""),u(!0);const{error:w}=await d(t,r);w&&l(w),u(!1)};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-gray-50 flex items-center justify-center px-4",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center mb-4",children:a.jsx(Ou,{className:"h-8 w-8 text-white"})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"AI GYM"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Training Zone Access Portal"})]}),a.jsx("div",{className:"bg-white shadow-lg rounded-xl border border-gray-200 p-8",children:a.jsxs("form",{className:"space-y-6",onSubmit:x,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:b=>e(b.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"admin@example.com",disabled:c})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",name:"password",type:i?"text":"password",autoComplete:"current-password",required:!0,value:r,onChange:b=>n(b.target.value),className:"w-full px-3 py-2.5 pr-10 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your password",disabled:c}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!i),disabled:c,children:i?a.jsx(TO,{className:"h-5 w-5 text-gray-400"}):a.jsx(ii,{className:"h-5 w-5 text-gray-400"})})]})]}),o&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsx("p",{className:"text-sm text-red-800",children:o})}),a.jsx("button",{type:"submit",disabled:c,className:"w-full flex justify-center items-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?a.jsxs(a.Fragment,{children:[a.jsx(cr,{size:"sm",className:"mr-2"}),"Signing in..."]}):"Sign In"})]})})]})})}function OJ(){var d;const{admin:t,signOut:e}=Ln(),[r,n]=O.useState(!1),[i,s]=O.useState(!1),o=rc(),l=[{name:"Dashboard",href:"/dashboard",icon:PO},{name:"Clients",href:"/clients",icon:Ou},{name:"Users",href:"/users",icon:oi},{name:"Tags",href:"/tags",icon:Es},{name:"Training Zone",href:"/training-zone",icon:Sh}],c=[{name:"AI Agents",href:"/content/ai-agents",icon:Kr,color:"#3B82F6"},{name:"Videos",href:"/content/videos",icon:si,color:"#EF4444"},{name:"Documents",href:"/content/documents",icon:Ot,color:"#10B981"},{name:"Prompts",href:"/content/prompts",icon:Gr,color:"#8B5CF6"},{name:"Automations",href:"/content/automations",icon:Ei,color:"#F59E0B"}],u=async()=>{await e()},f=o.pathname.startsWith("/content");return a.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs(Qn,{to:"/dashboard",className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-8 w-8 bg-blue-600 rounded-lg flex items-center justify-center",children:a.jsx(Ou,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"AI GYM"}),a.jsx("p",{className:"text-xs text-gray-500",children:"by AI Workify"})]})]})}),a.jsxs("nav",{className:"hidden md:flex space-x-8",children:[l.map(p=>{const m=o.pathname===p.href,x=p.icon;return a.jsxs(Qn,{to:p.href,className:`inline-flex items-center space-x-1 px-1 pt-1 text-sm font-medium transition-colors ${m?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[a.jsx(x,{className:"h-4 w-4"}),a.jsx("span",{children:p.name})]},p.name)}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>s(!i),className:`inline-flex items-center space-x-1 px-1 pt-1 text-sm font-medium transition-colors ${f?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[a.jsx(Ot,{className:"h-4 w-4"}),a.jsx("span",{children:"Content"}),a.jsx(mo,{className:"h-3 w-3"})]}),i&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>s(!1)}),a.jsx("div",{className:"absolute left-0 mt-2 w-56 bg-white rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 z-20",children:a.jsxs("div",{className:"py-2",children:[a.jsx("div",{className:"px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Repositories"}),c.map(p=>{const m=p.icon,x=o.pathname===p.href;return a.jsxs(Qn,{to:p.href,className:`flex items-center px-3 py-2 text-sm transition-colors ${x?"bg-blue-50 text-blue-700 border-r-2 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>s(!1),children:[a.jsx(m,{className:"mr-3 h-4 w-4",style:{color:p.color}}),p.name]},p.name)})]})})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>n(!r),className:"flex items-center space-x-3 text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-8 w-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-medium",children:t==null?void 0:t.email.charAt(0).toUpperCase()})}),a.jsxs("div",{className:"hidden md:block text-left",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:t==null?void 0:t.email}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:(d=t==null?void 0:t.role)==null?void 0:d.replace("_"," ")})]}),a.jsx(mo,{className:"h-4 w-4 text-gray-400"})]})}),r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>n(!1)}),a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-20",children:a.jsxs("div",{className:"py-1",children:[a.jsxs(Qn,{to:"/settings",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>n(!1),children:[a.jsx(Dn,{className:"mr-3 h-4 w-4"}),"Settings"]}),a.jsxs("button",{onClick:u,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[a.jsx(LB,{className:"mr-3 h-4 w-4"}),"Sign Out"]})]})})]})]})]})})})}function pr({children:t}){return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(OJ,{}),a.jsx("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:t})]})}var zw,OM;function $n(){if(OM)return zw;OM=1;var t=Array.isArray;return zw=t,zw}var Uw,EM;function XB(){if(EM)return Uw;EM=1;var t=typeof ag=="object"&&ag&&ag.Object===Object&&ag;return Uw=t,Uw}var Hw,CM;function Is(){if(CM)return Hw;CM=1;var t=XB(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return Hw=r,Hw}var Ww,AM;function Ap(){if(AM)return Ww;AM=1;var t=Is(),e=t.Symbol;return Ww=e,Ww}var Vw,TM;function EJ(){if(TM)return Vw;TM=1;var t=Ap(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,i=t?t.toStringTag:void 0;function s(o){var l=r.call(o,i),c=o[i];try{o[i]=void 0;var u=!0}catch{}var f=n.call(o);return u&&(l?o[i]=c:delete o[i]),f}return Vw=s,Vw}var Kw,PM;function CJ(){if(PM)return Kw;PM=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return Kw=r,Kw}var Gw,MM;function _o(){if(MM)return Gw;MM=1;var t=Ap(),e=EJ(),r=CJ(),n="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?i:n:s&&s in Object(l)?e(l):r(l)}return Gw=o,Gw}var Yw,RM;function Oo(){if(RM)return Yw;RM=1;function t(e){return e!=null&&typeof e=="object"}return Yw=t,Yw}var Xw,IM;function hd(){if(IM)return Xw;IM=1;var t=_o(),e=Oo(),r="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&t(i)==r}return Xw=n,Xw}var Jw,DM;function $O(){if(DM)return Jw;DM=1;var t=$n(),e=hd(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,o){if(t(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||e(s)?!0:n.test(s)||!r.test(s)||o!=null&&s in Object(o)}return Jw=i,Jw}var Qw,LM;function Fa(){if(LM)return Qw;LM=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return Qw=t,Qw}var Zw,$M;function BO(){if($M)return Zw;$M=1;var t=_o(),e=Fa(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!e(l))return!1;var c=t(l);return c==n||c==i||c==r||c==s}return Zw=o,Zw}var e1,BM;function AJ(){if(BM)return e1;BM=1;var t=Is(),e=t["__core-js_shared__"];return e1=e,e1}var t1,FM;function TJ(){if(FM)return t1;FM=1;var t=AJ(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return t1=r,t1}var r1,qM;function JB(){if(qM)return r1;qM=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return r1=r,r1}var n1,zM;function PJ(){if(zM)return n1;zM=1;var t=BO(),e=TJ(),r=Fa(),n=JB(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,f=RegExp("^"+c.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(p){if(!r(p)||e(p))return!1;var m=t(p)?f:s;return m.test(n(p))}return n1=d,n1}var i1,UM;function MJ(){if(UM)return i1;UM=1;function t(e,r){return e==null?void 0:e[r]}return i1=t,i1}var s1,HM;function ic(){if(HM)return s1;HM=1;var t=PJ(),e=MJ();function r(n,i){var s=e(n,i);return t(s)?s:void 0}return s1=r,s1}var o1,WM;function A0(){if(WM)return o1;WM=1;var t=ic(),e=t(Object,"create");return o1=e,o1}var a1,VM;function RJ(){if(VM)return a1;VM=1;var t=A0();function e(){this.__data__=t?t(null):{},this.size=0}return a1=e,a1}var l1,KM;function IJ(){if(KM)return l1;KM=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return l1=t,l1}var c1,GM;function DJ(){if(GM)return c1;GM=1;var t=A0(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(s){var o=this.__data__;if(t){var l=o[s];return l===e?void 0:l}return n.call(o,s)?o[s]:void 0}return c1=i,c1}var u1,YM;function LJ(){if(YM)return u1;YM=1;var t=A0(),e=Object.prototype,r=e.hasOwnProperty;function n(i){var s=this.__data__;return t?s[i]!==void 0:r.call(s,i)}return u1=n,u1}var d1,XM;function $J(){if(XM)return d1;XM=1;var t=A0(),e="__lodash_hash_undefined__";function r(n,i){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=t&&i===void 0?e:i,this}return d1=r,d1}var f1,JM;function BJ(){if(JM)return f1;JM=1;var t=RJ(),e=IJ(),r=DJ(),n=LJ(),i=$J();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,f1=s,f1}var h1,QM;function FJ(){if(QM)return h1;QM=1;function t(){this.__data__=[],this.size=0}return h1=t,h1}var p1,ZM;function FO(){if(ZM)return p1;ZM=1;function t(e,r){return e===r||e!==e&&r!==r}return p1=t,p1}var m1,eR;function T0(){if(eR)return m1;eR=1;var t=FO();function e(r,n){for(var i=r.length;i--;)if(t(r[i][0],n))return i;return-1}return m1=e,m1}var g1,tR;function qJ(){if(tR)return g1;tR=1;var t=T0(),e=Array.prototype,r=e.splice;function n(i){var s=this.__data__,o=t(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():r.call(s,o,1),--this.size,!0}return g1=n,g1}var y1,rR;function zJ(){if(rR)return y1;rR=1;var t=T0();function e(r){var n=this.__data__,i=t(n,r);return i<0?void 0:n[i][1]}return y1=e,y1}var v1,nR;function UJ(){if(nR)return v1;nR=1;var t=T0();function e(r){return t(this.__data__,r)>-1}return v1=e,v1}var x1,iR;function HJ(){if(iR)return x1;iR=1;var t=T0();function e(r,n){var i=this.__data__,s=t(i,r);return s<0?(++this.size,i.push([r,n])):i[s][1]=n,this}return x1=e,x1}var b1,sR;function P0(){if(sR)return b1;sR=1;var t=FJ(),e=qJ(),r=zJ(),n=UJ(),i=HJ();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,b1=s,b1}var w1,oR;function qO(){if(oR)return w1;oR=1;var t=ic(),e=Is(),r=t(e,"Map");return w1=r,w1}var j1,aR;function WJ(){if(aR)return j1;aR=1;var t=BJ(),e=P0(),r=qO();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return j1=n,j1}var S1,lR;function VJ(){if(lR)return S1;lR=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return S1=t,S1}var N1,cR;function M0(){if(cR)return N1;cR=1;var t=VJ();function e(r,n){var i=r.__data__;return t(n)?i[typeof n=="string"?"string":"hash"]:i.map}return N1=e,N1}var k1,uR;function KJ(){if(uR)return k1;uR=1;var t=M0();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return k1=e,k1}var _1,dR;function GJ(){if(dR)return _1;dR=1;var t=M0();function e(r){return t(this,r).get(r)}return _1=e,_1}var O1,fR;function YJ(){if(fR)return O1;fR=1;var t=M0();function e(r){return t(this,r).has(r)}return O1=e,O1}var E1,hR;function XJ(){if(hR)return E1;hR=1;var t=M0();function e(r,n){var i=t(this,r),s=i.size;return i.set(r,n),this.size+=i.size==s?0:1,this}return E1=e,E1}var C1,pR;function zO(){if(pR)return C1;pR=1;var t=WJ(),e=KJ(),r=GJ(),n=YJ(),i=XJ();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,C1=s,C1}var A1,mR;function QB(){if(mR)return A1;mR=1;var t=zO(),e="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],c=s.cache;if(c.has(l))return c.get(l);var u=n.apply(this,o);return s.cache=c.set(l,u)||c,u};return s.cache=new(r.Cache||t),s}return r.Cache=t,A1=r,A1}var T1,gR;function JJ(){if(gR)return T1;gR=1;var t=QB(),e=500;function r(n){var i=t(n,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return T1=r,T1}var P1,yR;function QJ(){if(yR)return P1;yR=1;var t=JJ(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,l,c,u){s.push(c?u.replace(r,"$1"):l||o)}),s});return P1=n,P1}var M1,vR;function UO(){if(vR)return M1;vR=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,s=Array(i);++n<i;)s[n]=r(e[n],n,e);return s}return M1=t,M1}var R1,xR;function ZJ(){if(xR)return R1;xR=1;var t=Ap(),e=UO(),r=$n(),n=hd(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return e(l,o)+"";if(n(l))return s?s.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return R1=o,R1}var I1,bR;function ZB(){if(bR)return I1;bR=1;var t=ZJ();function e(r){return r==null?"":t(r)}return I1=e,I1}var D1,wR;function eF(){if(wR)return D1;wR=1;var t=$n(),e=$O(),r=QJ(),n=ZB();function i(s,o){return t(s)?s:e(s,o)?[s]:r(n(s))}return D1=i,D1}var L1,jR;function R0(){if(jR)return L1;jR=1;var t=hd();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return L1=e,L1}var $1,SR;function HO(){if(SR)return $1;SR=1;var t=eF(),e=R0();function r(n,i){i=t(i,n);for(var s=0,o=i.length;n!=null&&s<o;)n=n[e(i[s++])];return s&&s==o?n:void 0}return $1=r,$1}var B1,NR;function tF(){if(NR)return B1;NR=1;var t=HO();function e(r,n,i){var s=r==null?void 0:t(r,n);return s===void 0?i:s}return B1=e,B1}var eQ=tF();const ei=ht(eQ);var F1,kR;function tQ(){if(kR)return F1;kR=1;function t(e){return e==null}return F1=t,F1}var rQ=tQ();const tt=ht(rQ);var q1,_R;function nQ(){if(_R)return q1;_R=1;var t=_o(),e=$n(),r=Oo(),n="[object String]";function i(s){return typeof s=="string"||!e(s)&&r(s)&&t(s)==n}return q1=i,q1}var iQ=nQ();const Tp=ht(iQ);var sQ=BO();const Ze=ht(sQ);var oQ=Fa();const pd=ht(oQ);var z1={exports:{}},xt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OR;function aQ(){if(OR)return xt;OR=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),x;x=Symbol.for("react.module.reference");function y(v){if(typeof v=="object"&&v!==null){var b=v.$$typeof;switch(b){case t:switch(v=v.type,v){case r:case i:case n:case u:case f:return v;default:switch(v=v&&v.$$typeof,v){case l:case o:case c:case p:case d:case s:return v;default:return b}}case e:return b}}}return xt.ContextConsumer=o,xt.ContextProvider=s,xt.Element=t,xt.ForwardRef=c,xt.Fragment=r,xt.Lazy=p,xt.Memo=d,xt.Portal=e,xt.Profiler=i,xt.StrictMode=n,xt.Suspense=u,xt.SuspenseList=f,xt.isAsyncMode=function(){return!1},xt.isConcurrentMode=function(){return!1},xt.isContextConsumer=function(v){return y(v)===o},xt.isContextProvider=function(v){return y(v)===s},xt.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===t},xt.isForwardRef=function(v){return y(v)===c},xt.isFragment=function(v){return y(v)===r},xt.isLazy=function(v){return y(v)===p},xt.isMemo=function(v){return y(v)===d},xt.isPortal=function(v){return y(v)===e},xt.isProfiler=function(v){return y(v)===i},xt.isStrictMode=function(v){return y(v)===n},xt.isSuspense=function(v){return y(v)===u},xt.isSuspenseList=function(v){return y(v)===f},xt.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===r||v===i||v===n||v===u||v===f||v===m||typeof v=="object"&&v!==null&&(v.$$typeof===p||v.$$typeof===d||v.$$typeof===s||v.$$typeof===o||v.$$typeof===c||v.$$typeof===x||v.getModuleId!==void 0)},xt.typeOf=y,xt}var ER;function lQ(){return ER||(ER=1,z1.exports=aQ()),z1.exports}var cQ=lQ(),U1,CR;function rF(){if(CR)return U1;CR=1;var t=_o(),e=Oo(),r="[object Number]";function n(i){return typeof i=="number"||e(i)&&t(i)==r}return U1=n,U1}var H1,AR;function uQ(){if(AR)return H1;AR=1;var t=rF();function e(r){return t(r)&&r!=+r}return H1=e,H1}var dQ=uQ();const Pp=ht(dQ);var fQ=rF();const hQ=ht(fQ);var mn=function(e){return e===0?0:e>0?1:-1},Nl=function(e){return Tp(e)&&e.indexOf("%")===e.length-1},Pe=function(e){return hQ(e)&&!Pp(e)},kr=function(e){return Pe(e)||Tp(e)},pQ=0,md=function(e){var r=++pQ;return"".concat(e||"").concat(r)},gn=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pe(e)&&!Tp(e))return n;var s;if(Nl(e)){var o=e.indexOf("%");s=r*parseFloat(e.slice(0,o))/100}else s=+e;return Pp(s)&&(s=n),i&&s>r&&(s=r),s},ha=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},mQ=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},Gn=function(e,r){return Pe(e)&&Pe(r)?function(n){return e+n*(r-e)}:function(){return r}};function by(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):ei(n,e))===r})}function yu(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function a_(t){"@babel/helpers - typeof";return a_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a_(t)}var gQ=["viewBox","children"],yQ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],TR=["points","pathLength"],W1={svg:gQ,polygon:TR,polyline:TR},WO=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],wy=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(O.isValidElement(e)&&(n=e.props),!pd(n))return null;var i={};return Object.keys(n).forEach(function(s){WO.includes(s)&&(i[s]=r||function(o){return n[s](n,o)})}),i},vQ=function(e,r,n){return function(i){return e(r,n,i),null}},zl=function(e,r,n){if(!pd(e)||a_(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];WO.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=vQ(o,r,n))}),i},xQ=["children"],bQ=["children"];function PR(t,e){if(t==null)return{};var r=wQ(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wQ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function l_(t){"@babel/helpers - typeof";return l_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l_(t)}var MR={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},co=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},RR=null,V1=null,VO=function t(e){if(e===RR&&Array.isArray(V1))return V1;var r=[];return O.Children.forEach(e,function(n){tt(n)||(cQ.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),V1=r,RR=e,r};function ti(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return co(i)}):n=[co(e)],VO(t).forEach(function(i){var s=ei(i,"type.displayName")||ei(i,"type.name");n.indexOf(s)!==-1&&r.push(i)}),r}function Vn(t,e){var r=ti(t,e);return r&&r[0]}var IR=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!Pe(n)||n<=0||!Pe(i)||i<=0)},jQ=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],SQ=function(e){return e&&e.type&&Tp(e.type)&&jQ.indexOf(e.type)>=0},NQ=function(e){return e&&l_(e)==="object"&&"clipDot"in e},kQ=function(e,r,n,i){var s,o=(s=W1==null?void 0:W1[i])!==null&&s!==void 0?s:[];return r.startsWith("data-")||!Ze(e)&&(i&&o.includes(r)||yQ.includes(r))||n&&WO.includes(r)},Ge=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(O.isValidElement(e)&&(i=e.props),!pd(i))return null;var s={};return Object.keys(i).forEach(function(o){var l;kQ((l=i)===null||l===void 0?void 0:l[o],o,r,n)&&(s[o]=i[o])}),s},c_=function t(e,r){if(e===r)return!0;var n=O.Children.count(e);if(n!==O.Children.count(r))return!1;if(n===0)return!0;if(n===1)return DR(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var s=e[i],o=r[i];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!DR(s,o))return!1}return!0},DR=function(e,r){if(tt(e)&&tt(r))return!0;if(!tt(e)&&!tt(r)){var n=e.props||{},i=n.children,s=PR(n,xQ),o=r.props||{},l=o.children,c=PR(o,bQ);return i&&l?yu(s,c)&&c_(i,l):!i&&!l?yu(s,c):!1}return!1},LR=function(e,r){var n=[],i={};return VO(e).forEach(function(s,o){if(SQ(s))n.push(s);else if(s){var l=co(s.type),c=r[l]||{},u=c.handler,f=c.once;if(u&&(!f||!i[l])){var d=u(s,l,o);n.push(d),i[l]=!0}}}),n},_Q=function(e){var r=e&&e.type;return r&&MR[r]?MR[r]:null},OQ=function(e,r){return VO(r).indexOf(e)},EQ=["children","width","height","viewBox","className","style","title","desc"];function u_(){return u_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},u_.apply(this,arguments)}function CQ(t,e){if(t==null)return{};var r=AQ(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function AQ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function d_(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,s=t.className,o=t.style,l=t.title,c=t.desc,u=CQ(t,EQ),f=i||{width:r,height:n,x:0,y:0},d=it("recharts-surface",s);return Z.createElement("svg",u_({},Ge(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),Z.createElement("title",null,l),Z.createElement("desc",null,c),e)}var TQ=["children","className"];function f_(){return f_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f_.apply(this,arguments)}function PQ(t,e){if(t==null)return{};var r=MQ(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function MQ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var gt=Z.forwardRef(function(t,e){var r=t.children,n=t.className,i=PQ(t,TQ),s=it("recharts-layer",n);return Z.createElement("g",f_({className:s},Ge(i,!0),{ref:e}),r)}),ts=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s]},K1,$R;function RQ(){if($R)return K1;$R=1;function t(e,r,n){var i=-1,s=e.length;r<0&&(r=-r>s?0:s+r),n=n>s?s:n,n<0&&(n+=s),s=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(s);++i<s;)o[i]=e[i+r];return o}return K1=t,K1}var G1,BR;function IQ(){if(BR)return G1;BR=1;var t=RQ();function e(r,n,i){var s=r.length;return i=i===void 0?s:i,!n&&i>=s?r:t(r,n,i)}return G1=e,G1}var Y1,FR;function nF(){if(FR)return Y1;FR=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+i+s+"]");function c(u){return l.test(u)}return Y1=c,Y1}var X1,qR;function DQ(){if(qR)return X1;qR=1;function t(e){return e.split("")}return X1=t,X1}var J1,zR;function LQ(){if(zR)return J1;zR=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,s="\\ufe0e\\ufe0f",o="["+t+"]",l="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",f="[^"+t+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",x=u+"?",y="["+s+"]?",v="(?:"+m+"(?:"+[f,d,p].join("|")+")"+y+x+")*",b=y+x+v,w="(?:"+[f+l+"?",l,d,p,o].join("|")+")",N=RegExp(c+"(?="+c+")|"+w+b,"g");function j(k){return k.match(N)||[]}return J1=j,J1}var Q1,UR;function $Q(){if(UR)return Q1;UR=1;var t=DQ(),e=nF(),r=LQ();function n(i){return e(i)?r(i):t(i)}return Q1=n,Q1}var Z1,HR;function BQ(){if(HR)return Z1;HR=1;var t=IQ(),e=nF(),r=$Q(),n=ZB();function i(s){return function(o){o=n(o);var l=e(o)?r(o):void 0,c=l?l[0]:o.charAt(0),u=l?t(l,1).join(""):o.slice(1);return c[s]()+u}}return Z1=i,Z1}var ej,WR;function FQ(){if(WR)return ej;WR=1;var t=BQ(),e=t("toUpperCase");return ej=e,ej}var qQ=FQ();const I0=ht(qQ);function Dt(t){return function(){return t}}const iF=Math.cos,jy=Math.sin,ds=Math.sqrt,Sy=Math.PI,D0=2*Sy,h_=Math.PI,p_=2*h_,vl=1e-6,zQ=p_-vl;function sF(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function UQ(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return sF;const r=10**e;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class HQ{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?sF:UQ(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,s,o){this._append`C${+e},${+r},${+n},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,i,s){if(e=+e,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-e,u=i-r,f=o-e,d=l-r,p=f*f+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(p>vl)if(!(Math.abs(d*c-u*f)>vl)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let m=n-o,x=i-l,y=c*c+u*u,v=m*m+x*x,b=Math.sqrt(y),w=Math.sqrt(p),N=s*Math.tan((h_-Math.acos((y+p-v)/(2*b*w)))/2),j=N/w,k=N/b;Math.abs(j-1)>vl&&this._append`L${e+j*f},${r+j*d}`,this._append`A${s},${s},0,0,${+(d*m>f*x)},${this._x1=e+k*c},${this._y1=r+k*u}`}}arc(e,r,n,i,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(i),c=n*Math.sin(i),u=e+l,f=r+c,d=1^o,p=o?i-s:s-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>vl||Math.abs(this._y1-f)>vl)&&this._append`L${u},${f}`,n&&(p<0&&(p=p%p_+p_),p>zQ?this._append`A${n},${n},0,1,${d},${e-l},${r-c}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:p>vl&&this._append`A${n},${n},0,${+(p>=h_)},${d},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function KO(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new HQ(e)}function GO(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oF(t){this._context=t}oF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function L0(t){return new oF(t)}function aF(t){return t[0]}function lF(t){return t[1]}function cF(t,e){var r=Dt(!0),n=null,i=L0,s=null,o=KO(l);t=typeof t=="function"?t:t===void 0?aF:Dt(t),e=typeof e=="function"?e:e===void 0?lF:Dt(e);function l(c){var u,f=(c=GO(c)).length,d,p=!1,m;for(n==null&&(s=i(m=o())),u=0;u<=f;++u)!(u<f&&r(d=c[u],u,c))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(d,u,c),+e(d,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Dt(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Dt(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Dt(!!c),l):r},l.curve=function(c){return arguments.length?(i=c,n!=null&&(s=i(n)),l):i},l.context=function(c){return arguments.length?(c==null?n=s=null:s=i(n=c),l):n},l}function pg(t,e,r){var n=null,i=Dt(!0),s=null,o=L0,l=null,c=KO(u);t=typeof t=="function"?t:t===void 0?aF:Dt(+t),e=typeof e=="function"?e:Dt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?lF:Dt(+r);function u(d){var p,m,x,y=(d=GO(d)).length,v,b=!1,w,N=new Array(y),j=new Array(y);for(s==null&&(l=o(w=c())),p=0;p<=y;++p){if(!(p<y&&i(v=d[p],p,d))===b)if(b=!b)m=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=p-1;x>=m;--x)l.point(N[x],j[x]);l.lineEnd(),l.areaEnd()}b&&(N[p]=+t(v,p,d),j[p]=+e(v,p,d),l.point(n?+n(v,p,d):N[p],r?+r(v,p,d):j[p]))}if(w)return l=null,w+""||null}function f(){return cF().defined(i).curve(o).context(s)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:Dt(+d),n=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Dt(+d),u):t},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Dt(+d),u):n},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:Dt(+d),r=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Dt(+d),u):e},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Dt(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(r)},u.lineX1=function(){return f().x(n).y(e)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Dt(!!d),u):i},u.curve=function(d){return arguments.length?(o=d,s!=null&&(l=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=l=null:l=o(s=d),u):s},u}class uF{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function WQ(t){return new uF(t,!0)}function VQ(t){return new uF(t,!1)}const YO={draw(t,e){const r=ds(e/Sy);t.moveTo(r,0),t.arc(0,0,r,0,D0)}},KQ={draw(t,e){const r=ds(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},dF=ds(1/3),GQ=dF*2,YQ={draw(t,e){const r=ds(e/GQ),n=r*dF;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},XQ={draw(t,e){const r=ds(e),n=-r/2;t.rect(n,n,r,r)}},JQ=.8908130915292852,fF=jy(Sy/10)/jy(7*Sy/10),QQ=jy(D0/10)*fF,ZQ=-iF(D0/10)*fF,eZ={draw(t,e){const r=ds(e*JQ),n=QQ*r,i=ZQ*r;t.moveTo(0,-r),t.lineTo(n,i);for(let s=1;s<5;++s){const o=D0*s/5,l=iF(o),c=jy(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*i,c*n+l*i)}t.closePath()}},tj=ds(3),tZ={draw(t,e){const r=-ds(e/(tj*3));t.moveTo(0,r*2),t.lineTo(-tj*r,-r),t.lineTo(tj*r,-r),t.closePath()}},yi=-.5,vi=ds(3)/2,m_=1/ds(12),rZ=(m_/2+1)*3,nZ={draw(t,e){const r=ds(e/rZ),n=r/2,i=r*m_,s=n,o=r*m_+r,l=-s,c=o;t.moveTo(n,i),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(yi*n-vi*i,vi*n+yi*i),t.lineTo(yi*s-vi*o,vi*s+yi*o),t.lineTo(yi*l-vi*c,vi*l+yi*c),t.lineTo(yi*n+vi*i,yi*i-vi*n),t.lineTo(yi*s+vi*o,yi*o-vi*s),t.lineTo(yi*l+vi*c,yi*c-vi*l),t.closePath()}};function iZ(t,e){let r=null,n=KO(i);t=typeof t=="function"?t:Dt(t||YO),e=typeof e=="function"?e:Dt(e===void 0?64:+e);function i(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Dt(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Dt(+s),i):e},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function Ny(){}function ky(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function hF(t){this._context=t}hF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ky(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ky(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function sZ(t){return new hF(t)}function pF(t){this._context=t}pF.prototype={areaStart:Ny,areaEnd:Ny,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ky(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function oZ(t){return new pF(t)}function mF(t){this._context=t}mF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:ky(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function aZ(t){return new mF(t)}function gF(t){this._context=t}gF.prototype={areaStart:Ny,areaEnd:Ny,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function lZ(t){return new gF(t)}function VR(t){return t<0?-1:1}function KR(t,e,r){var n=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(n||i<0&&-0),o=(r-t._y1)/(i||n<0&&-0),l=(s*i+o*n)/(n+i);return(VR(s)+VR(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function GR(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function rj(t,e,r){var n=t._x0,i=t._y0,s=t._x1,o=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,i+l*e,s-l,o-l*r,s,o)}function _y(t){this._context=t}_y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rj(this,this._t0,GR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,rj(this,GR(this,r=KR(this,t,e)),r);break;default:rj(this,this._t0,r=KR(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function yF(t){this._context=new vF(t)}(yF.prototype=Object.create(_y.prototype)).point=function(t,e){_y.prototype.point.call(this,e,t)};function vF(t){this._context=t}vF.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,s){this._context.bezierCurveTo(e,t,n,r,s,i)}};function cZ(t){return new _y(t)}function uZ(t){return new yF(t)}function xF(t){this._context=t}xF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=YR(t),i=YR(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function YR(t){var e,r=t.length-1,n,i=new Array(r),s=new Array(r),o=new Array(r);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function dZ(t){return new xF(t)}function $0(t,e){this._context=t,this._t=e}$0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function fZ(t){return new $0(t,.5)}function hZ(t){return new $0(t,0)}function pZ(t){return new $0(t,1)}function Cu(t,e){if((o=t.length)>1)for(var r=1,n,i,s=t[e[0]],o,l=s.length;r<o;++r)for(i=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function g_(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function mZ(t,e){return t[e]}function gZ(t){const e=[];return e.key=t,e}function yZ(){var t=Dt([]),e=g_,r=Cu,n=mZ;function i(s){var o=Array.from(t.apply(this,arguments),gZ),l,c=o.length,u=-1,f;for(const d of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(d,o[l].key,u,s)]).data=d;for(l=0,f=GO(e(o));l<c;++l)o[f[l]].index=l;return r(o,f),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Dt(Array.from(s)),i):t},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:Dt(+s),i):n},i.order=function(s){return arguments.length?(e=s==null?g_:typeof s=="function"?s:Dt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(r=s??Cu,i):r},i}function vZ(t,e){if((n=t.length)>0){for(var r,n,i=0,s=t[0].length,o;i<s;++i){for(o=r=0;r<n;++r)o+=t[r][i][1]||0;if(o)for(r=0;r<n;++r)t[r][i][1]/=o}Cu(t,e)}}function xZ(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,s=n.length;r<s;++r){for(var o=0,l=0;o<i;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Cu(t,e)}}function bZ(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var f=t[e[l]],d=f[n][1]||0,p=f[n-1][1]||0,m=(d-p)/2,x=0;x<l;++x){var y=t[e[x]],v=y[n][1]||0,b=y[n-1][1]||0;m+=v-b}c+=d,u+=m*d}i[n-1][1]+=i[n-1][0]=r,c&&(r-=u/c)}i[n-1][1]+=i[n-1][0]=r,Cu(t,e)}}function kh(t){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(t)}var wZ=["type","size","sizeType"];function y_(){return y_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},y_.apply(this,arguments)}function XR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function JR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XR(Object(r),!0).forEach(function(n){jZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jZ(t,e,r){return e=SZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SZ(t){var e=NZ(t,"string");return kh(e)=="symbol"?e:e+""}function NZ(t,e){if(kh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kZ(t,e){if(t==null)return{};var r=_Z(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _Z(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var bF={symbolCircle:YO,symbolCross:KQ,symbolDiamond:YQ,symbolSquare:XQ,symbolStar:eZ,symbolTriangle:tZ,symbolWye:nZ},OZ=Math.PI/180,EZ=function(e){var r="symbol".concat(I0(e));return bF[r]||YO},CZ=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*OZ;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},AZ=function(e,r){bF["symbol".concat(I0(e))]=r},XO=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,s=i===void 0?64:i,o=e.sizeType,l=o===void 0?"area":o,c=kZ(e,wZ),u=JR(JR({},c),{},{type:n,size:s,sizeType:l}),f=function(){var v=EZ(n),b=iZ().type(v).size(CZ(s,l,n));return b()},d=u.className,p=u.cx,m=u.cy,x=Ge(u,!0);return p===+p&&m===+m&&s===+s?Z.createElement("path",y_({},x,{className:it("recharts-symbols",d),transform:"translate(".concat(p,", ").concat(m,")"),d:f()})):null};XO.registerSymbol=AZ;function Au(t){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Au(t)}function v_(){return v_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},v_.apply(this,arguments)}function QR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function TZ(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QR(Object(r),!0).forEach(function(n){_h(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jF(n.key),n)}}function RZ(t,e,r){return e&&MZ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IZ(t,e,r){return e=Oy(e),DZ(t,wF()?Reflect.construct(e,r||[],Oy(t).constructor):e.apply(t,r))}function DZ(t,e){if(e&&(Au(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LZ(t)}function LZ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wF=function(){return!!t})()}function Oy(t){return Oy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Oy(t)}function $Z(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x_(t,e)}function x_(t,e){return x_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},x_(t,e)}function _h(t,e,r){return e=jF(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jF(t){var e=BZ(t,"string");return Au(e)=="symbol"?e:e+""}function BZ(t,e){if(Au(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hi=32,JO=function(t){function e(){return PZ(this,e),IZ(this,e,arguments)}return $Z(e,t),RZ(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,s=Hi/2,o=Hi/6,l=Hi/3,c=n.inactive?i:n.color;if(n.type==="plainline")return Z.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:Hi,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return Z.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Hi,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(n.type==="rect")return Z.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Hi/8,"h").concat(Hi,"v").concat(Hi*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Z.isValidElement(n.legendIcon)){var u=TZ({},n);return delete u.legendIcon,Z.cloneElement(n.legendIcon,u)}return Z.createElement(XO,{fill:c,cx:s,cy:s,size:Hi,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,s=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,f={x:0,y:0,width:Hi,height:Hi},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,x){var y=m.formatter||c,v=it(_h(_h({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",m.inactive));if(m.type==="none")return null;var b=Ze(m.value)?null:m.value;ts(!Ze(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=m.inactive?u:m.color;return Z.createElement("li",v_({className:v,style:d,key:"legend-item-".concat(x)},zl(n.props,m,x)),Z.createElement(d_,{width:o,height:o,viewBox:f,style:p},n.renderIcon(m)),Z.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},y?y(b,m,x):b))})}},{key:"render",value:function(){var n=this.props,i=n.payload,s=n.layout,o=n.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return Z.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(O.PureComponent);_h(JO,"displayName","Legend");_h(JO,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var nj,ZR;function FZ(){if(ZR)return nj;ZR=1;var t=P0();function e(){this.__data__=new t,this.size=0}return nj=e,nj}var ij,eI;function qZ(){if(eI)return ij;eI=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return ij=t,ij}var sj,tI;function zZ(){if(tI)return sj;tI=1;function t(e){return this.__data__.get(e)}return sj=t,sj}var oj,rI;function UZ(){if(rI)return oj;rI=1;function t(e){return this.__data__.has(e)}return oj=t,oj}var aj,nI;function HZ(){if(nI)return aj;nI=1;var t=P0(),e=qO(),r=zO(),n=200;function i(s,o){var l=this.__data__;if(l instanceof t){var c=l.__data__;if(!e||c.length<n-1)return c.push([s,o]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(s,o),this.size=l.size,this}return aj=i,aj}var lj,iI;function SF(){if(iI)return lj;iI=1;var t=P0(),e=FZ(),r=qZ(),n=zZ(),i=UZ(),s=HZ();function o(l){var c=this.__data__=new t(l);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=i,o.prototype.set=s,lj=o,lj}var cj,sI;function WZ(){if(sI)return cj;sI=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return cj=e,cj}var uj,oI;function VZ(){if(oI)return uj;oI=1;function t(e){return this.__data__.has(e)}return uj=t,uj}var dj,aI;function NF(){if(aI)return dj;aI=1;var t=zO(),e=WZ(),r=VZ();function n(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new t;++s<o;)this.add(i[s])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,dj=n,dj}var fj,lI;function kF(){if(lI)return fj;lI=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(e[n],n,e))return!0;return!1}return fj=t,fj}var hj,cI;function _F(){if(cI)return hj;cI=1;function t(e,r){return e.has(r)}return hj=t,hj}var pj,uI;function OF(){if(uI)return pj;uI=1;var t=NF(),e=kF(),r=_F(),n=1,i=2;function s(o,l,c,u,f,d){var p=c&n,m=o.length,x=l.length;if(m!=x&&!(p&&x>m))return!1;var y=d.get(o),v=d.get(l);if(y&&v)return y==l&&v==o;var b=-1,w=!0,N=c&i?new t:void 0;for(d.set(o,l),d.set(l,o);++b<m;){var j=o[b],k=l[b];if(u)var _=p?u(k,j,b,l,o,d):u(j,k,b,o,l,d);if(_!==void 0){if(_)continue;w=!1;break}if(N){if(!e(l,function(E,A){if(!r(N,A)&&(j===E||f(j,E,c,u,d)))return N.push(A)})){w=!1;break}}else if(!(j===k||f(j,k,c,u,d))){w=!1;break}}return d.delete(o),d.delete(l),w}return pj=s,pj}var mj,dI;function KZ(){if(dI)return mj;dI=1;var t=Is(),e=t.Uint8Array;return mj=e,mj}var gj,fI;function GZ(){if(fI)return gj;fI=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i,s){n[++r]=[s,i]}),n}return gj=t,gj}var yj,hI;function QO(){if(hI)return yj;hI=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i){n[++r]=i}),n}return yj=t,yj}var vj,pI;function YZ(){if(pI)return vj;pI=1;var t=Ap(),e=KZ(),r=FO(),n=OF(),i=GZ(),s=QO(),o=1,l=2,c="[object Boolean]",u="[object Date]",f="[object Error]",d="[object Map]",p="[object Number]",m="[object RegExp]",x="[object Set]",y="[object String]",v="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",N=t?t.prototype:void 0,j=N?N.valueOf:void 0;function k(_,E,A,T,M,P,R){switch(A){case w:if(_.byteLength!=E.byteLength||_.byteOffset!=E.byteOffset)return!1;_=_.buffer,E=E.buffer;case b:return!(_.byteLength!=E.byteLength||!P(new e(_),new e(E)));case c:case u:case p:return r(+_,+E);case f:return _.name==E.name&&_.message==E.message;case m:case y:return _==E+"";case d:var L=i;case x:var $=T&o;if(L||(L=s),_.size!=E.size&&!$)return!1;var F=R.get(_);if(F)return F==E;T|=l,R.set(_,E);var z=n(L(_),L(E),T,M,P,R);return R.delete(_),z;case v:if(j)return j.call(_)==j.call(E)}return!1}return vj=k,vj}var xj,mI;function EF(){if(mI)return xj;mI=1;function t(e,r){for(var n=-1,i=r.length,s=e.length;++n<i;)e[s+n]=r[n];return e}return xj=t,xj}var bj,gI;function XZ(){if(gI)return bj;gI=1;var t=EF(),e=$n();function r(n,i,s){var o=i(n);return e(n)?o:t(o,s(n))}return bj=r,bj}var wj,yI;function JZ(){if(yI)return wj;yI=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,s=0,o=[];++n<i;){var l=e[n];r(l,n,e)&&(o[s++]=l)}return o}return wj=t,wj}var jj,vI;function QZ(){if(vI)return jj;vI=1;function t(){return[]}return jj=t,jj}var Sj,xI;function ZZ(){if(xI)return Sj;xI=1;var t=JZ(),e=QZ(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(l){return n.call(o,l)}))}:e;return Sj=s,Sj}var Nj,bI;function eee(){if(bI)return Nj;bI=1;function t(e,r){for(var n=-1,i=Array(e);++n<e;)i[n]=r(n);return i}return Nj=t,Nj}var kj,wI;function tee(){if(wI)return kj;wI=1;var t=_o(),e=Oo(),r="[object Arguments]";function n(i){return e(i)&&t(i)==r}return kj=n,kj}var _j,jI;function ZO(){if(jI)return _j;jI=1;var t=tee(),e=Oo(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,s=t(function(){return arguments}())?t:function(o){return e(o)&&n.call(o,"callee")&&!i.call(o,"callee")};return _j=s,_j}var Lf={exports:{}},Oj,SI;function ree(){if(SI)return Oj;SI=1;function t(){return!1}return Oj=t,Oj}Lf.exports;var NI;function CF(){return NI||(NI=1,function(t,e){var r=Is(),n=ree(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;t.exports=u}(Lf,Lf.exports)),Lf.exports}var Ej,kI;function eE(){if(kI)return Ej;kI=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,i){var s=typeof n;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return Ej=r,Ej}var Cj,_I;function tE(){if(_I)return Cj;_I=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return Cj=e,Cj}var Aj,OI;function nee(){if(OI)return Aj;OI=1;var t=_o(),e=tE(),r=Oo(),n="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",f="[object Number]",d="[object Object]",p="[object RegExp]",m="[object Set]",x="[object String]",y="[object WeakMap]",v="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",N="[object Float64Array]",j="[object Int8Array]",k="[object Int16Array]",_="[object Int32Array]",E="[object Uint8Array]",A="[object Uint8ClampedArray]",T="[object Uint16Array]",M="[object Uint32Array]",P={};P[w]=P[N]=P[j]=P[k]=P[_]=P[E]=P[A]=P[T]=P[M]=!0,P[n]=P[i]=P[v]=P[s]=P[b]=P[o]=P[l]=P[c]=P[u]=P[f]=P[d]=P[p]=P[m]=P[x]=P[y]=!1;function R(L){return r(L)&&e(L.length)&&!!P[t(L)]}return Aj=R,Aj}var Tj,EI;function AF(){if(EI)return Tj;EI=1;function t(e){return function(r){return e(r)}}return Tj=t,Tj}var $f={exports:{}};$f.exports;var CI;function iee(){return CI||(CI=1,function(t,e){var r=XB(),n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,o=s&&r.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l}($f,$f.exports)),$f.exports}var Pj,AI;function TF(){if(AI)return Pj;AI=1;var t=nee(),e=AF(),r=iee(),n=r&&r.isTypedArray,i=n?e(n):t;return Pj=i,Pj}var Mj,TI;function see(){if(TI)return Mj;TI=1;var t=eee(),e=ZO(),r=$n(),n=CF(),i=eE(),s=TF(),o=Object.prototype,l=o.hasOwnProperty;function c(u,f){var d=r(u),p=!d&&e(u),m=!d&&!p&&n(u),x=!d&&!p&&!m&&s(u),y=d||p||m||x,v=y?t(u.length,String):[],b=v.length;for(var w in u)(f||l.call(u,w))&&!(y&&(w=="length"||m&&(w=="offset"||w=="parent")||x&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||i(w,b)))&&v.push(w);return v}return Mj=c,Mj}var Rj,PI;function oee(){if(PI)return Rj;PI=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||t;return r===i}return Rj=e,Rj}var Ij,MI;function PF(){if(MI)return Ij;MI=1;function t(e,r){return function(n){return e(r(n))}}return Ij=t,Ij}var Dj,RI;function aee(){if(RI)return Dj;RI=1;var t=PF(),e=t(Object.keys,Object);return Dj=e,Dj}var Lj,II;function lee(){if(II)return Lj;II=1;var t=oee(),e=aee(),r=Object.prototype,n=r.hasOwnProperty;function i(s){if(!t(s))return e(s);var o=[];for(var l in Object(s))n.call(s,l)&&l!="constructor"&&o.push(l);return o}return Lj=i,Lj}var $j,DI;function Mp(){if(DI)return $j;DI=1;var t=BO(),e=tE();function r(n){return n!=null&&e(n.length)&&!t(n)}return $j=r,$j}var Bj,LI;function B0(){if(LI)return Bj;LI=1;var t=see(),e=lee(),r=Mp();function n(i){return r(i)?t(i):e(i)}return Bj=n,Bj}var Fj,$I;function cee(){if($I)return Fj;$I=1;var t=XZ(),e=ZZ(),r=B0();function n(i){return t(i,r,e)}return Fj=n,Fj}var qj,BI;function uee(){if(BI)return qj;BI=1;var t=cee(),e=1,r=Object.prototype,n=r.hasOwnProperty;function i(s,o,l,c,u,f){var d=l&e,p=t(s),m=p.length,x=t(o),y=x.length;if(m!=y&&!d)return!1;for(var v=m;v--;){var b=p[v];if(!(d?b in o:n.call(o,b)))return!1}var w=f.get(s),N=f.get(o);if(w&&N)return w==o&&N==s;var j=!0;f.set(s,o),f.set(o,s);for(var k=d;++v<m;){b=p[v];var _=s[b],E=o[b];if(c)var A=d?c(E,_,b,o,s,f):c(_,E,b,s,o,f);if(!(A===void 0?_===E||u(_,E,l,c,f):A)){j=!1;break}k||(k=b=="constructor")}if(j&&!k){var T=s.constructor,M=o.constructor;T!=M&&"constructor"in s&&"constructor"in o&&!(typeof T=="function"&&T instanceof T&&typeof M=="function"&&M instanceof M)&&(j=!1)}return f.delete(s),f.delete(o),j}return qj=i,qj}var zj,FI;function dee(){if(FI)return zj;FI=1;var t=ic(),e=Is(),r=t(e,"DataView");return zj=r,zj}var Uj,qI;function fee(){if(qI)return Uj;qI=1;var t=ic(),e=Is(),r=t(e,"Promise");return Uj=r,Uj}var Hj,zI;function MF(){if(zI)return Hj;zI=1;var t=ic(),e=Is(),r=t(e,"Set");return Hj=r,Hj}var Wj,UI;function hee(){if(UI)return Wj;UI=1;var t=ic(),e=Is(),r=t(e,"WeakMap");return Wj=r,Wj}var Vj,HI;function pee(){if(HI)return Vj;HI=1;var t=dee(),e=qO(),r=fee(),n=MF(),i=hee(),s=_o(),o=JB(),l="[object Map]",c="[object Object]",u="[object Promise]",f="[object Set]",d="[object WeakMap]",p="[object DataView]",m=o(t),x=o(e),y=o(r),v=o(n),b=o(i),w=s;return(t&&w(new t(new ArrayBuffer(1)))!=p||e&&w(new e)!=l||r&&w(r.resolve())!=u||n&&w(new n)!=f||i&&w(new i)!=d)&&(w=function(N){var j=s(N),k=j==c?N.constructor:void 0,_=k?o(k):"";if(_)switch(_){case m:return p;case x:return l;case y:return u;case v:return f;case b:return d}return j}),Vj=w,Vj}var Kj,WI;function mee(){if(WI)return Kj;WI=1;var t=SF(),e=OF(),r=YZ(),n=uee(),i=pee(),s=$n(),o=CF(),l=TF(),c=1,u="[object Arguments]",f="[object Array]",d="[object Object]",p=Object.prototype,m=p.hasOwnProperty;function x(y,v,b,w,N,j){var k=s(y),_=s(v),E=k?f:i(y),A=_?f:i(v);E=E==u?d:E,A=A==u?d:A;var T=E==d,M=A==d,P=E==A;if(P&&o(y)){if(!o(v))return!1;k=!0,T=!1}if(P&&!T)return j||(j=new t),k||l(y)?e(y,v,b,w,N,j):r(y,v,E,b,w,N,j);if(!(b&c)){var R=T&&m.call(y,"__wrapped__"),L=M&&m.call(v,"__wrapped__");if(R||L){var $=R?y.value():y,F=L?v.value():v;return j||(j=new t),N($,F,b,w,j)}}return P?(j||(j=new t),n(y,v,b,w,N,j)):!1}return Kj=x,Kj}var Gj,VI;function rE(){if(VI)return Gj;VI=1;var t=mee(),e=Oo();function r(n,i,s,o,l){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:t(n,i,s,o,r,l)}return Gj=r,Gj}var Yj,KI;function gee(){if(KI)return Yj;KI=1;var t=SF(),e=rE(),r=1,n=2;function i(s,o,l,c){var u=l.length,f=u,d=!c;if(s==null)return!f;for(s=Object(s);u--;){var p=l[u];if(d&&p[2]?p[1]!==s[p[0]]:!(p[0]in s))return!1}for(;++u<f;){p=l[u];var m=p[0],x=s[m],y=p[1];if(d&&p[2]){if(x===void 0&&!(m in s))return!1}else{var v=new t;if(c)var b=c(x,y,m,s,o,v);if(!(b===void 0?e(y,x,r|n,c,v):b))return!1}}return!0}return Yj=i,Yj}var Xj,GI;function RF(){if(GI)return Xj;GI=1;var t=Fa();function e(r){return r===r&&!t(r)}return Xj=e,Xj}var Jj,YI;function yee(){if(YI)return Jj;YI=1;var t=RF(),e=B0();function r(n){for(var i=e(n),s=i.length;s--;){var o=i[s],l=n[o];i[s]=[o,l,t(l)]}return i}return Jj=r,Jj}var Qj,XI;function IF(){if(XI)return Qj;XI=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return Qj=t,Qj}var Zj,JI;function vee(){if(JI)return Zj;JI=1;var t=gee(),e=yee(),r=IF();function n(i){var s=e(i);return s.length==1&&s[0][2]?r(s[0][0],s[0][1]):function(o){return o===i||t(o,i,s)}}return Zj=n,Zj}var eS,QI;function xee(){if(QI)return eS;QI=1;function t(e,r){return e!=null&&r in Object(e)}return eS=t,eS}var tS,ZI;function bee(){if(ZI)return tS;ZI=1;var t=eF(),e=ZO(),r=$n(),n=eE(),i=tE(),s=R0();function o(l,c,u){c=t(c,l);for(var f=-1,d=c.length,p=!1;++f<d;){var m=s(c[f]);if(!(p=l!=null&&u(l,m)))break;l=l[m]}return p||++f!=d?p:(d=l==null?0:l.length,!!d&&i(d)&&n(m,d)&&(r(l)||e(l)))}return tS=o,tS}var rS,eD;function wee(){if(eD)return rS;eD=1;var t=xee(),e=bee();function r(n,i){return n!=null&&e(n,i,t)}return rS=r,rS}var nS,tD;function jee(){if(tD)return nS;tD=1;var t=rE(),e=tF(),r=wee(),n=$O(),i=RF(),s=IF(),o=R0(),l=1,c=2;function u(f,d){return n(f)&&i(d)?s(o(f),d):function(p){var m=e(p,f);return m===void 0&&m===d?r(p,f):t(d,m,l|c)}}return nS=u,nS}var iS,rD;function gd(){if(rD)return iS;rD=1;function t(e){return e}return iS=t,iS}var sS,nD;function See(){if(nD)return sS;nD=1;function t(e){return function(r){return r==null?void 0:r[e]}}return sS=t,sS}var oS,iD;function Nee(){if(iD)return oS;iD=1;var t=HO();function e(r){return function(n){return t(n,r)}}return oS=e,oS}var aS,sD;function kee(){if(sD)return aS;sD=1;var t=See(),e=Nee(),r=$O(),n=R0();function i(s){return r(s)?t(n(s)):e(s)}return aS=i,aS}var lS,oD;function Ds(){if(oD)return lS;oD=1;var t=vee(),e=jee(),r=gd(),n=$n(),i=kee();function s(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):i(o)}return lS=s,lS}var cS,aD;function DF(){if(aD)return cS;aD=1;function t(e,r,n,i){for(var s=e.length,o=n+(i?1:-1);i?o--:++o<s;)if(r(e[o],o,e))return o;return-1}return cS=t,cS}var uS,lD;function _ee(){if(lD)return uS;lD=1;function t(e){return e!==e}return uS=t,uS}var dS,cD;function Oee(){if(cD)return dS;cD=1;function t(e,r,n){for(var i=n-1,s=e.length;++i<s;)if(e[i]===r)return i;return-1}return dS=t,dS}var fS,uD;function Eee(){if(uD)return fS;uD=1;var t=DF(),e=_ee(),r=Oee();function n(i,s,o){return s===s?r(i,s,o):t(i,e,o)}return fS=n,fS}var hS,dD;function Cee(){if(dD)return hS;dD=1;var t=Eee();function e(r,n){var i=r==null?0:r.length;return!!i&&t(r,n,0)>-1}return hS=e,hS}var pS,fD;function Aee(){if(fD)return pS;fD=1;function t(e,r,n){for(var i=-1,s=e==null?0:e.length;++i<s;)if(n(r,e[i]))return!0;return!1}return pS=t,pS}var mS,hD;function Tee(){if(hD)return mS;hD=1;function t(){}return mS=t,mS}var gS,pD;function Pee(){if(pD)return gS;pD=1;var t=MF(),e=Tee(),r=QO(),n=1/0,i=t&&1/r(new t([,-0]))[1]==n?function(s){return new t(s)}:e;return gS=i,gS}var yS,mD;function Mee(){if(mD)return yS;mD=1;var t=NF(),e=Cee(),r=Aee(),n=_F(),i=Pee(),s=QO(),o=200;function l(c,u,f){var d=-1,p=e,m=c.length,x=!0,y=[],v=y;if(f)x=!1,p=r;else if(m>=o){var b=u?null:i(c);if(b)return s(b);x=!1,p=n,v=new t}else v=u?[]:y;e:for(;++d<m;){var w=c[d],N=u?u(w):w;if(w=f||w!==0?w:0,x&&N===N){for(var j=v.length;j--;)if(v[j]===N)continue e;u&&v.push(N),y.push(w)}else p(v,N,f)||(v!==y&&v.push(N),y.push(w))}return y}return yS=l,yS}var vS,gD;function Ree(){if(gD)return vS;gD=1;var t=Ds(),e=Mee();function r(n,i){return n&&n.length?e(n,t(i,2)):[]}return vS=r,vS}var Iee=Ree();const yD=ht(Iee);function LF(t,e,r){return e===!0?yD(t,r):Ze(e)?yD(t,e):t}function Tu(t){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tu(t)}var Dee=["ref"];function vD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ys(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vD(Object(r),!0).forEach(function(n){F0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BF(n.key),n)}}function $ee(t,e,r){return e&&xD(t.prototype,e),r&&xD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bee(t,e,r){return e=Ey(e),Fee(t,$F()?Reflect.construct(e,r||[],Ey(t).constructor):e.apply(t,r))}function Fee(t,e){if(e&&(Tu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qee(t)}function qee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $F(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($F=function(){return!!t})()}function Ey(t){return Ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ey(t)}function zee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b_(t,e)}function b_(t,e){return b_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},b_(t,e)}function F0(t,e,r){return e=BF(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BF(t){var e=Uee(t,"string");return Tu(e)=="symbol"?e:e+""}function Uee(t,e){if(Tu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Hee(t,e){if(t==null)return{};var r=Wee(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Wee(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Vee(t){return t.value}function Kee(t,e){if(Z.isValidElement(t))return Z.cloneElement(t,e);if(typeof t=="function")return Z.createElement(t,e);e.ref;var r=Hee(e,Dee);return Z.createElement(JO,r)}var bD=1,vu=function(t){function e(){var r;Lee(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=Bee(this,e,[].concat(i)),F0(r,"lastBoundingBox",{width:-1,height:-1}),r}return zee(e,t),$ee(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>bD||Math.abs(i.height-this.lastBoundingBox.height)>bD)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ys({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,s=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,f=i.chartHeight,d,p;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();d={left:((u||0)-m.width)/2}}else d=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var x=this.getBBoxSnapshot();p={top:((f||0)-x.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ys(Ys({},d),p)}},{key:"render",value:function(){var n=this,i=this.props,s=i.content,o=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,f=i.payload,d=Ys(Ys({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Z.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(m){n.wrapperNode=m}},Kee(s,Ys(Ys({},this.props),{},{payload:LF(f,u,Vee)})))}}],[{key:"getWithHeight",value:function(n,i){var s=Ys(Ys({},this.defaultProps),n.props),o=s.layout;return o==="vertical"&&Pe(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||i}:null}}])}(O.PureComponent);F0(vu,"displayName","Legend");F0(vu,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var xS,wD;function Gee(){if(wD)return xS;wD=1;var t=Ap(),e=ZO(),r=$n(),n=t?t.isConcatSpreadable:void 0;function i(s){return r(s)||e(s)||!!(n&&s&&s[n])}return xS=i,xS}var bS,jD;function FF(){if(jD)return bS;jD=1;var t=EF(),e=Gee();function r(n,i,s,o,l){var c=-1,u=n.length;for(s||(s=e),l||(l=[]);++c<u;){var f=n[c];i>0&&s(f)?i>1?r(f,i-1,s,o,l):t(l,f):o||(l[l.length]=f)}return l}return bS=r,bS}var wS,SD;function Yee(){if(SD)return wS;SD=1;function t(e){return function(r,n,i){for(var s=-1,o=Object(r),l=i(r),c=l.length;c--;){var u=l[e?c:++s];if(n(o[u],u,o)===!1)break}return r}}return wS=t,wS}var jS,ND;function Xee(){if(ND)return jS;ND=1;var t=Yee(),e=t();return jS=e,jS}var SS,kD;function qF(){if(kD)return SS;kD=1;var t=Xee(),e=B0();function r(n,i){return n&&t(n,i,e)}return SS=r,SS}var NS,_D;function Jee(){if(_D)return NS;_D=1;var t=Mp();function e(r,n){return function(i,s){if(i==null)return i;if(!t(i))return r(i,s);for(var o=i.length,l=n?o:-1,c=Object(i);(n?l--:++l<o)&&s(c[l],l,c)!==!1;);return i}}return NS=e,NS}var kS,OD;function nE(){if(OD)return kS;OD=1;var t=qF(),e=Jee(),r=e(t);return kS=r,kS}var _S,ED;function zF(){if(ED)return _S;ED=1;var t=nE(),e=Mp();function r(n,i){var s=-1,o=e(n)?Array(n.length):[];return t(n,function(l,c,u){o[++s]=i(l,c,u)}),o}return _S=r,_S}var OS,CD;function Qee(){if(CD)return OS;CD=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return OS=t,OS}var ES,AD;function Zee(){if(AD)return ES;AD=1;var t=hd();function e(r,n){if(r!==n){var i=r!==void 0,s=r===null,o=r===r,l=t(r),c=n!==void 0,u=n===null,f=n===n,d=t(n);if(!u&&!d&&!l&&r>n||l&&c&&f&&!u&&!d||s&&c&&f||!i&&f||!o)return 1;if(!s&&!l&&!d&&r<n||d&&i&&o&&!s&&!l||u&&i&&o||!c&&o||!f)return-1}return 0}return ES=e,ES}var CS,TD;function ete(){if(TD)return CS;TD=1;var t=Zee();function e(r,n,i){for(var s=-1,o=r.criteria,l=n.criteria,c=o.length,u=i.length;++s<c;){var f=t(o[s],l[s]);if(f){if(s>=u)return f;var d=i[s];return f*(d=="desc"?-1:1)}}return r.index-n.index}return CS=e,CS}var AS,PD;function tte(){if(PD)return AS;PD=1;var t=UO(),e=HO(),r=Ds(),n=zF(),i=Qee(),s=AF(),o=ete(),l=gd(),c=$n();function u(f,d,p){d.length?d=t(d,function(y){return c(y)?function(v){return e(v,y.length===1?y[0]:y)}:y}):d=[l];var m=-1;d=t(d,s(r));var x=n(f,function(y,v,b){var w=t(d,function(N){return N(y)});return{criteria:w,index:++m,value:y}});return i(x,function(y,v){return o(y,v,p)})}return AS=u,AS}var TS,MD;function rte(){if(MD)return TS;MD=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return TS=t,TS}var PS,RD;function nte(){if(RD)return PS;RD=1;var t=rte(),e=Math.max;function r(n,i,s){return i=e(i===void 0?n.length-1:i,0),function(){for(var o=arguments,l=-1,c=e(o.length-i,0),u=Array(c);++l<c;)u[l]=o[i+l];l=-1;for(var f=Array(i+1);++l<i;)f[l]=o[l];return f[i]=s(u),t(n,this,f)}}return PS=r,PS}var MS,ID;function ite(){if(ID)return MS;ID=1;function t(e){return function(){return e}}return MS=t,MS}var RS,DD;function UF(){if(DD)return RS;DD=1;var t=ic(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return RS=e,RS}var IS,LD;function ste(){if(LD)return IS;LD=1;var t=ite(),e=UF(),r=gd(),n=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:r;return IS=n,IS}var DS,$D;function ote(){if($D)return DS;$D=1;var t=800,e=16,r=Date.now;function n(i){var s=0,o=0;return function(){var l=r(),c=e-(l-o);if(o=l,c>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return DS=n,DS}var LS,BD;function ate(){if(BD)return LS;BD=1;var t=ste(),e=ote(),r=e(t);return LS=r,LS}var $S,FD;function lte(){if(FD)return $S;FD=1;var t=gd(),e=nte(),r=ate();function n(i,s){return r(e(i,s,t),i+"")}return $S=n,$S}var BS,qD;function q0(){if(qD)return BS;qD=1;var t=FO(),e=Mp(),r=eE(),n=Fa();function i(s,o,l){if(!n(l))return!1;var c=typeof o;return(c=="number"?e(l)&&r(o,l.length):c=="string"&&o in l)?t(l[o],s):!1}return BS=i,BS}var FS,zD;function cte(){if(zD)return FS;zD=1;var t=FF(),e=tte(),r=lte(),n=q0(),i=r(function(s,o){if(s==null)return[];var l=o.length;return l>1&&n(s,o[0],o[1])?o=[]:l>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(s,t(o,1),[])});return FS=i,FS}var ute=cte();const iE=ht(ute);function Oh(t){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(t)}function w_(){return w_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},w_.apply(this,arguments)}function dte(t,e){return mte(t)||pte(t,e)||hte(t,e)||fte()}function fte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hte(t,e){if(t){if(typeof t=="string")return UD(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UD(t,e)}}function UD(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pte(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function mte(t){if(Array.isArray(t))return t}function HD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HD(Object(r),!0).forEach(function(n){gte(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gte(t,e,r){return e=yte(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yte(t){var e=vte(t,"string");return Oh(e)=="symbol"?e:e+""}function vte(t,e){if(Oh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Oh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xte(t){return Array.isArray(t)&&kr(t[0])&&kr(t[1])?t.join(" ~ "):t}var bte=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,s=i===void 0?{}:i,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,f=e.payload,d=e.formatter,p=e.itemSorter,m=e.wrapperClassName,x=e.labelClassName,y=e.label,v=e.labelFormatter,b=e.accessibilityLayer,w=b===void 0?!1:b,N=function(){if(f&&f.length){var R={padding:0,margin:0},L=(p?iE(f,p):f).map(function($,F){if($.type==="none")return null;var z=qS({display:"block",paddingTop:4,paddingBottom:4,color:$.color||"#000"},l),W=$.formatter||d||xte,K=$.value,q=$.name,V=K,D=q;if(W&&V!=null&&D!=null){var U=W(K,q,$,F,f);if(Array.isArray(U)){var G=dte(U,2);V=G[0],D=G[1]}else V=U}return Z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:z},kr(D)?Z.createElement("span",{className:"recharts-tooltip-item-name"},D):null,kr(D)?Z.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Z.createElement("span",{className:"recharts-tooltip-item-value"},V),Z.createElement("span",{className:"recharts-tooltip-item-unit"},$.unit||""))});return Z.createElement("ul",{className:"recharts-tooltip-item-list",style:R},L)}return null},j=qS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),k=qS({margin:0},u),_=!tt(y),E=_?y:"",A=it("recharts-default-tooltip",m),T=it("recharts-tooltip-label",x);_&&v&&f!==void 0&&f!==null&&(E=v(y,f));var M=w?{role:"status","aria-live":"assertive"}:{};return Z.createElement("div",w_({className:A,style:j},M),Z.createElement("p",{className:T,style:k},Z.isValidElement(E)?E:"".concat(E)),N())};function Eh(t){"@babel/helpers - typeof";return Eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eh(t)}function mg(t,e,r){return e=wte(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wte(t){var e=jte(t,"string");return Eh(e)=="symbol"?e:e+""}function jte(t,e){if(Eh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Eh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jf="recharts-tooltip-wrapper",Ste={visibility:"hidden"};function Nte(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return it(jf,mg(mg(mg(mg({},"".concat(jf,"-right"),Pe(r)&&e&&Pe(e.x)&&r>=e.x),"".concat(jf,"-left"),Pe(r)&&e&&Pe(e.x)&&r<e.x),"".concat(jf,"-bottom"),Pe(n)&&e&&Pe(e.y)&&n>=e.y),"".concat(jf,"-top"),Pe(n)&&e&&Pe(e.y)&&n<e.y))}function WD(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,s=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(s&&Pe(s[n]))return s[n];var f=r[n]-l-i,d=r[n]+i;if(e[n])return o[n]?f:d;if(o[n]){var p=f,m=c[n];return p<m?Math.max(d,c[n]):Math.max(f,c[n])}var x=d+l,y=c[n]+u;return x>y?Math.max(f,c[n]):Math.max(d,c[n])}function kte(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function _te(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,s=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,f,d;return o.height>0&&o.width>0&&r?(f=WD({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),d=WD({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=kte({translateX:f,translateY:d,useTranslate3d:l})):u=Ste,{cssProperties:u,cssClasses:Nte({translateX:f,translateY:d,coordinate:r})}}function Pu(t){"@babel/helpers - typeof";return Pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pu(t)}function VD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function KD(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VD(Object(r),!0).forEach(function(n){S_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ote(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ete(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WF(n.key),n)}}function Cte(t,e,r){return e&&Ete(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ate(t,e,r){return e=Cy(e),Tte(t,HF()?Reflect.construct(e,r||[],Cy(t).constructor):e.apply(t,r))}function Tte(t,e){if(e&&(Pu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pte(t)}function Pte(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HF=function(){return!!t})()}function Cy(t){return Cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cy(t)}function Mte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j_(t,e)}function j_(t,e){return j_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},j_(t,e)}function S_(t,e,r){return e=WF(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WF(t){var e=Rte(t,"string");return Pu(e)=="symbol"?e:e+""}function Rte(t,e){if(Pu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var GD=1,Ite=function(t){function e(){var r;Ote(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=Ate(this,e,[].concat(i)),S_(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),S_(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return Mte(e,t),Cte(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>GD||Math.abs(n.height-this.state.lastBoundingBox.height)>GD)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,f=i.coordinate,d=i.hasPayload,p=i.isAnimationActive,m=i.offset,x=i.position,y=i.reverseDirection,v=i.useTranslate3d,b=i.viewBox,w=i.wrapperStyle,N=_te({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:m,position:x,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:b}),j=N.cssClasses,k=N.cssProperties,_=KD(KD({transition:p&&s?"transform ".concat(l,"ms ").concat(c):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},w);return Z.createElement("div",{tabIndex:-1,className:j,style:_,ref:function(A){n.wrapperNode=A}},u)}}])}(O.PureComponent),Dte=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},sc={isSsr:Dte()};function Mu(t){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mu(t)}function YD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function XD(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YD(Object(r),!0).forEach(function(n){sE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $te(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KF(n.key),n)}}function Bte(t,e,r){return e&&$te(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fte(t,e,r){return e=Ay(e),qte(t,VF()?Reflect.construct(e,r||[],Ay(t).constructor):e.apply(t,r))}function qte(t,e){if(e&&(Mu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zte(t)}function zte(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VF=function(){return!!t})()}function Ay(t){return Ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ay(t)}function Ute(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N_(t,e)}function N_(t,e){return N_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},N_(t,e)}function sE(t,e,r){return e=KF(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KF(t){var e=Hte(t,"string");return Mu(e)=="symbol"?e:e+""}function Hte(t,e){if(Mu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Wte(t){return t.dataKey}function Vte(t,e){return Z.isValidElement(t)?Z.cloneElement(t,e):typeof t=="function"?Z.createElement(t,e):Z.createElement(bte,e)}var wi=function(t){function e(){return Lte(this,e),Fte(this,e,arguments)}return Ute(e,t),Bte(e,[{key:"render",value:function(){var n=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,f=i.coordinate,d=i.filterNull,p=i.isAnimationActive,m=i.offset,x=i.payload,y=i.payloadUniqBy,v=i.position,b=i.reverseDirection,w=i.useTranslate3d,N=i.viewBox,j=i.wrapperStyle,k=x??[];d&&k.length&&(k=LF(x.filter(function(E){return E.value!=null&&(E.hide!==!0||n.props.includeHidden)}),y,Wte));var _=k.length>0;return Z.createElement(Ite,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:p,active:s,coordinate:f,hasPayload:_,offset:m,position:v,reverseDirection:b,useTranslate3d:w,viewBox:N,wrapperStyle:j},Vte(u,XD(XD({},this.props),{},{payload:k})))}}])}(O.PureComponent);sE(wi,"displayName","Tooltip");sE(wi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!sc.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var zS,JD;function Kte(){if(JD)return zS;JD=1;var t=Is(),e=function(){return t.Date.now()};return zS=e,zS}var US,QD;function Gte(){if(QD)return US;QD=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return US=e,US}var HS,ZD;function Yte(){if(ZD)return HS;ZD=1;var t=Gte(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return HS=r,HS}var WS,e4;function GF(){if(e4)return WS;e4=1;var t=Yte(),e=Fa(),r=hd(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(r(u))return n;if(e(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=e(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=t(u);var d=s.test(u);return d||o.test(u)?l(u.slice(2),d?2:8):i.test(u)?n:+u}return WS=c,WS}var VS,t4;function Xte(){if(t4)return VS;t4=1;var t=Fa(),e=Kte(),r=GF(),n="Expected a function",i=Math.max,s=Math.min;function o(l,c,u){var f,d,p,m,x,y,v=0,b=!1,w=!1,N=!0;if(typeof l!="function")throw new TypeError(n);c=r(c)||0,t(u)&&(b=!!u.leading,w="maxWait"in u,p=w?i(r(u.maxWait)||0,c):p,N="trailing"in u?!!u.trailing:N);function j(L){var $=f,F=d;return f=d=void 0,v=L,m=l.apply(F,$),m}function k(L){return v=L,x=setTimeout(A,c),b?j(L):m}function _(L){var $=L-y,F=L-v,z=c-$;return w?s(z,p-F):z}function E(L){var $=L-y,F=L-v;return y===void 0||$>=c||$<0||w&&F>=p}function A(){var L=e();if(E(L))return T(L);x=setTimeout(A,_(L))}function T(L){return x=void 0,N&&f?j(L):(f=d=void 0,m)}function M(){x!==void 0&&clearTimeout(x),v=0,f=y=d=x=void 0}function P(){return x===void 0?m:T(e())}function R(){var L=e(),$=E(L);if(f=arguments,d=this,y=L,$){if(x===void 0)return k(y);if(w)return clearTimeout(x),x=setTimeout(A,c),j(y)}return x===void 0&&(x=setTimeout(A,c)),m}return R.cancel=M,R.flush=P,R}return VS=o,VS}var KS,r4;function Jte(){if(r4)return KS;r4=1;var t=Xte(),e=Fa(),r="Expected a function";function n(i,s,o){var l=!0,c=!0;if(typeof i!="function")throw new TypeError(r);return e(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),t(i,s,{leading:l,maxWait:s,trailing:c})}return KS=n,KS}var Qte=Jte();const YF=ht(Qte);function Ch(t){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(t)}function n4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?n4(Object(r),!0).forEach(function(n){Zte(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zte(t,e,r){return e=ere(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ere(t){var e=tre(t,"string");return Ch(e)=="symbol"?e:e+""}function tre(t,e){if(Ch(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ch(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rre(t,e){return ore(t)||sre(t,e)||ire(t,e)||nre()}function nre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ire(t,e){if(t){if(typeof t=="string")return i4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i4(t,e)}}function i4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function sre(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function ore(t){if(Array.isArray(t))return t}var k_=O.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,s=t.width,o=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,f=u===void 0?0:u,d=t.minHeight,p=t.maxHeight,m=t.children,x=t.debounce,y=x===void 0?0:x,v=t.id,b=t.className,w=t.onResize,N=t.style,j=N===void 0?{}:N,k=O.useRef(null),_=O.useRef();_.current=w,O.useImperativeHandle(e,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var E=O.useState({containerWidth:i.width,containerHeight:i.height}),A=rre(E,2),T=A[0],M=A[1],P=O.useCallback(function(L,$){M(function(F){var z=Math.round(L),W=Math.round($);return F.containerWidth===z&&F.containerHeight===W?F:{containerWidth:z,containerHeight:W}})},[]);O.useEffect(function(){var L=function(q){var V,D=q[0].contentRect,U=D.width,G=D.height;P(U,G),(V=_.current)===null||V===void 0||V.call(_,U,G)};y>0&&(L=YF(L,y,{trailing:!0,leading:!1}));var $=new ResizeObserver(L),F=k.current.getBoundingClientRect(),z=F.width,W=F.height;return P(z,W),$.observe(k.current),function(){$.disconnect()}},[P,y]);var R=O.useMemo(function(){var L=T.containerWidth,$=T.containerHeight;if(L<0||$<0)return null;ts(Nl(o)||Nl(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),ts(!r||r>0,"The aspect(%s) must be greater than zero.",r);var F=Nl(o)?L:o,z=Nl(c)?$:c;r&&r>0&&(F?z=F/r:z&&(F=z*r),p&&z>p&&(z=p)),ts(F>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,F,z,o,c,f,d,r);var W=!Array.isArray(m)&&co(m.type).endsWith("Chart");return Z.Children.map(m,function(K){return Z.isValidElement(K)?O.cloneElement(K,gg({width:F,height:z},W?{style:gg({height:"100%",width:"100%",maxHeight:z,maxWidth:F},K.props.style)}:{})):K})},[r,m,c,p,d,f,T,o]);return Z.createElement("div",{id:v?"".concat(v):void 0,className:it("recharts-responsive-container",b),style:gg(gg({},j),{},{width:o,height:c,minWidth:f,minHeight:d,maxHeight:p}),ref:k},R)}),z0=function(e){return null};z0.displayName="Cell";function Ah(t){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(t)}function s4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function __(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?s4(Object(r),!0).forEach(function(n){are(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function are(t,e,r){return e=lre(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lre(t){var e=cre(t,"string");return Ah(e)=="symbol"?e:e+""}function cre(t,e){if(Ah(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ah(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kc={widthCache:{},cacheCount:0},ure=2e3,dre={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},o4="recharts_measurement_span";function fre(t){var e=__({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Zf=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||sc.isSsr)return{width:0,height:0};var n=fre(r),i=JSON.stringify({text:e,copyStyle:n});if(Kc.widthCache[i])return Kc.widthCache[i];try{var s=document.getElementById(o4);s||(s=document.createElement("span"),s.setAttribute("id",o4),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=__(__({},dre),n);Object.assign(s.style,o),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return Kc.widthCache[i]=c,++Kc.cacheCount>ure&&(Kc.cacheCount=0,Kc.widthCache={}),c}catch{return{width:0,height:0}}},hre=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Th(t){"@babel/helpers - typeof";return Th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Th(t)}function Ty(t,e){return yre(t)||gre(t,e)||mre(t,e)||pre()}function pre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mre(t,e){if(t){if(typeof t=="string")return a4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a4(t,e)}}function a4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gre(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function yre(t){if(Array.isArray(t))return t}function vre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bre(n.key),n)}}function xre(t,e,r){return e&&l4(t.prototype,e),r&&l4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function bre(t){var e=wre(t,"string");return Th(e)=="symbol"?e:e+""}function wre(t,e){if(Th(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Th(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var c4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,u4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jre=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Sre=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,XF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Nre=Object.keys(XF),cu="NaN";function kre(t,e){return t*XF[e]}var yg=function(){function t(e,r){vre(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!jre.test(r)&&(this.num=NaN,this.unit=""),Nre.includes(r)&&(this.num=kre(e,r),this.unit="px")}return xre(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=Sre.exec(r))!==null&&n!==void 0?n:[],s=Ty(i,3),o=s[1],l=s[2];return new t(parseFloat(o),l??"")}}])}();function JF(t){if(t.includes(cu))return cu;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=c4.exec(e))!==null&&r!==void 0?r:[],i=Ty(n,4),s=i[1],o=i[2],l=i[3],c=yg.parse(s??""),u=yg.parse(l??""),f=o==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return cu;e=e.replace(c4,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,p=(d=u4.exec(e))!==null&&d!==void 0?d:[],m=Ty(p,4),x=m[1],y=m[2],v=m[3],b=yg.parse(x??""),w=yg.parse(v??""),N=y==="+"?b.add(w):b.subtract(w);if(N.isNaN())return cu;e=e.replace(u4,N.toString())}return e}var d4=/\(([^()]*)\)/;function _re(t){for(var e=t;e.includes("(");){var r=d4.exec(e),n=Ty(r,2),i=n[1];e=e.replace(d4,JF(i))}return e}function Ore(t){var e=t.replace(/\s+/g,"");return e=_re(e),e=JF(e),e}function Ere(t){try{return Ore(t)}catch{return cu}}function GS(t){var e=Ere(t.slice(5,-1));return e===cu?"":e}var Cre=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Are=["dx","dy","angle","className","breakAll"];function O_(){return O_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},O_.apply(this,arguments)}function f4(t,e){if(t==null)return{};var r=Tre(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Tre(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function h4(t,e){return Ire(t)||Rre(t,e)||Mre(t,e)||Pre()}function Pre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mre(t,e){if(t){if(typeof t=="string")return p4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p4(t,e)}}function p4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Rre(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Ire(t){if(Array.isArray(t))return t}var QF=/[ \f\n\r\t\v\u2028\u2029]+/,ZF=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var s=[];tt(r)||(n?s=r.toString().split(""):s=r.toString().split(QF));var o=s.map(function(c){return{word:c,width:Zf(c,i).width}}),l=n?0:Zf("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Dre=function(e,r,n,i,s){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,f=Pe(o),d=l,p=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce(function(z,W){var K=W.word,q=W.width,V=z[z.length-1];if(V&&(i==null||s||V.width+q+n<Number(i)))V.words.push(K),V.width+=q+n;else{var D={words:[K],width:q};z.push(D)}return z},[])},m=p(r),x=function(F){return F.reduce(function(z,W){return z.width>W.width?z:W})};if(!f)return m;for(var y="",v=function(F){var z=d.slice(0,F),W=ZF({breakAll:u,style:c,children:z+y}).wordsWithComputedWidth,K=p(W),q=K.length>o||x(K).width>Number(i);return[q,K]},b=0,w=d.length-1,N=0,j;b<=w&&N<=d.length-1;){var k=Math.floor((b+w)/2),_=k-1,E=v(_),A=h4(E,2),T=A[0],M=A[1],P=v(k),R=h4(P,1),L=R[0];if(!T&&!L&&(b=k+1),T&&L&&(w=k-1),!T&&L){j=M;break}N++}return j||m},m4=function(e){var r=tt(e)?[]:e.toString().split(QF);return[{words:r}]},Lre=function(e){var r=e.width,n=e.scaleToFit,i=e.children,s=e.style,o=e.breakAll,l=e.maxLines;if((r||n)&&!sc.isSsr){var c,u,f=ZF({breakAll:o,children:i,style:s});if(f){var d=f.wordsWithComputedWidth,p=f.spaceWidth;c=d,u=p}else return m4(i);return Dre({breakAll:o,children:i,maxLines:l,style:s},c,u,r,n)}return m4(i)},g4="#808080",Ul=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,s=i===void 0?0:i,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,f=e.scaleToFit,d=f===void 0?!1:f,p=e.textAnchor,m=p===void 0?"start":p,x=e.verticalAnchor,y=x===void 0?"end":x,v=e.fill,b=v===void 0?g4:v,w=f4(e,Cre),N=O.useMemo(function(){return Lre({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:d,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,d,w.style,w.width]),j=w.dx,k=w.dy,_=w.angle,E=w.className,A=w.breakAll,T=f4(w,Are);if(!kr(n)||!kr(s))return null;var M=n+(Pe(j)?j:0),P=s+(Pe(k)?k:0),R;switch(y){case"start":R=GS("calc(".concat(u,")"));break;case"middle":R=GS("calc(".concat((N.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:R=GS("calc(".concat(N.length-1," * -").concat(l,")"));break}var L=[];if(d){var $=N[0].width,F=w.width;L.push("scale(".concat((Pe(F)?F/$:1)/$,")"))}return _&&L.push("rotate(".concat(_,", ").concat(M,", ").concat(P,")")),L.length&&(T.transform=L.join(" ")),Z.createElement("text",O_({},Ge(T,!0),{x:M,y:P,className:it("recharts-text",E),textAnchor:m,fill:b.includes("url")?g4:b}),N.map(function(z,W){var K=z.words.join(A?"":" ");return Z.createElement("tspan",{x:M,dy:W===0?R:l,key:"".concat(K,"-").concat(W)},K)}))};function ja(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function $re(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oE(t){let e,r,n;t.length!==2?(e=ja,r=(l,c)=>ja(t(l),c),n=(l,c)=>t(l)-c):(e=t===ja||t===$re?t:Bre,r=t,n=t);function i(l,c,u=0,f=l.length){if(u<f){if(e(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<0?u=d+1:f=d}while(u<f)}return u}function s(l,c,u=0,f=l.length){if(u<f){if(e(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<=0?u=d+1:f=d}while(u<f)}return u}function o(l,c,u=0,f=l.length){const d=i(l,c,u,f-1);return d>u&&n(l[d-1],c)>-n(l[d],c)?d-1:d}return{left:i,center:o,right:s}}function Bre(){return 0}function eq(t){return t===null?NaN:+t}function*Fre(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const qre=oE(ja),Rp=qre.right;oE(eq).center;class y4 extends Map{constructor(e,r=Hre){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(v4(this,e))}has(e){return super.has(v4(this,e))}set(e,r){return super.set(zre(this,e),r)}delete(e){return super.delete(Ure(this,e))}}function v4({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function zre({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Ure({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Hre(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Wre(t=ja){if(t===ja)return tq;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function tq(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Vre=Math.sqrt(50),Kre=Math.sqrt(10),Gre=Math.sqrt(2);function Py(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),o=s>=Vre?10:s>=Kre?5:s>=Gre?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?Py(t,e,r*2):[l,c,u]}function E_(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,s,o]=n?Py(e,t,r):Py(t,e,r);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(i+u)/-o;else for(let u=0;u<l;++u)c[u]=(i+u)*o;return c}function C_(t,e,r){return e=+e,t=+t,r=+r,Py(t,e,r)[2]}function A_(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?C_(e,t,r):C_(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function x4(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function b4(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function rq(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?tq:Wre(i);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,f=Math.log(c),d=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(e-u*d/c+p)),x=Math.min(n,Math.floor(e+(c-u)*d/c+p));rq(t,e,m,x,i)}const s=t[e];let o=r,l=n;for(Sf(t,r,e),i(t[n],s)>0&&Sf(t,r,n);o<l;){for(Sf(t,o,l),++o,--l;i(t[o],s)<0;)++o;for(;i(t[l],s)>0;)--l}i(t[r],s)===0?Sf(t,r,l):(++l,Sf(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function Sf(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Yre(t,e,r){if(t=Float64Array.from(Fre(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return b4(t);if(e>=1)return x4(t);var n,i=(n-1)*e,s=Math.floor(i),o=x4(rq(t,s).subarray(0,s+1)),l=b4(t.subarray(s+1));return o+(l-o)*(i-s)}}function Xre(t,e,r=eq){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,s=Math.floor(i),o=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return o+(l-o)*(i-s)}}function Jre(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(i);++n<i;)s[n]=t+n*r;return s}function Pi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Eo(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const T_=Symbol("implicit");function aE(){var t=new y4,e=[],r=[],n=T_;function i(s){let o=t.get(s);if(o===void 0){if(n!==T_)return n;t.set(s,o=e.push(s)-1)}return r[o%r.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new y4;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return aE(e,r).unknown(n)},Pi.apply(i,arguments),i}function Ph(){var t=aE().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,s,o,l=!1,c=0,u=0,f=.5;delete t.unknown;function d(){var p=e().length,m=i<n,x=m?i:n,y=m?n:i;s=(y-x)/Math.max(1,p-c+u*2),l&&(s=Math.floor(s)),x+=(y-x-s*(p-c))*f,o=s*(1-c),l&&(x=Math.round(x),o=Math.round(o));var v=Jre(p).map(function(b){return x+s*b});return r(m?v.reverse():v)}return t.domain=function(p){return arguments.length?(e(p),d()):e()},t.range=function(p){return arguments.length?([n,i]=p,n=+n,i=+i,d()):[n,i]},t.rangeRound=function(p){return[n,i]=p,n=+n,i=+i,l=!0,d()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(p){return arguments.length?(l=!!p,d()):l},t.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),d()):c},t.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),d()):c},t.paddingOuter=function(p){return arguments.length?(u=+p,d()):u},t.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),d()):f},t.copy=function(){return Ph(e(),[n,i]).round(l).paddingInner(c).paddingOuter(u).align(f)},Pi.apply(d(),arguments)}function nq(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return nq(e())},t}function eh(){return nq(Ph.apply(null,arguments).paddingInner(1))}function lE(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function iq(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Ip(){}var Mh=.7,My=1/Mh,xu="\\s*([+-]?\\d+)\\s*",Rh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ns="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qre=/^#([0-9a-f]{3,8})$/,Zre=new RegExp(`^rgb\\(${xu},${xu},${xu}\\)$`),ene=new RegExp(`^rgb\\(${Ns},${Ns},${Ns}\\)$`),tne=new RegExp(`^rgba\\(${xu},${xu},${xu},${Rh}\\)$`),rne=new RegExp(`^rgba\\(${Ns},${Ns},${Ns},${Rh}\\)$`),nne=new RegExp(`^hsl\\(${Rh},${Ns},${Ns}\\)$`),ine=new RegExp(`^hsla\\(${Rh},${Ns},${Ns},${Rh}\\)$`),w4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lE(Ip,Ih,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:j4,formatHex:j4,formatHex8:sne,formatHsl:one,formatRgb:S4,toString:S4});function j4(){return this.rgb().formatHex()}function sne(){return this.rgb().formatHex8()}function one(){return sq(this).formatHsl()}function S4(){return this.rgb().formatRgb()}function Ih(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Qre.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?N4(e):r===3?new Mn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?vg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?vg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Zre.exec(t))?new Mn(e[1],e[2],e[3],1):(e=ene.exec(t))?new Mn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=tne.exec(t))?vg(e[1],e[2],e[3],e[4]):(e=rne.exec(t))?vg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=nne.exec(t))?O4(e[1],e[2]/100,e[3]/100,1):(e=ine.exec(t))?O4(e[1],e[2]/100,e[3]/100,e[4]):w4.hasOwnProperty(t)?N4(w4[t]):t==="transparent"?new Mn(NaN,NaN,NaN,0):null}function N4(t){return new Mn(t>>16&255,t>>8&255,t&255,1)}function vg(t,e,r,n){return n<=0&&(t=e=r=NaN),new Mn(t,e,r,n)}function ane(t){return t instanceof Ip||(t=Ih(t)),t?(t=t.rgb(),new Mn(t.r,t.g,t.b,t.opacity)):new Mn}function P_(t,e,r,n){return arguments.length===1?ane(t):new Mn(t,e,r,n??1)}function Mn(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}lE(Mn,P_,iq(Ip,{brighter(t){return t=t==null?My:Math.pow(My,t),new Mn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Mh:Math.pow(Mh,t),new Mn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mn(Ml(this.r),Ml(this.g),Ml(this.b),Ry(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k4,formatHex:k4,formatHex8:lne,formatRgb:_4,toString:_4}));function k4(){return`#${kl(this.r)}${kl(this.g)}${kl(this.b)}`}function lne(){return`#${kl(this.r)}${kl(this.g)}${kl(this.b)}${kl((isNaN(this.opacity)?1:this.opacity)*255)}`}function _4(){const t=Ry(this.opacity);return`${t===1?"rgb(":"rgba("}${Ml(this.r)}, ${Ml(this.g)}, ${Ml(this.b)}${t===1?")":`, ${t})`}`}function Ry(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ml(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function kl(t){return t=Ml(t),(t<16?"0":"")+t.toString(16)}function O4(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Qi(t,e,r,n)}function sq(t){if(t instanceof Qi)return new Qi(t.h,t.s,t.l,t.opacity);if(t instanceof Ip||(t=Ih(t)),!t)return new Qi;if(t instanceof Qi)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,l=s-i,c=(s+i)/2;return l?(e===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new Qi(o,l,c,t.opacity)}function cne(t,e,r,n){return arguments.length===1?sq(t):new Qi(t,e,r,n??1)}function Qi(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}lE(Qi,cne,iq(Ip,{brighter(t){return t=t==null?My:Math.pow(My,t),new Qi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Mh:Math.pow(Mh,t),new Qi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Mn(YS(t>=240?t-240:t+120,i,n),YS(t,i,n),YS(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Qi(E4(this.h),xg(this.s),xg(this.l),Ry(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ry(this.opacity);return`${t===1?"hsl(":"hsla("}${E4(this.h)}, ${xg(this.s)*100}%, ${xg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function E4(t){return t=(t||0)%360,t<0?t+360:t}function xg(t){return Math.max(0,Math.min(1,t||0))}function YS(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const cE=t=>()=>t;function une(t,e){return function(r){return t+r*e}}function dne(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function fne(t){return(t=+t)==1?oq:function(e,r){return r-e?dne(e,r,t):cE(isNaN(e)?r:e)}}function oq(t,e){var r=e-t;return r?une(t,r):cE(isNaN(t)?e:t)}const C4=function t(e){var r=fne(e);function n(i,s){var o=r((i=P_(i)).r,(s=P_(s)).r),l=r(i.g,s.g),c=r(i.b,s.b),u=oq(i.opacity,s.opacity);return function(f){return i.r=o(f),i.g=l(f),i.b=c(f),i.opacity=u(f),i+""}}return n.gamma=t,n}(1);function hne(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=t[i]*(1-s)+e[i]*s;return n}}function pne(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function mne(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)i[o]=yd(t[o],e[o]);for(;o<r;++o)s[o]=e[o];return function(l){for(o=0;o<n;++o)s[o]=i[o](l);return s}}function gne(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Iy(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function yne(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=yd(t[i],e[i]):n[i]=e[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var M_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,XS=new RegExp(M_.source,"g");function vne(t){return function(){return t}}function xne(t){return function(e){return t(e)+""}}function bne(t,e){var r=M_.lastIndex=XS.lastIndex=0,n,i,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=M_.exec(t))&&(i=XS.exec(e));)(s=i.index)>r&&(s=e.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:Iy(n,i)})),r=XS.lastIndex;return r<e.length&&(s=e.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?xne(c[0].x):vne(e):(e=c.length,function(u){for(var f=0,d;f<e;++f)l[(d=c[f]).i]=d.x(u);return l.join("")})}function yd(t,e){var r=typeof e,n;return e==null||r==="boolean"?cE(e):(r==="number"?Iy:r==="string"?(n=Ih(e))?(e=n,C4):bne:e instanceof Ih?C4:e instanceof Date?gne:pne(e)?hne:Array.isArray(e)?mne:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?yne:Iy)(t,e)}function uE(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function wne(t,e){e===void 0&&(e=t,t=yd);for(var r=0,n=e.length-1,i=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(i,i=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function jne(t){return function(){return t}}function Dy(t){return+t}var A4=[0,1];function yn(t){return t}function R_(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:jne(isNaN(e)?NaN:.5)}function Sne(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Nne(t,e,r){var n=t[0],i=t[1],s=e[0],o=e[1];return i<n?(n=R_(i,n),s=r(o,s)):(n=R_(n,i),s=r(s,o)),function(l){return s(n(l))}}function kne(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=R_(t[o],t[o+1]),s[o]=r(e[o],e[o+1]);return function(l){var c=Rp(t,l,1,n)-1;return s[c](i[c](l))}}function Dp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function U0(){var t=A4,e=A4,r=yd,n,i,s,o=yn,l,c,u;function f(){var p=Math.min(t.length,e.length);return o!==yn&&(o=Sne(t[0],t[p-1])),l=p>2?kne:Nne,c=u=null,d}function d(p){return p==null||isNaN(p=+p)?s:(c||(c=l(t.map(n),e,r)))(n(o(p)))}return d.invert=function(p){return o(i((u||(u=l(e,t.map(n),Iy)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,Dy),f()):t.slice()},d.range=function(p){return arguments.length?(e=Array.from(p),f()):e.slice()},d.rangeRound=function(p){return e=Array.from(p),r=uE,f()},d.clamp=function(p){return arguments.length?(o=p?!0:yn,f()):o!==yn},d.interpolate=function(p){return arguments.length?(r=p,f()):r},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,m){return n=p,i=m,f()}}function dE(){return U0()(yn,yn)}function _ne(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ly(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Ru(t){return t=Ly(Math.abs(t)),t?t[1]:NaN}function One(t,e){return function(r,n){for(var i=r.length,s=[],o=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(i-=l,i+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Ene(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Cne=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dh(t){if(!(e=Cne.exec(t)))throw new Error("invalid format: "+t);var e;return new fE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Dh.prototype=fE.prototype;function fE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}fE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ane(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var aq;function Tne(t,e){var r=Ly(t,e);if(!r)return t+"";var n=r[0],i=r[1],s=i-(aq=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Ly(t,Math.max(0,e+s-1))[0]}function T4(t,e){var r=Ly(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const P4={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:_ne,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>T4(t*100,e),r:T4,s:Tne,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function M4(t){return t}var R4=Array.prototype.map,I4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Pne(t){var e=t.grouping===void 0||t.thousands===void 0?M4:One(R4.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?M4:Ene(R4.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(d){d=Dh(d);var p=d.fill,m=d.align,x=d.sign,y=d.symbol,v=d.zero,b=d.width,w=d.comma,N=d.precision,j=d.trim,k=d.type;k==="n"?(w=!0,k="g"):P4[k]||(N===void 0&&(N=12),j=!0,k="g"),(v||p==="0"&&m==="=")&&(v=!0,p="0",m="=");var _=y==="$"?r:y==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",E=y==="$"?n:/[%p]/.test(k)?o:"",A=P4[k],T=/[defgprs%]/.test(k);N=N===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function M(P){var R=_,L=E,$,F,z;if(k==="c")L=A(P)+L,P="";else{P=+P;var W=P<0||1/P<0;if(P=isNaN(P)?c:A(Math.abs(P),N),j&&(P=Ane(P)),W&&+P==0&&x!=="+"&&(W=!1),R=(W?x==="("?x:l:x==="-"||x==="("?"":x)+R,L=(k==="s"?I4[8+aq/3]:"")+L+(W&&x==="("?")":""),T){for($=-1,F=P.length;++$<F;)if(z=P.charCodeAt($),48>z||z>57){L=(z===46?i+P.slice($+1):P.slice($))+L,P=P.slice(0,$);break}}}w&&!v&&(P=e(P,1/0));var K=R.length+P.length+L.length,q=K<b?new Array(b-K+1).join(p):"";switch(w&&v&&(P=e(q+P,q.length?b-L.length:1/0),q=""),m){case"<":P=R+P+L+q;break;case"=":P=R+q+P+L;break;case"^":P=q.slice(0,K=q.length>>1)+R+P+L+q.slice(K);break;default:P=q+R+P+L;break}return s(P)}return M.toString=function(){return d+""},M}function f(d,p){var m=u((d=Dh(d),d.type="f",d)),x=Math.max(-8,Math.min(8,Math.floor(Ru(p)/3)))*3,y=Math.pow(10,-x),v=I4[8+x/3];return function(b){return m(y*b)+v}}return{format:u,formatPrefix:f}}var bg,hE,lq;Mne({thousands:",",grouping:[3],currency:["$",""]});function Mne(t){return bg=Pne(t),hE=bg.format,lq=bg.formatPrefix,bg}function Rne(t){return Math.max(0,-Ru(Math.abs(t)))}function Ine(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ru(e)/3)))*3-Ru(Math.abs(t)))}function Dne(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ru(e)-Ru(t))+1}function cq(t,e,r,n){var i=A_(t,e,r),s;switch(n=Dh(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=Ine(i,o))&&(n.precision=s),lq(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=Dne(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=Rne(i))&&(n.precision=s-(n.type==="%")*2);break}}return hE(n)}function qa(t){var e=t.domain;return t.ticks=function(r){var n=e();return E_(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return cq(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,s=n.length-1,o=n[i],l=n[s],c,u,f=10;for(l<o&&(u=o,o=l,l=u,u=i,i=s,s=u);f-- >0;){if(u=C_(o,l,r),u===c)return n[i]=o,n[s]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function $y(){var t=dE();return t.copy=function(){return Dp(t,$y())},Pi.apply(t,arguments),qa(t)}function uq(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Dy),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return uq(t).unknown(e)},t=arguments.length?Array.from(t,Dy):[0,1],qa(r)}function dq(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],s=t[n],o;return s<i&&(o=r,r=n,n=o,o=i,i=s,s=o),t[r]=e.floor(i),t[n]=e.ceil(s),t}function D4(t){return Math.log(t)}function L4(t){return Math.exp(t)}function Lne(t){return-Math.log(-t)}function $ne(t){return-Math.exp(-t)}function Bne(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Fne(t){return t===10?Bne:t===Math.E?Math.exp:e=>Math.pow(t,e)}function qne(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function $4(t){return(e,r)=>-t(-e,r)}function pE(t){const e=t(D4,L4),r=e.domain;let n=10,i,s;function o(){return i=qne(n),s=Fne(n),r()[0]<0?(i=$4(i),s=$4(s),t(Lne,$ne)):t(D4,L4),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let p=i(u),m=i(f),x,y;const v=l==null?10:+l;let b=[];if(!(n%1)&&m-p<v){if(p=Math.floor(p),m=Math.ceil(m),u>0){for(;p<=m;++p)for(x=1;x<n;++x)if(y=p<0?x/s(-p):x*s(p),!(y<u)){if(y>f)break;b.push(y)}}else for(;p<=m;++p)for(x=n-1;x>=1;--x)if(y=p>0?x/s(-p):x*s(p),!(y<u)){if(y>f)break;b.push(y)}b.length*2<v&&(b=E_(u,f,v))}else b=E_(p,m,Math.min(m-p,v)).map(s);return d?b.reverse():b},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Dh(c)).precision==null&&(c.trim=!0),c=hE(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return f=>{let d=f/s(Math.round(i(f)));return d*n<n-.5&&(d*=n),d<=u?c(f):""}},e.nice=()=>r(dq(r(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function fq(){const t=pE(U0()).domain([1,10]);return t.copy=()=>Dp(t,fq()).base(t.base()),Pi.apply(t,arguments),t}function B4(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function F4(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function mE(t){var e=1,r=t(B4(e),F4(e));return r.constant=function(n){return arguments.length?t(B4(e=+n),F4(e)):e},qa(r)}function hq(){var t=mE(U0());return t.copy=function(){return Dp(t,hq()).constant(t.constant())},Pi.apply(t,arguments)}function q4(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function zne(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Une(t){return t<0?-t*t:t*t}function gE(t){var e=t(yn,yn),r=1;function n(){return r===1?t(yn,yn):r===.5?t(zne,Une):t(q4(r),q4(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},qa(e)}function yE(){var t=gE(U0());return t.copy=function(){return Dp(t,yE()).exponent(t.exponent())},Pi.apply(t,arguments),t}function Hne(){return yE.apply(null,arguments).exponent(.5)}function z4(t){return Math.sign(t)*t*t}function Wne(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function pq(){var t=dE(),e=[0,1],r=!1,n;function i(s){var o=Wne(t(s));return isNaN(o)?n:r?Math.round(o):o}return i.invert=function(s){return t.invert(z4(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Dy)).map(z4)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return pq(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Pi.apply(i,arguments),qa(i)}function mq(){var t=[],e=[],r=[],n;function i(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=Xre(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:e[Rp(r,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ja),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return mq().domain(t).range(e).unknown(n)},Pi.apply(s,arguments)}function gq(){var t=0,e=1,r=1,n=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[Rp(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return gq().domain([t,e]).range(i).unknown(s)},Pi.apply(qa(o),arguments)}function yq(){var t=[.5],e=[0,1],r,n=1;function i(s){return s!=null&&s<=s?e[Rp(t,s,0,n)]:r}return i.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return yq().domain(t).range(e).unknown(r)},Pi.apply(i,arguments)}const JS=new Date,QS=new Date;function _r(t,e,r,n){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),l=i.ceil(s);return s-o<l-s?o:l},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<o);return c},i.filter=s=>_r(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),r&&(i.count=(s,o)=>(JS.setTime(+s),QS.setTime(+o),t(JS),t(QS),Math.floor(r(JS,QS))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?o=>n(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const By=_r(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);By.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?_r(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):By);By.range;const io=1e3,_i=io*60,so=_i*60,vo=so*24,vE=vo*7,U4=vo*30,ZS=vo*365,_l=_r(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*io)},(t,e)=>(e-t)/io,t=>t.getUTCSeconds());_l.range;const xE=_r(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*io)},(t,e)=>{t.setTime(+t+e*_i)},(t,e)=>(e-t)/_i,t=>t.getMinutes());xE.range;const bE=_r(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*_i)},(t,e)=>(e-t)/_i,t=>t.getUTCMinutes());bE.range;const wE=_r(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*io-t.getMinutes()*_i)},(t,e)=>{t.setTime(+t+e*so)},(t,e)=>(e-t)/so,t=>t.getHours());wE.range;const jE=_r(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*so)},(t,e)=>(e-t)/so,t=>t.getUTCHours());jE.range;const Lp=_r(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*_i)/vo,t=>t.getDate()-1);Lp.range;const H0=_r(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/vo,t=>t.getUTCDate()-1);H0.range;const vq=_r(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/vo,t=>Math.floor(t/vo));vq.range;function oc(t){return _r(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*_i)/vE)}const W0=oc(0),Fy=oc(1),Vne=oc(2),Kne=oc(3),Iu=oc(4),Gne=oc(5),Yne=oc(6);W0.range;Fy.range;Vne.range;Kne.range;Iu.range;Gne.range;Yne.range;function ac(t){return _r(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/vE)}const V0=ac(0),qy=ac(1),Xne=ac(2),Jne=ac(3),Du=ac(4),Qne=ac(5),Zne=ac(6);V0.range;qy.range;Xne.range;Jne.range;Du.range;Qne.range;Zne.range;const SE=_r(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());SE.range;const NE=_r(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());NE.range;const xo=_r(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());xo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_r(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});xo.range;const bo=_r(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());bo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_r(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});bo.range;function xq(t,e,r,n,i,s){const o=[[_l,1,io],[_l,5,5*io],[_l,15,15*io],[_l,30,30*io],[s,1,_i],[s,5,5*_i],[s,15,15*_i],[s,30,30*_i],[i,1,so],[i,3,3*so],[i,6,6*so],[i,12,12*so],[n,1,vo],[n,2,2*vo],[r,1,vE],[e,1,U4],[e,3,3*U4],[t,1,ZS]];function l(u,f,d){const p=f<u;p&&([u,f]=[f,u]);const m=d&&typeof d.range=="function"?d:c(u,f,d),x=m?m.range(u,+f+1):[];return p?x.reverse():x}function c(u,f,d){const p=Math.abs(f-u)/d,m=oE(([,,v])=>v).right(o,p);if(m===o.length)return t.every(A_(u/ZS,f/ZS,d));if(m===0)return By.every(Math.max(A_(u,f,d),1));const[x,y]=o[p/o[m-1][2]<o[m][2]/p?m-1:m];return x.every(y)}return[l,c]}const[eie,tie]=xq(bo,NE,V0,vq,jE,bE),[rie,nie]=xq(xo,SE,W0,Lp,wE,xE);function eN(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function tN(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Nf(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function iie(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=kf(i),f=_f(i),d=kf(s),p=_f(s),m=kf(o),x=_f(o),y=kf(l),v=_f(l),b=kf(c),w=_f(c),N={a:W,A:K,b:q,B:V,c:null,d:Y4,e:Y4,f:Oie,g:Lie,G:Bie,H:Nie,I:kie,j:_ie,L:bq,m:Eie,M:Cie,p:D,q:U,Q:Q4,s:Z4,S:Aie,u:Tie,U:Pie,V:Mie,w:Rie,W:Iie,x:null,X:null,y:Die,Y:$ie,Z:Fie,"%":J4},j={a:G,A:ee,b:Q,B:H,c:null,d:X4,e:X4,f:Hie,g:ese,G:rse,H:qie,I:zie,j:Uie,L:jq,m:Wie,M:Vie,p:Y,q:re,Q:Q4,s:Z4,S:Kie,u:Gie,U:Yie,V:Xie,w:Jie,W:Qie,x:null,X:null,y:Zie,Y:tse,Z:nse,"%":J4},k={a:M,A:P,b:R,B:L,c:$,d:K4,e:K4,f:bie,g:V4,G:W4,H:G4,I:G4,j:gie,L:xie,m:mie,M:yie,p:T,q:pie,Q:jie,s:Sie,S:vie,u:cie,U:uie,V:die,w:lie,W:fie,x:F,X:z,y:V4,Y:W4,Z:hie,"%":wie};N.x=_(r,N),N.X=_(n,N),N.c=_(e,N),j.x=_(r,j),j.X=_(n,j),j.c=_(e,j);function _(J,ne){return function(te){var se=[],ve=-1,ie=0,ye=J.length,Te,Le,ue;for(te instanceof Date||(te=new Date(+te));++ve<ye;)J.charCodeAt(ve)===37&&(se.push(J.slice(ie,ve)),(Le=H4[Te=J.charAt(++ve)])!=null?Te=J.charAt(++ve):Le=Te==="e"?" ":"0",(ue=ne[Te])&&(Te=ue(te,Le)),se.push(Te),ie=ve+1);return se.push(J.slice(ie,ve)),se.join("")}}function E(J,ne){return function(te){var se=Nf(1900,void 0,1),ve=A(se,J,te+="",0),ie,ye;if(ve!=te.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(ne&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(ie=tN(Nf(se.y,0,1)),ye=ie.getUTCDay(),ie=ye>4||ye===0?qy.ceil(ie):qy(ie),ie=H0.offset(ie,(se.V-1)*7),se.y=ie.getUTCFullYear(),se.m=ie.getUTCMonth(),se.d=ie.getUTCDate()+(se.w+6)%7):(ie=eN(Nf(se.y,0,1)),ye=ie.getDay(),ie=ye>4||ye===0?Fy.ceil(ie):Fy(ie),ie=Lp.offset(ie,(se.V-1)*7),se.y=ie.getFullYear(),se.m=ie.getMonth(),se.d=ie.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),ye="Z"in se?tN(Nf(se.y,0,1)).getUTCDay():eN(Nf(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(ye+5)%7:se.w+se.U*7-(ye+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,tN(se)):eN(se)}}function A(J,ne,te,se){for(var ve=0,ie=ne.length,ye=te.length,Te,Le;ve<ie;){if(se>=ye)return-1;if(Te=ne.charCodeAt(ve++),Te===37){if(Te=ne.charAt(ve++),Le=k[Te in H4?ne.charAt(ve++):Te],!Le||(se=Le(J,te,se))<0)return-1}else if(Te!=te.charCodeAt(se++))return-1}return se}function T(J,ne,te){var se=u.exec(ne.slice(te));return se?(J.p=f.get(se[0].toLowerCase()),te+se[0].length):-1}function M(J,ne,te){var se=m.exec(ne.slice(te));return se?(J.w=x.get(se[0].toLowerCase()),te+se[0].length):-1}function P(J,ne,te){var se=d.exec(ne.slice(te));return se?(J.w=p.get(se[0].toLowerCase()),te+se[0].length):-1}function R(J,ne,te){var se=b.exec(ne.slice(te));return se?(J.m=w.get(se[0].toLowerCase()),te+se[0].length):-1}function L(J,ne,te){var se=y.exec(ne.slice(te));return se?(J.m=v.get(se[0].toLowerCase()),te+se[0].length):-1}function $(J,ne,te){return A(J,e,ne,te)}function F(J,ne,te){return A(J,r,ne,te)}function z(J,ne,te){return A(J,n,ne,te)}function W(J){return o[J.getDay()]}function K(J){return s[J.getDay()]}function q(J){return c[J.getMonth()]}function V(J){return l[J.getMonth()]}function D(J){return i[+(J.getHours()>=12)]}function U(J){return 1+~~(J.getMonth()/3)}function G(J){return o[J.getUTCDay()]}function ee(J){return s[J.getUTCDay()]}function Q(J){return c[J.getUTCMonth()]}function H(J){return l[J.getUTCMonth()]}function Y(J){return i[+(J.getUTCHours()>=12)]}function re(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var ne=_(J+="",N);return ne.toString=function(){return J},ne},parse:function(J){var ne=E(J+="",!1);return ne.toString=function(){return J},ne},utcFormat:function(J){var ne=_(J+="",j);return ne.toString=function(){return J},ne},utcParse:function(J){var ne=E(J+="",!0);return ne.toString=function(){return J},ne}}}var H4={"-":"",_:" ",0:"0"},Br=/^\s*\d+/,sie=/^%/,oie=/[\\^$*+?|[\]().{}]/g;function yt(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(e)+i:i)}function aie(t){return t.replace(oie,"\\$&")}function kf(t){return new RegExp("^(?:"+t.map(aie).join("|")+")","i")}function _f(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function lie(t,e,r){var n=Br.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function cie(t,e,r){var n=Br.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function uie(t,e,r){var n=Br.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function die(t,e,r){var n=Br.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function fie(t,e,r){var n=Br.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function W4(t,e,r){var n=Br.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function V4(t,e,r){var n=Br.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function hie(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function pie(t,e,r){var n=Br.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function mie(t,e,r){var n=Br.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function K4(t,e,r){var n=Br.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function gie(t,e,r){var n=Br.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function G4(t,e,r){var n=Br.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function yie(t,e,r){var n=Br.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function vie(t,e,r){var n=Br.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function xie(t,e,r){var n=Br.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function bie(t,e,r){var n=Br.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function wie(t,e,r){var n=sie.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function jie(t,e,r){var n=Br.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function Sie(t,e,r){var n=Br.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function Y4(t,e){return yt(t.getDate(),e,2)}function Nie(t,e){return yt(t.getHours(),e,2)}function kie(t,e){return yt(t.getHours()%12||12,e,2)}function _ie(t,e){return yt(1+Lp.count(xo(t),t),e,3)}function bq(t,e){return yt(t.getMilliseconds(),e,3)}function Oie(t,e){return bq(t,e)+"000"}function Eie(t,e){return yt(t.getMonth()+1,e,2)}function Cie(t,e){return yt(t.getMinutes(),e,2)}function Aie(t,e){return yt(t.getSeconds(),e,2)}function Tie(t){var e=t.getDay();return e===0?7:e}function Pie(t,e){return yt(W0.count(xo(t)-1,t),e,2)}function wq(t){var e=t.getDay();return e>=4||e===0?Iu(t):Iu.ceil(t)}function Mie(t,e){return t=wq(t),yt(Iu.count(xo(t),t)+(xo(t).getDay()===4),e,2)}function Rie(t){return t.getDay()}function Iie(t,e){return yt(Fy.count(xo(t)-1,t),e,2)}function Die(t,e){return yt(t.getFullYear()%100,e,2)}function Lie(t,e){return t=wq(t),yt(t.getFullYear()%100,e,2)}function $ie(t,e){return yt(t.getFullYear()%1e4,e,4)}function Bie(t,e){var r=t.getDay();return t=r>=4||r===0?Iu(t):Iu.ceil(t),yt(t.getFullYear()%1e4,e,4)}function Fie(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+yt(e/60|0,"0",2)+yt(e%60,"0",2)}function X4(t,e){return yt(t.getUTCDate(),e,2)}function qie(t,e){return yt(t.getUTCHours(),e,2)}function zie(t,e){return yt(t.getUTCHours()%12||12,e,2)}function Uie(t,e){return yt(1+H0.count(bo(t),t),e,3)}function jq(t,e){return yt(t.getUTCMilliseconds(),e,3)}function Hie(t,e){return jq(t,e)+"000"}function Wie(t,e){return yt(t.getUTCMonth()+1,e,2)}function Vie(t,e){return yt(t.getUTCMinutes(),e,2)}function Kie(t,e){return yt(t.getUTCSeconds(),e,2)}function Gie(t){var e=t.getUTCDay();return e===0?7:e}function Yie(t,e){return yt(V0.count(bo(t)-1,t),e,2)}function Sq(t){var e=t.getUTCDay();return e>=4||e===0?Du(t):Du.ceil(t)}function Xie(t,e){return t=Sq(t),yt(Du.count(bo(t),t)+(bo(t).getUTCDay()===4),e,2)}function Jie(t){return t.getUTCDay()}function Qie(t,e){return yt(qy.count(bo(t)-1,t),e,2)}function Zie(t,e){return yt(t.getUTCFullYear()%100,e,2)}function ese(t,e){return t=Sq(t),yt(t.getUTCFullYear()%100,e,2)}function tse(t,e){return yt(t.getUTCFullYear()%1e4,e,4)}function rse(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Du(t):Du.ceil(t),yt(t.getUTCFullYear()%1e4,e,4)}function nse(){return"+0000"}function J4(){return"%"}function Q4(t){return+t}function Z4(t){return Math.floor(+t/1e3)}var Gc,Nq,kq;ise({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ise(t){return Gc=iie(t),Nq=Gc.format,Gc.parse,kq=Gc.utcFormat,Gc.utcParse,Gc}function sse(t){return new Date(t)}function ose(t){return t instanceof Date?+t:+new Date(+t)}function kE(t,e,r,n,i,s,o,l,c,u){var f=dE(),d=f.invert,p=f.domain,m=u(".%L"),x=u(":%S"),y=u("%I:%M"),v=u("%I %p"),b=u("%a %d"),w=u("%b %d"),N=u("%B"),j=u("%Y");function k(_){return(c(_)<_?m:l(_)<_?x:o(_)<_?y:s(_)<_?v:n(_)<_?i(_)<_?b:w:r(_)<_?N:j)(_)}return f.invert=function(_){return new Date(d(_))},f.domain=function(_){return arguments.length?p(Array.from(_,ose)):p().map(sse)},f.ticks=function(_){var E=p();return t(E[0],E[E.length-1],_??10)},f.tickFormat=function(_,E){return E==null?k:u(E)},f.nice=function(_){var E=p();return(!_||typeof _.range!="function")&&(_=e(E[0],E[E.length-1],_??10)),_?p(dq(E,_)):f},f.copy=function(){return Dp(f,kE(t,e,r,n,i,s,o,l,c,u))},f}function ase(){return Pi.apply(kE(rie,nie,xo,SE,W0,Lp,wE,xE,_l,Nq).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function lse(){return Pi.apply(kE(eie,tie,bo,NE,V0,H0,jE,bE,_l,kq).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function K0(){var t=0,e=1,r,n,i,s,o=yn,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:o(i===0?.5:(d=(s(d)-r)*i,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,r=s(t=+t),n=s(e=+e),i=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(p){var m,x;return arguments.length?([m,x]=p,o=d(m,x),u):[o(0),o(1)]}}return u.range=f(yd),u.rangeRound=f(uE),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return s=d,r=d(t),n=d(e),i=r===n?0:1/(n-r),u}}function za(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function _q(){var t=qa(K0()(yn));return t.copy=function(){return za(t,_q())},Eo.apply(t,arguments)}function Oq(){var t=pE(K0()).domain([1,10]);return t.copy=function(){return za(t,Oq()).base(t.base())},Eo.apply(t,arguments)}function Eq(){var t=mE(K0());return t.copy=function(){return za(t,Eq()).constant(t.constant())},Eo.apply(t,arguments)}function _E(){var t=gE(K0());return t.copy=function(){return za(t,_E()).exponent(t.exponent())},Eo.apply(t,arguments)}function cse(){return _E.apply(null,arguments).exponent(.5)}function Cq(){var t=[],e=yn;function r(n){if(n!=null&&!isNaN(n=+n))return e((Rp(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ja),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>Yre(t,s/n))},r.copy=function(){return Cq(e).domain(t)},Eo.apply(r,arguments)}function G0(){var t=0,e=.5,r=1,n=1,i,s,o,l,c,u=yn,f,d=!1,p;function m(y){return isNaN(y=+y)?p:(y=.5+((y=+f(y))-s)*(n*y<n*s?l:c),u(d?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([t,e,r]=y,i=f(t=+t),s=f(e=+e),o=f(r=+r),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),n=s<i?-1:1,m):[t,e,r]},m.clamp=function(y){return arguments.length?(d=!!y,m):d},m.interpolator=function(y){return arguments.length?(u=y,m):u};function x(y){return function(v){var b,w,N;return arguments.length?([b,w,N]=v,u=wne(y,[b,w,N]),m):[u(0),u(.5),u(1)]}}return m.range=x(yd),m.rangeRound=x(uE),m.unknown=function(y){return arguments.length?(p=y,m):p},function(y){return f=y,i=y(t),s=y(e),o=y(r),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),n=s<i?-1:1,m}}function Aq(){var t=qa(G0()(yn));return t.copy=function(){return za(t,Aq())},Eo.apply(t,arguments)}function Tq(){var t=pE(G0()).domain([.1,1,10]);return t.copy=function(){return za(t,Tq()).base(t.base())},Eo.apply(t,arguments)}function Pq(){var t=mE(G0());return t.copy=function(){return za(t,Pq()).constant(t.constant())},Eo.apply(t,arguments)}function OE(){var t=gE(G0());return t.copy=function(){return za(t,OE()).exponent(t.exponent())},Eo.apply(t,arguments)}function use(){return OE.apply(null,arguments).exponent(.5)}const e3=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ph,scaleDiverging:Aq,scaleDivergingLog:Tq,scaleDivergingPow:OE,scaleDivergingSqrt:use,scaleDivergingSymlog:Pq,scaleIdentity:uq,scaleImplicit:T_,scaleLinear:$y,scaleLog:fq,scaleOrdinal:aE,scalePoint:eh,scalePow:yE,scaleQuantile:mq,scaleQuantize:gq,scaleRadial:pq,scaleSequential:_q,scaleSequentialLog:Oq,scaleSequentialPow:_E,scaleSequentialQuantile:Cq,scaleSequentialSqrt:cse,scaleSequentialSymlog:Eq,scaleSqrt:Hne,scaleSymlog:hq,scaleThreshold:yq,scaleTime:ase,scaleUtc:lse,tickFormat:cq},Symbol.toStringTag,{value:"Module"}));var rN,t3;function Y0(){if(t3)return rN;t3=1;var t=hd();function e(r,n,i){for(var s=-1,o=r.length;++s<o;){var l=r[s],c=n(l);if(c!=null&&(u===void 0?c===c&&!t(c):i(c,u)))var u=c,f=l}return f}return rN=e,rN}var nN,r3;function Mq(){if(r3)return nN;r3=1;function t(e,r){return e>r}return nN=t,nN}var iN,n3;function dse(){if(n3)return iN;n3=1;var t=Y0(),e=Mq(),r=gd();function n(i){return i&&i.length?t(i,r,e):void 0}return iN=n,iN}var fse=dse();const X0=ht(fse);var sN,i3;function Rq(){if(i3)return sN;i3=1;function t(e,r){return e<r}return sN=t,sN}var oN,s3;function hse(){if(s3)return oN;s3=1;var t=Y0(),e=Rq(),r=gd();function n(i){return i&&i.length?t(i,r,e):void 0}return oN=n,oN}var pse=hse();const J0=ht(pse);var aN,o3;function mse(){if(o3)return aN;o3=1;var t=UO(),e=Ds(),r=zF(),n=$n();function i(s,o){var l=n(s)?t:r;return l(s,e(o,3))}return aN=i,aN}var lN,a3;function gse(){if(a3)return lN;a3=1;var t=FF(),e=mse();function r(n,i){return t(e(n,i),1)}return lN=r,lN}var yse=gse();const vse=ht(yse);var cN,l3;function Iq(){if(l3)return cN;l3=1;var t=rE();function e(r,n){return t(r,n)}return cN=e,cN}var xse=Iq();const $p=ht(xse);var vd=1e9,bse={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},CE,Wt=!0,Ci="[DecimalError] ",Rl=Ci+"Invalid argument: ",EE=Ci+"Exponent out of range: ",xd=Math.floor,xl=Math.pow,wse=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xn,Tr=1e7,Ut=7,Dq=9007199254740991,zy=xd(Dq/Ut),Be={};Be.absoluteValue=Be.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Be.comparedTo=Be.cmp=function(t){var e,r,n,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};Be.decimalPlaces=Be.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Ut;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Be.dividedBy=Be.div=function(t){return uo(this,new this.constructor(t))};Be.dividedToIntegerBy=Be.idiv=function(t){var e=this,r=e.constructor;return Pt(uo(e,new r(t),0,1),r.precision)};Be.equals=Be.eq=function(t){return!this.cmp(t)};Be.exponent=function(){return mr(this)};Be.greaterThan=Be.gt=function(t){return this.cmp(t)>0};Be.greaterThanOrEqualTo=Be.gte=function(t){return this.cmp(t)>=0};Be.isInteger=Be.isint=function(){return this.e>this.d.length-2};Be.isNegative=Be.isneg=function(){return this.s<0};Be.isPositive=Be.ispos=function(){return this.s>0};Be.isZero=function(){return this.s===0};Be.lessThan=Be.lt=function(t){return this.cmp(t)<0};Be.lessThanOrEqualTo=Be.lte=function(t){return this.cmp(t)<1};Be.logarithm=Be.log=function(t){var e,r=this,n=r.constructor,i=n.precision,s=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Xn))throw Error(Ci+"NaN");if(r.s<1)throw Error(Ci+(r.s?"NaN":"-Infinity"));return r.eq(Xn)?new n(0):(Wt=!1,e=uo(Lh(r,s),Lh(t,s),s),Wt=!0,Pt(e,i))};Be.minus=Be.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Bq(e,t):Lq(e,(t.s=-t.s,t))};Be.modulo=Be.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(Ci+"NaN");return r.s?(Wt=!1,e=uo(r,t,0,1).times(t),Wt=!0,r.minus(e)):Pt(new n(r),i)};Be.naturalExponential=Be.exp=function(){return $q(this)};Be.naturalLogarithm=Be.ln=function(){return Lh(this)};Be.negated=Be.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Be.plus=Be.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Lq(e,t):Bq(e,(t.s=-t.s,t))};Be.precision=Be.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Rl+t);if(e=mr(i)+1,n=i.d.length-1,r=n*Ut+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Be.squareRoot=Be.sqrt=function(){var t,e,r,n,i,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Ci+"NaN")}for(t=mr(l),Wt=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=Ss(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=xd((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(i.toString()),r=c.precision,i=o=r+3;;)if(s=n,n=s.plus(uo(l,s,o+2)).times(.5),Ss(s.d).slice(0,o)===(e=Ss(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Pt(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;o+=4}return Wt=!0,Pt(n,r)};Be.times=Be.mul=function(t){var e,r,n,i,s,o,l,c,u,f=this,d=f.constructor,p=f.d,m=(t=new d(t)).d;if(!f.s||!t.s)return new d(0);for(t.s*=f.s,r=f.e+t.e,c=p.length,u=m.length,c<u&&(s=p,p=m,m=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,i=c+n;i>n;)l=s[i]+m[n]*p[i-n-1]+e,s[i--]=l%Tr|0,e=l/Tr|0;s[i]=(s[i]+e)%Tr|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,Wt?Pt(t,d.precision):t};Be.toDecimalPlaces=Be.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Cs(t,0,vd),e===void 0?e=n.rounding:Cs(e,0,8),Pt(r,t+mr(r)+1,e))};Be.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Hl(n,!0):(Cs(t,0,vd),e===void 0?e=i.rounding:Cs(e,0,8),n=Pt(new i(n),t+1,e),r=Hl(n,!0,t+1)),r};Be.toFixed=function(t,e){var r,n,i=this,s=i.constructor;return t===void 0?Hl(i):(Cs(t,0,vd),e===void 0?e=s.rounding:Cs(e,0,8),n=Pt(new s(i),t+mr(i)+1,e),r=Hl(n.abs(),!1,t+mr(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Be.toInteger=Be.toint=function(){var t=this,e=t.constructor;return Pt(new e(t),mr(t)+1,e.rounding)};Be.toNumber=function(){return+this};Be.toPower=Be.pow=function(t){var e,r,n,i,s,o,l=this,c=l.constructor,u=12,f=+(t=new c(t));if(!t.s)return new c(Xn);if(l=new c(l),!l.s){if(t.s<1)throw Error(Ci+"Infinity");return l}if(l.eq(Xn))return l;if(n=c.precision,t.eq(Xn))return Pt(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,s=l.s,o){if((r=f<0?-f:f)<=Dq){for(i=new c(Xn),e=Math.ceil(n/Ut+4),Wt=!1;r%2&&(i=i.times(l),u3(i.d,e)),r=xd(r/2),r!==0;)l=l.times(l),u3(l.d,e);return Wt=!0,t.s<0?new c(Xn).div(i):Pt(i,n)}}else if(s<0)throw Error(Ci+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,Wt=!1,i=t.times(Lh(l,n+u)),Wt=!0,i=$q(i),i.s=s,i};Be.toPrecision=function(t,e){var r,n,i=this,s=i.constructor;return t===void 0?(r=mr(i),n=Hl(i,r<=s.toExpNeg||r>=s.toExpPos)):(Cs(t,1,vd),e===void 0?e=s.rounding:Cs(e,0,8),i=Pt(new s(i),t,e),r=mr(i),n=Hl(i,t<=r||r<=s.toExpNeg,t)),n};Be.toSignificantDigits=Be.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Cs(t,1,vd),e===void 0?e=n.rounding:Cs(e,0,8)),Pt(new n(r),t,e)};Be.toString=Be.valueOf=Be.val=Be.toJSON=Be[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=mr(t),r=t.constructor;return Hl(t,e<=r.toExpNeg||e>=r.toExpPos)};function Lq(t,e){var r,n,i,s,o,l,c,u,f=t.constructor,d=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),Wt?Pt(e,d):e;if(c=t.d,u=e.d,o=t.e,i=e.e,c=c.slice(),s=o-i,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,i=o,l=c.length),o=Math.ceil(d/Ut),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Tr|0,c[s]%=Tr;for(r&&(c.unshift(r),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,Wt?Pt(e,d):e}function Cs(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Rl+t)}function Ss(t){var e,r,n,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)n=t[e]+"",r=Ut-n.length,r&&(s+=oa(r)),s+=n;o=t[e],n=o+"",r=Ut-n.length,r&&(s+=oa(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var uo=function(){function t(n,i){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*i+o,n[l]=s%Tr|0,o=s/Tr|0;return o&&n.unshift(o),n}function e(n,i,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=i[l]){c=n[l]>i[l]?1:-1;break}return c}function r(n,i,s){for(var o=0;s--;)n[s]-=o,o=n[s]<i[s]?1:0,n[s]=o*Tr+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,o){var l,c,u,f,d,p,m,x,y,v,b,w,N,j,k,_,E,A,T=n.constructor,M=n.s==i.s?1:-1,P=n.d,R=i.d;if(!n.s)return new T(n);if(!i.s)throw Error(Ci+"Division by zero");for(c=n.e-i.e,E=R.length,k=P.length,m=new T(M),x=m.d=[],u=0;R[u]==(P[u]||0);)++u;if(R[u]>(P[u]||0)&&--c,s==null?w=s=T.precision:o?w=s+(mr(n)-mr(i))+1:w=s,w<0)return new T(0);if(w=w/Ut+2|0,u=0,E==1)for(f=0,R=R[0],w++;(u<k||f)&&w--;u++)N=f*Tr+(P[u]||0),x[u]=N/R|0,f=N%R|0;else{for(f=Tr/(R[0]+1)|0,f>1&&(R=t(R,f),P=t(P,f),E=R.length,k=P.length),j=E,y=P.slice(0,E),v=y.length;v<E;)y[v++]=0;A=R.slice(),A.unshift(0),_=R[0],R[1]>=Tr/2&&++_;do f=0,l=e(R,y,E,v),l<0?(b=y[0],E!=v&&(b=b*Tr+(y[1]||0)),f=b/_|0,f>1?(f>=Tr&&(f=Tr-1),d=t(R,f),p=d.length,v=y.length,l=e(d,y,p,v),l==1&&(f--,r(d,E<p?A:R,p))):(f==0&&(l=f=1),d=R.slice()),p=d.length,p<v&&d.unshift(0),r(y,d,v),l==-1&&(v=y.length,l=e(R,y,E,v),l<1&&(f++,r(y,E<v?A:R,v))),v=y.length):l===0&&(f++,y=[0]),x[u++]=f,l&&y[0]?y[v++]=P[j]||0:(y=[P[j]],v=1);while((j++<k||y[0]!==void 0)&&w--)}return x[0]||x.shift(),m.e=c,Pt(m,o?s+mr(m)+1:s)}}();function $q(t,e){var r,n,i,s,o,l,c=0,u=0,f=t.constructor,d=f.precision;if(mr(t)>16)throw Error(EE+mr(t));if(!t.s)return new f(Xn);for(Wt=!1,l=d,o=new f(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(xl(2,u))/Math.LN10*2+5|0,l+=n,r=i=s=new f(Xn),f.precision=l;;){if(i=Pt(i.times(t),l),r=r.times(++c),o=s.plus(uo(i,r,l)),Ss(o.d).slice(0,l)===Ss(s.d).slice(0,l)){for(;u--;)s=Pt(s.times(s),l);return f.precision=d,e==null?(Wt=!0,Pt(s,d)):s}s=o}}function mr(t){for(var e=t.e*Ut,r=t.d[0];r>=10;r/=10)e++;return e}function uN(t,e,r){if(e>t.LN10.sd())throw Wt=!0,r&&(t.precision=r),Error(Ci+"LN10 precision limit exceeded");return Pt(new t(t.LN10),e)}function oa(t){for(var e="";t--;)e+="0";return e}function Lh(t,e){var r,n,i,s,o,l,c,u,f,d=1,p=10,m=t,x=m.d,y=m.constructor,v=y.precision;if(m.s<1)throw Error(Ci+(m.s?"NaN":"-Infinity"));if(m.eq(Xn))return new y(0);if(e==null?(Wt=!1,u=v):u=e,m.eq(10))return e==null&&(Wt=!0),uN(y,u);if(u+=p,y.precision=u,r=Ss(x),n=r.charAt(0),s=mr(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(t),r=Ss(m.d),n=r.charAt(0),d++;s=mr(m),n>1?(m=new y("0."+r),s++):m=new y(n+"."+r.slice(1))}else return c=uN(y,u+2,v).times(s+""),m=Lh(new y(n+"."+r.slice(1)),u-p).plus(c),y.precision=v,e==null?(Wt=!0,Pt(m,v)):m;for(l=o=m=uo(m.minus(Xn),m.plus(Xn),u),f=Pt(m.times(m),u),i=3;;){if(o=Pt(o.times(f),u),c=l.plus(uo(o,new y(i),u)),Ss(c.d).slice(0,u)===Ss(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(uN(y,u+2,v).times(s+""))),l=uo(l,new y(d),u),y.precision=v,e==null?(Wt=!0,Pt(l,v)):l;l=c,i+=2}}function c3(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=xd(r/Ut),t.d=[],n=(r+1)%Ut,r<0&&(n+=Ut),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Ut;n<i;)t.d.push(+e.slice(n,n+=Ut));e=e.slice(n),n=Ut-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),Wt&&(t.e>zy||t.e<-zy))throw Error(EE+r)}else t.s=0,t.e=0,t.d=[0];return t}function Pt(t,e,r){var n,i,s,o,l,c,u,f,d=t.d;for(o=1,s=d[0];s>=10;s/=10)o++;if(n=e-o,n<0)n+=Ut,i=e,u=d[f=0];else{if(f=Math.ceil((n+1)/Ut),s=d.length,f>=s)return t;for(u=s=d[f],o=1;s>=10;s/=10)o++;n%=Ut,i=n-Ut+o}if(r!==void 0&&(s=xl(10,o-i-1),l=u/s%10|0,c=e<0||d[f+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?i>0?u/xl(10,o-i):0:d[f-1])%10&1||r==(t.s<0?8:7))),e<1||!d[0])return c?(s=mr(t),d.length=1,e=e-s-1,d[0]=xl(10,(Ut-e%Ut)%Ut),t.e=xd(-e/Ut)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(n==0?(d.length=f,s=1,f--):(d.length=f+1,s=xl(10,Ut-n),d[f]=i>0?(u/xl(10,o-i)%xl(10,i)|0)*s:0),c)for(;;)if(f==0){(d[0]+=s)==Tr&&(d[0]=1,++t.e);break}else{if(d[f]+=s,d[f]!=Tr)break;d[f--]=0,s=1}for(n=d.length;d[--n]===0;)d.pop();if(Wt&&(t.e>zy||t.e<-zy))throw Error(EE+mr(t));return t}function Bq(t,e){var r,n,i,s,o,l,c,u,f,d,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),Wt?Pt(e,m):e;if(c=t.d,d=e.d,n=e.e,u=t.e,c=c.slice(),o=u-n,o){for(f=o<0,f?(r=c,o=-o,l=d.length):(r=d,n=u,l=c.length),i=Math.max(Math.ceil(m/Ut),l)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=c.length,l=d.length,f=i<l,f&&(l=i),i=0;i<l;i++)if(c[i]!=d[i]){f=c[i]<d[i];break}o=0}for(f&&(r=c,c=d,d=r,e.s=-e.s),l=c.length,i=d.length-l;i>0;--i)c[l++]=0;for(i=d.length;i>o;){if(c[--i]<d[i]){for(s=i;s&&c[--s]===0;)c[s]=Tr-1;--c[s],c[i]+=Tr}c[i]-=d[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Wt?Pt(e,m):e):new p(0)}function Hl(t,e,r){var n,i=mr(t),s=Ss(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+oa(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+oa(-i-1)+s,r&&(n=r-o)>0&&(s+=oa(n))):i>=o?(s+=oa(i+1-o),r&&(n=r-i-1)>0&&(s=s+"."+oa(n))):((n=i+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(s+="."),s+=oa(n))),t.s<0?"-"+s:s}function u3(t,e){if(t.length>e)return t.length=e,!0}function Fq(t){var e,r,n;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Rl+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return c3(o,s.toString())}else if(typeof s!="string")throw Error(Rl+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,wse.test(s))c3(o,s);else throw Error(Rl+s)}if(i.prototype=Be,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Fq,i.config=i.set=jse,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function jse(t){if(!t||typeof t!="object")throw Error(Ci+"Object expected");var e,r,n,i=["precision",1,vd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(xd(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(Rl+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Rl+r+": "+n);return this}var CE=Fq(bse);Xn=new CE(1);const Et=CE;function Sse(t){return Ose(t)||_se(t)||kse(t)||Nse()}function Nse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kse(t,e){if(t){if(typeof t=="string")return I_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I_(t,e)}}function _se(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Ose(t){if(Array.isArray(t))return I_(t)}function I_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ese=function(e){return e},qq={},zq=function(e){return e===qq},d3=function(e){return function r(){return arguments.length===0||arguments.length===1&&zq(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},Cse=function t(e,r){return e===1?r:d3(function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var o=i.filter(function(l){return l!==qq}).length;return o>=e?r.apply(void 0,i):t(e-o,d3(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=i.map(function(d){return zq(d)?c.shift():d});return r.apply(void 0,Sse(f).concat(c))}))})},Q0=function(e){return Cse(e.length,e)},D_=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},Ase=Q0(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),Tse=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return Ese;var i=r.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},L_=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Uq=function(e){var r=null,n=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r&&s.every(function(l,c){return l===r[c]})||(r=s,n=e.apply(void 0,s)),n}};function Pse(t){var e;return t===0?e=1:e=Math.floor(new Et(t).abs().log(10).toNumber())+1,e}function Mse(t,e,r){for(var n=new Et(t),i=0,s=[];n.lt(e)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var Rse=Q0(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),Ise=Q0(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),Dse=Q0(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const Z0={rangeStep:Mse,getDigitCount:Pse,interpolateNumber:Rse,uninterpolateNumber:Ise,uninterpolateTruncation:Dse};function $_(t){return Bse(t)||$se(t)||Hq(t)||Lse()}function Lse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $se(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Bse(t){if(Array.isArray(t))return B_(t)}function $h(t,e){return zse(t)||qse(t,e)||Hq(t,e)||Fse()}function Fse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hq(t,e){if(t){if(typeof t=="string")return B_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B_(t,e)}}function B_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qse(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(e&&r.length===e));n=!0);}catch(c){i=!0,s=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(i)throw s}}return r}}function zse(t){if(Array.isArray(t))return t}function Wq(t){var e=$h(t,2),r=e[0],n=e[1],i=r,s=n;return r>n&&(i=n,s=r),[i,s]}function Vq(t,e,r){if(t.lte(0))return new Et(0);var n=Z0.getDigitCount(t.toNumber()),i=new Et(10).pow(n),s=t.div(i),o=n!==1?.05:.1,l=new Et(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(i);return e?c:new Et(Math.ceil(c))}function Use(t,e,r){var n=1,i=new Et(t);if(!i.isint()&&r){var s=Math.abs(t);s<1?(n=new Et(10).pow(Z0.getDigitCount(t)-1),i=new Et(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new Et(Math.floor(t)))}else t===0?i=new Et(Math.floor((e-1)/2)):r||(i=new Et(Math.floor(t)));var o=Math.floor((e-1)/2),l=Tse(Ase(function(c){return i.add(new Et(c-o).mul(n)).toNumber()}),D_);return l(0,e)}function Kq(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Et(0),tickMin:new Et(0),tickMax:new Et(0)};var s=Vq(new Et(e).sub(t).div(r-1),n,i),o;t<=0&&e>=0?o=new Et(0):(o=new Et(t).add(e).div(2),o=o.sub(new Et(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new Et(e).sub(o).div(s).toNumber()),u=l+c+1;return u>r?Kq(t,e,r,n,i+1):(u<r&&(c=e>0?c+(r-u):c,l=e>0?l:l+(r-u)),{step:s,tickMin:o.sub(new Et(l).mul(s)),tickMax:o.add(new Et(c).mul(s))})}function Hse(t){var e=$h(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=Wq([r,n]),c=$h(l,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat($_(D_(0,i-1).map(function(){return 1/0}))):[].concat($_(D_(0,i-1).map(function(){return-1/0})),[f]);return r>n?L_(d):d}if(u===f)return Use(u,i,s);var p=Kq(u,f,o,s),m=p.step,x=p.tickMin,y=p.tickMax,v=Z0.rangeStep(x,y.add(new Et(.1).mul(m)),m);return r>n?L_(v):v}function Wse(t,e){var r=$h(t,2),n=r[0],i=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Wq([n,i]),l=$h(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,i];if(c===u)return[c];var f=Math.max(e,2),d=Vq(new Et(u).sub(c).div(f-1),s,0),p=[].concat($_(Z0.rangeStep(new Et(c),new Et(u).sub(new Et(.99).mul(d)),d)),[u]);return n>i?L_(p):p}var Vse=Uq(Hse),Kse=Uq(Wse),Gse="Invariant failed";function Wl(t,e){throw new Error(Gse)}var Yse=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Lu(t){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lu(t)}function Uy(){return Uy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Uy.apply(this,arguments)}function Xse(t,e){return eoe(t)||Zse(t,e)||Qse(t,e)||Jse()}function Jse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qse(t,e){if(t){if(typeof t=="string")return f3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f3(t,e)}}function f3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Zse(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function eoe(t){if(Array.isArray(t))return t}function toe(t,e){if(t==null)return{};var r=roe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function roe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function noe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ioe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xq(n.key),n)}}function soe(t,e,r){return e&&ioe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ooe(t,e,r){return e=Hy(e),aoe(t,Gq()?Reflect.construct(e,r||[],Hy(t).constructor):e.apply(t,r))}function aoe(t,e){if(e&&(Lu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return loe(t)}function loe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gq=function(){return!!t})()}function Hy(t){return Hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hy(t)}function coe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F_(t,e)}function F_(t,e){return F_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},F_(t,e)}function Yq(t,e,r){return e=Xq(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xq(t){var e=uoe(t,"string");return Lu(e)=="symbol"?e:e+""}function uoe(t,e){if(Lu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Bp=function(t){function e(){return noe(this,e),ooe(this,e,arguments)}return coe(e,t),soe(e,[{key:"render",value:function(){var n=this.props,i=n.offset,s=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,p=toe(n,Yse),m=Ge(p,!1);this.props.direction==="x"&&f.type!=="number"&&Wl();var x=c.map(function(y){var v=u(y,l),b=v.x,w=v.y,N=v.value,j=v.errorVal;if(!j)return null;var k=[],_,E;if(Array.isArray(j)){var A=Xse(j,2);_=A[0],E=A[1]}else _=E=j;if(s==="vertical"){var T=f.scale,M=w+i,P=M+o,R=M-o,L=T(N-_),$=T(N+E);k.push({x1:$,y1:P,x2:$,y2:R}),k.push({x1:L,y1:M,x2:$,y2:M}),k.push({x1:L,y1:P,x2:L,y2:R})}else if(s==="horizontal"){var F=d.scale,z=b+i,W=z-o,K=z+o,q=F(N-_),V=F(N+E);k.push({x1:W,y1:V,x2:K,y2:V}),k.push({x1:z,y1:q,x2:z,y2:V}),k.push({x1:W,y1:q,x2:K,y2:q})}return Z.createElement(gt,Uy({className:"recharts-errorBar",key:"bar-".concat(k.map(function(D){return"".concat(D.x1,"-").concat(D.x2,"-").concat(D.y1,"-").concat(D.y2)}))},m),k.map(function(D){return Z.createElement("line",Uy({},D,{key:"line-".concat(D.x1,"-").concat(D.x2,"-").concat(D.y1,"-").concat(D.y2)}))}))});return Z.createElement(gt,{className:"recharts-errorBars"},x)}}])}(Z.Component);Yq(Bp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Yq(Bp,"displayName","ErrorBar");function Bh(t){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(t)}function h3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ul(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h3(Object(r),!0).forEach(function(n){doe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function doe(t,e,r){return e=foe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function foe(t){var e=hoe(t,"string");return Bh(e)=="symbol"?e:e+""}function hoe(t,e){if(Bh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jq=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,o=Vn(r,vu);if(!o)return null;var l=vu.defaultProps,c=l!==void 0?ul(ul({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(n||[]).reduce(function(f,d){var p=d.item,m=d.props,x=m.sectors||m.data||[];return f.concat(x.map(function(y){return{type:o.props.iconType||p.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):u=(n||[]).map(function(f){var d=f.item,p=d.type.defaultProps,m=p!==void 0?ul(ul({},p),d.props):{},x=m.dataKey,y=m.name,v=m.legendType,b=m.hide;return{inactive:b,dataKey:x,type:c.iconType||v||"square",color:AE(d),value:y||x,payload:m}}),ul(ul(ul({},c),vu.getWithHeight(o,i)),{},{payload:u,item:o})};function Fh(t){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(t)}function p3(t){return yoe(t)||goe(t)||moe(t)||poe()}function poe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function moe(t,e){if(t){if(typeof t=="string")return q_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q_(t,e)}}function goe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yoe(t){if(Array.isArray(t))return q_(t)}function q_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function m3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m3(Object(r),!0).forEach(function(n){bu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bu(t,e,r){return e=voe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function voe(t){var e=xoe(t,"string");return Fh(e)=="symbol"?e:e+""}function xoe(t,e){if(Fh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nr(t,e,r){return tt(t)||tt(e)?r:kr(e)?ei(t,e,r):Ze(e)?e(t):r}function th(t,e,r,n){var i=vse(t,function(l){return Nr(l,e)});if(r==="number"){var s=i.filter(function(l){return Pe(l)||parseFloat(l)});return s.length?[J0(s),X0(s)]:[1/0,-1/0]}var o=n?i.filter(function(l){return!tt(l)}):i;return o.map(function(l){return kr(l)||l instanceof Date?l:""})}var boe=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var f=u>0?i[u-1].coordinate:i[l-1].coordinate,d=i[u].coordinate,p=u>=l-1?i[0].coordinate:i[u+1].coordinate,m=void 0;if(mn(d-f)!==mn(p-d)){var x=[];if(mn(p-d)===mn(c[1]-c[0])){m=p;var y=d+c[1]-c[0];x[0]=Math.min(y,(y+f)/2),x[1]=Math.max(y,(y+f)/2)}else{m=f;var v=p+c[1]-c[0];x[0]=Math.min(d,(v+d)/2),x[1]=Math.max(d,(v+d)/2)}var b=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>b[0]&&e<=b[1]||e>=x[0]&&e<=x[1]){o=i[u].index;break}}else{var w=Math.min(f,p),N=Math.max(f,p);if(e>(w+d)/2&&e<=(N+d)/2){o=i[u].index;break}}}else for(var j=0;j<l;j++)if(j===0&&e<=(n[j].coordinate+n[j+1].coordinate)/2||j>0&&j<l-1&&e>(n[j].coordinate+n[j-1].coordinate)/2&&e<=(n[j].coordinate+n[j+1].coordinate)/2||j===l-1&&e>(n[j].coordinate+n[j-1].coordinate)/2){o=n[j].index;break}return o},AE=function(e){var r,n=e,i=n.type.displayName,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?tr(tr({},e.type.defaultProps),e.props):e.props,o=s.stroke,l=s.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},woe=function(e){var r=e.barSize,n=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var f=s[l[c]].stackGroups,d=Object.keys(f),p=0,m=d.length;p<m;p++){var x=f[d[p]],y=x.items,v=x.cateAxisId,b=y.filter(function(E){return co(E.type).indexOf("Bar")>=0});if(b&&b.length){var w=b[0].type.defaultProps,N=w!==void 0?tr(tr({},w),b[0].props):b[0].props,j=N.barSize,k=N[v];o[k]||(o[k]=[]);var _=tt(j)?r:j;o[k].push({item:b[0],stackList:b.slice(1),barSize:tt(_)?void 0:gn(_,n,0)})}}return o},joe=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=gn(r,i,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var p=!1,m=i/c,x=o.reduce(function(j,k){return j+k.barSize||0},0);x+=(c-1)*u,x>=i&&(x-=(c-1)*u,u=0),x>=i&&m>0&&(p=!0,m*=.9,x=c*m);var y=(i-x)/2>>0,v={offset:y-u,size:0};f=o.reduce(function(j,k){var _={item:k.item,position:{offset:v.offset+v.size+u,size:p?m:k.barSize}},E=[].concat(p3(j),[_]);return v=E[E.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(A){E.push({item:A,position:v})}),E},d)}else{var b=gn(n,i,0,!0);i-2*b-(c-1)*u<=0&&(u=0);var w=(i-2*b-(c-1)*u)/c;w>1&&(w>>=0);var N=l===+l?Math.min(w,l):w;f=o.reduce(function(j,k,_){var E=[].concat(p3(j),[{item:k.item,position:{offset:b+(w+u)*_+(w-N)/2,size:N}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(A){E.push({item:A,position:E[E.length-1].position})}),E},d)}return f},Soe=function(e,r,n,i){var s=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=Jq({children:s,legendWidth:c});if(u){var f=i||{},d=f.width,p=f.height,m=u.align,x=u.verticalAlign,y=u.layout;if((y==="vertical"||y==="horizontal"&&x==="middle")&&m!=="center"&&Pe(e[m]))return tr(tr({},e),{},bu({},m,e[m]+(d||0)));if((y==="horizontal"||y==="vertical"&&m==="center")&&x!=="middle"&&Pe(e[x]))return tr(tr({},e),{},bu({},x,e[x]+(p||0)))}return e},Noe=function(e,r,n){return tt(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},Qq=function(e,r,n,i,s){var o=r.props.children,l=ti(o,Bp).filter(function(u){return Noe(i,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,f){var d=Nr(f,n);if(tt(d))return u;var p=Array.isArray(d)?[J0(d),X0(d)]:[d,d],m=c.reduce(function(x,y){var v=Nr(f,y,0),b=p[0]-Math.abs(Array.isArray(v)?v[0]:v),w=p[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(b,x[0]),Math.max(w,x[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},koe=function(e,r,n,i,s){var o=r.map(function(l){return Qq(e,l,n,s,i)}).filter(function(l){return!tt(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},Zq=function(e,r,n,i,s){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&Qq(e,c,u,i)||th(e,u,n,s)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var f=0,d=u.length;f<d;f++)l[u[f]]||(l[u[f]]=!0,c.push(u[f]));return c},[])},ez=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},tz=function(e,r,n,i){if(i)return e.map(function(c){return c.coordinate});var s,o,l=e.map(function(c){return c.coordinate===r&&(s=!0),c.coordinate===n&&(o=!0),c.coordinate});return s||l.push(r),o||l.push(n),l},oo=function(e,r,n){if(!e)return null;var i=e.scale,s=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||n)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?mn(l[0]-l[1])*2*u:u,r&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(d){var p=s?s.indexOf(d):d;return{coordinate:i(p)+u,value:d,offset:u}});return f.filter(function(d){return!Pp(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,p){return{coordinate:i(d)+u,value:d,index:p,offset:u}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+u,value:d,offset:u}}):i.domain().map(function(d,p){return{coordinate:i(d)+u,value:s?s[d]:d,index:p,offset:u}})},dN=new WeakMap,wg=function(e,r){if(typeof r!="function")return e;dN.has(e)||dN.set(e,new WeakMap);var n=dN.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},rz=function(e,r,n){var i=e.scale,s=e.type,o=e.layout,l=e.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Ph(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:$y(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:eh(),realScaleType:"point"}:s==="category"?{scale:Ph(),realScaleType:"band"}:{scale:$y(),realScaleType:"linear"};if(Tp(i)){var c="scale".concat(I0(i));return{scale:(e3[c]||eh)(),realScaleType:e3[c]?c:"point"}}return Ze(i)?{scale:i}:{scale:eh(),realScaleType:"point"}},g3=1e-4,nz=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),s=Math.min(i[0],i[1])-g3,o=Math.max(i[0],i[1])+g3,l=e(r[0]),c=e(r[n-1]);(l<s||l>o||c<s||c>o)&&e.domain([r[0],r[n-1]])}},_oe=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},Ooe=function(e,r){if(!r||r.length!==2||!Pe(r[0])||!Pe(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),s=[e[0],e[1]];return(!Pe(e[0])||e[0]<n)&&(s[0]=n),(!Pe(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<n&&(s[1]=n),s},Eoe=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var s=0,o=0,l=0;l<r;++l){var c=Pp(e[l][n][1])?e[l][n][0]:e[l][n][1];c>=0?(e[l][n][0]=s,e[l][n][1]=s+c,s=e[l][n][1]):(e[l][n][0]=o,e[l][n][1]=o+c,o=e[l][n][1])}},Coe=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var s=0,o=0;o<r;++o){var l=Pp(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=s,e[o][n][1]=s+l,s=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},Aoe={sign:Eoe,expand:vZ,none:Cu,silhouette:xZ,wiggle:bZ,positive:Coe},Toe=function(e,r,n){var i=r.map(function(l){return l.props.dataKey}),s=Aoe[n],o=yZ().keys(i).value(function(l,c){return+Nr(l,c,0)}).order(g_).offset(s);return o(e)},Poe=function(e,r,n,i,s,o){if(!e)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(d,p){var m,x=(m=p.type)!==null&&m!==void 0&&m.defaultProps?tr(tr({},p.type.defaultProps),p.props):p.props,y=x.stackId,v=x.hide;if(v)return d;var b=x[n],w=d[b]||{hasStack:!1,stackGroups:{}};if(kr(y)){var N=w.stackGroups[y]||{numericAxisId:n,cateAxisId:i,items:[]};N.items.push(p),w.hasStack=!0,w.stackGroups[y]=N}else w.stackGroups[md("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[p]};return tr(tr({},d),{},bu({},b,w))},c),f={};return Object.keys(u).reduce(function(d,p){var m=u[p];if(m.hasStack){var x={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(y,v){var b=m.stackGroups[v];return tr(tr({},y),{},bu({},v,{numericAxisId:n,cateAxisId:i,items:b.items,stackedData:Toe(e,b.items,s)}))},x)}return tr(tr({},d),{},bu({},p,m))},f)},iz=function(e,r){var n=r.realScaleType,i=r.type,s=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var f=Vse(u,s,l);return e.domain([J0(f),X0(f)]),{niceTicks:f}}if(s&&i==="number"){var d=e.domain(),p=Kse(d,s,l);return{niceTicks:p}}return null};function y3(t){var e=t.axis,r=t.ticks,n=t.bandSize,i=t.entry,s=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!tt(i[e.dataKey])){var l=by(r,"value",i[e.dataKey]);if(l)return l.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var c=Nr(i,tt(o)?e.dataKey:o);return tt(c)?null:e.scale(c)}var v3=function(e){var r=e.axis,n=e.ticks,i=e.offset,s=e.bandSize,o=e.entry,l=e.index;if(r.type==="category")return n[l]?n[l].coordinate+i:null;var c=Nr(o,r.dataKey,r.domain[l]);return tt(c)?null:r.scale(c)-s/2+i},Moe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return i<=0&&s>=0?0:s<0?s:i}return n[0]},Roe=function(e,r){var n,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?tr(tr({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(kr(s)){var o=r[s];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},Ioe=function(e){return e.reduce(function(r,n){return[J0(n.concat([r[0]]).filter(Pe)),X0(n.concat([r[1]]).filter(Pe))]},[1/0,-1/0])},sz=function(e,r,n){return Object.keys(e).reduce(function(i,s){var o=e[s],l=o.stackedData,c=l.reduce(function(u,f){var d=Ioe(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},x3=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,b3=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,z_=function(e,r,n){if(Ze(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(Pe(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(x3.test(e[0])){var s=+x3.exec(e[0])[1];i[0]=r[0]-s}else Ze(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(Pe(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(b3.test(e[1])){var o=+b3.exec(e[1])[1];i[1]=r[1]+o}else Ze(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},Wy=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var s=iE(r,function(d){return d.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],f=s[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},w3=function(e,r,n){return!e||!e.length||$p(e,ei(n,"type.defaultProps.domain"))?r:e},oz=function(e,r){var n=e.type.defaultProps?tr(tr({},e.type.defaultProps),e.props):e.props,i=n.dataKey,s=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,f=n.hide;return tr(tr({},Ge(e,!1)),{},{dataKey:i,unit:o,formatter:l,name:s||i,color:AE(e),value:Nr(r,i),type:c,payload:r,chartType:u,hide:f})};function qh(t){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(t)}function j3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ro(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j3(Object(r),!0).forEach(function(n){az(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function az(t,e,r){return e=Doe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Doe(t){var e=Loe(t,"string");return qh(e)=="symbol"?e:e+""}function Loe(t,e){if(qh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $oe(t,e){return zoe(t)||qoe(t,e)||Foe(t,e)||Boe()}function Boe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Foe(t,e){if(t){if(typeof t=="string")return S3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S3(t,e)}}function S3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qoe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function zoe(t){if(Array.isArray(t))return t}var Vy=Math.PI/180,Uoe=function(e){return e*180/Math.PI},Lt=function(e,r,n,i){return{x:e+Math.cos(-Vy*i)*n,y:r+Math.sin(-Vy*i)*n}},lz=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Hoe=function(e,r,n,i,s){var o=e.width,l=e.height,c=e.startAngle,u=e.endAngle,f=gn(e.cx,o,o/2),d=gn(e.cy,l,l/2),p=lz(o,l,n),m=gn(e.innerRadius,p,0),x=gn(e.outerRadius,p,p*.8),y=Object.keys(r);return y.reduce(function(v,b){var w=r[b],N=w.domain,j=w.reversed,k;if(tt(w.range))i==="angleAxis"?k=[c,u]:i==="radiusAxis"&&(k=[m,x]),j&&(k=[k[1],k[0]]);else{k=w.range;var _=k,E=$oe(_,2);c=E[0],u=E[1]}var A=rz(w,s),T=A.realScaleType,M=A.scale;M.domain(N).range(k),nz(M);var P=iz(M,ro(ro({},w),{},{realScaleType:T})),R=ro(ro(ro({},w),P),{},{range:k,radius:x,realScaleType:T,scale:M,cx:f,cy:d,innerRadius:m,outerRadius:x,startAngle:c,endAngle:u});return ro(ro({},v),{},az({},b,R))},{})},Woe=function(e,r){var n=e.x,i=e.y,s=r.x,o=r.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(i-o,2))},Voe=function(e,r){var n=e.x,i=e.y,s=r.cx,o=r.cy,l=Woe({x:n,y:i},{x:s,y:o});if(l<=0)return{radius:l};var c=(n-s)/l,u=Math.acos(c);return i>o&&(u=2*Math.PI-u),{radius:l,angle:Uoe(u),angleInRadian:u}},Koe=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(i,s);return{startAngle:r-o*360,endAngle:n-o*360}},Goe=function(e,r){var n=r.startAngle,i=r.endAngle,s=Math.floor(n/360),o=Math.floor(i/360),l=Math.min(s,o);return e+l*360},N3=function(e,r){var n=e.x,i=e.y,s=Voe({x:n,y:i},r),o=s.radius,l=s.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var f=Koe(r),d=f.startAngle,p=f.endAngle,m=l,x;if(d<=p){for(;m>p;)m-=360;for(;m<d;)m+=360;x=m>=d&&m<=p}else{for(;m>d;)m-=360;for(;m<p;)m+=360;x=m>=p&&m<=d}return x?ro(ro({},r),{},{radius:o,angle:Goe(m,r)}):null},cz=function(e){return!O.isValidElement(e)&&!Ze(e)&&typeof e!="boolean"?e.className:""};function zh(t){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zh(t)}var Yoe=["offset"];function Xoe(t){return eae(t)||Zoe(t)||Qoe(t)||Joe()}function Joe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qoe(t,e){if(t){if(typeof t=="string")return U_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U_(t,e)}}function Zoe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function eae(t){if(Array.isArray(t))return U_(t)}function U_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function tae(t,e){if(t==null)return{};var r=rae(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function rae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function k3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function br(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k3(Object(r),!0).forEach(function(n){nae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nae(t,e,r){return e=iae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iae(t){var e=sae(t,"string");return zh(e)=="symbol"?e:e+""}function sae(t,e){if(zh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uh(){return Uh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Uh.apply(this,arguments)}var oae=function(e){var r=e.value,n=e.formatter,i=tt(e.children)?r:e.children;return Ze(n)?n(i):i},aae=function(e,r){var n=mn(r-e),i=Math.min(Math.abs(r-e),360);return n*i},lae=function(e,r,n){var i=e.position,s=e.viewBox,o=e.offset,l=e.className,c=s,u=c.cx,f=c.cy,d=c.innerRadius,p=c.outerRadius,m=c.startAngle,x=c.endAngle,y=c.clockWise,v=(d+p)/2,b=aae(m,x),w=b>=0?1:-1,N,j;i==="insideStart"?(N=m+w*o,j=y):i==="insideEnd"?(N=x-w*o,j=!y):i==="end"&&(N=x+w*o,j=y),j=b<=0?j:!j;var k=Lt(u,f,v,N),_=Lt(u,f,v,N+(j?1:-1)*359),E="M".concat(k.x,",").concat(k.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(j?0:1,`,
    `).concat(_.x,",").concat(_.y),A=tt(e.id)?md("recharts-radial-line-"):e.id;return Z.createElement("text",Uh({},n,{dominantBaseline:"central",className:it("recharts-radial-bar-label",l)}),Z.createElement("defs",null,Z.createElement("path",{id:A,d:E})),Z.createElement("textPath",{xlinkHref:"#".concat(A)},r))},cae=function(e){var r=e.viewBox,n=e.offset,i=e.position,s=r,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,f=s.startAngle,d=s.endAngle,p=(f+d)/2;if(i==="outside"){var m=Lt(o,l,u+n,p),x=m.x,y=m.y;return{x,y,textAnchor:x>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(c+u)/2,b=Lt(o,l,v,p),w=b.x,N=b.y;return{x:w,y:N,textAnchor:"middle",verticalAnchor:"middle"}},uae=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,s=e.position,o=r,l=o.x,c=o.y,u=o.width,f=o.height,d=f>=0?1:-1,p=d*i,m=d>0?"end":"start",x=d>0?"start":"end",y=u>=0?1:-1,v=y*i,b=y>0?"end":"start",w=y>0?"start":"end";if(s==="top"){var N={x:l+u/2,y:c-d*i,textAnchor:"middle",verticalAnchor:m};return br(br({},N),n?{height:Math.max(c-n.y,0),width:u}:{})}if(s==="bottom"){var j={x:l+u/2,y:c+f+p,textAnchor:"middle",verticalAnchor:x};return br(br({},j),n?{height:Math.max(n.y+n.height-(c+f),0),width:u}:{})}if(s==="left"){var k={x:l-v,y:c+f/2,textAnchor:b,verticalAnchor:"middle"};return br(br({},k),n?{width:Math.max(k.x-n.x,0),height:f}:{})}if(s==="right"){var _={x:l+u+v,y:c+f/2,textAnchor:w,verticalAnchor:"middle"};return br(br({},_),n?{width:Math.max(n.x+n.width-_.x,0),height:f}:{})}var E=n?{width:u,height:f}:{};return s==="insideLeft"?br({x:l+v,y:c+f/2,textAnchor:w,verticalAnchor:"middle"},E):s==="insideRight"?br({x:l+u-v,y:c+f/2,textAnchor:b,verticalAnchor:"middle"},E):s==="insideTop"?br({x:l+u/2,y:c+p,textAnchor:"middle",verticalAnchor:x},E):s==="insideBottom"?br({x:l+u/2,y:c+f-p,textAnchor:"middle",verticalAnchor:m},E):s==="insideTopLeft"?br({x:l+v,y:c+p,textAnchor:w,verticalAnchor:x},E):s==="insideTopRight"?br({x:l+u-v,y:c+p,textAnchor:b,verticalAnchor:x},E):s==="insideBottomLeft"?br({x:l+v,y:c+f-p,textAnchor:w,verticalAnchor:m},E):s==="insideBottomRight"?br({x:l+u-v,y:c+f-p,textAnchor:b,verticalAnchor:m},E):pd(s)&&(Pe(s.x)||Nl(s.x))&&(Pe(s.y)||Nl(s.y))?br({x:l+gn(s.x,u),y:c+gn(s.y,f),textAnchor:"end",verticalAnchor:"end"},E):br({x:l+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},E)},dae=function(e){return"cx"in e&&Pe(e.cx)};function Mr(t){var e=t.offset,r=e===void 0?5:e,n=tae(t,Yoe),i=br({offset:r},n),s=i.viewBox,o=i.position,l=i.value,c=i.children,u=i.content,f=i.className,d=f===void 0?"":f,p=i.textBreakAll;if(!s||tt(l)&&tt(c)&&!O.isValidElement(u)&&!Ze(u))return null;if(O.isValidElement(u))return O.cloneElement(u,i);var m;if(Ze(u)){if(m=O.createElement(u,i),O.isValidElement(m))return m}else m=oae(i);var x=dae(s),y=Ge(i,!0);if(x&&(o==="insideStart"||o==="insideEnd"||o==="end"))return lae(i,m,y);var v=x?cae(i):uae(i);return Z.createElement(Ul,Uh({className:it("recharts-label",d)},y,v,{breakAll:p}),m)}Mr.displayName="Label";var uz=function(e){var r=e.cx,n=e.cy,i=e.angle,s=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,f=e.outerRadius,d=e.x,p=e.y,m=e.top,x=e.left,y=e.width,v=e.height,b=e.clockWise,w=e.labelViewBox;if(w)return w;if(Pe(y)&&Pe(v)){if(Pe(d)&&Pe(p))return{x:d,y:p,width:y,height:v};if(Pe(m)&&Pe(x))return{x:m,y:x,width:y,height:v}}return Pe(d)&&Pe(p)?{x:d,y:p,width:0,height:0}:Pe(r)&&Pe(n)?{cx:r,cy:n,startAngle:s||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:f||c||l||0,clockWise:b}:e.viewBox?e.viewBox:{}},fae=function(e,r){return e?e===!0?Z.createElement(Mr,{key:"label-implicit",viewBox:r}):kr(e)?Z.createElement(Mr,{key:"label-implicit",viewBox:r,value:e}):O.isValidElement(e)?e.type===Mr?O.cloneElement(e,{key:"label-implicit",viewBox:r}):Z.createElement(Mr,{key:"label-implicit",content:e,viewBox:r}):Ze(e)?Z.createElement(Mr,{key:"label-implicit",content:e,viewBox:r}):pd(e)?Z.createElement(Mr,Uh({viewBox:r},e,{key:"label-implicit"})):null:null},hae=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,s=uz(e),o=ti(i,Mr).map(function(c,u){return O.cloneElement(c,{viewBox:r||s,key:"label-".concat(u)})});if(!n)return o;var l=fae(e.label,r||s);return[l].concat(Xoe(o))};Mr.parseViewBox=uz;Mr.renderCallByParent=hae;var fN,_3;function pae(){if(_3)return fN;_3=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return fN=t,fN}var mae=pae();const gae=ht(mae);function Hh(t){"@babel/helpers - typeof";return Hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hh(t)}var yae=["valueAccessor"],vae=["data","dataKey","clockWise","id","textBreakAll"];function xae(t){return Sae(t)||jae(t)||wae(t)||bae()}function bae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wae(t,e){if(t){if(typeof t=="string")return H_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H_(t,e)}}function jae(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Sae(t){if(Array.isArray(t))return H_(t)}function H_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ky(){return Ky=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ky.apply(this,arguments)}function O3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function E3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?O3(Object(r),!0).forEach(function(n){Nae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nae(t,e,r){return e=kae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kae(t){var e=_ae(t,"string");return Hh(e)=="symbol"?e:e+""}function _ae(t,e){if(Hh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function C3(t,e){if(t==null)return{};var r=Oae(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Oae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Eae=function(e){return Array.isArray(e.value)?gae(e.value):e.value};function fo(t){var e=t.valueAccessor,r=e===void 0?Eae:e,n=C3(t,yae),i=n.data,s=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=C3(n,vae);return!i||!i.length?null:Z.createElement(gt,{className:"recharts-label-list"},i.map(function(f,d){var p=tt(s)?r(f,d):Nr(f&&f.payload,s),m=tt(l)?{}:{id:"".concat(l,"-").concat(d)};return Z.createElement(Mr,Ky({},Ge(f,!0),u,m,{parentViewBox:f.parentViewBox,value:p,textBreakAll:c,viewBox:Mr.parseViewBox(tt(o)?f:E3(E3({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}fo.displayName="LabelList";function Cae(t,e){return t?t===!0?Z.createElement(fo,{key:"labelList-implicit",data:e}):Z.isValidElement(t)||Ze(t)?Z.createElement(fo,{key:"labelList-implicit",data:e,content:t}):pd(t)?Z.createElement(fo,Ky({data:e},t,{key:"labelList-implicit"})):null:null}function Aae(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=ti(n,fo).map(function(o,l){return O.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!r)return i;var s=Cae(t.label,e);return[s].concat(xae(i))}fo.renderCallByParent=Aae;function Wh(t){"@babel/helpers - typeof";return Wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wh(t)}function W_(){return W_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},W_.apply(this,arguments)}function A3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function T3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?A3(Object(r),!0).forEach(function(n){Tae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tae(t,e,r){return e=Pae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pae(t){var e=Mae(t,"string");return Wh(e)=="symbol"?e:e+""}function Mae(t,e){if(Wh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rae=function(e,r){var n=mn(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},jg=function(e){var r=e.cx,n=e.cy,i=e.radius,s=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,f=c*(l?1:-1)+i,d=Math.asin(c/f)/Vy,p=u?s:s+o*d,m=Lt(r,n,f,p),x=Lt(r,n,i,p),y=u?s-o*d:s,v=Lt(r,n,f*Math.cos(d*Vy),y);return{center:m,circleTangency:x,lineTangency:v,theta:d}},dz=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.startAngle,l=e.endAngle,c=Rae(o,l),u=o+c,f=Lt(r,n,s,o),d=Lt(r,n,s,u),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var m=Lt(r,n,i,o),x=Lt(r,n,i,u);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else p+="L ".concat(r,",").concat(n," Z");return p},Iae=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,f=e.endAngle,d=mn(f-u),p=jg({cx:r,cy:n,radius:s,angle:u,sign:d,cornerRadius:o,cornerIsExternal:c}),m=p.circleTangency,x=p.lineTangency,y=p.theta,v=jg({cx:r,cy:n,radius:s,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:c}),b=v.circleTangency,w=v.lineTangency,N=v.theta,j=c?Math.abs(u-f):Math.abs(u-f)-y-N;if(j<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):dz({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:u,endAngle:f});var k="M ".concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(j>180),",").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var _=jg({cx:r,cy:n,radius:i,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),E=_.circleTangency,A=_.lineTangency,T=_.theta,M=jg({cx:r,cy:n,radius:i,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),P=M.circleTangency,R=M.lineTangency,L=M.theta,$=c?Math.abs(u-f):Math.abs(u-f)-T-L;if($<0&&o===0)return"".concat(k,"L").concat(r,",").concat(n,"Z");k+="L".concat(R.x,",").concat(R.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,").concat(+($>180),",").concat(+(d>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,"Z")}else k+="L".concat(r,",").concat(n,"Z");return k},Dae={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},fz=function(e){var r=T3(T3({},Dae),e),n=r.cx,i=r.cy,s=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,p=r.className;if(o<s||f===d)return null;var m=it("recharts-sector",p),x=o-s,y=gn(l,x,0,!0),v;return y>0&&Math.abs(f-d)<360?v=Iae({cx:n,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(y,x/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:d}):v=dz({cx:n,cy:i,innerRadius:s,outerRadius:o,startAngle:f,endAngle:d}),Z.createElement("path",W_({},Ge(r,!0),{className:m,d:v,role:"img"}))};function Vh(t){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vh(t)}function V_(){return V_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},V_.apply(this,arguments)}function P3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function M3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P3(Object(r),!0).forEach(function(n){Lae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lae(t,e,r){return e=$ae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $ae(t){var e=Bae(t,"string");return Vh(e)=="symbol"?e:e+""}function Bae(t,e){if(Vh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var R3={curveBasisClosed:oZ,curveBasisOpen:aZ,curveBasis:sZ,curveBumpX:WQ,curveBumpY:VQ,curveLinearClosed:lZ,curveLinear:L0,curveMonotoneX:cZ,curveMonotoneY:uZ,curveNatural:dZ,curveStep:fZ,curveStepAfter:pZ,curveStepBefore:hZ},Sg=function(e){return e.x===+e.x&&e.y===+e.y},Of=function(e){return e.x},Ef=function(e){return e.y},Fae=function(e,r){if(Ze(e))return e;var n="curve".concat(I0(e));return(n==="curveMonotone"||n==="curveBump")&&r?R3["".concat(n).concat(r==="vertical"?"Y":"X")]:R3[n]||L0},qae=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,s=i===void 0?[]:i,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,f=Fae(n,l),d=u?s.filter(function(y){return Sg(y)}):s,p;if(Array.isArray(o)){var m=u?o.filter(function(y){return Sg(y)}):o,x=d.map(function(y,v){return M3(M3({},y),{},{base:m[v]})});return l==="vertical"?p=pg().y(Ef).x1(Of).x0(function(y){return y.base.x}):p=pg().x(Of).y1(Ef).y0(function(y){return y.base.y}),p.defined(Sg).curve(f),p(x)}return l==="vertical"&&Pe(o)?p=pg().y(Ef).x1(Of).x0(o):Pe(o)?p=pg().x(Of).y1(Ef).y0(o):p=cF().x(Of).y(Ef),p.defined(Sg).curve(f),p(d)},Gy=function(e){var r=e.className,n=e.points,i=e.path,s=e.pathRef;if((!n||!n.length)&&!i)return null;var o=n&&n.length?qae(e):i;return Z.createElement("path",V_({},Ge(e,!1),wy(e),{className:it("recharts-curve",r),d:o,ref:s}))},hN={exports:{}},pN,I3;function zae(){if(I3)return pN;I3=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return pN=t,pN}var mN,D3;function Uae(){if(D3)return mN;D3=1;var t=zae();function e(){}function r(){}return r.resetWarningCache=e,mN=function(){function n(o,l,c,u,f,d){if(d!==t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}n.isRequired=n;function i(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:e};return s.PropTypes=s,s},mN}var L3;function Hae(){return L3||(L3=1,hN.exports=Uae()()),hN.exports}var Wae=Hae();const bt=ht(Wae);var Vae=Object.getOwnPropertyNames,Kae=Object.getOwnPropertySymbols,Gae=Object.prototype.hasOwnProperty;function $3(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function Ng(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);var s=i.cache,o=s.get(r),l=s.get(n);if(o&&l)return o===n&&l===r;s.set(r,n),s.set(n,r);var c=t(r,n,i);return s.delete(r),s.delete(n),c}}function B3(t){return Vae(t).concat(Kae(t))}var Yae=Object.hasOwn||function(t,e){return Gae.call(t,e)};function lc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Xae="__v",Jae="__o",Qae="_owner",F3=Object.getOwnPropertyDescriptor,q3=Object.keys;function Zae(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function ele(t,e){return lc(t.getTime(),e.getTime())}function tle(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function rle(t,e){return t===e}function z3(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),s=t.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=e.entries(),f=!1,d=0;(l=u.next())&&!l.done;){if(i[d]){d++;continue}var p=o.value,m=l.value;if(r.equals(p[0],m[0],c,d,t,e,r)&&r.equals(p[1],m[1],p[0],m[0],t,e,r)){f=i[d]=!0;break}d++}if(!f)return!1;c++}return!0}var nle=lc;function ile(t,e,r){var n=q3(t),i=n.length;if(q3(e).length!==i)return!1;for(;i-- >0;)if(!hz(t,e,r,n[i]))return!1;return!0}function Cf(t,e,r){var n=B3(t),i=n.length;if(B3(e).length!==i)return!1;for(var s,o,l;i-- >0;)if(s=n[i],!hz(t,e,r,s)||(o=F3(t,s),l=F3(e,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function sle(t,e){return lc(t.valueOf(),e.valueOf())}function ole(t,e){return t.source===e.source&&t.flags===e.flags}function U3(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),s=t.values(),o,l;(o=s.next())&&!o.done;){for(var c=e.values(),u=!1,f=0;(l=c.next())&&!l.done;){if(!i[f]&&r.equals(o.value,l.value,o.value,l.value,t,e,r)){u=i[f]=!0;break}f++}if(!u)return!1}return!0}function ale(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function lle(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function hz(t,e,r,n){return(n===Qae||n===Jae||n===Xae)&&(t.$$typeof||e.$$typeof)?!0:Yae(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}var cle="[object Arguments]",ule="[object Boolean]",dle="[object Date]",fle="[object Error]",hle="[object Map]",ple="[object Number]",mle="[object Object]",gle="[object RegExp]",yle="[object Set]",vle="[object String]",xle="[object URL]",ble=Array.isArray,H3=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,W3=Object.assign,wle=Object.prototype.toString.call.bind(Object.prototype.toString);function jle(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,f=t.areSetsEqual,d=t.areTypedArraysEqual,p=t.areUrlsEqual;return function(x,y,v){if(x===y)return!0;if(x==null||y==null)return!1;var b=typeof x;if(b!==typeof y)return!1;if(b!=="object")return b==="number"?o(x,y,v):b==="function"?i(x,y,v):!1;var w=x.constructor;if(w!==y.constructor)return!1;if(w===Object)return l(x,y,v);if(ble(x))return e(x,y,v);if(H3!=null&&H3(x))return d(x,y,v);if(w===Date)return r(x,y,v);if(w===RegExp)return u(x,y,v);if(w===Map)return s(x,y,v);if(w===Set)return f(x,y,v);var N=wle(x);return N===dle?r(x,y,v):N===gle?u(x,y,v):N===hle?s(x,y,v):N===yle?f(x,y,v):N===mle?typeof x.then!="function"&&typeof y.then!="function"&&l(x,y,v):N===xle?p(x,y,v):N===fle?n(x,y,v):N===cle?l(x,y,v):N===ule||N===ple||N===vle?c(x,y,v):!1}}function Sle(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,i={areArraysEqual:n?Cf:Zae,areDatesEqual:ele,areErrorsEqual:tle,areFunctionsEqual:rle,areMapsEqual:n?$3(z3,Cf):z3,areNumbersEqual:nle,areObjectsEqual:n?Cf:ile,arePrimitiveWrappersEqual:sle,areRegExpsEqual:ole,areSetsEqual:n?$3(U3,Cf):U3,areTypedArraysEqual:n?Cf:ale,areUrlsEqual:lle};if(r&&(i=W3({},i,r(i))),e){var s=Ng(i.areArraysEqual),o=Ng(i.areMapsEqual),l=Ng(i.areObjectsEqual),c=Ng(i.areSetsEqual);i=W3({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function Nle(t){return function(e,r,n,i,s,o,l){return t(e,r,l)}}function kle(t){var e=t.circular,r=t.comparator,n=t.createState,i=t.equals,s=t.strict;if(n)return function(c,u){var f=n(),d=f.cache,p=d===void 0?e?new WeakMap:void 0:d,m=f.meta;return r(c,u,{cache:p,equals:i,meta:m,strict:s})};if(e)return function(c,u){return r(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,u){return r(c,u,o)}}var _le=Ua();Ua({strict:!0});Ua({circular:!0});Ua({circular:!0,strict:!0});Ua({createInternalComparator:function(){return lc}});Ua({strict:!0,createInternalComparator:function(){return lc}});Ua({circular:!0,createInternalComparator:function(){return lc}});Ua({circular:!0,createInternalComparator:function(){return lc},strict:!0});function Ua(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,i=t.createState,s=t.strict,o=s===void 0?!1:s,l=Sle(t),c=jle(l),u=n?n(c):Nle(c);return kle({circular:r,comparator:c,createState:i,equals:u,strict:o})}function Ole(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function V3(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(s){r<0&&(r=s),s-r>e?(t(s),r=-1):Ole(i)};requestAnimationFrame(n)}function K_(t){"@babel/helpers - typeof";return K_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K_(t)}function Ele(t){return Ple(t)||Tle(t)||Ale(t)||Cle()}function Cle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ale(t,e){if(t){if(typeof t=="string")return K3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K3(t,e)}}function K3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ple(t){if(Array.isArray(t))return t}function Mle(){var t={},e=function(){return null},r=!1,n=function i(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,l=Ele(o),c=l[0],u=l.slice(1);if(typeof c=="number"){V3(i.bind(null,u),c);return}i(c),V3(i.bind(null,u));return}K_(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,n(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function Kh(t){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kh(t)}function G3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Y3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G3(Object(r),!0).forEach(function(n){pz(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pz(t,e,r){return e=Rle(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rle(t){var e=Ile(t,"string");return Kh(e)==="symbol"?e:String(e)}function Ile(t,e){if(Kh(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dle=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(s){return i.includes(s)})})},Lle=function(e){return e},$le=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},rh=function(e,r){return Object.keys(r).reduce(function(n,i){return Y3(Y3({},n),{},pz({},i,e(i,r[i])))},{})},X3=function(e,r,n){return e.map(function(i){return"".concat($le(i)," ").concat(r,"ms ").concat(n)}).join(",")};function Ble(t,e){return zle(t)||qle(t,e)||mz(t,e)||Fle()}function Fle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qle(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function zle(t){if(Array.isArray(t))return t}function Ule(t){return Vle(t)||Wle(t)||mz(t)||Hle()}function Hle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mz(t,e){if(t){if(typeof t=="string")return G_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G_(t,e)}}function Wle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vle(t){if(Array.isArray(t))return G_(t)}function G_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Yy=1e-4,gz=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},yz=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},J3=function(e,r){return function(n){var i=gz(e,r);return yz(i,n)}},Kle=function(e,r){return function(n){var i=gz(e,r),s=[].concat(Ule(i.map(function(o,l){return o*l}).slice(1)),[0]);return yz(s,n)}},Q3=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],s=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,s=0,o=1,l=1;break;case"ease":i=.25,s=.1,o=.25,l=1;break;case"ease-in":i=.42,s=0,o=1,l=1;break;case"ease-out":i=.42,s=0,o=.58,l=1;break;case"ease-in-out":i=0,s=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),f=Ble(u,4);i=f[0],s=f[1],o=f[2],l=f[3]}}}var d=J3(i,o),p=J3(s,l),m=Kle(i,o),x=function(b){return b>1?1:b<0?0:b},y=function(b){for(var w=b>1?1:b,N=w,j=0;j<8;++j){var k=d(N)-w,_=m(N);if(Math.abs(k-w)<Yy||_<Yy)return p(N);N=x(N-k/_)}return p(N)};return y.isStepper=!1,y},Gle=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,s=i===void 0?8:i,o=e.dt,l=o===void 0?17:o,c=function(f,d,p){var m=-(f-d)*n,x=p*s,y=p+(m-x)*l/1e3,v=p*l/1e3+f;return Math.abs(v-d)<Yy&&Math.abs(y)<Yy?[d,0]:[v,y]};return c.isStepper=!0,c.dt=l,c},Yle=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Q3(i);case"spring":return Gle();default:if(i.split("(")[0]==="cubic-bezier")return Q3(i)}return typeof i=="function"?i:null};function Gh(t){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gh(t)}function Z3(t){return Qle(t)||Jle(t)||vz(t)||Xle()}function Xle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qle(t){if(Array.isArray(t))return X_(t)}function eL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ur(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eL(Object(r),!0).forEach(function(n){Y_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Y_(t,e,r){return e=Zle(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zle(t){var e=ece(t,"string");return Gh(e)==="symbol"?e:String(e)}function ece(t,e){if(Gh(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tce(t,e){return ice(t)||nce(t,e)||vz(t,e)||rce()}function rce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vz(t,e){if(t){if(typeof t=="string")return X_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X_(t,e)}}function X_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nce(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function ice(t){if(Array.isArray(t))return t}var Xy=function(e,r,n){return e+(r-e)*n},J_=function(e){var r=e.from,n=e.to;return r!==n},sce=function t(e,r,n){var i=rh(function(s,o){if(J_(o)){var l=e(o.from,o.to,o.velocity),c=tce(l,2),u=c[0],f=c[1];return Ur(Ur({},o),{},{from:u,velocity:f})}return o},r);return n<1?rh(function(s,o){return J_(o)?Ur(Ur({},o),{},{velocity:Xy(o.velocity,i[s].velocity,n),from:Xy(o.from,i[s].from,n)}):o},r):t(e,i,n-1)};const oce=function(t,e,r,n,i){var s=Dle(t,e),o=s.reduce(function(v,b){return Ur(Ur({},v),{},Y_({},b,[t[b],e[b]]))},{}),l=s.reduce(function(v,b){return Ur(Ur({},v),{},Y_({},b,{from:t[b],velocity:0,to:e[b]}))},{}),c=-1,u,f,d=function(){return null},p=function(){return rh(function(b,w){return w.from},l)},m=function(){return!Object.values(l).filter(J_).length},x=function(b){u||(u=b);var w=b-u,N=w/r.dt;l=sce(r,l,N),i(Ur(Ur(Ur({},t),e),p())),u=b,m()||(c=requestAnimationFrame(d))},y=function(b){f||(f=b);var w=(b-f)/n,N=rh(function(k,_){return Xy.apply(void 0,Z3(_).concat([r(w)]))},o);if(i(Ur(Ur(Ur({},t),e),N)),w<1)c=requestAnimationFrame(d);else{var j=rh(function(k,_){return Xy.apply(void 0,Z3(_).concat([r(1)]))},o);i(Ur(Ur(Ur({},t),e),j))}};return d=r.isStepper?x:y,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function $u(t){"@babel/helpers - typeof";return $u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$u(t)}var ace=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function lce(t,e){if(t==null)return{};var r=cce(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function cce(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function gN(t){return hce(t)||fce(t)||dce(t)||uce()}function uce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dce(t,e){if(t){if(typeof t=="string")return Q_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q_(t,e)}}function fce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hce(t){if(Array.isArray(t))return Q_(t)}function Q_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function tL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tL(Object(r),!0).forEach(function(n){Bf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bf(t,e,r){return e=xz(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xz(n.key),n)}}function gce(t,e,r){return e&&mce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xz(t){var e=yce(t,"string");return $u(e)==="symbol"?e:String(e)}function yce(t,e){if($u(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($u(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z_(t,e)}function Z_(t,e){return Z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Z_(t,e)}function xce(t){var e=bce();return function(){var n=Jy(t),i;if(e){var s=Jy(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return e2(this,i)}}function e2(t,e){if(e&&($u(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t2(t)}function t2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jy(t){return Jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jy(t)}var As=function(t){vce(r,t);var e=xce(r);function r(n,i){var s;pce(this,r),s=e.call(this,n,i);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,f=o.to,d=o.steps,p=o.children,m=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(t2(s)),s.changeStyle=s.changeStyle.bind(t2(s)),!l||m<=0)return s.state={style:{}},typeof p=="function"&&(s.state={style:f}),e2(s);if(d&&d.length)s.state={style:d[0].style};else if(u){if(typeof p=="function")return s.state={style:u},e2(s);s.state={style:c?Bf({},c,u):u}}else s.state={style:{}};return s}return gce(r,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,f=s.to,d=s.from,p=this.state.style;if(l){if(!o){var m={style:c?Bf({},c,f):f};this.state&&p&&(c&&p[c]!==f||!c&&p!==f)&&this.setState(m);return}if(!(_le(i.to,f)&&i.canBegin&&i.isActive)){var x=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=x||u?d:i.to;if(this.state&&p){var v={style:c?Bf({},c,y):y};(c&&p[c]!==y||!c&&p!==y)&&this.setState(v)}this.runAnimation(Wi(Wi({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,l=i.to,c=i.duration,u=i.easing,f=i.begin,d=i.onAnimationEnd,p=i.onAnimationStart,m=oce(o,l,Yle(u),c,this.changeStyle),x=function(){s.stopJSAnimation=m()};this.manager.start([p,f,x,c,d])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,l=i.begin,c=i.onAnimationStart,u=o[0],f=u.style,d=u.duration,p=d===void 0?0:d,m=function(y,v,b){if(b===0)return y;var w=v.duration,N=v.easing,j=N===void 0?"ease":N,k=v.style,_=v.properties,E=v.onAnimationEnd,A=b>0?o[b-1]:v,T=_||Object.keys(k);if(typeof j=="function"||j==="spring")return[].concat(gN(y),[s.runJSAnimation.bind(s,{from:A.style,to:k,duration:w,easing:j}),w]);var M=X3(T,w,j),P=Wi(Wi(Wi({},A.style),k),{},{transition:M});return[].concat(gN(y),[P,w,E]).filter(Lle)};return this.manager.start([c].concat(gN(o.reduce(m,[f,Math.max(p,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Mle());var s=i.begin,o=i.duration,l=i.attributeName,c=i.to,u=i.easing,f=i.onAnimationStart,d=i.onAnimationEnd,p=i.steps,m=i.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var y=l?Bf({},l,c):c,v=X3(Object.keys(y),o,u);x.start([f,s,Wi(Wi({},y),{},{transition:v}),o,d])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=lce(i,ace),u=O.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!l||u===0||o<=0)return s;var d=function(m){var x=m.props,y=x.style,v=y===void 0?{}:y,b=x.className,w=O.cloneElement(m,Wi(Wi({},c),{},{style:Wi(Wi({},v),f),className:b}));return w};return u===1?d(O.Children.only(s)):Z.createElement("div",null,O.Children.map(s,function(p){return d(p)}))}}]),r}(O.PureComponent);As.displayName="Animate";As.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};As.propTypes={from:bt.oneOfType([bt.object,bt.string]),to:bt.oneOfType([bt.object,bt.string]),attributeName:bt.string,duration:bt.number,begin:bt.number,easing:bt.oneOfType([bt.string,bt.func]),steps:bt.arrayOf(bt.shape({duration:bt.number.isRequired,style:bt.object.isRequired,easing:bt.oneOfType([bt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),bt.func]),properties:bt.arrayOf("string"),onAnimationEnd:bt.func})),children:bt.oneOfType([bt.node,bt.func]),isActive:bt.bool,canBegin:bt.bool,onAnimationEnd:bt.func,shouldReAnimate:bt.bool,onAnimationStart:bt.func,onAnimationReStart:bt.func};function Yh(t){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yh(t)}function Qy(){return Qy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qy.apply(this,arguments)}function wce(t,e){return kce(t)||Nce(t,e)||Sce(t,e)||jce()}function jce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sce(t,e){if(t){if(typeof t=="string")return rL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rL(t,e)}}function rL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Nce(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function kce(t){if(Array.isArray(t))return t}function nL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function iL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nL(Object(r),!0).forEach(function(n){_ce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _ce(t,e,r){return e=Oce(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oce(t){var e=Ece(t,"string");return Yh(e)=="symbol"?e:e+""}function Ece(t,e){if(Yh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sL=function(e,r,n,i,s){var o=Math.min(Math.abs(n)/2,Math.abs(i)/2),l=i>=0?1:-1,c=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0,f;if(o>0&&s instanceof Array){for(var d=[0,0,0,0],p=0,m=4;p<m;p++)d[p]=s[p]>o?o:s[p];f="M".concat(e,",").concat(r+l*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(e+c*d[0],",").concat(r)),f+="L ".concat(e+n-c*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(r+l*d[1])),f+="L ".concat(e+n,",").concat(r+i-l*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(e+n-c*d[2],",").concat(r+i)),f+="L ".concat(e+c*d[3],",").concat(r+i),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(r+i-l*d[3])),f+="Z"}else if(o>0&&s===+s&&s>0){var x=Math.min(o,s);f="M ".concat(e,",").concat(r+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e+c*x,",").concat(r,`
            L `).concat(e+n-c*x,",").concat(r,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e+n,",").concat(r+l*x,`
            L `).concat(e+n,",").concat(r+i-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e+n-c*x,",").concat(r+i,`
            L `).concat(e+c*x,",").concat(r+i,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e,",").concat(r+i-l*x," Z")}else f="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return f},Cce=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,s=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),f=Math.max(s,s+l),d=Math.min(o,o+c),p=Math.max(o,o+c);return n>=u&&n<=f&&i>=d&&i<=p}return!1},Ace={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},TE=function(e){var r=iL(iL({},Ace),e),n=O.useRef(),i=O.useState(-1),s=wce(i,2),o=s[0],l=s[1];O.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&l(j)}catch{}},[]);var c=r.x,u=r.y,f=r.width,d=r.height,p=r.radius,m=r.className,x=r.animationEasing,y=r.animationDuration,v=r.animationBegin,b=r.isAnimationActive,w=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var N=it("recharts-rectangle",m);return w?Z.createElement(As,{canBegin:o>0,from:{width:f,height:d,x:c,y:u},to:{width:f,height:d,x:c,y:u},duration:y,animationEasing:x,isActive:w},function(j){var k=j.width,_=j.height,E=j.x,A=j.y;return Z.createElement(As,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:y,isActive:b,easing:x},Z.createElement("path",Qy({},Ge(r,!0),{className:N,d:sL(E,A,k,_,p),ref:n})))}):Z.createElement("path",Qy({},Ge(r,!0),{className:N,d:sL(c,u,f,d,p)}))},Tce=["points","className","baseLinePoints","connectNulls"];function uu(){return uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uu.apply(this,arguments)}function Pce(t,e){if(t==null)return{};var r=Mce(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Mce(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function oL(t){return Lce(t)||Dce(t)||Ice(t)||Rce()}function Rce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ice(t,e){if(t){if(typeof t=="string")return r2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r2(t,e)}}function Dce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Lce(t){if(Array.isArray(t))return r2(t)}function r2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var aL=function(e){return e&&e.x===+e.x&&e.y===+e.y},$ce=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){aL(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),aL(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},nh=function(e,r){var n=$ce(e);r&&(n=[n.reduce(function(s,o){return[].concat(oL(s),oL(o))},[])]);var i=n.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},Bce=function(e,r,n){var i=nh(e,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(nh(r.reverse(),n).slice(1))},Fce=function(e){var r=e.points,n=e.className,i=e.baseLinePoints,s=e.connectNulls,o=Pce(e,Tce);if(!r||!r.length)return null;var l=it("recharts-polygon",n);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",u=Bce(r,i,s);return Z.createElement("g",{className:l},Z.createElement("path",uu({},Ge(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?Z.createElement("path",uu({},Ge(o,!0),{fill:"none",d:nh(r,s)})):null,c?Z.createElement("path",uu({},Ge(o,!0),{fill:"none",d:nh(i,s)})):null)}var f=nh(r,s);return Z.createElement("path",uu({},Ge(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function n2(){return n2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},n2.apply(this,arguments)}var ex=function(e){var r=e.cx,n=e.cy,i=e.r,s=e.className,o=it("recharts-dot",s);return r===+r&&n===+n&&i===+i?Z.createElement("circle",n2({},Ge(e,!1),wy(e),{className:o,cx:r,cy:n,r:i})):null};function Xh(t){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xh(t)}var qce=["x","y","top","left","width","height","className"];function i2(){return i2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i2.apply(this,arguments)}function lL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zce(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lL(Object(r),!0).forEach(function(n){Uce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Uce(t,e,r){return e=Hce(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hce(t){var e=Wce(t,"string");return Xh(e)=="symbol"?e:e+""}function Wce(t,e){if(Xh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vce(t,e){if(t==null)return{};var r=Kce(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Kce(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Gce=function(e,r,n,i,s,o){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(o,",").concat(r,"h").concat(n)},Yce=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,s=i===void 0?0:i,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,f=e.width,d=f===void 0?0:f,p=e.height,m=p===void 0?0:p,x=e.className,y=Vce(e,qce),v=zce({x:n,y:s,top:l,left:u,width:d,height:m},y);return!Pe(n)||!Pe(s)||!Pe(d)||!Pe(m)||!Pe(l)||!Pe(u)?null:Z.createElement("path",i2({},Ge(v,!0),{className:it("recharts-cross",x),d:Gce(n,s,d,m,l,u)}))},yN,cL;function Xce(){if(cL)return yN;cL=1;var t=Y0(),e=Mq(),r=Ds();function n(i,s){return i&&i.length?t(i,r(s,2),e):void 0}return yN=n,yN}var Jce=Xce();const Qce=ht(Jce);var vN,uL;function Zce(){if(uL)return vN;uL=1;var t=Y0(),e=Ds(),r=Rq();function n(i,s){return i&&i.length?t(i,e(s,2),r):void 0}return vN=n,vN}var eue=Zce();const tue=ht(eue);var rue=["cx","cy","angle","ticks","axisLine"],nue=["ticks","tick","angle","tickFormatter","stroke"];function Bu(t){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bu(t)}function ih(){return ih=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ih.apply(this,arguments)}function dL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function dl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dL(Object(r),!0).forEach(function(n){tx(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fL(t,e){if(t==null)return{};var r=iue(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function iue(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function sue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wz(n.key),n)}}function oue(t,e,r){return e&&hL(t.prototype,e),r&&hL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function aue(t,e,r){return e=Zy(e),lue(t,bz()?Reflect.construct(e,r||[],Zy(t).constructor):e.apply(t,r))}function lue(t,e){if(e&&(Bu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cue(t)}function cue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bz=function(){return!!t})()}function Zy(t){return Zy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zy(t)}function uue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s2(t,e)}function s2(t,e){return s2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},s2(t,e)}function tx(t,e,r){return e=wz(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wz(t){var e=due(t,"string");return Bu(e)=="symbol"?e:e+""}function due(t,e){if(Bu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rx=function(t){function e(){return sue(this,e),aue(this,e,arguments)}return uue(e,t),oue(e,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return Lt(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,s=n.cy,o=n.angle,l=n.ticks,c=Qce(l,function(f){return f.coordinate||0}),u=tue(l,function(f){return f.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=fL(n,rue),f=l.reduce(function(x,y){return[Math.min(x[0],y.coordinate),Math.max(x[1],y.coordinate)]},[1/0,-1/0]),d=Lt(i,s,f[0],o),p=Lt(i,s,f[1],o),m=dl(dl(dl({},Ge(u,!1)),{},{fill:"none"},Ge(c,!1)),{},{x1:d.x,y1:d.y,x2:p.x,y2:p.y});return Z.createElement("line",ih({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,u=i.stroke,f=fL(i,nue),d=this.getTickTextAnchor(),p=Ge(f,!1),m=Ge(o,!1),x=s.map(function(y,v){var b=n.getTickValueCoord(y),w=dl(dl(dl(dl({textAnchor:d,transform:"rotate(".concat(90-l,", ").concat(b.x,", ").concat(b.y,")")},p),{},{stroke:"none",fill:u},m),{},{index:v},b),{},{payload:y});return Z.createElement(gt,ih({className:it("recharts-polar-radius-axis-tick",cz(o)),key:"tick-".concat(y.coordinate)},zl(n.props,y,v)),e.renderTickItem(o,w,c?c(y.value,v):y.value))});return Z.createElement(gt,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.axisLine,o=n.tick;return!i||!i.length?null:Z.createElement(gt,{className:it("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Mr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,s){var o;return Z.isValidElement(n)?o=Z.cloneElement(n,i):Ze(n)?o=n(i):o=Z.createElement(Ul,ih({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(O.PureComponent);tx(rx,"displayName","PolarRadiusAxis");tx(rx,"axisType","radiusAxis");tx(rx,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Fu(t){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fu(t)}function jl(){return jl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jl.apply(this,arguments)}function pL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pL(Object(r),!0).forEach(function(n){nx(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sz(n.key),n)}}function hue(t,e,r){return e&&mL(t.prototype,e),r&&mL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function pue(t,e,r){return e=ev(e),mue(t,jz()?Reflect.construct(e,r||[],ev(t).constructor):e.apply(t,r))}function mue(t,e){if(e&&(Fu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gue(t)}function gue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jz=function(){return!!t})()}function ev(t){return ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ev(t)}function yue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o2(t,e)}function o2(t,e){return o2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},o2(t,e)}function nx(t,e,r){return e=Sz(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sz(t){var e=vue(t,"string");return Fu(e)=="symbol"?e:e+""}function vue(t,e){if(Fu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xue=Math.PI/180,bue=1e-5,ix=function(t){function e(){return fue(this,e),pue(this,e,arguments)}return yue(e,t),hue(e,[{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.cx,o=i.cy,l=i.radius,c=i.orientation,u=i.tickSize,f=u||8,d=Lt(s,o,l,n.coordinate),p=Lt(s,o,l+(c==="inner"?-1:1)*f,n.coordinate);return{x1:d.x,y1:d.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,s=Math.cos(-n.coordinate*xue),o;return s>bue?o=i==="outer"?"start":"end":s<-1e-5?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=fl(fl({},Ge(this.props,!1)),{},{fill:"none"},Ge(l,!1));if(c==="circle")return Z.createElement(ex,jl({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:o}));var f=this.props.ticks,d=f.map(function(p){return Lt(i,s,o,p.coordinate)});return Z.createElement(Fce,jl({className:"recharts-polar-angle-axis-line"},u,{points:d}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,u=i.stroke,f=Ge(this.props,!1),d=Ge(o,!1),p=fl(fl({},f),{},{fill:"none"},Ge(l,!1)),m=s.map(function(x,y){var v=n.getTickLineCoord(x),b=n.getTickTextAnchor(x),w=fl(fl(fl({textAnchor:b},f),{},{stroke:"none",fill:u},d),{},{index:y,payload:x,x:v.x2,y:v.y2});return Z.createElement(gt,jl({className:it("recharts-polar-angle-axis-tick",cz(o)),key:"tick-".concat(x.coordinate)},zl(n.props,x,y)),l&&Z.createElement("line",jl({className:"recharts-polar-angle-axis-tick-line"},p,v)),o&&e.renderTickItem(o,w,c?c(x.value,y):x.value))});return Z.createElement(gt,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.radius,o=n.axisLine;return s<=0||!i||!i.length?null:Z.createElement(gt,{className:it("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,s){var o;return Z.isValidElement(n)?o=Z.cloneElement(n,i):Ze(n)?o=n(i):o=Z.createElement(Ul,jl({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(O.PureComponent);nx(ix,"displayName","PolarAngleAxis");nx(ix,"axisType","angleAxis");nx(ix,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var xN,gL;function wue(){if(gL)return xN;gL=1;var t=PF(),e=t(Object.getPrototypeOf,Object);return xN=e,xN}var bN,yL;function jue(){if(yL)return bN;yL=1;var t=_o(),e=wue(),r=Oo(),n="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,c=o.call(Object);function u(f){if(!r(f)||t(f)!=n)return!1;var d=e(f);if(d===null)return!0;var p=l.call(d,"constructor")&&d.constructor;return typeof p=="function"&&p instanceof p&&o.call(p)==c}return bN=u,bN}var Sue=jue();const Nue=ht(Sue);var wN,vL;function kue(){if(vL)return wN;vL=1;var t=_o(),e=Oo(),r="[object Boolean]";function n(i){return i===!0||i===!1||e(i)&&t(i)==r}return wN=n,wN}var _ue=kue();const Oue=ht(_ue);function Jh(t){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(t)}function tv(){return tv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tv.apply(this,arguments)}function Eue(t,e){return Pue(t)||Tue(t,e)||Aue(t,e)||Cue()}function Cue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aue(t,e){if(t){if(typeof t=="string")return xL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xL(t,e)}}function xL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tue(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Pue(t){if(Array.isArray(t))return t}function bL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bL(Object(r),!0).forEach(function(n){Mue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mue(t,e,r){return e=Rue(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rue(t){var e=Iue(t,"string");return Jh(e)=="symbol"?e:e+""}function Iue(t,e){if(Jh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jL=function(e,r,n,i,s){var o=n-i,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+n,",").concat(r),l+="L ".concat(e+n-o/2,",").concat(r+s),l+="L ".concat(e+n-o/2-i,",").concat(r+s),l+="L ".concat(e,",").concat(r," Z"),l},Due={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Lue=function(e){var r=wL(wL({},Due),e),n=O.useRef(),i=O.useState(-1),s=Eue(i,2),o=s[0],l=s[1];O.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var N=n.current.getTotalLength();N&&l(N)}catch{}},[]);var c=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,p=r.height,m=r.className,x=r.animationEasing,y=r.animationDuration,v=r.animationBegin,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||p!==+p||f===0&&d===0||p===0)return null;var w=it("recharts-trapezoid",m);return b?Z.createElement(As,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:u},to:{upperWidth:f,lowerWidth:d,height:p,x:c,y:u},duration:y,animationEasing:x,isActive:b},function(N){var j=N.upperWidth,k=N.lowerWidth,_=N.height,E=N.x,A=N.y;return Z.createElement(As,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:y,easing:x},Z.createElement("path",tv({},Ge(r,!0),{className:w,d:jL(E,A,j,k,_),ref:n})))}):Z.createElement("g",null,Z.createElement("path",tv({},Ge(r,!0),{className:w,d:jL(c,u,f,d,p)})))},$ue=["option","shapeType","propTransformer","activeClassName","isActive"];function Qh(t){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qh(t)}function Bue(t,e){if(t==null)return{};var r=Fue(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Fue(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function SL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function rv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SL(Object(r),!0).forEach(function(n){que(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function que(t,e,r){return e=zue(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zue(t){var e=Uue(t,"string");return Qh(e)=="symbol"?e:e+""}function Uue(t,e){if(Qh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hue(t,e){return rv(rv({},e),t)}function Wue(t,e){return t==="symbols"}function NL(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return Z.createElement(TE,r);case"trapezoid":return Z.createElement(Lue,r);case"sector":return Z.createElement(fz,r);case"symbols":if(Wue(e))return Z.createElement(XO,r);break;default:return null}}function Vue(t){return O.isValidElement(t)?t.props:t}function Nz(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?Hue:n,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,l=t.isActive,c=Bue(t,$ue),u;if(O.isValidElement(e))u=O.cloneElement(e,rv(rv({},c),Vue(e)));else if(Ze(e))u=e(c);else if(Nue(e)&&!Oue(e)){var f=i(e,c);u=Z.createElement(NL,{shapeType:r,elementProps:f})}else{var d=c;u=Z.createElement(NL,{shapeType:r,elementProps:d})}return l?Z.createElement(gt,{className:o},u):u}function sx(t,e){return e!=null&&"trapezoids"in t.props}function ox(t,e){return e!=null&&"sectors"in t.props}function Zh(t,e){return e!=null&&"points"in t.props}function Kue(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,s=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&s}function Gue(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function Yue(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function Xue(t,e){var r;return sx(t,e)?r=Kue:ox(t,e)?r=Gue:Zh(t,e)&&(r=Yue),r}function Jue(t,e){var r;return sx(t,e)?r="trapezoids":ox(t,e)?r="sectors":Zh(t,e)&&(r="points"),r}function Que(t,e){if(sx(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(ox(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Zh(t,e)?e.payload:{}}function Zue(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=Jue(r,e),s=Que(r,e),o=n.filter(function(c,u){var f=$p(s,c),d=r.props[i].filter(function(x){var y=Xue(r,e);return y(x,e)}),p=r.props[i].indexOf(d[d.length-1]),m=u===p;return f&&m}),l=n.indexOf(o[o.length-1]);return l}var Qg;function qu(t){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qu(t)}function du(){return du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},du.apply(this,arguments)}function kL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function It(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kL(Object(r),!0).forEach(function(n){Ni(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ede(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_z(n.key),n)}}function tde(t,e,r){return e&&_L(t.prototype,e),r&&_L(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rde(t,e,r){return e=nv(e),nde(t,kz()?Reflect.construct(e,r||[],nv(t).constructor):e.apply(t,r))}function nde(t,e){if(e&&(qu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ide(t)}function ide(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kz=function(){return!!t})()}function nv(t){return nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nv(t)}function sde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a2(t,e)}function a2(t,e){return a2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},a2(t,e)}function Ni(t,e,r){return e=_z(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _z(t){var e=ode(t,"string");return qu(e)=="symbol"?e:e+""}function ode(t,e){if(qu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Co=function(t){function e(r){var n;return ede(this,e),n=rde(this,e,[r]),Ni(n,"pieRef",null),Ni(n,"sectorRefs",[]),Ni(n,"id",md("recharts-pie-")),Ni(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ze(i)&&i()}),Ni(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ze(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return sde(e,t),tde(e,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,u=s.valueKey,f=Ge(this.props,!1),d=Ge(o,!1),p=Ge(l,!1),m=o&&o.offsetRadius||20,x=n.map(function(y,v){var b=(y.startAngle+y.endAngle)/2,w=Lt(y.cx,y.cy,y.outerRadius+m,b),N=It(It(It(It({},f),y),{},{stroke:"none"},d),{},{index:v,textAnchor:e.getTextAnchor(w.x,y.cx)},w),j=It(It(It(It({},f),y),{},{fill:"none",stroke:y.fill},p),{},{index:v,points:[Lt(y.cx,y.cy,y.outerRadius,b),w]}),k=c;return tt(c)&&tt(u)?k="value":tt(c)&&(k=u),Z.createElement(gt,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(v)},l&&e.renderLabelLineItem(l,j,"line"),e.renderLabelItem(o,N,Nr(y,k)))});return Z.createElement(gt,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(n){var i=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return n.map(function(u,f){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var d=i.isActiveIndex(f),p=c&&i.hasActiveIndex()?c:null,m=d?o:p,x=It(It({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return Z.createElement(gt,du({ref:function(v){v&&!i.sectorRefs.includes(v)&&i.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},zl(i.props,u,f),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(f)}),Z.createElement(Nz,du({option:m,isActive:d,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,s=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,f=i.animationId,d=this.state,p=d.prevSectors,m=d.prevIsAnimationActive;return Z.createElement(As,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var y=x.t,v=[],b=s&&s[0],w=b.startAngle;return s.forEach(function(N,j){var k=p&&p[j],_=j>0?ei(N,"paddingAngle",0):0;if(k){var E=Gn(k.endAngle-k.startAngle,N.endAngle-N.startAngle),A=It(It({},N),{},{startAngle:w+_,endAngle:w+E(y)+_});v.push(A),w=A.endAngle}else{var T=N.endAngle,M=N.startAngle,P=Gn(0,T-M),R=P(y),L=It(It({},N),{},{startAngle:w+_,endAngle:w+R+_});v.push(L),w=L.endAngle}}),Z.createElement(gt,null,n.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,s=n.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!$p(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,s=i.hide,o=i.sectors,l=i.className,c=i.label,u=i.cx,f=i.cy,d=i.innerRadius,p=i.outerRadius,m=i.isAnimationActive,x=this.state.isAnimationFinished;if(s||!o||!o.length||!Pe(u)||!Pe(f)||!Pe(d)||!Pe(p))return null;var y=it("recharts-pie",l);return Z.createElement(gt,{tabIndex:this.props.rootTabIndex,className:y,ref:function(b){n.pieRef=b}},this.renderSectors(),c&&this.renderLabels(o),Mr.renderCallByParent(this.props,null,!1),(!m||x)&&fo.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,s){if(Z.isValidElement(n))return Z.cloneElement(n,i);if(Ze(n))return n(i);var o=it("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return Z.createElement(Gy,du({},i,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,i,s){if(Z.isValidElement(n))return Z.cloneElement(n,i);var o=s;if(Ze(n)&&(o=n(i),Z.isValidElement(o)))return o;var l=it("recharts-pie-label-text",typeof n!="boolean"&&!Ze(n)?n.className:"");return Z.createElement(Ul,du({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(O.PureComponent);Qg=Co;Ni(Co,"displayName","Pie");Ni(Co,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!sc.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ni(Co,"parseDeltaAngle",function(t,e){var r=mn(e-t),n=Math.min(Math.abs(e-t),360);return r*n});Ni(Co,"getRealPieData",function(t){var e=t.data,r=t.children,n=Ge(t,!1),i=ti(r,z0);return e&&e.length?e.map(function(s,o){return It(It(It({payload:s},n),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return It(It({},n),s.props)}):[]});Ni(Co,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,i=e.width,s=e.height,o=lz(i,s),l=n+gn(t.cx,i,i/2),c=r+gn(t.cy,s,s/2),u=gn(t.innerRadius,o,0),f=gn(t.outerRadius,o,o*.8),d=t.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:f,maxRadius:d}});Ni(Co,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?It(It({},e.type.defaultProps),e.props):e.props,i=Qg.getRealPieData(n);if(!i||!i.length)return null;var s=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,f=n.nameKey,d=n.valueKey,p=n.tooltipType,m=Math.abs(n.minAngle),x=Qg.parseCoordinateOfPie(n,r),y=Qg.parseDeltaAngle(o,l),v=Math.abs(y),b=u;tt(u)&&tt(d)?(ts(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):tt(u)&&(ts(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=d);var w=i.filter(function(A){return Nr(A,b,0)!==0}).length,N=(v>=360?w:w-1)*c,j=v-w*m-N,k=i.reduce(function(A,T){var M=Nr(T,b,0);return A+(Pe(M)?M:0)},0),_;if(k>0){var E;_=i.map(function(A,T){var M=Nr(A,b,0),P=Nr(A,f,T),R=(Pe(M)?M:0)/k,L;T?L=E.endAngle+mn(y)*c*(M!==0?1:0):L=o;var $=L+mn(y)*((M!==0?m:0)+R*j),F=(L+$)/2,z=(x.innerRadius+x.outerRadius)/2,W=[{name:P,value:M,payload:A,dataKey:b,type:p}],K=Lt(x.cx,x.cy,z,F);return E=It(It(It({percent:R,cornerRadius:s,name:P,tooltipPayload:W,midAngle:F,middleRadius:z,tooltipPosition:K},A),x),{},{value:Nr(A,b),startAngle:L,endAngle:$,payload:A,paddingAngle:mn(y)*c}),E})}return It(It({},x),{},{sectors:_,data:i})});var jN,OL;function ade(){if(OL)return jN;OL=1;var t=Math.ceil,e=Math.max;function r(n,i,s,o){for(var l=-1,c=e(t((i-n)/(s||1)),0),u=Array(c);c--;)u[o?c:++l]=n,n+=s;return u}return jN=r,jN}var SN,EL;function Oz(){if(EL)return SN;EL=1;var t=GF(),e=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-1/0){var s=i<0?-1:1;return s*r}return i===i?i:0}return SN=n,SN}var NN,CL;function lde(){if(CL)return NN;CL=1;var t=ade(),e=q0(),r=Oz();function n(i){return function(s,o,l){return l&&typeof l!="number"&&e(s,o,l)&&(o=l=void 0),s=r(s),o===void 0?(o=s,s=0):o=r(o),l=l===void 0?s<o?1:-1:r(l),t(s,o,l,i)}}return NN=n,NN}var kN,AL;function cde(){if(AL)return kN;AL=1;var t=lde(),e=t();return kN=e,kN}var ude=cde();const iv=ht(ude);function ep(t){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ep(t)}function TL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function PL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TL(Object(r),!0).forEach(function(n){Ez(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ez(t,e,r){return e=dde(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dde(t){var e=fde(t,"string");return ep(e)=="symbol"?e:e+""}function fde(t,e){if(ep(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hde=["Webkit","Moz","O","ms"],pde=function(e,r){var n=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=hde.reduce(function(s,o){return PL(PL({},s),{},Ez({},o+n,r))},{});return i[e]=r,i};function zu(t){"@babel/helpers - typeof";return zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zu(t)}function sv(){return sv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sv.apply(this,arguments)}function ML(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _N(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ML(Object(r),!0).forEach(function(n){Wn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ML(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Az(n.key),n)}}function gde(t,e,r){return e&&RL(t.prototype,e),r&&RL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function yde(t,e,r){return e=ov(e),vde(t,Cz()?Reflect.construct(e,r||[],ov(t).constructor):e.apply(t,r))}function vde(t,e){if(e&&(zu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xde(t)}function xde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cz=function(){return!!t})()}function ov(t){return ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ov(t)}function bde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l2(t,e)}function l2(t,e){return l2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},l2(t,e)}function Wn(t,e,r){return e=Az(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Az(t){var e=wde(t,"string");return zu(e)=="symbol"?e:e+""}function wde(t,e){if(zu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var jde=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,s=e.x,o=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=eh().domain(iv(0,c)).range([s,s+o-l]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(i),scale:u,scaleValues:f}},IL=function(e){return e.changedTouches&&!!e.changedTouches.length},Uu=function(t){function e(r){var n;return mde(this,e),n=yde(this,e,[r]),Wn(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),Wn(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),Wn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,s=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:s,startIndex:l})}),n.detachDragEndListener()}),Wn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Wn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Wn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Wn(n,"handleSlideDragStart",function(i){var s=IL(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return bde(e,t),gde(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,s=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,d=Math.min(i,s),p=Math.max(i,s),m=e.getIndexInRange(o,d),x=e.getIndexInRange(o,p);return{startIndex:m-m%c,endIndex:x===f?f:x-x%c}}},{key:"getTextOfTick",value:function(n){var i=this.props,s=i.data,o=i.tickFormatter,l=i.dataKey,c=Nr(s[n],l,n);return Ze(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,s=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,u=c.x,f=c.width,d=c.travellerWidth,p=c.startIndex,m=c.endIndex,x=c.onChange,y=n.pageX-s;y>0?y=Math.min(y,u+f-d-l,u+f-d-o):y<0&&(y=Math.max(y,u-o,u-l));var v=this.getIndex({startX:o+y,endX:l+y});(v.startIndex!==p||v.endIndex!==m)&&x&&x(v),this.setState({startX:o+y,endX:l+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var s=IL(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[o],f=this.props,d=f.x,p=f.width,m=f.travellerWidth,x=f.onChange,y=f.gap,v=f.data,b={startX:this.state.startX,endX:this.state.endX},w=n.pageX-s;w>0?w=Math.min(w,d+p-m-u):w<0&&(w=Math.max(w,d-u)),b[o]=u+w;var N=this.getIndex(b),j=N.startIndex,k=N.endIndex,_=function(){var A=v.length-1;return o==="startX"&&(l>c?j%y===0:k%y===0)||l<c&&k===A||o==="endX"&&(l>c?k%y===0:j%y===0)||l>c&&k===A};this.setState(Wn(Wn({},o,u+w),"brushMoveStartX",n.pageX),function(){x&&_()&&x(N)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,f=this.state[i],d=l.indexOf(f);if(d!==-1){var p=d+n;if(!(p===-1||p>=l.length)){var m=l[p];i==="startX"&&m>=u||i==="endX"&&m<=c||this.setState(Wn({},i,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,s=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return Z.createElement("rect",{stroke:u,fill:c,x:i,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,s=n.y,o=n.width,l=n.height,c=n.data,u=n.children,f=n.padding,d=O.Children.only(u);return d?Z.cloneElement(d,{x:i,y:s,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,i){var s,o,l=this,c=this.props,u=c.y,f=c.travellerWidth,d=c.height,p=c.traveller,m=c.ariaLabel,x=c.data,y=c.startIndex,v=c.endIndex,b=Math.max(n,this.props.x),w=_N(_N({},Ge(this.props,!1)),{},{x:b,y:u,width:f,height:d}),N=m||"Min value: ".concat((s=x[y])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=x[v])===null||o===void 0?void 0:o.name);return Z.createElement(gt,{tabIndex:0,role:"slider","aria-label":N,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),l.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,w))}},{key:"renderSlide",value:function(n,i){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,f=Math.min(n,i)+u,d=Math.max(Math.abs(i-n)-u,0);return Z.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:d,height:l})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,s=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,p=f.endX,m=5,x={pointerEvents:"none",fill:u};return Z.createElement(gt,{className:"recharts-brush-texts"},Z.createElement(Ul,sv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,p)-m,y:o+l/2},x),this.getTextOfTick(i)),Z.createElement(Ul,sv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,p)+c+m,y:o+l/2},x),this.getTextOfTick(s)))}},{key:"render",value:function(){var n=this.props,i=n.data,s=n.className,o=n.children,l=n.x,c=n.y,u=n.width,f=n.height,d=n.alwaysShowText,p=this.state,m=p.startX,x=p.endX,y=p.isTextActive,v=p.isSlideMoving,b=p.isTravellerMoving,w=p.isTravellerFocused;if(!i||!i.length||!Pe(l)||!Pe(c)||!Pe(u)||!Pe(f)||u<=0||f<=0)return null;var N=it("recharts-brush",s),j=Z.Children.count(o)===1,k=pde("userSelect","none");return Z.createElement(gt,{className:N,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(m,x),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(x,"endX"),(y||v||b||w||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,s=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(s+l/2)-1;return Z.createElement(Z.Fragment,null,Z.createElement("rect",{x:i,y:s,width:o,height:l,fill:c,stroke:"none"}),Z.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),Z.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var s;return Z.isValidElement(n)?s=Z.cloneElement(n,i):Ze(n)?s=n(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(n,i){var s=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return _N({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?jde({data:s,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var p=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(n,i){for(var s=n.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>i?l=c:o=c}return i>=n[l]?l:o}}])}(O.PureComponent);Wn(Uu,"displayName","Brush");Wn(Uu,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ON,DL;function Sde(){if(DL)return ON;DL=1;var t=nE();function e(r,n){var i;return t(r,function(s,o,l){return i=n(s,o,l),!i}),!!i}return ON=e,ON}var EN,LL;function Nde(){if(LL)return EN;LL=1;var t=kF(),e=Ds(),r=Sde(),n=$n(),i=q0();function s(o,l,c){var u=n(o)?t:r;return c&&i(o,l,c)&&(l=void 0),u(o,e(l,3))}return EN=s,EN}var kde=Nde();const _de=ht(kde);var ks=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},CN,$L;function Ode(){if($L)return CN;$L=1;var t=UF();function e(r,n,i){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return CN=e,CN}var AN,BL;function Ede(){if(BL)return AN;BL=1;var t=Ode(),e=qF(),r=Ds();function n(i,s){var o={};return s=r(s,3),e(i,function(l,c,u){t(o,c,s(l,c,u))}),o}return AN=n,AN}var Cde=Ede();const Ade=ht(Cde);var TN,FL;function Tde(){if(FL)return TN;FL=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(!r(e[n],n,e))return!1;return!0}return TN=t,TN}var PN,qL;function Pde(){if(qL)return PN;qL=1;var t=nE();function e(r,n){var i=!0;return t(r,function(s,o,l){return i=!!n(s,o,l),i}),i}return PN=e,PN}var MN,zL;function Mde(){if(zL)return MN;zL=1;var t=Tde(),e=Pde(),r=Ds(),n=$n(),i=q0();function s(o,l,c){var u=n(o)?t:e;return c&&i(o,l,c)&&(l=void 0),u(o,r(l,3))}return MN=s,MN}var Rde=Mde();const Tz=ht(Rde);var Ide=["x","y"];function tp(t){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tp(t)}function c2(){return c2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c2.apply(this,arguments)}function UL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Af(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UL(Object(r),!0).forEach(function(n){Dde(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Dde(t,e,r){return e=Lde(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lde(t){var e=$de(t,"string");return tp(e)=="symbol"?e:e+""}function $de(t,e){if(tp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bde(t,e){if(t==null)return{};var r=Fde(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Fde(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function qde(t,e){var r=t.x,n=t.y,i=Bde(t,Ide),s="".concat(r),o=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(e.height||i.height),f=parseInt(u,10),d="".concat(e.width||i.width),p=parseInt(d,10);return Af(Af(Af(Af(Af({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:p,name:e.name,radius:e.radius})}function HL(t){return Z.createElement(Nz,c2({shapeType:"rectangle",propTransformer:qde,activeClassName:"recharts-active-bar"},t))}var zde=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof e=="number")return e;var s=typeof n=="number";return s?e(n,i):(s||Wl(),r)}},Ude=["value","background"],Pz;function Hu(t){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hu(t)}function Hde(t,e){if(t==null)return{};var r=Wde(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Wde(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function av(){return av=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},av.apply(this,arguments)}function WL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WL(Object(r),!0).forEach(function(n){ya(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rz(n.key),n)}}function Kde(t,e,r){return e&&VL(t.prototype,e),r&&VL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gde(t,e,r){return e=lv(e),Yde(t,Mz()?Reflect.construct(e,r||[],lv(t).constructor):e.apply(t,r))}function Yde(t,e){if(e&&(Hu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xde(t)}function Xde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mz=function(){return!!t})()}function lv(t){return lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lv(t)}function Jde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u2(t,e)}function u2(t,e){return u2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},u2(t,e)}function ya(t,e,r){return e=Rz(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rz(t){var e=Qde(t,"string");return Hu(e)=="symbol"?e:e+""}function Qde(t,e){if(Hu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var cc=function(t){function e(){var r;Vde(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=Gde(this,e,[].concat(i)),ya(r,"state",{isAnimationFinished:!1}),ya(r,"id",md("recharts-bar-")),ya(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),ya(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Jde(e,t),Kde(e,[{key:"renderRectanglesStatically",value:function(n){var i=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,f=Ge(this.props,!1);return n&&n.map(function(d,p){var m=p===c,x=m?u:o,y=fr(fr(fr({},f),d),{},{isActive:m,option:x,index:p,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Z.createElement(gt,av({className:"recharts-bar-rectangle"},zl(i.props,d,p),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(p)}),Z.createElement(HL,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,s=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,f=i.animationEasing,d=i.animationId,p=this.state.prevData;return Z.createElement(As,{begin:c,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var x=m.t,y=s.map(function(v,b){var w=p&&p[b];if(w){var N=Gn(w.x,v.x),j=Gn(w.y,v.y),k=Gn(w.width,v.width),_=Gn(w.height,v.height);return fr(fr({},v),{},{x:N(x),y:j(x),width:k(x),height:_(x)})}if(o==="horizontal"){var E=Gn(0,v.height),A=E(x);return fr(fr({},v),{},{y:v.y+v.height-A,height:A})}var T=Gn(0,v.width),M=T(x);return fr(fr({},v),{},{width:M})});return Z.createElement(gt,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,s=n.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!$p(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,s=i.data,o=i.dataKey,l=i.activeIndex,c=Ge(this.props.background,!1);return s.map(function(u,f){u.value;var d=u.background,p=Hde(u,Ude);if(!d)return null;var m=fr(fr(fr(fr(fr({},p),{},{fill:"#eee"},d),c),zl(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return Z.createElement(HL,av({key:"background-bar-".concat(f),option:n.props.background,isActive:f===l},m))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,f=s.children,d=ti(f,Bp);if(!d)return null;var p=u==="vertical"?o[0].height/2:o[0].width/2,m=function(v,b){var w=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:w,errorVal:Nr(v,b)}},x={clipPath:n?"url(#clipPath-".concat(i,")"):null};return Z.createElement(gt,x,d.map(function(y){return Z.cloneElement(y,{key:"error-bar-".concat(i,"-").concat(y.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:p,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,s=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,f=n.top,d=n.width,p=n.height,m=n.isAnimationActive,x=n.background,y=n.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,b=it("recharts-bar",o),w=l&&l.allowDataOverflow,N=c&&c.allowDataOverflow,j=w||N,k=tt(y)?this.id:y;return Z.createElement(gt,{className:b},w||N?Z.createElement("defs",null,Z.createElement("clipPath",{id:"clipPath-".concat(k)},Z.createElement("rect",{x:w?u:u-d/2,y:N?f:f-p/2,width:w?d:d*2,height:N?p:p*2}))):null,Z.createElement(gt,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(k,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,k),(!m||v)&&fo.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(O.PureComponent);Pz=cc;ya(cc,"displayName","Bar");ya(cc,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!sc.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ya(cc,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,s=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,f=t.dataStartIndex,d=t.displayedData,p=t.offset,m=_oe(n,r);if(!m)return null;var x=e.layout,y=r.type.defaultProps,v=y!==void 0?fr(fr({},y),r.props):r.props,b=v.dataKey,w=v.children,N=v.minPointSize,j=x==="horizontal"?o:s,k=u?j.scale.domain():null,_=Moe({numericAxis:j}),E=ti(w,z0),A=d.map(function(T,M){var P,R,L,$,F,z;u?P=Ooe(u[f+M],k):(P=Nr(T,b),Array.isArray(P)||(P=[_,P]));var W=zde(N,Pz.defaultProps.minPointSize)(P[1],M);if(x==="horizontal"){var K,q=[o.scale(P[0]),o.scale(P[1])],V=q[0],D=q[1];R=v3({axis:s,ticks:l,bandSize:i,offset:m.offset,entry:T,index:M}),L=(K=D??V)!==null&&K!==void 0?K:void 0,$=m.size;var U=V-D;if(F=Number.isNaN(U)?0:U,z={x:R,y:o.y,width:$,height:o.height},Math.abs(W)>0&&Math.abs(F)<Math.abs(W)){var G=mn(F||W)*(Math.abs(W)-Math.abs(F));L-=G,F+=G}}else{var ee=[s.scale(P[0]),s.scale(P[1])],Q=ee[0],H=ee[1];if(R=Q,L=v3({axis:o,ticks:c,bandSize:i,offset:m.offset,entry:T,index:M}),$=H-Q,F=m.size,z={x:s.x,y:L,width:s.width,height:F},Math.abs(W)>0&&Math.abs($)<Math.abs(W)){var Y=mn($||W)*(Math.abs(W)-Math.abs($));$+=Y}}return fr(fr(fr({},T),{},{x:R,y:L,width:$,height:F,value:u?P:P[1],payload:T,background:z},E&&E[M]&&E[M].props),{},{tooltipPayload:[oz(r,T)],tooltipPosition:{x:R+$/2,y:L+F/2}})});return fr({data:A,layout:x},p)});function rp(t){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rp(t)}function Zde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Iz(n.key),n)}}function efe(t,e,r){return e&&KL(t.prototype,e),r&&KL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function GL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Xi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GL(Object(r),!0).forEach(function(n){ax(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ax(t,e,r){return e=Iz(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Iz(t){var e=tfe(t,"string");return rp(e)=="symbol"?e:e+""}function tfe(t,e){if(rp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dz=function(e,r,n,i,s){var o=e.width,l=e.height,c=e.layout,u=e.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},p=!!Vn(u,cc);return f.reduce(function(m,x){var y=r[x],v=y.orientation,b=y.domain,w=y.padding,N=w===void 0?{}:w,j=y.mirror,k=y.reversed,_="".concat(v).concat(j?"Mirror":""),E,A,T,M,P;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var R=b[1]-b[0],L=1/0,$=y.categoricalDomain.sort();if($.forEach(function(ee,Q){Q>0&&(L=Math.min((ee||0)-($[Q-1]||0),L))}),Number.isFinite(L)){var F=L/R,z=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(E=F*z/2),y.padding==="no-gap"){var W=gn(e.barCategoryGap,F*z),K=F*z/2;E=K-W-(K-W)/z*W}}}i==="xAxis"?A=[n.left+(N.left||0)+(E||0),n.left+n.width-(N.right||0)-(E||0)]:i==="yAxis"?A=c==="horizontal"?[n.top+n.height-(N.bottom||0),n.top+(N.top||0)]:[n.top+(N.top||0)+(E||0),n.top+n.height-(N.bottom||0)-(E||0)]:A=y.range,k&&(A=[A[1],A[0]]);var q=rz(y,s,p),V=q.scale,D=q.realScaleType;V.domain(b).range(A),nz(V);var U=iz(V,Xi(Xi({},y),{},{realScaleType:D}));i==="xAxis"?(P=v==="top"&&!j||v==="bottom"&&j,T=n.left,M=d[_]-P*y.height):i==="yAxis"&&(P=v==="left"&&!j||v==="right"&&j,T=d[_]-P*y.width,M=n.top);var G=Xi(Xi(Xi({},y),U),{},{realScaleType:D,x:T,y:M,scale:V,width:i==="xAxis"?n.width:y.width,height:i==="yAxis"?n.height:y.height});return G.bandSize=Wy(G,U),!y.hide&&i==="xAxis"?d[_]+=(P?-1:1)*G.height:y.hide||(d[_]+=(P?-1:1)*G.width),Xi(Xi({},m),{},ax({},x,G))},{})},Lz=function(e,r){var n=e.x,i=e.y,s=r.x,o=r.y;return{x:Math.min(n,s),y:Math.min(i,o),width:Math.abs(s-n),height:Math.abs(o-i)}},rfe=function(e){var r=e.x1,n=e.y1,i=e.x2,s=e.y2;return Lz({x:r,y:n},{x:i,y:s})},$z=function(){function t(e){Zde(this,t),this.scale=e}return efe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,s=n.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],s=n[n.length-1];return i<=s?r>=i&&r<=s:r>=s&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}])}();ax($z,"EPS",1e-4);var PE=function(e){var r=Object.keys(e).reduce(function(n,i){return Xi(Xi({},n),{},ax({},i,$z.create(e[i])))},{});return Xi(Xi({},r),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return Ade(i,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return Tz(i,function(s,o){return r[o].isInRange(s)})}})};function nfe(t){return(t%180+180)%180}var ife=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=nfe(i),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},RN,YL;function sfe(){if(YL)return RN;YL=1;var t=Ds(),e=Mp(),r=B0();function n(i){return function(s,o,l){var c=Object(s);if(!e(s)){var u=t(o,3);s=r(s),o=function(d){return u(c[d],d,c)}}var f=i(s,o,l);return f>-1?c[u?s[f]:f]:void 0}}return RN=n,RN}var IN,XL;function ofe(){if(XL)return IN;XL=1;var t=Oz();function e(r){var n=t(r),i=n%1;return n===n?i?n-i:n:0}return IN=e,IN}var DN,JL;function afe(){if(JL)return DN;JL=1;var t=DF(),e=Ds(),r=ofe(),n=Math.max;function i(s,o,l){var c=s==null?0:s.length;if(!c)return-1;var u=l==null?0:r(l);return u<0&&(u=n(c+u,0)),t(s,e(o,3),u)}return DN=i,DN}var LN,QL;function lfe(){if(QL)return LN;QL=1;var t=sfe(),e=afe(),r=t(e);return LN=r,LN}var cfe=lfe();const ufe=ht(cfe);var dfe=QB();const ffe=ht(dfe);var hfe=ffe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),ME=O.createContext(void 0),RE=O.createContext(void 0),Bz=O.createContext(void 0),Fz=O.createContext({}),qz=O.createContext(void 0),zz=O.createContext(0),Uz=O.createContext(0),ZL=function(e){var r=e.state,n=r.xAxisMap,i=r.yAxisMap,s=r.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,f=hfe(s);return Z.createElement(ME.Provider,{value:n},Z.createElement(RE.Provider,{value:i},Z.createElement(Fz.Provider,{value:s},Z.createElement(Bz.Provider,{value:f},Z.createElement(qz.Provider,{value:o},Z.createElement(zz.Provider,{value:u},Z.createElement(Uz.Provider,{value:c},l)))))))},pfe=function(){return O.useContext(qz)},Hz=function(e){var r=O.useContext(ME);r==null&&Wl();var n=r[e];return n==null&&Wl(),n},mfe=function(){var e=O.useContext(ME);return ha(e)},gfe=function(){var e=O.useContext(RE),r=ufe(e,function(n){return Tz(n.domain,Number.isFinite)});return r||ha(e)},Wz=function(e){var r=O.useContext(RE);r==null&&Wl();var n=r[e];return n==null&&Wl(),n},yfe=function(){var e=O.useContext(Bz);return e},vfe=function(){return O.useContext(Fz)},IE=function(){return O.useContext(Uz)},DE=function(){return O.useContext(zz)};function Wu(t){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wu(t)}function xfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bfe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kz(n.key),n)}}function wfe(t,e,r){return e&&bfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jfe(t,e,r){return e=cv(e),Sfe(t,Vz()?Reflect.construct(e,r||[],cv(t).constructor):e.apply(t,r))}function Sfe(t,e){if(e&&(Wu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nfe(t)}function Nfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vz=function(){return!!t})()}function cv(t){return cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cv(t)}function kfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d2(t,e)}function d2(t,e){return d2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},d2(t,e)}function e5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function t5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?e5(Object(r),!0).forEach(function(n){LE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LE(t,e,r){return e=Kz(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kz(t){var e=_fe(t,"string");return Wu(e)=="symbol"?e:e+""}function _fe(t,e){if(Wu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Ofe(t,e){return Tfe(t)||Afe(t,e)||Cfe(t,e)||Efe()}function Efe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cfe(t,e){if(t){if(typeof t=="string")return r5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r5(t,e)}}function r5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Afe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Tfe(t){if(Array.isArray(t))return t}function f2(){return f2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f2.apply(this,arguments)}var Pfe=function(e,r){var n;return Z.isValidElement(e)?n=Z.cloneElement(e,r):Ze(e)?n=e(r):n=Z.createElement("line",f2({},r,{className:"recharts-reference-line-line"})),n},Mfe=function(e,r,n,i,s,o,l,c,u){var f=s.x,d=s.y,p=s.width,m=s.height;if(n){var x=u.y,y=e.y.apply(x,{position:o});if(ks(u,"discard")&&!e.y.isInRange(y))return null;var v=[{x:f+p,y},{x:f,y}];return c==="left"?v.reverse():v}if(r){var b=u.x,w=e.x.apply(b,{position:o});if(ks(u,"discard")&&!e.x.isInRange(w))return null;var N=[{x:w,y:d+m},{x:w,y:d}];return l==="top"?N.reverse():N}if(i){var j=u.segment,k=j.map(function(_){return e.apply(_,{position:o})});return ks(u,"discard")&&_de(k,function(_){return!e.isInRange(_)})?null:k}return null};function Rfe(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxisId,s=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=pfe(),f=Hz(i),d=Wz(s),p=yfe();if(!u||!p)return null;ts(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=PE({x:f.scale,y:d.scale}),x=kr(e),y=kr(r),v=n&&n.length===2,b=Mfe(m,x,y,v,p,t.position,f.orientation,d.orientation,t);if(!b)return null;var w=Ofe(b,2),N=w[0],j=N.x,k=N.y,_=w[1],E=_.x,A=_.y,T=ks(t,"hidden")?"url(#".concat(u,")"):void 0,M=t5(t5({clipPath:T},Ge(t,!0)),{},{x1:j,y1:k,x2:E,y2:A});return Z.createElement(gt,{className:it("recharts-reference-line",l)},Pfe(o,M),Mr.renderCallByParent(t,rfe({x1:j,y1:k,x2:E,y2:A})))}var $E=function(t){function e(){return xfe(this,e),jfe(this,e,arguments)}return kfe(e,t),wfe(e,[{key:"render",value:function(){return Z.createElement(Rfe,this.props)}}])}(Z.Component);LE($E,"displayName","ReferenceLine");LE($E,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function h2(){return h2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},h2.apply(this,arguments)}function Vu(t){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vu(t)}function n5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function i5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?n5(Object(r),!0).forEach(function(n){lx(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ife(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dfe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yz(n.key),n)}}function Lfe(t,e,r){return e&&Dfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $fe(t,e,r){return e=uv(e),Bfe(t,Gz()?Reflect.construct(e,r||[],uv(t).constructor):e.apply(t,r))}function Bfe(t,e){if(e&&(Vu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ffe(t)}function Ffe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gz=function(){return!!t})()}function uv(t){return uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uv(t)}function qfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p2(t,e)}function p2(t,e){return p2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},p2(t,e)}function lx(t,e,r){return e=Yz(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yz(t){var e=zfe(t,"string");return Vu(e)=="symbol"?e:e+""}function zfe(t,e){if(Vu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ufe=function(e){var r=e.x,n=e.y,i=e.xAxis,s=e.yAxis,o=PE({x:i.scale,y:s.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return ks(e,"discard")&&!o.isInRange(l)?null:l},cx=function(t){function e(){return Ife(this,e),$fe(this,e,arguments)}return qfe(e,t),Lfe(e,[{key:"render",value:function(){var n=this.props,i=n.x,s=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=kr(i),f=kr(s);if(ts(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=Ufe(this.props);if(!d)return null;var p=d.x,m=d.y,x=this.props,y=x.shape,v=x.className,b=ks(this.props,"hidden")?"url(#".concat(c,")"):void 0,w=i5(i5({clipPath:b},Ge(this.props,!0)),{},{cx:p,cy:m});return Z.createElement(gt,{className:it("recharts-reference-dot",v)},e.renderDot(y,w),Mr.renderCallByParent(this.props,{x:p-o,y:m-o,width:2*o,height:2*o}))}}])}(Z.Component);lx(cx,"displayName","ReferenceDot");lx(cx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});lx(cx,"renderDot",function(t,e){var r;return Z.isValidElement(t)?r=Z.cloneElement(t,e):Ze(t)?r=t(e):r=Z.createElement(ex,h2({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function m2(){return m2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},m2.apply(this,arguments)}function Ku(t){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ku(t)}function s5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function o5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?s5(Object(r),!0).forEach(function(n){ux(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wfe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jz(n.key),n)}}function Vfe(t,e,r){return e&&Wfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kfe(t,e,r){return e=dv(e),Gfe(t,Xz()?Reflect.construct(e,r||[],dv(t).constructor):e.apply(t,r))}function Gfe(t,e){if(e&&(Ku(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yfe(t)}function Yfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xz=function(){return!!t})()}function dv(t){return dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dv(t)}function Xfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g2(t,e)}function g2(t,e){return g2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},g2(t,e)}function ux(t,e,r){return e=Jz(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jz(t){var e=Jfe(t,"string");return Ku(e)=="symbol"?e:e+""}function Jfe(t,e){if(Ku(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Qfe=function(e,r,n,i,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,f=s.xAxis,d=s.yAxis;if(!f||!d)return null;var p=PE({x:f.scale,y:d.scale}),m={x:e?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(c,{position:"start"}):p.y.rangeMin},x={x:r?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(u,{position:"end"}):p.y.rangeMax};return ks(s,"discard")&&(!p.isInRange(m)||!p.isInRange(x))?null:Lz(m,x)},dx=function(t){function e(){return Hfe(this,e),Kfe(this,e,arguments)}return Xfe(e,t),Vfe(e,[{key:"render",value:function(){var n=this.props,i=n.x1,s=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,f=n.clipPathId;ts(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=kr(i),p=kr(s),m=kr(o),x=kr(l),y=this.props.shape;if(!d&&!p&&!m&&!x&&!y)return null;var v=Qfe(d,p,m,x,this.props);if(!v&&!y)return null;var b=ks(this.props,"hidden")?"url(#".concat(f,")"):void 0;return Z.createElement(gt,{className:it("recharts-reference-area",c)},e.renderRect(y,o5(o5({clipPath:b},Ge(this.props,!0)),v)),Mr.renderCallByParent(this.props,v))}}])}(Z.Component);ux(dx,"displayName","ReferenceArea");ux(dx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});ux(dx,"renderRect",function(t,e){var r;return Z.isValidElement(t)?r=Z.cloneElement(t,e):Ze(t)?r=t(e):r=Z.createElement(TE,m2({},e,{className:"recharts-reference-area-rect"})),r});function Qz(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function Zfe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return ife(n,r)}function ehe(t,e,r){var n=r==="width",i=t.x,s=t.y,o=t.width,l=t.height;return e===1?{start:n?i:s,end:n?i+o:s+l}:{start:n?i+o:s+l,end:n?i:s}}function fv(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-i)<=0}function the(t,e){return Qz(t,e+1)}function rhe(t,e,r,n,i){for(var s=(n||[]).slice(),o=e.start,l=e.end,c=0,u=1,f=o,d=function(){var x=n==null?void 0:n[c];if(x===void 0)return{v:Qz(n,u)};var y=c,v,b=function(){return v===void 0&&(v=r(x,y)),v},w=x.coordinate,N=c===0||fv(t,w,b,f,l);N||(c=0,f=o,u+=1),N&&(f=w+t*(b()/2+i),c+=u)},p;u<=s.length;)if(p=d(),p)return p.v;return[]}function np(t){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},np(t)}function a5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function nn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a5(Object(r),!0).forEach(function(n){nhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nhe(t,e,r){return e=ihe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ihe(t){var e=she(t,"string");return np(e)=="symbol"?e:e+""}function she(t,e){if(np(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ohe(t,e,r,n,i){for(var s=(n||[]).slice(),o=s.length,l=e.start,c=e.end,u=function(p){var m=s[p],x,y=function(){return x===void 0&&(x=r(m,p)),x};if(p===o-1){var v=t*(m.coordinate+t*y()/2-c);s[p]=m=nn(nn({},m),{},{tickCoord:v>0?m.coordinate-v*t:m.coordinate})}else s[p]=m=nn(nn({},m),{},{tickCoord:m.coordinate});var b=fv(t,m.tickCoord,y,l,c);b&&(c=m.tickCoord-t*(y()/2+i),s[p]=nn(nn({},m),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return s}function ahe(t,e,r,n,i,s){var o=(n||[]).slice(),l=o.length,c=e.start,u=e.end;if(s){var f=n[l-1],d=r(f,l-1),p=t*(f.coordinate+t*d/2-u);o[l-1]=f=nn(nn({},f),{},{tickCoord:p>0?f.coordinate-p*t:f.coordinate});var m=fv(t,f.tickCoord,function(){return d},c,u);m&&(u=f.tickCoord-t*(d/2+i),o[l-1]=nn(nn({},f),{},{isShow:!0}))}for(var x=s?l-1:l,y=function(w){var N=o[w],j,k=function(){return j===void 0&&(j=r(N,w)),j};if(w===0){var _=t*(N.coordinate-t*k()/2-c);o[w]=N=nn(nn({},N),{},{tickCoord:_<0?N.coordinate-_*t:N.coordinate})}else o[w]=N=nn(nn({},N),{},{tickCoord:N.coordinate});var E=fv(t,N.tickCoord,k,c,u);E&&(c=N.tickCoord+t*(k()/2+i),o[w]=nn(nn({},N),{},{isShow:!0}))},v=0;v<x;v++)y(v);return o}function BE(t,e,r){var n=t.tick,i=t.ticks,s=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,f=t.unit,d=t.angle;if(!i||!i.length||!n)return[];if(Pe(c)||sc.isSsr)return the(i,typeof c=="number"&&Pe(c)?c:0);var p=[],m=l==="top"||l==="bottom"?"width":"height",x=f&&m==="width"?Zf(f,{fontSize:e,letterSpacing:r}):{width:0,height:0},y=function(N,j){var k=Ze(u)?u(N.value,j):N.value;return m==="width"?Zfe(Zf(k,{fontSize:e,letterSpacing:r}),x,d):Zf(k,{fontSize:e,letterSpacing:r})[m]},v=i.length>=2?mn(i[1].coordinate-i[0].coordinate):1,b=ehe(s,v,m);return c==="equidistantPreserveStart"?rhe(v,b,y,i,o):(c==="preserveStart"||c==="preserveStartEnd"?p=ahe(v,b,y,i,o,c==="preserveStartEnd"):p=ohe(v,b,y,i,o),p.filter(function(w){return w.isShow}))}var lhe=["viewBox"],che=["viewBox"],uhe=["ticks"];function Gu(t){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gu(t)}function fu(){return fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fu.apply(this,arguments)}function l5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?l5(Object(r),!0).forEach(function(n){FE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $N(t,e){if(t==null)return{};var r=dhe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dhe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function fhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,e8(n.key),n)}}function hhe(t,e,r){return e&&c5(t.prototype,e),r&&c5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function phe(t,e,r){return e=hv(e),mhe(t,Zz()?Reflect.construct(e,r||[],hv(t).constructor):e.apply(t,r))}function mhe(t,e){if(e&&(Gu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ghe(t)}function ghe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zz=function(){return!!t})()}function hv(t){return hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hv(t)}function yhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y2(t,e)}function y2(t,e){return y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},y2(t,e)}function FE(t,e,r){return e=e8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e8(t){var e=vhe(t,"string");return Gu(e)=="symbol"?e:e+""}function vhe(t,e){if(Gu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var bd=function(t){function e(r){var n;return fhe(this,e),n=phe(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return yhe(e,t),hhe(e,[{key:"shouldComponentUpdate",value:function(n,i){var s=n.viewBox,o=$N(n,lhe),l=this.props,c=l.viewBox,u=$N(l,che);return!yu(s,c)||!yu(o,u)||!yu(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.x,o=i.y,l=i.width,c=i.height,u=i.orientation,f=i.tickSize,d=i.mirror,p=i.tickMargin,m,x,y,v,b,w,N=d?-1:1,j=n.tickSize||f,k=Pe(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=x=n.coordinate,v=o+ +!d*c,y=v-N*j,w=y-N*p,b=k;break;case"left":y=v=n.coordinate,x=s+ +!d*l,m=x-N*j,b=m-N*p,w=k;break;case"right":y=v=n.coordinate,x=s+ +d*l,m=x+N*j,b=m+N*p,w=k;break;default:m=x=n.coordinate,v=o+ +d*c,y=v+N*j,w=y+N*p,b=k;break}return{line:{x1:m,y1:y,x2:x,y2:v},tick:{x:b,y:w}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,s=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,f=n.axisLine,d=pn(pn(pn({},Ge(this.props,!1)),Ge(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);d=pn(pn({},d),{},{x1:i,y1:s+p*l,x2:i+o,y2:s+p*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);d=pn(pn({},d),{},{x1:i+m*o,y1:s,x2:i+m*o,y2:s+l})}return Z.createElement("line",fu({},d,{className:it("recharts-cartesian-axis-line",ei(f,"className"))}))}},{key:"renderTicks",value:function(n,i,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,f=l.tick,d=l.tickFormatter,p=l.unit,m=BE(pn(pn({},this.props),{},{ticks:n}),i,s),x=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),v=Ge(this.props,!1),b=Ge(f,!1),w=pn(pn({},v),{},{fill:"none"},Ge(c,!1)),N=m.map(function(j,k){var _=o.getTickLineCoord(j),E=_.line,A=_.tick,T=pn(pn(pn(pn({textAnchor:x,verticalAnchor:y},v),{},{stroke:"none",fill:u},b),A),{},{index:k,payload:j,visibleTicksCount:m.length,tickFormatter:d});return Z.createElement(gt,fu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},zl(o.props,j,k)),c&&Z.createElement("line",fu({},w,E,{className:it("recharts-cartesian-axis-tick-line",ei(c,"className"))})),f&&e.renderTickItem(f,T,"".concat(Ze(d)?d(j.value,k):j.value).concat(p||"")))});return Z.createElement("g",{className:"recharts-cartesian-axis-ticks"},N)}},{key:"render",value:function(){var n=this,i=this.props,s=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,u=i.className,f=i.hide;if(f)return null;var d=this.props,p=d.ticks,m=$N(d,uhe),x=p;return Ze(c)&&(x=p&&p.length>0?c(this.props):c(m)),o<=0||l<=0||!x||!x.length?null:Z.createElement(gt,{className:it("recharts-cartesian-axis",u),ref:function(v){n.layerReference=v}},s&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),Mr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,s){var o;return Z.isValidElement(n)?o=Z.cloneElement(n,i):Ze(n)?o=n(i):o=Z.createElement(Ul,fu({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(O.Component);FE(bd,"displayName","CartesianAxis");FE(bd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var xhe=["x1","y1","x2","y2","key"],bhe=["offset"];function Vl(t){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vl(t)}function u5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function on(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u5(Object(r),!0).forEach(function(n){whe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function whe(t,e,r){return e=jhe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jhe(t){var e=She(t,"string");return Vl(e)=="symbol"?e:e+""}function She(t,e){if(Vl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ol(){return Ol=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ol.apply(this,arguments)}function d5(t,e){if(t==null)return{};var r=Nhe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Nhe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var khe=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,i=e.x,s=e.y,o=e.width,l=e.height,c=e.ry;return Z.createElement("rect",{x:i,y:s,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function t8(t,e){var r;if(Z.isValidElement(t))r=Z.cloneElement(t,e);else if(Ze(t))r=t(e);else{var n=e.x1,i=e.y1,s=e.x2,o=e.y2,l=e.key,c=d5(e,xhe),u=Ge(c,!1);u.offset;var f=d5(u,bhe);r=Z.createElement("line",Ol({},f,{x1:n,y1:i,x2:s,y2:o,fill:"none",key:l}))}return r}function _he(t){var e=t.x,r=t.width,n=t.horizontal,i=n===void 0?!0:n,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=on(on({},t),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(c),index:c});return t8(i,u)});return Z.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Ohe(t){var e=t.y,r=t.height,n=t.vertical,i=n===void 0?!0:n,s=t.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=on(on({},t),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(c),index:c});return t8(i,u)});return Z.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Ehe(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,i=t.y,s=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var f=l.map(function(p){return Math.round(p+i-i)}).sort(function(p,m){return p-m});i!==f[0]&&f.unshift(0);var d=f.map(function(p,m){var x=!f[m+1],y=x?i+o-p:f[m+1]-p;if(y<=0)return null;var v=m%e.length;return Z.createElement("rect",{key:"react-".concat(m),y:p,x:n,height:y,width:s,stroke:"none",fill:e[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Z.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Che(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,i=t.fillOpacity,s=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(p){return Math.round(p+s-s)}).sort(function(p,m){return p-m});s!==f[0]&&f.unshift(0);var d=f.map(function(p,m){var x=!f[m+1],y=x?s+l-p:f[m+1]-p;if(y<=0)return null;var v=m%n.length;return Z.createElement("rect",{key:"react-".concat(m),x:p,y:o,width:y,height:c,stroke:"none",fill:n[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Z.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Ahe=function(e,r){var n=e.xAxis,i=e.width,s=e.height,o=e.offset;return tz(BE(on(on(on({},bd.defaultProps),n),{},{ticks:oo(n,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,r)},The=function(e,r){var n=e.yAxis,i=e.width,s=e.height,o=e.offset;return tz(BE(on(on(on({},bd.defaultProps),n),{},{ticks:oo(n,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,r)},Yc={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function qE(t){var e,r,n,i,s,o,l=IE(),c=DE(),u=vfe(),f=on(on({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Yc.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Yc.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Yc.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Yc.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:Yc.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Yc.verticalFill,x:Pe(t.x)?t.x:u.left,y:Pe(t.y)?t.y:u.top,width:Pe(t.width)?t.width:u.width,height:Pe(t.height)?t.height:u.height}),d=f.x,p=f.y,m=f.width,x=f.height,y=f.syncWithTicks,v=f.horizontalValues,b=f.verticalValues,w=mfe(),N=gfe();if(!Pe(m)||m<=0||!Pe(x)||x<=0||!Pe(d)||d!==+d||!Pe(p)||p!==+p)return null;var j=f.verticalCoordinatesGenerator||Ahe,k=f.horizontalCoordinatesGenerator||The,_=f.horizontalPoints,E=f.verticalPoints;if((!_||!_.length)&&Ze(k)){var A=v&&v.length,T=k({yAxis:N?on(on({},N),{},{ticks:A?v:N.ticks}):void 0,width:l,height:c,offset:u},A?!0:y);ts(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Vl(T),"]")),Array.isArray(T)&&(_=T)}if((!E||!E.length)&&Ze(j)){var M=b&&b.length,P=j({xAxis:w?on(on({},w),{},{ticks:M?b:w.ticks}):void 0,width:l,height:c,offset:u},M?!0:y);ts(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Vl(P),"]")),Array.isArray(P)&&(E=P)}return Z.createElement("g",{className:"recharts-cartesian-grid"},Z.createElement(khe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),Z.createElement(_he,Ol({},f,{offset:u,horizontalPoints:_,xAxis:w,yAxis:N})),Z.createElement(Ohe,Ol({},f,{offset:u,verticalPoints:E,xAxis:w,yAxis:N})),Z.createElement(Ehe,Ol({},f,{horizontalPoints:_})),Z.createElement(Che,Ol({},f,{verticalPoints:E})))}qE.displayName="CartesianGrid";var Phe=["type","layout","connectNulls","ref"],Mhe=["key"];function Yu(t){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yu(t)}function f5(t,e){if(t==null)return{};var r=Rhe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Rhe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function sh(){return sh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sh.apply(this,arguments)}function h5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h5(Object(r),!0).forEach(function(n){Ji(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xc(t){return $he(t)||Lhe(t)||Dhe(t)||Ihe()}function Ihe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dhe(t,e){if(t){if(typeof t=="string")return v2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v2(t,e)}}function Lhe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $he(t){if(Array.isArray(t))return v2(t)}function v2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Bhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n8(n.key),n)}}function Fhe(t,e,r){return e&&p5(t.prototype,e),r&&p5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function qhe(t,e,r){return e=pv(e),zhe(t,r8()?Reflect.construct(e,r||[],pv(t).constructor):e.apply(t,r))}function zhe(t,e){if(e&&(Yu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uhe(t)}function Uhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r8=function(){return!!t})()}function pv(t){return pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pv(t)}function Hhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x2(t,e)}function x2(t,e){return x2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},x2(t,e)}function Ji(t,e,r){return e=n8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n8(t){var e=Whe(t,"string");return Yu(e)=="symbol"?e:e+""}function Whe(t,e){if(Yu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fp=function(t){function e(){var r;Bhe(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=qhe(this,e,[].concat(i)),Ji(r,"state",{isAnimationFinished:!0,totalLength:0}),Ji(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Ji(r,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(b,w){return b+w});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/u),d=o%u,p=l-o,m=[],x=0,y=0;x<c.length;y+=c[x],++x)if(y+c[x]>d){m=[].concat(Xc(c.slice(0,x)),[d-y]);break}var v=m.length%2===0?[0,p]:[p];return[].concat(Xc(e.repeat(c,f)),Xc(m),v).map(function(b){return"".concat(b,"px")}).join(", ")}),Ji(r,"id",md("recharts-line-")),Ji(r,"pathRef",function(o){r.mainCurve=o}),Ji(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Ji(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Hhe(e,t),Fhe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,u=s.layout,f=s.children,d=ti(f,Bp);if(!d)return null;var p=function(y,v){return{x:y.x,y:y.y,value:y.value,errorVal:Nr(y.payload,v)}},m={clipPath:n?"url(#clipPath-".concat(i,")"):null};return Z.createElement(gt,m,d.map(function(x){return Z.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(n,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,f=l.dataKey,d=Ge(this.props,!1),p=Ge(c,!0),m=u.map(function(y,v){var b=Hn(Hn(Hn({key:"dot-".concat(v),r:3},d),p),{},{index:v,cx:y.x,cy:y.y,value:y.value,dataKey:f,payload:y.payload,points:u});return e.renderDotItem(c,b)}),x={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Z.createElement(gt,sh({className:"recharts-line-dots",key:"dots"},x),m)}},{key:"renderCurveStatically",value:function(n,i,s,o){var l=this.props,c=l.type,u=l.layout,f=l.connectNulls;l.ref;var d=f5(l,Phe),p=Hn(Hn(Hn({},Ge(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:n},o),{},{type:c,layout:u,connectNulls:f});return Z.createElement(Gy,sh({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,i){var s=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,p=o.animationEasing,m=o.animationId,x=o.animateNewValues,y=o.width,v=o.height,b=this.state,w=b.prevPoints,N=b.totalLength;return Z.createElement(As,{begin:f,duration:d,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var k=j.t;if(w){var _=w.length/l.length,E=l.map(function(R,L){var $=Math.floor(L*_);if(w[$]){var F=w[$],z=Gn(F.x,R.x),W=Gn(F.y,R.y);return Hn(Hn({},R),{},{x:z(k),y:W(k)})}if(x){var K=Gn(y*2,R.x),q=Gn(v/2,R.y);return Hn(Hn({},R),{},{x:K(k),y:q(k)})}return Hn(Hn({},R),{},{x:R.x,y:R.y})});return s.renderCurveStatically(E,n,i)}var A=Gn(0,N),T=A(k),M;if(c){var P="".concat(c).split(/[,\s]+/gim).map(function(R){return parseFloat(R)});M=s.getStrokeDasharray(T,N,P)}else M=s.generateSimpleStrokeDasharray(N,T);return s.renderCurveStatically(l,n,i,{strokeDasharray:M})})}},{key:"renderCurve",value:function(n,i){var s=this.props,o=s.points,l=s.isAnimationActive,c=this.state,u=c.prevPoints,f=c.totalLength;return l&&o&&o.length&&(!u&&f>0||!$p(u,o))?this.renderCurveWithAnimation(n,i):this.renderCurveStatically(o,n,i)}},{key:"render",value:function(){var n,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,u=i.xAxis,f=i.yAxis,d=i.top,p=i.left,m=i.width,x=i.height,y=i.isAnimationActive,v=i.id;if(s||!l||!l.length)return null;var b=this.state.isAnimationFinished,w=l.length===1,N=it("recharts-line",c),j=u&&u.allowDataOverflow,k=f&&f.allowDataOverflow,_=j||k,E=tt(v)?this.id:v,A=(n=Ge(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},T=A.r,M=T===void 0?3:T,P=A.strokeWidth,R=P===void 0?2:P,L=NQ(o)?o:{},$=L.clipDot,F=$===void 0?!0:$,z=M*2+R;return Z.createElement(gt,{className:N},j||k?Z.createElement("defs",null,Z.createElement("clipPath",{id:"clipPath-".concat(E)},Z.createElement("rect",{x:j?p:p-m/2,y:k?d:d-x/2,width:j?m:m*2,height:k?x:x*2})),!F&&Z.createElement("clipPath",{id:"clipPath-dots-".concat(E)},Z.createElement("rect",{x:p-z/2,y:d-z/2,width:m+z,height:x+z}))):null,!w&&this.renderCurve(_,E),this.renderErrorBar(_,E),(w||o)&&this.renderDots(_,F,E),(!y||b)&&fo.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,i){for(var s=n.length%2!==0?[].concat(Xc(n),[0]):n,o=[],l=0;l<i;++l)o=[].concat(Xc(o),Xc(s));return o}},{key:"renderDotItem",value:function(n,i){var s;if(Z.isValidElement(n))s=Z.cloneElement(n,i);else if(Ze(n))s=n(i);else{var o=i.key,l=f5(i,Mhe),c=it("recharts-line-dot",typeof n!="boolean"?n.className:"");s=Z.createElement(ex,sh({key:o},l,{className:c}))}return s}}])}(O.PureComponent);Ji(Fp,"displayName","Line");Ji(Fp,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!sc.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ji(Fp,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,u=t.offset,f=e.layout,d=c.map(function(p,m){var x=Nr(p,o);return f==="horizontal"?{x:y3({axis:r,ticks:i,bandSize:l,entry:p,index:m}),y:tt(x)?null:n.scale(x),value:x,payload:p}:{x:tt(x)?null:r.scale(x),y:y3({axis:n,ticks:s,bandSize:l,entry:p,index:m}),value:x,payload:p}});return Hn({points:d,layout:f},u)});function Xu(t){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xu(t)}function Vhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Khe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o8(n.key),n)}}function Ghe(t,e,r){return e&&Khe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yhe(t,e,r){return e=mv(e),Xhe(t,i8()?Reflect.construct(e,r||[],mv(t).constructor):e.apply(t,r))}function Xhe(t,e){if(e&&(Xu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jhe(t)}function Jhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i8=function(){return!!t})()}function mv(t){return mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mv(t)}function Qhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b2(t,e)}function b2(t,e){return b2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},b2(t,e)}function s8(t,e,r){return e=o8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o8(t){var e=Zhe(t,"string");return Xu(e)=="symbol"?e:e+""}function Zhe(t,e){if(Xu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function w2(){return w2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},w2.apply(this,arguments)}function epe(t){var e=t.xAxisId,r=IE(),n=DE(),i=Hz(e);return i==null?null:Z.createElement(bd,w2({},i,{className:it("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return oo(o,!0)}}))}var wd=function(t){function e(){return Vhe(this,e),Yhe(this,e,arguments)}return Qhe(e,t),Ghe(e,[{key:"render",value:function(){return Z.createElement(epe,this.props)}}])}(Z.Component);s8(wd,"displayName","XAxis");s8(wd,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ju(t){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ju(t)}function tpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c8(n.key),n)}}function npe(t,e,r){return e&&rpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ipe(t,e,r){return e=gv(e),spe(t,a8()?Reflect.construct(e,r||[],gv(t).constructor):e.apply(t,r))}function spe(t,e){if(e&&(Ju(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ope(t)}function ope(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a8=function(){return!!t})()}function gv(t){return gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gv(t)}function ape(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j2(t,e)}function j2(t,e){return j2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},j2(t,e)}function l8(t,e,r){return e=c8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c8(t){var e=lpe(t,"string");return Ju(e)=="symbol"?e:e+""}function lpe(t,e){if(Ju(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function S2(){return S2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},S2.apply(this,arguments)}var cpe=function(e){var r=e.yAxisId,n=IE(),i=DE(),s=Wz(r);return s==null?null:Z.createElement(bd,S2({},s,{className:it("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(l){return oo(l,!0)}}))},jd=function(t){function e(){return tpe(this,e),ipe(this,e,arguments)}return ape(e,t),npe(e,[{key:"render",value:function(){return Z.createElement(cpe,this.props)}}])}(Z.Component);l8(jd,"displayName","YAxis");l8(jd,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function m5(t){return hpe(t)||fpe(t)||dpe(t)||upe()}function upe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dpe(t,e){if(t){if(typeof t=="string")return N2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N2(t,e)}}function fpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hpe(t){if(Array.isArray(t))return N2(t)}function N2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var k2=function(e,r,n,i,s){var o=ti(e,$E),l=ti(e,cx),c=[].concat(m5(o),m5(l)),u=ti(e,dx),f="".concat(i,"Id"),d=i[0],p=r;if(c.length&&(p=c.reduce(function(y,v){if(v.props[f]===n&&ks(v.props,"extendDomain")&&Pe(v.props[d])){var b=v.props[d];return[Math.min(y[0],b),Math.max(y[1],b)]}return y},p)),u.length){var m="".concat(d,"1"),x="".concat(d,"2");p=u.reduce(function(y,v){if(v.props[f]===n&&ks(v.props,"extendDomain")&&Pe(v.props[m])&&Pe(v.props[x])){var b=v.props[m],w=v.props[x];return[Math.min(y[0],b,w),Math.max(y[1],b,w)]}return y},p)}return s&&s.length&&(p=s.reduce(function(y,v){return Pe(v)?[Math.min(y[0],v),Math.max(y[1],v)]:y},p)),p},BN={exports:{}},g5;function ppe(){return g5||(g5=1,function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function s(c,u,f,d,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new i(f,d||c,p),x=r?r+u:u;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],m]:c._events[x].push(m):(c._events[x]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)e.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,m=d.length,x=new Array(m);p<m;p++)x[p]=d[p].fn;return x},l.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,p,m,x){var y=r?r+u:u;if(!this._events[y])return!1;var v=this._events[y],b=arguments.length,w,N;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,d),!0;case 4:return v.fn.call(v.context,f,d,p),!0;case 5:return v.fn.call(v.context,f,d,p,m),!0;case 6:return v.fn.call(v.context,f,d,p,m,x),!0}for(N=1,w=new Array(b-1);N<b;N++)w[N-1]=arguments[N];v.fn.apply(v.context,w)}else{var j=v.length,k;for(N=0;N<j;N++)switch(v[N].once&&this.removeListener(u,v[N].fn,void 0,!0),b){case 1:v[N].fn.call(v[N].context);break;case 2:v[N].fn.call(v[N].context,f);break;case 3:v[N].fn.call(v[N].context,f,d);break;case 4:v[N].fn.call(v[N].context,f,d,p);break;default:if(!w)for(k=1,w=new Array(b-1);k<b;k++)w[k-1]=arguments[k];v[N].fn.apply(v[N].context,w)}}return!0},l.prototype.on=function(u,f,d){return s(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return s(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,p){var m=r?r+u:u;if(!this._events[m])return this;if(!f)return o(this,m),this;var x=this._events[m];if(x.fn)x.fn===f&&(!p||x.once)&&(!d||x.context===d)&&o(this,m);else{for(var y=0,v=[],b=x.length;y<b;y++)(x[y].fn!==f||p&&!x[y].once||d&&x[y].context!==d)&&v.push(x[y]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l}(BN)),BN.exports}var mpe=ppe();const gpe=ht(mpe);var FN=new gpe,qN="recharts.syncMouseEvents";function ip(t){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(t)}function ype(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u8(n.key),n)}}function xpe(t,e,r){return e&&vpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zN(t,e,r){return e=u8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u8(t){var e=bpe(t,"string");return ip(e)=="symbol"?e:e+""}function bpe(t,e){if(ip(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wpe=function(){function t(){ype(this,t),zN(this,"activeIndex",0),zN(this,"coordinateList",[]),zN(this,"layout","horizontal")}return xpe(t,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,s=i===void 0?null:i,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,f=r.offset,d=f===void 0?null:f,p=r.mouseHandlerCallback,m=p===void 0?null:p;this.coordinateList=(n=s??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=s+c+u,p=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:d,pageY:p})}}}])}();function jpe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&Pe(n)&&Pe(i))return!0}return!1}function Spe(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function d8(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,s=t.endAngle,o=Lt(e,r,n,i),l=Lt(e,r,n,s);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:i,endAngle:s}}function Npe(t,e,r){var n,i,s,o;if(t==="horizontal")n=e.x,s=n,i=r.top,o=r.top+r.height;else if(t==="vertical")i=e.y,o=i,n=r.left,s=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,f=e.outerRadius,d=e.angle,p=Lt(l,c,u,d),m=Lt(l,c,f,d);n=p.x,i=p.y,s=m.x,o=m.y}else return d8(e);return[{x:n,y:i},{x:s,y:o}]}function sp(t){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(t)}function y5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y5(Object(r),!0).forEach(function(n){kpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kpe(t,e,r){return e=_pe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _pe(t){var e=Ope(t,"string");return sp(e)=="symbol"?e:e+""}function Ope(t,e){if(sp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Epe(t){var e,r,n=t.element,i=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,f=t.tooltipAxisBandSize,d=t.layout,p=t.chartName,m=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!s||!o||p!=="ScatterChart"&&i!=="axis")return null;var x,y=Gy;if(p==="ScatterChart")x=o,y=Yce;else if(p==="BarChart")x=Spe(d,o,c,f),y=TE;else if(d==="radial"){var v=d8(o),b=v.cx,w=v.cy,N=v.radius,j=v.startAngle,k=v.endAngle;x={cx:b,cy:w,startAngle:j,endAngle:k,innerRadius:N,outerRadius:N},y=fz}else x={points:Npe(d,o,c)},y=Gy;var _=kg(kg(kg(kg({stroke:"#ccc",pointerEvents:"none"},c),x),Ge(m,!1)),{},{payload:l,payloadIndex:u,className:it("recharts-tooltip-cursor",m.className)});return O.isValidElement(m)?O.cloneElement(m,_):O.createElement(y,_)}var Cpe=["item"],Ape=["children","className","width","height","style","compact","title","desc"];function Qu(t){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qu(t)}function hu(){return hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hu.apply(this,arguments)}function v5(t,e){return Mpe(t)||Ppe(t,e)||h8(t,e)||Tpe()}function Tpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ppe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Mpe(t){if(Array.isArray(t))return t}function x5(t,e){if(t==null)return{};var r=Rpe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Rpe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Ipe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p8(n.key),n)}}function Lpe(t,e,r){return e&&Dpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $pe(t,e,r){return e=yv(e),Bpe(t,f8()?Reflect.construct(e,r||[],yv(t).constructor):e.apply(t,r))}function Bpe(t,e){if(e&&(Qu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fpe(t)}function Fpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f8=function(){return!!t})()}function yv(t){return yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yv(t)}function qpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_2(t,e)}function _2(t,e){return _2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},_2(t,e)}function Zu(t){return Hpe(t)||Upe(t)||h8(t)||zpe()}function zpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h8(t,e){if(t){if(typeof t=="string")return O2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O2(t,e)}}function Upe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Hpe(t){if(Array.isArray(t))return O2(t)}function O2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function b5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?b5(Object(r),!0).forEach(function(n){Xe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xe(t,e,r){return e=p8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p8(t){var e=Wpe(t,"string");return Qu(e)=="symbol"?e:e+""}function Wpe(t,e){if(Qu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vpe={xAxis:["bottom","top"],yAxis:["left","right"]},Kpe={width:"100%",height:"100%"},m8={x:0,y:0};function _g(t){return t}var Gpe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},Ype=function(e,r,n,i){var s=r.find(function(f){return f&&f.index===n});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,l=i.radius;return xe(xe(xe({},i),Lt(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=i.angle;return xe(xe(xe({},i),Lt(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return m8},fx=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,s=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Zu(l),Zu(u)):l},[]);return o.length>0?o:e&&e.length&&Pe(i)&&Pe(s)?e.slice(i,s+1):[]};function g8(t){return t==="number"?[0,"auto"]:void 0}var E2=function(e,r,n,i){var s=e.graphicalItems,o=e.tooltipAxis,l=fx(r,e);return n<0||!s||!s.length||n>=l.length?null:s.reduce(function(c,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var m=d===void 0?l:d;p=by(m,o.dataKey,i)}else p=d&&d[n]||l[n];return p?[].concat(Zu(c),[oz(u,p)]):c},[])},w5=function(e,r,n,i){var s=i||{x:e.chartX,y:e.chartY},o=Gpe(s,n),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,f=boe(o,l,u,c);if(f>=0&&u){var d=u[f]&&u[f].value,p=E2(e,r,f,d),m=Ype(n,l,f,s);return{activeTooltipIndex:f,activeLabel:d,activePayload:p,activeCoordinate:m}}return null},Xpe=function(e,r){var n=r.axes,i=r.graphicalItems,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=e.layout,d=e.children,p=e.stackOffset,m=ez(f,s);return n.reduce(function(x,y){var v,b=y.type.defaultProps!==void 0?xe(xe({},y.type.defaultProps),y.props):y.props,w=b.type,N=b.dataKey,j=b.allowDataOverflow,k=b.allowDuplicatedCategory,_=b.scale,E=b.ticks,A=b.includeHidden,T=b[o];if(x[T])return x;var M=fx(e.data,{graphicalItems:i.filter(function(U){var G,ee=o in U.props?U.props[o]:(G=U.type.defaultProps)===null||G===void 0?void 0:G[o];return ee===T}),dataStartIndex:c,dataEndIndex:u}),P=M.length,R,L,$;jpe(b.domain,j,w)&&(R=z_(b.domain,null,j),m&&(w==="number"||_!=="auto")&&($=th(M,N,"category")));var F=g8(w);if(!R||R.length===0){var z,W=(z=b.domain)!==null&&z!==void 0?z:F;if(N){if(R=th(M,N,w),w==="category"&&m){var K=mQ(R);k&&K?(L=R,R=iv(0,P)):k||(R=w3(W,R,y).reduce(function(U,G){return U.indexOf(G)>=0?U:[].concat(Zu(U),[G])},[]))}else if(w==="category")k?R=R.filter(function(U){return U!==""&&!tt(U)}):R=w3(W,R,y).reduce(function(U,G){return U.indexOf(G)>=0||G===""||tt(G)?U:[].concat(Zu(U),[G])},[]);else if(w==="number"){var q=koe(M,i.filter(function(U){var G,ee,Q=o in U.props?U.props[o]:(G=U.type.defaultProps)===null||G===void 0?void 0:G[o],H="hide"in U.props?U.props.hide:(ee=U.type.defaultProps)===null||ee===void 0?void 0:ee.hide;return Q===T&&(A||!H)}),N,s,f);q&&(R=q)}m&&(w==="number"||_!=="auto")&&($=th(M,N,"category"))}else m?R=iv(0,P):l&&l[T]&&l[T].hasStack&&w==="number"?R=p==="expand"?[0,1]:sz(l[T].stackGroups,c,u):R=Zq(M,i.filter(function(U){var G=o in U.props?U.props[o]:U.type.defaultProps[o],ee="hide"in U.props?U.props.hide:U.type.defaultProps.hide;return G===T&&(A||!ee)}),w,f,!0);if(w==="number")R=k2(d,R,T,s,E),W&&(R=z_(W,R,j));else if(w==="category"&&W){var V=W,D=R.every(function(U){return V.indexOf(U)>=0});D&&(R=V)}}return xe(xe({},x),{},Xe({},T,xe(xe({},b),{},{axisType:s,domain:R,categoricalDomain:$,duplicateDomain:L,originalDomain:(v=b.domain)!==null&&v!==void 0?v:F,isCategorical:m,layout:f})))},{})},Jpe=function(e,r){var n=r.graphicalItems,i=r.Axis,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=e.layout,d=e.children,p=fx(e.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=p.length,x=ez(f,s),y=-1;return n.reduce(function(v,b){var w=b.type.defaultProps!==void 0?xe(xe({},b.type.defaultProps),b.props):b.props,N=w[o],j=g8("number");if(!v[N]){y++;var k;return x?k=iv(0,m):l&&l[N]&&l[N].hasStack?(k=sz(l[N].stackGroups,c,u),k=k2(d,k,N,s)):(k=z_(j,Zq(p,n.filter(function(_){var E,A,T=o in _.props?_.props[o]:(E=_.type.defaultProps)===null||E===void 0?void 0:E[o],M="hide"in _.props?_.props.hide:(A=_.type.defaultProps)===null||A===void 0?void 0:A.hide;return T===N&&!M}),"number",f),i.defaultProps.allowDataOverflow),k=k2(d,k,N,s)),xe(xe({},v),{},Xe({},N,xe(xe({axisType:s},i.defaultProps),{},{hide:!0,orientation:ei(Vpe,"".concat(s,".").concat(y%2),null),domain:k,originalDomain:j,isCategorical:x,layout:f})))}return v},{})},Qpe=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,s=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=e.children,d="".concat(i,"Id"),p=ti(f,s),m={};return p&&p.length?m=Xpe(e,{axes:p,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=Jpe(e,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},Zpe=function(e){var r=ha(e),n=oo(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:iE(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Wy(r,n)}},j5=function(e){var r=e.children,n=e.defaultShowTooltip,i=Vn(r,Uu),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},eme=function(e){return!e||!e.length?!1:e.some(function(r){var n=co(r&&r.type);return n&&n.indexOf("Bar")>=0})},S5=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},tme=function(e,r){var n=e.props,i=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,u=n.width,f=n.height,d=n.children,p=n.margin||{},m=Vn(d,Uu),x=Vn(d,vu),y=Object.keys(c).reduce(function(k,_){var E=c[_],A=E.orientation;return!E.mirror&&!E.hide?xe(xe({},k),{},Xe({},A,k[A]+E.width)):k},{left:p.left||0,right:p.right||0}),v=Object.keys(o).reduce(function(k,_){var E=o[_],A=E.orientation;return!E.mirror&&!E.hide?xe(xe({},k),{},Xe({},A,ei(k,"".concat(A))+E.height)):k},{top:p.top||0,bottom:p.bottom||0}),b=xe(xe({},v),y),w=b.bottom;m&&(b.bottom+=m.props.height||Uu.defaultProps.height),x&&r&&(b=Soe(b,i,n,r));var N=u-b.left-b.right,j=f-b.top-b.bottom;return xe(xe({brushBottom:w},b),{},{width:Math.max(N,0),height:Math.max(j,0)})},rme=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},zE=function(e){var r=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,f=e.formatAxisMap,d=e.defaultProps,p=function(b,w){var N=w.graphicalItems,j=w.stackGroups,k=w.offset,_=w.updateId,E=w.dataStartIndex,A=w.dataEndIndex,T=b.barSize,M=b.layout,P=b.barGap,R=b.barCategoryGap,L=b.maxBarSize,$=S5(M),F=$.numericAxisName,z=$.cateAxisName,W=eme(N),K=[];return N.forEach(function(q,V){var D=fx(b.data,{graphicalItems:[q],dataStartIndex:E,dataEndIndex:A}),U=q.type.defaultProps!==void 0?xe(xe({},q.type.defaultProps),q.props):q.props,G=U.dataKey,ee=U.maxBarSize,Q=U["".concat(F,"Id")],H=U["".concat(z,"Id")],Y={},re=c.reduce(function(Oe,be){var We=w["".concat(be.axisType,"Map")],Je=U["".concat(be.axisType,"Id")];We&&We[Je]||be.axisType==="zAxis"||Wl();var Ye=We[Je];return xe(xe({},Oe),{},Xe(Xe({},be.axisType,Ye),"".concat(be.axisType,"Ticks"),oo(Ye)))},Y),J=re[z],ne=re["".concat(z,"Ticks")],te=j&&j[Q]&&j[Q].hasStack&&Roe(q,j[Q].stackGroups),se=co(q.type).indexOf("Bar")>=0,ve=Wy(J,ne),ie=[],ye=W&&woe({barSize:T,stackGroups:j,totalSize:rme(re,z)});if(se){var Te,Le,ue=tt(ee)?L:ee,he=(Te=(Le=Wy(J,ne,!0))!==null&&Le!==void 0?Le:ue)!==null&&Te!==void 0?Te:0;ie=joe({barGap:P,barCategoryGap:R,bandSize:he!==ve?he:ve,sizeList:ye[H],maxBarSize:ue}),he!==ve&&(ie=ie.map(function(Oe){return xe(xe({},Oe),{},{position:xe(xe({},Oe.position),{},{offset:Oe.position.offset-he/2})})}))}var we=q&&q.type&&q.type.getComposedData;we&&K.push({props:xe(xe({},we(xe(xe({},re),{},{displayedData:D,props:b,dataKey:G,item:q,bandSize:ve,barPosition:ie,offset:k,stackedData:te,layout:M,dataStartIndex:E,dataEndIndex:A}))),{},Xe(Xe(Xe({key:q.key||"item-".concat(V)},F,re[F]),z,re[z]),"animationId",_)),childIndex:OQ(q,b.children),item:q})}),K},m=function(b,w){var N=b.props,j=b.dataStartIndex,k=b.dataEndIndex,_=b.updateId;if(!IR({props:N}))return null;var E=N.children,A=N.layout,T=N.stackOffset,M=N.data,P=N.reverseStackOrder,R=S5(A),L=R.numericAxisName,$=R.cateAxisName,F=ti(E,n),z=Poe(M,F,"".concat(L,"Id"),"".concat($,"Id"),T,P),W=c.reduce(function(U,G){var ee="".concat(G.axisType,"Map");return xe(xe({},U),{},Xe({},ee,Qpe(N,xe(xe({},G),{},{graphicalItems:F,stackGroups:G.axisType===L&&z,dataStartIndex:j,dataEndIndex:k}))))},{}),K=tme(xe(xe({},W),{},{props:N,graphicalItems:F}),w==null?void 0:w.legendBBox);Object.keys(W).forEach(function(U){W[U]=f(N,W[U],K,U.replace("Map",""),r)});var q=W["".concat($,"Map")],V=Zpe(q),D=p(N,xe(xe({},W),{},{dataStartIndex:j,dataEndIndex:k,updateId:_,graphicalItems:F,stackGroups:z,offset:K}));return xe(xe({formattedGraphicalItems:D,graphicalItems:F,offset:K,stackGroups:z},V),W)},x=function(v){function b(w){var N,j,k;return Ipe(this,b),k=$pe(this,b,[w]),Xe(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Xe(k,"accessibilityManager",new wpe),Xe(k,"handleLegendBBoxUpdate",function(_){if(_){var E=k.state,A=E.dataStartIndex,T=E.dataEndIndex,M=E.updateId;k.setState(xe({legendBBox:_},m({props:k.props,dataStartIndex:A,dataEndIndex:T,updateId:M},xe(xe({},k.state),{},{legendBBox:_}))))}}),Xe(k,"handleReceiveSyncEvent",function(_,E,A){if(k.props.syncId===_){if(A===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(E)}}),Xe(k,"handleBrushChange",function(_){var E=_.startIndex,A=_.endIndex;if(E!==k.state.dataStartIndex||A!==k.state.dataEndIndex){var T=k.state.updateId;k.setState(function(){return xe({dataStartIndex:E,dataEndIndex:A},m({props:k.props,dataStartIndex:E,dataEndIndex:A,updateId:T},k.state))}),k.triggerSyncEvent({dataStartIndex:E,dataEndIndex:A})}}),Xe(k,"handleMouseEnter",function(_){var E=k.getMouseInfo(_);if(E){var A=xe(xe({},E),{},{isTooltipActive:!0});k.setState(A),k.triggerSyncEvent(A);var T=k.props.onMouseEnter;Ze(T)&&T(A,_)}}),Xe(k,"triggeredAfterMouseMove",function(_){var E=k.getMouseInfo(_),A=E?xe(xe({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(A),k.triggerSyncEvent(A);var T=k.props.onMouseMove;Ze(T)&&T(A,_)}),Xe(k,"handleItemMouseEnter",function(_){k.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),Xe(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),Xe(k,"handleMouseMove",function(_){_.persist(),k.throttleTriggeredAfterMouseMove(_)}),Xe(k,"handleMouseLeave",function(_){k.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};k.setState(E),k.triggerSyncEvent(E);var A=k.props.onMouseLeave;Ze(A)&&A(E,_)}),Xe(k,"handleOuterEvent",function(_){var E=_Q(_),A=ei(k.props,"".concat(E));if(E&&Ze(A)){var T,M;/.*touch.*/i.test(E)?M=k.getMouseInfo(_.changedTouches[0]):M=k.getMouseInfo(_),A((T=M)!==null&&T!==void 0?T:{},_)}}),Xe(k,"handleClick",function(_){var E=k.getMouseInfo(_);if(E){var A=xe(xe({},E),{},{isTooltipActive:!0});k.setState(A),k.triggerSyncEvent(A);var T=k.props.onClick;Ze(T)&&T(A,_)}}),Xe(k,"handleMouseDown",function(_){var E=k.props.onMouseDown;if(Ze(E)){var A=k.getMouseInfo(_);E(A,_)}}),Xe(k,"handleMouseUp",function(_){var E=k.props.onMouseUp;if(Ze(E)){var A=k.getMouseInfo(_);E(A,_)}}),Xe(k,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),Xe(k,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&k.handleMouseDown(_.changedTouches[0])}),Xe(k,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&k.handleMouseUp(_.changedTouches[0])}),Xe(k,"handleDoubleClick",function(_){var E=k.props.onDoubleClick;if(Ze(E)){var A=k.getMouseInfo(_);E(A,_)}}),Xe(k,"handleContextMenu",function(_){var E=k.props.onContextMenu;if(Ze(E)){var A=k.getMouseInfo(_);E(A,_)}}),Xe(k,"triggerSyncEvent",function(_){k.props.syncId!==void 0&&FN.emit(qN,k.props.syncId,_,k.eventEmitterSymbol)}),Xe(k,"applySyncEvent",function(_){var E=k.props,A=E.layout,T=E.syncMethod,M=k.state.updateId,P=_.dataStartIndex,R=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)k.setState(xe({dataStartIndex:P,dataEndIndex:R},m({props:k.props,dataStartIndex:P,dataEndIndex:R,updateId:M},k.state)));else if(_.activeTooltipIndex!==void 0){var L=_.chartX,$=_.chartY,F=_.activeTooltipIndex,z=k.state,W=z.offset,K=z.tooltipTicks;if(!W)return;if(typeof T=="function")F=T(K,_);else if(T==="value"){F=-1;for(var q=0;q<K.length;q++)if(K[q].value===_.activeLabel){F=q;break}}var V=xe(xe({},W),{},{x:W.left,y:W.top}),D=Math.min(L,V.x+V.width),U=Math.min($,V.y+V.height),G=K[F]&&K[F].value,ee=E2(k.state,k.props.data,F),Q=K[F]?{x:A==="horizontal"?K[F].coordinate:D,y:A==="horizontal"?U:K[F].coordinate}:m8;k.setState(xe(xe({},_),{},{activeLabel:G,activeCoordinate:Q,activePayload:ee,activeTooltipIndex:F}))}else k.setState(_)}),Xe(k,"renderCursor",function(_){var E,A=k.state,T=A.isTooltipActive,M=A.activeCoordinate,P=A.activePayload,R=A.offset,L=A.activeTooltipIndex,$=A.tooltipAxisBandSize,F=k.getTooltipEventType(),z=(E=_.props.active)!==null&&E!==void 0?E:T,W=k.props.layout,K=_.key||"_recharts-cursor";return Z.createElement(Epe,{key:K,activeCoordinate:M,activePayload:P,activeTooltipIndex:L,chartName:r,element:_,isActive:z,layout:W,offset:R,tooltipAxisBandSize:$,tooltipEventType:F})}),Xe(k,"renderPolarAxis",function(_,E,A){var T=ei(_,"type.axisType"),M=ei(k.state,"".concat(T,"Map")),P=_.type.defaultProps,R=P!==void 0?xe(xe({},P),_.props):_.props,L=M&&M[R["".concat(T,"Id")]];return O.cloneElement(_,xe(xe({},L),{},{className:it(T,L.className),key:_.key||"".concat(E,"-").concat(A),ticks:oo(L,!0)}))}),Xe(k,"renderPolarGrid",function(_){var E=_.props,A=E.radialLines,T=E.polarAngles,M=E.polarRadius,P=k.state,R=P.radiusAxisMap,L=P.angleAxisMap,$=ha(R),F=ha(L),z=F.cx,W=F.cy,K=F.innerRadius,q=F.outerRadius;return O.cloneElement(_,{polarAngles:Array.isArray(T)?T:oo(F,!0).map(function(V){return V.coordinate}),polarRadius:Array.isArray(M)?M:oo($,!0).map(function(V){return V.coordinate}),cx:z,cy:W,innerRadius:K,outerRadius:q,key:_.key||"polar-grid",radialLines:A})}),Xe(k,"renderLegend",function(){var _=k.state.formattedGraphicalItems,E=k.props,A=E.children,T=E.width,M=E.height,P=k.props.margin||{},R=T-(P.left||0)-(P.right||0),L=Jq({children:A,formattedGraphicalItems:_,legendWidth:R,legendContent:u});if(!L)return null;var $=L.item,F=x5(L,Cpe);return O.cloneElement($,xe(xe({},F),{},{chartWidth:T,chartHeight:M,margin:P,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),Xe(k,"renderTooltip",function(){var _,E=k.props,A=E.children,T=E.accessibilityLayer,M=Vn(A,wi);if(!M)return null;var P=k.state,R=P.isTooltipActive,L=P.activeCoordinate,$=P.activePayload,F=P.activeLabel,z=P.offset,W=(_=M.props.active)!==null&&_!==void 0?_:R;return O.cloneElement(M,{viewBox:xe(xe({},z),{},{x:z.left,y:z.top}),active:W,label:F,payload:W?$:[],coordinate:L,accessibilityLayer:T})}),Xe(k,"renderBrush",function(_){var E=k.props,A=E.margin,T=E.data,M=k.state,P=M.offset,R=M.dataStartIndex,L=M.dataEndIndex,$=M.updateId;return O.cloneElement(_,{key:_.key||"_recharts-brush",onChange:wg(k.handleBrushChange,_.props.onChange),data:T,x:Pe(_.props.x)?_.props.x:P.left,y:Pe(_.props.y)?_.props.y:P.top+P.height+P.brushBottom-(A.bottom||0),width:Pe(_.props.width)?_.props.width:P.width,startIndex:R,endIndex:L,updateId:"brush-".concat($)})}),Xe(k,"renderReferenceElement",function(_,E,A){if(!_)return null;var T=k,M=T.clipPathId,P=k.state,R=P.xAxisMap,L=P.yAxisMap,$=P.offset,F=_.type.defaultProps||{},z=_.props,W=z.xAxisId,K=W===void 0?F.xAxisId:W,q=z.yAxisId,V=q===void 0?F.yAxisId:q;return O.cloneElement(_,{key:_.key||"".concat(E,"-").concat(A),xAxis:R[K],yAxis:L[V],viewBox:{x:$.left,y:$.top,width:$.width,height:$.height},clipPathId:M})}),Xe(k,"renderActivePoints",function(_){var E=_.item,A=_.activePoint,T=_.basePoint,M=_.childIndex,P=_.isRange,R=[],L=E.props.key,$=E.item.type.defaultProps!==void 0?xe(xe({},E.item.type.defaultProps),E.item.props):E.item.props,F=$.activeDot,z=$.dataKey,W=xe(xe({index:M,dataKey:z,cx:A.x,cy:A.y,r:4,fill:AE(E.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},Ge(F,!1)),wy(F));return R.push(b.renderActiveDot(F,W,"".concat(L,"-activePoint-").concat(M))),T?R.push(b.renderActiveDot(F,xe(xe({},W),{},{cx:T.x,cy:T.y}),"".concat(L,"-basePoint-").concat(M))):P&&R.push(null),R}),Xe(k,"renderGraphicChild",function(_,E,A){var T=k.filterFormatItem(_,E,A);if(!T)return null;var M=k.getTooltipEventType(),P=k.state,R=P.isTooltipActive,L=P.tooltipAxis,$=P.activeTooltipIndex,F=P.activeLabel,z=k.props.children,W=Vn(z,wi),K=T.props,q=K.points,V=K.isRange,D=K.baseLine,U=T.item.type.defaultProps!==void 0?xe(xe({},T.item.type.defaultProps),T.item.props):T.item.props,G=U.activeDot,ee=U.hide,Q=U.activeBar,H=U.activeShape,Y=!!(!ee&&R&&W&&(G||Q||H)),re={};M!=="axis"&&W&&W.props.trigger==="click"?re={onClick:wg(k.handleItemMouseEnter,_.props.onClick)}:M!=="axis"&&(re={onMouseLeave:wg(k.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:wg(k.handleItemMouseEnter,_.props.onMouseEnter)});var J=O.cloneElement(_,xe(xe({},T.props),re));function ne(be){return typeof L.dataKey=="function"?L.dataKey(be.payload):null}if(Y)if($>=0){var te,se;if(L.dataKey&&!L.allowDuplicatedCategory){var ve=typeof L.dataKey=="function"?ne:"payload.".concat(L.dataKey.toString());te=by(q,ve,F),se=V&&D&&by(D,ve,F)}else te=q==null?void 0:q[$],se=V&&D&&D[$];if(H||Q){var ie=_.props.activeIndex!==void 0?_.props.activeIndex:$;return[O.cloneElement(_,xe(xe(xe({},T.props),re),{},{activeIndex:ie})),null,null]}if(!tt(te))return[J].concat(Zu(k.renderActivePoints({item:T,activePoint:te,basePoint:se,childIndex:$,isRange:V})))}else{var ye,Te=(ye=k.getItemByXY(k.state.activeCoordinate))!==null&&ye!==void 0?ye:{graphicalItem:J},Le=Te.graphicalItem,ue=Le.item,he=ue===void 0?_:ue,we=Le.childIndex,Oe=xe(xe(xe({},T.props),re),{},{activeIndex:we});return[O.cloneElement(he,Oe),null,null]}return V?[J,null,null]:[J,null]}),Xe(k,"renderCustomized",function(_,E,A){return O.cloneElement(_,xe(xe({key:"recharts-customized-".concat(A)},k.props),k.state))}),Xe(k,"renderMap",{CartesianGrid:{handler:_g,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:_g},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:_g},YAxis:{handler:_g},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((N=w.id)!==null&&N!==void 0?N:md("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=YF(k.triggeredAfterMouseMove,(j=w.throttleDelay)!==null&&j!==void 0?j:1e3/60),k.state={},k}return qpe(b,v),Lpe(b,[{key:"componentDidMount",value:function(){var N,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var N=this.props,j=N.children,k=N.data,_=N.height,E=N.layout,A=Vn(j,wi);if(A){var T=A.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var M=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,P=E2(this.state,k,T,M),R=this.state.tooltipTicks[T].coordinate,L=(this.state.offset.top+_)/2,$=E==="horizontal",F=$?{x:R,y:L}:{y:R,x:L},z=this.state.formattedGraphicalItems.find(function(K){var q=K.item;return q.type.name==="Scatter"});z&&(F=xe(xe({},F),z.props.points[T].tooltipPosition),P=z.props.points[T].tooltipPayload);var W={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:M,activePayload:P,activeCoordinate:F};this.setState(W),this.renderCursor(A),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(N,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==N.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==N.margin){var k,_;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(N){c_([Vn(N.children,wi)],[Vn(this.props.children,wi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var N=Vn(this.props.children,wi);if(N&&typeof N.props.shared=="boolean"){var j=N.props.shared?"axis":"item";return l.indexOf(j)>=0?j:s}return s}},{key:"getMouseInfo",value:function(N){if(!this.container)return null;var j=this.container,k=j.getBoundingClientRect(),_=hre(k),E={chartX:Math.round(N.pageX-_.left),chartY:Math.round(N.pageY-_.top)},A=k.width/j.offsetWidth||1,T=this.inRange(E.chartX,E.chartY,A);if(!T)return null;var M=this.state,P=M.xAxisMap,R=M.yAxisMap,L=this.getTooltipEventType(),$=w5(this.state,this.props.data,this.props.layout,T);if(L!=="axis"&&P&&R){var F=ha(P).scale,z=ha(R).scale,W=F&&F.invert?F.invert(E.chartX):null,K=z&&z.invert?z.invert(E.chartY):null;return xe(xe({},E),{},{xValue:W,yValue:K},$)}return $?xe(xe({},E),$):null}},{key:"inRange",value:function(N,j){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,E=N/k,A=j/k;if(_==="horizontal"||_==="vertical"){var T=this.state.offset,M=E>=T.left&&E<=T.left+T.width&&A>=T.top&&A<=T.top+T.height;return M?{x:E,y:A}:null}var P=this.state,R=P.angleAxisMap,L=P.radiusAxisMap;if(R&&L){var $=ha(R);return N3({x:E,y:A},$)}return null}},{key:"parseEventsOfWrapper",value:function(){var N=this.props.children,j=this.getTooltipEventType(),k=Vn(N,wi),_={};k&&j==="axis"&&(k.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=wy(this.props,this.handleOuterEvent);return xe(xe({},E),_)}},{key:"addListener",value:function(){FN.on(qN,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){FN.removeListener(qN,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(N,j,k){for(var _=this.state.formattedGraphicalItems,E=0,A=_.length;E<A;E++){var T=_[E];if(T.item===N||T.props.key===N.key||j===co(T.item.type)&&k===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var N=this.clipPathId,j=this.state.offset,k=j.left,_=j.top,E=j.height,A=j.width;return Z.createElement("defs",null,Z.createElement("clipPath",{id:N},Z.createElement("rect",{x:k,y:_,height:E,width:A})))}},{key:"getXScales",value:function(){var N=this.state.xAxisMap;return N?Object.entries(N).reduce(function(j,k){var _=v5(k,2),E=_[0],A=_[1];return xe(xe({},j),{},Xe({},E,A.scale))},{}):null}},{key:"getYScales",value:function(){var N=this.state.yAxisMap;return N?Object.entries(N).reduce(function(j,k){var _=v5(k,2),E=_[0],A=_[1];return xe(xe({},j),{},Xe({},E,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(N){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[N])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(N){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[N])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(N){var j=this.state,k=j.formattedGraphicalItems,_=j.activeItem;if(k&&k.length)for(var E=0,A=k.length;E<A;E++){var T=k[E],M=T.props,P=T.item,R=P.type.defaultProps!==void 0?xe(xe({},P.type.defaultProps),P.props):P.props,L=co(P.type);if(L==="Bar"){var $=(M.data||[]).find(function(K){return Cce(N,K)});if($)return{graphicalItem:T,payload:$}}else if(L==="RadialBar"){var F=(M.data||[]).find(function(K){return N3(N,K)});if(F)return{graphicalItem:T,payload:F}}else if(sx(T,_)||ox(T,_)||Zh(T,_)){var z=Zue({graphicalItem:T,activeTooltipItem:_,itemData:R.data}),W=R.activeIndex===void 0?z:R.activeIndex;return{graphicalItem:xe(xe({},T),{},{childIndex:W}),payload:Zh(T,_)?R.data[z]:T.props.data[z]}}}return null}},{key:"render",value:function(){var N=this;if(!IR(this))return null;var j=this.props,k=j.children,_=j.className,E=j.width,A=j.height,T=j.style,M=j.compact,P=j.title,R=j.desc,L=x5(j,Ape),$=Ge(L,!1);if(M)return Z.createElement(ZL,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Z.createElement(d_,hu({},$,{width:E,height:A,title:P,desc:R}),this.renderClipPath(),LR(k,this.renderMap)));if(this.props.accessibilityLayer){var F,z;$.tabIndex=(F=this.props.tabIndex)!==null&&F!==void 0?F:0,$.role=(z=this.props.role)!==null&&z!==void 0?z:"application",$.onKeyDown=function(K){N.accessibilityManager.keyboardEvent(K)},$.onFocus=function(){N.accessibilityManager.focus()}}var W=this.parseEventsOfWrapper();return Z.createElement(ZL,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Z.createElement("div",hu({className:it("recharts-wrapper",_),style:xe({position:"relative",cursor:"default",width:E,height:A},T)},W,{ref:function(q){N.container=q}}),Z.createElement(d_,hu({},$,{width:E,height:A,title:P,desc:R,style:Kpe}),this.renderClipPath(),LR(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(O.Component);Xe(x,"displayName",r),Xe(x,"defaultProps",xe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Xe(x,"getDerivedStateFromProps",function(v,b){var w=v.dataKey,N=v.data,j=v.children,k=v.width,_=v.height,E=v.layout,A=v.stackOffset,T=v.margin,M=b.dataStartIndex,P=b.dataEndIndex;if(b.updateId===void 0){var R=j5(v);return xe(xe(xe({},R),{},{updateId:0},m(xe(xe({props:v},R),{},{updateId:0}),b)),{},{prevDataKey:w,prevData:N,prevWidth:k,prevHeight:_,prevLayout:E,prevStackOffset:A,prevMargin:T,prevChildren:j})}if(w!==b.prevDataKey||N!==b.prevData||k!==b.prevWidth||_!==b.prevHeight||E!==b.prevLayout||A!==b.prevStackOffset||!yu(T,b.prevMargin)){var L=j5(v),$={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},F=xe(xe({},w5(b,N,E)),{},{updateId:b.updateId+1}),z=xe(xe(xe({},L),$),F);return xe(xe(xe({},z),m(xe({props:v},z),b)),{},{prevDataKey:w,prevData:N,prevWidth:k,prevHeight:_,prevLayout:E,prevStackOffset:A,prevMargin:T,prevChildren:j})}if(!c_(j,b.prevChildren)){var W,K,q,V,D=Vn(j,Uu),U=D&&(W=(K=D.props)===null||K===void 0?void 0:K.startIndex)!==null&&W!==void 0?W:M,G=D&&(q=(V=D.props)===null||V===void 0?void 0:V.endIndex)!==null&&q!==void 0?q:P,ee=U!==M||G!==P,Q=!tt(N),H=Q&&!ee?b.updateId:b.updateId+1;return xe(xe({updateId:H},m(xe(xe({props:v},b),{},{updateId:H,dataStartIndex:U,dataEndIndex:G}),b)),{},{prevChildren:j,dataStartIndex:U,dataEndIndex:G})}return null}),Xe(x,"renderActiveDot",function(v,b,w){var N;return O.isValidElement(v)?N=O.cloneElement(v,b):Ze(v)?N=v(b):N=Z.createElement(ex,b),Z.createElement(gt,{className:"recharts-active-dot",key:w},N)});var y=O.forwardRef(function(b,w){return Z.createElement(x,hu({},b,{ref:w}))});return y.displayName=x.displayName,y},nme=zE({chartName:"LineChart",GraphicalChild:Fp,axisComponents:[{axisType:"xAxis",AxisComp:wd},{axisType:"yAxis",AxisComp:jd}],formatAxisMap:Dz}),ime=zE({chartName:"BarChart",GraphicalChild:cc,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:wd},{axisType:"yAxis",AxisComp:jd}],formatAxisMap:Dz}),sme=zE({chartName:"PieChart",GraphicalChild:Co,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:ix},{axisType:"radiusAxis",AxisComp:rx}],formatAxisMap:Hoe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function ai(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Aa(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function ome(t,e){const r=ai(t);return isNaN(e)?Aa(t,NaN):(r.setDate(r.getDate()+e),r)}const y8=6048e5,ame=864e5;let lme={};function hx(){return lme}function op(t,e){var l,c,u,f;const r=hx(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((f=(u=r.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,i=ai(t),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function vv(t){return op(t,{weekStartsOn:1})}function v8(t){const e=ai(t),r=e.getFullYear(),n=Aa(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=vv(n),s=Aa(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=vv(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function C2(t){const e=ai(t);return e.setHours(0,0,0,0),e}function N5(t){const e=ai(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function cme(t,e){const r=C2(t),n=C2(e),i=+r-N5(r),s=+n-N5(n);return Math.round((i-s)/ame)}function ume(t){const e=v8(t),r=Aa(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),vv(r)}function dme(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function fme(t){if(!dme(t)&&typeof t!="number")return!1;const e=ai(t);return!isNaN(Number(e))}function hme(t){const e=ai(t);return e.setHours(23,59,59,999),e}function pme(t){const e=ai(t),r=Aa(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const mme={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},gme=(t,e,r)=>{let n;const i=mme[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function UN(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const yme={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},vme={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xme={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bme={date:UN({formats:yme,defaultWidth:"full"}),time:UN({formats:vme,defaultWidth:"full"}),dateTime:UN({formats:xme,defaultWidth:"full"})},wme={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jme=(t,e,r,n)=>wme[t];function Tf(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const Sme={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Nme={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},kme={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_me={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ome={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Eme={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Cme=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Ame={ordinalNumber:Cme,era:Tf({values:Sme,defaultWidth:"wide"}),quarter:Tf({values:Nme,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Tf({values:kme,defaultWidth:"wide"}),day:Tf({values:_me,defaultWidth:"wide"}),dayPeriod:Tf({values:Ome,defaultWidth:"wide",formattingValues:Eme,defaultFormattingWidth:"wide"})};function Pf(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?Pme(l,d=>d.test(o)):Tme(l,d=>d.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const f=e.slice(o.length);return{value:u,rest:f}}}function Tme(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Pme(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Mme(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const Rme=/^(\d+)(th|st|nd|rd)?/i,Ime=/\d+/i,Dme={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Lme={any:[/^b/i,/^(a|c)/i]},$me={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Bme={any:[/1/i,/2/i,/3/i,/4/i]},Fme={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qme={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},zme={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ume={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Hme={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Wme={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Vme={ordinalNumber:Mme({matchPattern:Rme,parsePattern:Ime,valueCallback:t=>parseInt(t,10)}),era:Pf({matchPatterns:Dme,defaultMatchWidth:"wide",parsePatterns:Lme,defaultParseWidth:"any"}),quarter:Pf({matchPatterns:$me,defaultMatchWidth:"wide",parsePatterns:Bme,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Pf({matchPatterns:Fme,defaultMatchWidth:"wide",parsePatterns:qme,defaultParseWidth:"any"}),day:Pf({matchPatterns:zme,defaultMatchWidth:"wide",parsePatterns:Ume,defaultParseWidth:"any"}),dayPeriod:Pf({matchPatterns:Hme,defaultMatchWidth:"any",parsePatterns:Wme,defaultParseWidth:"any"})},Kme={code:"en-US",formatDistance:gme,formatLong:bme,formatRelative:jme,localize:Ame,match:Vme,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Gme(t){const e=ai(t);return cme(e,pme(e))+1}function Yme(t){const e=ai(t),r=+vv(e)-+ume(e);return Math.round(r/y8)+1}function x8(t,e){var f,d,p,m;const r=ai(t),n=r.getFullYear(),i=hx(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(p=i.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,o=Aa(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=op(o,e),c=Aa(t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=op(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function Xme(t,e){var l,c,u,f;const r=hx(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(u=r.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,i=x8(t,e),s=Aa(t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),op(s,e)}function Jme(t,e){const r=ai(t),n=+op(r,e)-+Xme(r,e);return Math.round(n/y8)+1}function Nt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const ea={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Nt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Nt(r+1,2)},d(t,e){return Nt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Nt(t.getHours()%12||12,e.length)},H(t,e){return Nt(t.getHours(),e.length)},m(t,e){return Nt(t.getMinutes(),e.length)},s(t,e){return Nt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return Nt(i,e.length)}},Jc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},k5={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return ea.y(t,e)},Y:function(t,e,r,n){const i=x8(t,n),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Nt(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):Nt(s,e.length)},R:function(t,e){const r=v8(t);return Nt(r,e.length)},u:function(t,e){const r=t.getFullYear();return Nt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Nt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Nt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return ea.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Nt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=Jme(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):Nt(i,e.length)},I:function(t,e,r){const n=Yme(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Nt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):ea.d(t,e)},D:function(t,e,r){const n=Gme(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Nt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Nt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Nt(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Nt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=Jc.noon:n===0?i=Jc.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=Jc.evening:n>=12?i=Jc.afternoon:n>=4?i=Jc.morning:i=Jc.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return ea.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):ea.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Nt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Nt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):ea.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):ea.s(t,e)},S:function(t,e){return ea.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return O5(n);case"XXXX":case"XX":return bl(n);case"XXXXX":case"XXX":default:return bl(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return O5(n);case"xxxx":case"xx":return bl(n);case"xxxxx":case"xxx":default:return bl(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_5(n,":");case"OOOO":default:return"GMT"+bl(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_5(n,":");case"zzzz":default:return"GMT"+bl(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Nt(n,e.length)},T:function(t,e,r){const n=t.getTime();return Nt(n,e.length)}};function _5(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+Nt(s,2)}function O5(t,e){return t%60===0?(t>0?"-":"+")+Nt(Math.abs(t)/60,2):bl(t,e)}function bl(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Nt(Math.trunc(n/60),2),s=Nt(n%60,2);return r+i+e+s}const E5=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},b8=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Qme=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return E5(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",E5(n,e)).replace("{{time}}",b8(i,e))},Zme={p:b8,P:Qme},ege=/^D+$/,tge=/^Y+$/,rge=["D","DD","YY","YYYY"];function nge(t){return ege.test(t)}function ige(t){return tge.test(t)}function sge(t,e,r){const n=oge(t,e,r);if(console.warn(n),rge.includes(t))throw new RangeError(n)}function oge(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const age=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,lge=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cge=/^'([^]*?)'?$/,uge=/''/g,dge=/[a-zA-Z]/;function hl(t,e,r){var f,d,p,m;const n=hx(),i=n.locale??Kme,s=n.firstWeekContainsDate??((d=(f=n.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??1,o=n.weekStartsOn??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,l=ai(t);if(!fme(l))throw new RangeError("Invalid time value");let c=e.match(lge).map(x=>{const y=x[0];if(y==="p"||y==="P"){const v=Zme[y];return v(x,i.formatLong)}return x}).join("").match(age).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const y=x[0];if(y==="'")return{isToken:!1,value:fge(x)};if(k5[y])return{isToken:!0,value:x};if(y.match(dge))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:x}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(x=>{if(!x.isToken)return x.value;const y=x.value;(ige(y)||nge(y))&&sge(y,e,String(t));const v=k5[y[0]];return v(l,y,i.localize,u)}).join("")}function fge(t){const e=t.match(cge);return e?e[1].replace(uge,"'"):t}function hge(t,e){return ome(t,-30)}const C5=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16"],pge=()=>a.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200 animate-pulse",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),a.jsx("div",{className:"h-6 bg-gray-200 rounded w-16"})]})]})}),Og=({height:t="h-80"})=>a.jsxs("div",{className:`bg-white rounded-xl border border-gray-200 ${t} animate-pulse`,children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("div",{className:"h-6 bg-gray-200 rounded w-32"})}),a.jsx("div",{className:"p-6 space-y-4",children:[...Array(5)].map((e,r)=>a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-8 h-4 bg-gray-200 rounded"}),a.jsx("div",{className:"flex-1 h-4 bg-gray-200 rounded"}),a.jsx("div",{className:"w-12 h-4 bg-gray-200 rounded"})]},r))})]}),Eg=({title:t,description:e,icon:r})=>a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[a.jsx(r,{className:"w-12 h-12 text-gray-300 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t}),a.jsx("p",{className:"text-gray-500 max-w-md",children:e})]});function mge(){var T,M,P,R,L,$,F,z,W,K;const[t,e]=O.useState({}),[r,n]=O.useState([]),[i,s]=O.useState("all"),[o,l]=O.useState({start:hl(hge(new Date),"yyyy-MM-dd"),end:hl(new Date,"yyyy-MM-dd")}),[c,u]=O.useState(!0),[f,d]=O.useState(null),[p,m]=O.useState(!1),x=O.useRef(!0),y=O.useRef(""),v=O.useMemo(()=>({selectedClient:i,dateStart:o.start,dateEnd:o.end}),[i,o.start,o.end]),b=O.useCallback(async()=>{const q=new AbortController;try{const{data:V,error:D}=await pe.from("clients").select("id, name, brand_color").order("name").abortSignal(q.signal);if(D)throw D;x.current&&V&&n(V)}catch(V){V.name!=="AbortError"&&console.error("Error fetching clients:",V)}return()=>q.abort()},[]),w=O.useCallback(async(q=!1)=>{if(!x.current)return;const V=`${v.selectedClient}-${v.dateStart}-${v.dateEnd}`;if(y.current===V&&!q)return;const D=new AbortController,U=setTimeout(()=>{D.abort(),x.current&&(d("Request timed out - please try again"),u(!1),m(!1))},15e3);try{q?m(!0):u(!0),d(null),y.current=V;const{data:G,error:ee}=await pe.functions.invoke("analytics-dashboard",{body:{clientId:v.selectedClient,dateRange:{start:hl(C2(new Date(v.dateStart)),"yyyy-MM-dd'T'HH:mm:ss.SSSxxx"),end:hl(hme(new Date(v.dateEnd)),"yyyy-MM-dd'T'HH:mm:ss.SSSxxx")},metrics:["user_activity","recent_activity","content_engagement","agent_usage","summary_stats"]}});if(clearTimeout(U),ee)throw new Error(ee.message||"Failed to fetch analytics data");x.current&&e(G||{})}catch(G){if(clearTimeout(U),G.name!=="AbortError"){const ee=G instanceof Error?G.message:"Failed to load analytics data";x.current&&(d(ee),console.error("Analytics fetch error:",G))}}finally{x.current&&(u(!1),m(!1))}},[v]);O.useEffect(()=>{let q;return b().then(V=>{q=V}),()=>{q&&q()}},[b]),O.useEffect(()=>{const q=new AbortController;return w(),()=>q.abort()},[w]),O.useEffect(()=>()=>{x.current=!1},[]);const N=O.useCallback(()=>{w(!0)},[w]),j=O.useCallback(q=>{s(q)},[]),k=O.useCallback((q,V)=>{l(D=>({...D,[q]:V}))},[]),_=[{title:"Total Users",value:((T=t.summaryStats)==null?void 0:T.totalUsers)||0,icon:oi,color:"bg-blue-500",bgColor:"bg-blue-50",textColor:"text-blue-600"},{title:"Content Items",value:((M=t.summaryStats)==null?void 0:M.totalContent)||0,icon:Zn,color:"bg-green-500",bgColor:"bg-green-50",textColor:"text-green-600"},{title:"Recent Activities",value:((P=t.summaryStats)==null?void 0:P.recentActivities)||0,icon:Xg,color:"bg-purple-500",bgColor:"bg-purple-50",textColor:"text-purple-600"},{title:"Active Sessions",value:((R=t.agentUsage)==null?void 0:R.reduce((q,V)=>q+V.conversation_count,0))||0,icon:Gr,color:"bg-orange-500",bgColor:"bg-orange-50",textColor:"text-orange-600"}],E=((L=t.contentEngagement)==null?void 0:L.slice(0,8).map(q=>({name:q.content_items.title.substring(0,20)+"...",engagements:q.engagement_count,type:q.content_items.content_type})))||[],A=(($=t.agentUsage)==null?void 0:$.slice(0,6).map((q,V)=>({name:q.content_items.title.substring(0,15)+"...",conversations:q.conversation_count,messages:q.total_messages,fill:C5[V%C5.length]})))||[];return c&&!p?a.jsx(pr,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-48 mb-2 animate-pulse"}),a.jsx("div",{className:"h-5 bg-gray-200 rounded w-80 animate-pulse"})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((q,V)=>a.jsx(pge,{},V))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx(Og,{}),a.jsx(Og,{}),a.jsx(Og,{}),a.jsx(Og,{})]})]})}):a.jsx(pr,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between space-y-4 lg:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Dashboard"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Track platform performance and user engagement"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:i,onChange:q=>j(q.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"All Clients"}),r.map(q=>a.jsx("option",{value:q.id,children:q.name},q.id))]}),a.jsx(mo,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"date",value:o.start,onChange:q=>k("start",q.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsx("span",{className:"text-gray-500",children:"to"}),a.jsx("input",{type:"date",value:o.end,onChange:q=>k("end",q.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("button",{onClick:N,disabled:p,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx(IO,{className:`w-4 h-4 mr-2 ${p?"animate-spin":""}`}),"Refresh"]})]})]}),f&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center space-x-3",children:[a.jsx(ql,{className:"w-5 h-5 text-red-500"}),a.jsx("span",{className:"text-red-700",children:f}),a.jsx("button",{onClick:N,className:"ml-auto text-red-600 hover:text-red-700 font-medium",children:"Try Again"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:_.map(q=>{const V=q.icon;return a.jsx("div",{className:`${q.bgColor} rounded-xl p-6 border border-gray-200`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`${q.color} rounded-lg p-3 mr-4`,children:a.jsx(V,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:q.title}),a.jsx("p",{className:`text-3xl font-bold ${q.textColor}`,children:q.value.toLocaleString()})]})]})},q.title)})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(VX,{className:"w-5 h-5 text-yellow-500"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Top Active Users"})]}),a.jsx("span",{className:"text-sm text-gray-500",children:"Last 30 days"})]}),a.jsx("div",{className:"p-6",children:t.userActivity&&t.userActivity.length>0?a.jsx("div",{className:"space-y-4",children:t.userActivity.slice(0,10).map((q,V)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${V<3?"bg-yellow-100 text-yellow-800":"bg-gray-200 text-gray-600"}`,children:V+1}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-gray-900",children:[q.first_name," ",q.last_name]}),a.jsx("p",{className:"text-sm text-gray-500",children:q.email})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-semibold text-gray-900",children:q.activity_count}),a.jsx("p",{className:"text-xs text-gray-500",children:"activities"})]})]},q.user_id))}):a.jsx(Eg,{title:"No user activity data",description:"User activity will appear here once users start engaging with the platform",icon:oi})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(go,{className:"w-5 h-5 text-blue-500"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Activity"})]}),a.jsx("span",{className:"text-sm text-gray-500",children:"Live feed"})]}),a.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:t.recentActivity&&t.recentActivity.length>0?a.jsx("div",{className:"space-y-4",children:t.recentActivity.slice(0,20).map(q=>a.jsxs("div",{className:"flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[a.jsx(Xg,{className:"w-4 h-4 text-green-500 mt-1 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"text-sm text-gray-900",children:[a.jsxs("span",{className:"font-medium",children:[q.users.first_name," ",q.users.last_name]})," ",q.activity_type.replace("_"," "),q.content_items&&a.jsxs("span",{className:"text-gray-600",children:[" ",'"',a.jsx("span",{className:"font-medium",children:q.content_items.title}),'"']})]}),a.jsx("p",{className:"text-xs text-gray-500",children:hl(new Date(q.created_at),"MMM d, h:mm a")})]})]},q.id))}):a.jsx(Eg,{title:"No recent activity",description:"User activities will appear here as they happen on your platform",icon:Xg})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(py,{className:"w-5 h-5 text-purple-500"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Content Engagement"})]})}),a.jsx("div",{className:"p-6",children:E.length>0?a.jsx(k_,{width:"100%",height:300,children:a.jsxs(ime,{data:E,layout:"horizontal",children:[a.jsx(qE,{strokeDasharray:"3 3"}),a.jsx(wd,{type:"number"}),a.jsx(jd,{dataKey:"name",type:"category",width:120}),a.jsx(wi,{}),a.jsx(cc,{dataKey:"engagements",fill:"#8B5CF6",radius:[0,4,4,0]})]})}):a.jsx(Eg,{title:"No engagement data",description:"Content engagement metrics will appear here once users start interacting with your content",icon:py})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(qX,{className:"w-5 h-5 text-green-500"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Agent Usage"})]})}),a.jsx("div",{className:"p-6",children:A.length>0?a.jsxs("div",{className:"flex items-center space-x-8",children:[a.jsx(k_,{width:"70%",height:300,children:a.jsxs(sme,{children:[a.jsx(Co,{data:A,cx:"50%",cy:"50%",outerRadius:100,dataKey:"conversations",children:A.map((q,V)=>a.jsx(z0,{fill:q.fill},`cell-${V}`))}),a.jsx(wi,{})]})}),a.jsx("div",{className:"space-y-2",children:A.map((q,V)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:q.fill}}),a.jsx("span",{className:"text-sm text-gray-700",children:q.name})]},V))})]}):a.jsx(Eg,{title:"No agent usage data",description:"Agent conversation statistics will appear here once users start chatting with AI agents",icon:Gr})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(FB,{className:"w-5 h-5 text-blue-500"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Platform Overview"})]}),a.jsxs("span",{className:"text-sm text-gray-500",children:[hl(new Date(o.start),"MMM d")," - ",hl(new Date(o.end),"MMM d, yyyy")]})]})}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[((((F=t.summaryStats)==null?void 0:F.recentActivities)||0)/Math.max(((z=t.summaryStats)==null?void 0:z.totalUsers)||1,1)*100).toFixed(1),"%"]}),a.jsx("p",{className:"text-gray-600",children:"User Engagement Rate"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Activities per user in selected period"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:((W=t.contentEngagement)==null?void 0:W.length)||0}),a.jsx("p",{className:"text-gray-600",children:"Active Content Items"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Content with user interactions"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:((K=t.agentUsage)==null?void 0:K.reduce((q,V)=>q+V.total_messages,0))||0}),a.jsx("p",{className:"text-gray-600",children:"Total Messages"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Messages exchanged with AI agents"})]})]})})]})]})})}const gge=({isOpen:t,onClose:e,onClientCreated:r,editingClient:n})=>{const i=O.useRef(null),[s,o]=O.useState(!1),[l,c]=O.useState([]),[u,f]=O.useState([]),[d,p]=O.useState({}),[m,x]=O.useState({clientName:(n==null?void 0:n.name)||"",projectName:(n==null?void 0:n.project_name)||"",logoFile:null,logoPreview:(n==null?void 0:n.logo_url)||"",brandColor:(n==null?void 0:n.brand_color)||"#3B82F6",apiKeyId:(n==null?void 0:n.api_key_id)||"",forumEnabled:(n==null?void 0:n.forum_enabled)??!0,startFromTemplate:!1,templateId:"",includeContent:!1});Z.useEffect(()=>{t&&!n&&y()},[t]);const y=async()=>{try{const{data:A}=await pe.from("api_keys").select("id, name, key_type").eq("status","active").order("name");A&&c(A);const{data:T}=await pe.from("clients").select("id, name, project_name").eq("is_template",!0).eq("status","active").order("name");T&&f(T)}catch(A){console.error("Error loading options:",A)}},v=()=>{const A={};return m.clientName.trim()?m.clientName.length<2&&(A.clientName="Client name must be at least 2 characters"):A.clientName="Client name is required",/^#[0-9A-F]{6}$/i.test(m.brandColor)||(A.brandColor="Please enter a valid HEX color code"),!m.apiKeyId&&!m.startFromTemplate&&(A.apiKeyId="Please select an API key"),p(A),Object.keys(A).length===0},b=O.useCallback(A=>{if(A&&A.type.startsWith("image/")){const T=new FileReader;T.onload=M=>{x(P=>{var R;return{...P,logoFile:A,logoPreview:(R=M.target)==null?void 0:R.result}})},T.readAsDataURL(A)}},[]),w=O.useCallback(A=>{A.preventDefault();const T=Array.from(A.dataTransfer.files);T.length>0&&b(T[0])},[b]),N=O.useCallback(A=>{const T=A.target.files;T&&T.length>0&&b(T[0])},[b]),j=async()=>{if(!m.logoFile)return null;try{const A=m.logoFile.name.split(".").pop(),M=`client-logos/${`${Date.now()}-${Math.random().toString(36).substring(2)}.${A}`}`,{error:P}=await pe.storage.from("assets").upload(M,m.logoFile);if(P)throw P;const{data:R}=pe.storage.from("assets").getPublicUrl(M);return R.publicUrl}catch(A){return console.error("Error uploading logo:",A),null}},k=async A=>{if(A.preventDefault(),!!v()){o(!0);try{let T=m.logoPreview;if(m.logoFile){const R=await j();R&&(T=R)}const M={name:m.clientName.trim(),project_name:m.projectName.trim()||null,logo_url:T,brand_color:m.brandColor,api_key_id:m.apiKeyId||null,forum_enabled:m.forumEnabled,status:"active",is_template:!1};let P;if(n){const{data:R,error:L}=await pe.from("clients").update(M).eq("id",n.id).select().single();P={data:R,error:L}}else if(m.startFromTemplate&&m.templateId){const{data:R,error:L}=await pe.functions.invoke("clone-client-template",{body:{template_id:m.templateId,client_data:M,include_content:m.includeContent}});P={data:R,error:L}}else{const{data:R,error:L}=await pe.from("clients").insert([M]).select().single();P={data:R,error:L}}if(P.error){if(P.error.code==="23505"){p({clientName:"A client with this name already exists"});return}throw P.error}_(),r(),e()}catch(T){console.error("Error saving client:",T)}finally{o(!1)}}},_=()=>{x({clientName:"",projectName:"",logoFile:null,logoPreview:"",brandColor:"#3B82F6",apiKeyId:"",forumEnabled:!0,startFromTemplate:!1,templateId:"",includeContent:!1}),p({})},E=()=>{s||(_(),e())};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n?"Edit Client":"Create New Client"}),a.jsx("button",{onClick:E,disabled:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx($r,{size:24})})]}),a.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[!n&&a.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:m.startFromTemplate,onChange:A=>x(T=>({...T,startFromTemplate:A.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Start from Template"})]}),m.startFromTemplate&&a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Template"}),a.jsxs("select",{value:m.templateId,onChange:A=>x(T=>({...T,templateId:A.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:m.startFromTemplate,children:[a.jsx("option",{value:"",children:"Select a template..."}),u.map(A=>a.jsxs("option",{value:A.id,children:[A.name," ",A.project_name&&`(${A.project_name})`]},A.id))]})]}),a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:m.includeContent,onChange:A=>x(T=>({...T,includeContent:A.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Include all content (agents, documents, etc.)"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name *"}),a.jsx("input",{type:"text",value:m.clientName,onChange:A=>x(T=>({...T,clientName:A.target.value})),className:`w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.clientName?"border-red-500":"border-gray-300"}`,placeholder:"Enter client name",required:!0}),d.clientName&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Pl,{size:16,className:"mr-1"}),d.clientName]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name"}),a.jsx("input",{type:"text",value:m.projectName,onChange:A=>x(T=>({...T,projectName:A.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional project name"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Logo"}),a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsx("div",{className:"flex-shrink-0",children:m.logoPreview?a.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden border-2 border-gray-200",children:a.jsx("img",{src:m.logoPreview,alt:"Logo preview",className:"w-full h-full object-cover"})}):a.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 border-2 border-gray-200 flex items-center justify-center",children:a.jsx(Ir,{size:24,className:"text-gray-400"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{onDrop:w,onDragOver:A=>A.preventDefault(),onClick:()=>{var A;return(A=i.current)==null?void 0:A.click()},className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-blue-400 transition-colors",children:[a.jsx(Ir,{size:24,className:"mx-auto mb-2 text-gray-400"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Drag and drop an image, or ",a.jsx("span",{className:"text-blue-600",children:"click to browse"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended: Square image, at least 200x200px"})]}),a.jsx("input",{ref:i,type:"file",accept:"image/*",onChange:N,className:"hidden"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand Color *"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-md border border-gray-300 cursor-pointer",style:{backgroundColor:m.brandColor},onClick:()=>{const A=document.createElement("input");A.type="color",A.value=m.brandColor,A.onchange=T=>{x(M=>({...M,brandColor:T.target.value}))},A.click()},children:a.jsx(BX,{size:16,className:"text-white m-2"})}),a.jsx("input",{type:"text",value:m.brandColor,onChange:A=>x(T=>({...T,brandColor:A.target.value})),className:`flex-1 border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono ${d.brandColor?"border-red-500":"border-gray-300"}`,placeholder:"#3B82F6",pattern:"^#[0-9A-Fa-f]{6}$"})]}),d.brandColor&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Pl,{size:16,className:"mr-1"}),d.brandColor]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["API Key ",!m.startFromTemplate&&"*"]}),a.jsxs("select",{value:m.apiKeyId,onChange:A=>x(T=>({...T,apiKeyId:A.target.value})),className:`w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.apiKeyId?"border-red-500":"border-gray-300"}`,required:!m.startFromTemplate,children:[a.jsx("option",{value:"",children:"Select an API key..."}),l.map(A=>a.jsxs("option",{value:A.id,children:[A.name," (",A.key_type,")"]},A.id))]}),d.apiKeyId&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Pl,{size:16,className:"mr-1"}),d.apiKeyId]})]})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:m.forumEnabled,onChange:A=>x(T=>({...T,forumEnabled:A.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable Forum"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Allow users to participate in community discussions"})]})]})}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t",children:[a.jsx("button",{type:"button",onClick:E,disabled:s,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 flex items-center space-x-2",children:[s&&a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:n?"Update Client":"Create Client"}),!s&&a.jsx(ko,{size:16})]})]})]})]})}):null},yge=()=>{const t=Ti(),[e,r]=O.useState([]),[n,i]=O.useState(!0),[s,o]=O.useState(""),[l,c]=O.useState("all"),[u,f]=O.useState(!1),[d,p]=O.useState(!1),[m,x]=O.useState(null),[y,v]=O.useState(null);O.useEffect(()=>{b()},[l,u]);const b=async()=>{i(!0);try{let P=pe.from("clients").select("*").order("created_at",{ascending:!1});l!=="all"&&(P=P.eq("status",l)),u||(P=P.neq("status","archived"));const{data:R,error:L}=await P;if(L)throw L;r(R||[])}catch(P){console.error("Error loading clients:",P)}finally{i(!1)}},w=()=>{x(null),p(!0)},N=P=>{x(P),p(!0)},j=P=>{t(`/clients/${P}`)},k=async P=>{const R=P.status==="archived"?"active":"archived";try{const{error:L}=await pe.from("clients").update({status:R}).eq("id",P.id);if(L)throw L;b()}catch(L){console.error("Error updating client status:",L)}},_=async P=>{if(confirm(`Are you sure you want to permanently delete "${P.name}"? This action cannot be undone.`))try{const{error:R}=await pe.from("clients").delete().eq("id",P.id);if(R)throw R;b()}catch(R){console.error("Error deleting client:",R)}},E=P=>{window.open(`/client-preview/${P.id}`,"_blank")},A=e.filter(P=>P.name.toLowerCase().includes(s.toLowerCase())||P.project_name&&P.project_name.toLowerCase().includes(s.toLowerCase())),T=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),M=P=>{const R={active:{bg:"bg-green-100",text:"text-green-800",icon:ln},archived:{bg:"bg-gray-100",text:"text-gray-800",icon:t_},inactive:{bg:"bg-yellow-100",text:"text-yellow-800",icon:null}},L=R[P]||R.active,$=L.icon;return a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L.bg} ${L.text}`,children:[$&&a.jsx($,{size:12,className:"mr-1"}),P.charAt(0).toUpperCase()+P.slice(1)]})};return a.jsx(pr,{children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Client Management"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your clients and their platform configurations"})]}),a.jsxs("button",{onClick:w,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[a.jsx(Vt,{size:20}),a.jsx("span",{children:"Create New Client"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(In,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:s,onChange:P=>o(P.target.value),placeholder:"Search clients or projects...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ep,{size:16,className:"text-gray-400"}),a.jsxs("select",{value:l,onChange:P=>c(P.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"}),a.jsx("option",{value:"archived",children:"Archived"})]})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:u,onChange:P=>f(P.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Show Archived"})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(P=>P.status==="active").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Active Clients"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-600",children:e.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Clients"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(P=>P.forum_enabled).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Forum Enabled"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:e.filter(P=>P.is_template).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Templates"})]})]})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:n?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Loading clients..."})]}):A.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(oi,{size:48,className:"mx-auto text-gray-300 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No clients found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:s?"Try adjusting your search criteria.":"Get started by creating your first client."}),!s&&a.jsx("button",{onClick:w,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create First Client"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Active Users"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(P=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[P.logo_url?a.jsx("img",{src:P.logo_url,alt:`${P.name} logo`,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}):a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold shadow-sm",style:{backgroundColor:P.brand_color||"#3B82F6"},children:P.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.name}),P.is_template&&a.jsx("span",{className:"inline-block px-2 py-0.5 text-xs bg-purple-100 text-purple-800 rounded-full mt-1",children:"Template"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:P.project_name||a.jsx("span",{className:"text-gray-400",children:"-"})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(oi,{size:16,className:"text-gray-400 mr-1"}),a.jsx("span",{className:"text-sm text-gray-900",children:"-"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fl,{size:16,className:"text-gray-400 mr-1"}),a.jsx("span",{className:"text-sm text-gray-900",children:T(P.created_at)})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[M(P.status),P.forum_enabled&&a.jsx("span",{className:"ml-2 inline-block w-2 h-2 bg-green-400 rounded-full",title:"Forum Enabled"})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("button",{onClick:()=>j(P.id),className:"bg-blue-600 text-white px-3 py-1.5 rounded text-sm hover:bg-blue-700 transition-colors",children:"Manage"}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>v(y===P.id?null:P.id),className:"text-gray-400 hover:text-gray-600 p-1 rounded transition-colors",children:a.jsx(RB,{size:16})}),y===P.id&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-10",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{E(P),v(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[a.jsx(ii,{size:16,className:"mr-2"}),"Preview"]}),a.jsxs("button",{onClick:()=>{N(P),v(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[a.jsx(yo,{size:16,className:"mr-2"}),"Edit"]}),a.jsxs("button",{onClick:()=>{k(P),v(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[a.jsx(t_,{size:16,className:"mr-2"}),P.status==="archived"?"Restore":"Archive"]}),P.status==="archived"&&a.jsxs("button",{onClick:()=>{_(P),v(null)},className:"flex items-center w-full px-4 py-2 text-sm text-red-700 hover:bg-red-50",children:[a.jsx(ns,{size:16,className:"mr-2"}),"Delete Permanently"]})]})})]})]})})]},P.id))})]})})}),a.jsx(gge,{isOpen:d,onClose:()=>p(!1),onClientCreated:b,editingClient:m})]})})};function vge(){const[t,e]=O.useState([]),[r,n]=O.useState([]),[i,s]=O.useState([]),[o,l]=O.useState(!0),[c,u]=O.useState(""),[f,d]=O.useState("");O.useEffect(()=>{p()},[]);const p=async()=>{try{l(!0);const[v,b,w]=await Promise.all([pe.from("users").select("*").order("created_at",{ascending:!1}),pe.from("clients").select("*").order("name"),pe.from("user_tags").select("*").order("name")]);v.data&&e(v.data),b.data&&n(b.data),w.data&&s(w.data)}catch(v){console.error("Error fetching data:",v)}finally{l(!1)}},m=t.filter(v=>{var N,j;const b=v.email.toLowerCase().includes(c.toLowerCase())||((N=v.first_name)==null?void 0:N.toLowerCase().includes(c.toLowerCase()))||((j=v.last_name)==null?void 0:j.toLowerCase().includes(c.toLowerCase())),w=f===""||v.client_id===f;return b&&w}),x=v=>r.find(b=>b.id===v),y=v=>v.first_name&&v.last_name?`${v.first_name} ${v.last_name}`:v.first_name||v.last_name||"Unnamed User";return o?a.jsx(pr,{children:a.jsx("div",{className:"flex justify-center items-center py-12",children:a.jsx(cr,{size:"lg"})})}):a.jsx(pr,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Users"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Manage users across all client organizations"})]}),a.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[a.jsx(Vt,{className:"-ml-1 mr-2 h-4 w-4"}),"Add User"]})]}),a.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:c,onChange:v=>u(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("select",{value:f,onChange:v=>d(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"All Clients"}),r.map(v=>a.jsx("option",{value:v.id,children:v.name},v.id))]})]})}),a.jsxs("div",{className:"bg-white shadow-sm rounded-xl border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"All Users"}),a.jsxs("span",{className:"text-sm text-gray-500",children:[m.length," users"]})]})}),a.jsx("div",{className:"divide-y divide-gray-200",children:m.map(v=>{const b=x(v.client_id);return a.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-medium",children:y(v).charAt(0).toUpperCase()})}),a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("h3",{className:"text-base font-medium text-gray-900",children:y(v)})}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[a.jsx("p",{className:"text-sm text-gray-600",children:v.email}),b&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ou,{className:"h-3 w-3",style:{color:b.brand_color}}),a.jsx("span",{className:"text-xs text-gray-500",children:b.name})]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"text-right text-sm",children:[a.jsx("p",{className:"text-gray-900",children:"Created"}),a.jsx("p",{className:"text-gray-500",children:new Date(v.created_at).toLocaleDateString()})]}),v.last_active&&a.jsxs("div",{className:"text-right text-sm",children:[a.jsx("p",{className:"text-gray-900",children:"Last Active"}),a.jsx("p",{className:"text-gray-500",children:new Date(v.last_active).toLocaleDateString()})]}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(RB,{className:"h-4 w-4"})})]})]})},v.id)})}),m.length===0&&a.jsxs("div",{className:"px-6 py-8 text-center",children:[a.jsx(oi,{className:"mx-auto h-12 w-12 text-gray-300"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:c||f?"No users found":"No users yet"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:c||f?"Try adjusting your search or filter criteria.":"Users will appear here once they are created for clients."})]})]})]})})}const xge=["#EF4444","#F97316","#F59E0B","#84CC16","#10B981","#14B8A6","#06B6D4","#3B82F6","#6366F1","#8B5CF6","#A855F7","#EC4899","#F43F5E","#6B7280"];function bge({isOpen:t,onClose:e,onSuccess:r,tag:n,clients:i}){const[s,o]=O.useState({name:"",color:"#6B7280",client_id:""}),[l,c]=O.useState(!1),[u,f]=O.useState("");O.useEffect(()=>{o(n?{name:n.name,color:n.color,client_id:n.client_id}:{name:"",color:"#6B7280",client_id:i.length>0?i[0].id:""}),f("")},[n,i,t]);const d=async x=>{if(x.preventDefault(),f(""),c(!0),!s.client_id){f("Please select a client"),c(!1);return}try{const y={name:s.name.trim(),color:s.color,client_id:s.client_id};if(n){const{error:v}=await pe.from("user_tags").update(y).eq("id",n.id);if(v)throw v}else{const{error:v}=await pe.from("user_tags").insert([y]);if(v)throw v}r()}catch(y){console.error("Error saving tag:",y),f(y.message||"An error occurred while saving the tag")}finally{c(!1)}},p=x=>{const{name:y,value:v}=x.target;o(b=>({...b,[y]:v}))},m=i.find(x=>x.id===s.client_id);return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg flex items-center justify-center",style:{backgroundColor:s.color},children:a.jsx(Es,{className:"h-5 w-5 text-white"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n?"Edit Tag":"Create Tag"})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:l,children:a.jsx($r,{className:"h-6 w-6"})})]}),a.jsxs("form",{onSubmit:d,className:"p-6 space-y-6",children:[u&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsx("p",{className:"text-sm text-red-800",children:u})}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"client_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Organization"}),a.jsxs("select",{id:"client_id",name:"client_id",required:!0,value:s.client_id,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:l||!!n,children:[a.jsx("option",{value:"",children:"Select a client..."}),i.map(x=>a.jsx("option",{value:x.id,children:x.name},x.id))]}),m&&a.jsxs("div",{className:"mt-2 flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(Ou,{className:"h-4 w-4",style:{color:m.brand_color}}),a.jsx("span",{children:m.project_name})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tag Name"}),a.jsx("input",{type:"text",id:"name",name:"name",required:!0,value:s.name,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Beginner, Advanced, VIP",disabled:l})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tag Color"}),a.jsx("div",{className:"grid grid-cols-7 gap-3",children:xge.map(x=>a.jsx("button",{type:"button",onClick:()=>o(y=>({...y,color:x})),className:`h-10 w-10 rounded-lg border-2 transition-all ${s.color===x?"border-gray-400 scale-110 shadow-md":"border-gray-200 hover:border-gray-300"}`,style:{backgroundColor:x},disabled:l},x))}),a.jsx("div",{className:"mt-3",children:a.jsx("input",{type:"text",value:s.color,onChange:x=>o(y=>({...y,color:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"#6B7280",pattern:"^#[0-9A-Fa-f]{6}$",disabled:l})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",disabled:l,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:l,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?a.jsxs(a.Fragment,{children:[a.jsx(cr,{size:"sm",className:"mr-2"}),n?"Updating...":"Creating..."]}):n?"Update Tag":"Create Tag"})]})]})]})}):null}function wge(){const[t,e]=O.useState([]),[r,n]=O.useState([]),[i,s]=O.useState(!0),[o,l]=O.useState(!1),[c,u]=O.useState(null),[f,d]=O.useState("");O.useEffect(()=>{p()},[]);const p=async()=>{try{s(!0);const[j,k]=await Promise.all([pe.from("user_tags").select("*").order("created_at",{ascending:!1}),pe.from("clients").select("*").order("name")]);j.data&&e(j.data),k.data&&n(k.data)}catch(j){console.error("Error fetching data:",j)}finally{s(!1)}},m=()=>{u(null),l(!0)},x=j=>{u(j),l(!0)},y=async j=>{if(confirm(`Are you sure you want to delete the tag "${j.name}"? This action cannot be undone.`))try{const{error:k}=await pe.from("user_tags").delete().eq("id",j.id);if(k)throw k;e(t.filter(_=>_.id!==j.id))}catch(k){console.error("Error deleting tag:",k),alert("Failed to delete tag. Please try again.")}},v=()=>{l(!1),p()},b=f?t.filter(j=>j.client_id===f):t,w=j=>{var k;return((k=r.find(_=>_.id===j))==null?void 0:k.name)||"Unknown Client"},N=b.reduce((j,k)=>{const _=w(k.client_id);return j[_]||(j[_]=[]),j[_].push(k),j},{});return i?a.jsx(pr,{children:a.jsx("div",{className:"flex justify-center items-center py-12",children:a.jsx(cr,{size:"lg"})})}):a.jsxs(pr,{children:[a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Tags"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Manage user categorization tags for each client"})]}),a.jsxs("button",{onClick:m,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[a.jsx(Vt,{className:"-ml-1 mr-2 h-4 w-4"}),"Create Tag"]})]}),a.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("label",{htmlFor:"client-filter",className:"text-sm font-medium text-gray-700",children:"Filter by Client:"}),a.jsxs("select",{id:"client-filter",value:f,onChange:j=>d(j.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"All Clients"}),r.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))]})]})}),Object.keys(N).length>0?a.jsx("div",{className:"space-y-8",children:Object.entries(N).map(([j,k])=>{const _=r.find(E=>E.name===j);return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[_&&a.jsx("div",{className:"h-6 w-6 rounded flex items-center justify-center",style:{backgroundColor:_.brand_color+"20"},children:a.jsx(Ou,{className:"h-4 w-4",style:{color:_.brand_color}})}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:j}),a.jsxs("span",{className:"text-sm text-gray-500",children:["(",k.length," tags)"]})]})}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(E=>a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors group",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-8 w-8 rounded-full flex items-center justify-center",style:{backgroundColor:E.color},children:a.jsx(Es,{className:"h-4 w-4 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:E.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Created ",new Date(E.created_at).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>x(E),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(C0,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>y(E),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(ns,{className:"h-4 w-4"})})]})]})},E.id))})})]},j)})}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Es,{className:"mx-auto h-12 w-12 text-gray-300"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:f?"No tags found for this client":"No tags yet"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:f?"This client has no user tags created yet.":"Get started by creating your first user tag."}),a.jsx("div",{className:"mt-6",children:a.jsxs("button",{onClick:m,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Vt,{className:"-ml-1 mr-2 h-5 w-5"}),"Create Tag"]})})]})]}),a.jsx(bge,{isOpen:o,onClose:()=>l(!1),onSuccess:v,tag:c,clients:r})]})}const jge=({isOpen:t,onClose:e,clientId:r,onUploadComplete:n})=>{var _;const i=O.useRef(null),[s,o]=O.useState(!1),[l,c]=O.useState(null),[u,f]=O.useState(!1),[d,p]=O.useState(null),[m,x]=O.useState([]),y=O.useCallback(()=>{const E=`firstName,lastName,email,tags
John,Doe,john.doe@example.com,developer;senior
Jane,Smith,jane.smith@example.com,designer`,A=new Blob([E],{type:"text/csv"}),T=window.URL.createObjectURL(A),M=document.createElement("a");M.href=T,M.download="user_upload_template.csv",document.body.appendChild(M),M.click(),document.body.removeChild(M),window.URL.revokeObjectURL(T)},[]),v=O.useCallback(E=>{if(E.type!=="text/csv"&&!E.name.endsWith(".csv")){alert("Please select a CSV file");return}p(E);const A=new FileReader;A.onload=T=>{var L;const R=((L=T.target)==null?void 0:L.result).split(`
`).slice(0,6).map($=>$.split(",").map(F=>F.trim()));x(R)},A.readAsText(E)},[]),b=O.useCallback(E=>{E.preventDefault(),f(!1);const A=Array.from(E.dataTransfer.files);A.length>0&&v(A[0])},[v]),w=O.useCallback(E=>{const A=E.target.files;A&&A.length>0&&v(A[0])},[v]),N=async()=>{if(d){o(!0),c(null);try{const E=new FileReader;E.onload=async A=>{var R;const T=(R=A.target)==null?void 0:R.result,{data:M,error:P}=await pe.functions.invoke("process-csv-upload",{body:{client_id:r,csv_data:T,file_name:d.name}});if(P)throw P;c(M),M.successful_rows>0&&n()},E.readAsText(d)}catch(E){console.error("Upload error:",E),alert("Upload failed: "+E.message)}finally{o(!1)}}},j=O.useCallback(()=>{if(!l||!l.created_users)return;const E=["Email,First Name,Last Name,Temporary Password",...l.created_users.map(P=>`${P.email},${P.first_name},${P.last_name},${P.temp_password}`)].join(`
`),A=new Blob([E],{type:"text/csv"}),T=window.URL.createObjectURL(A),M=document.createElement("a");M.href=T,M.download="created_users_with_passwords.csv",document.body.appendChild(M),M.click(),document.body.removeChild(M),window.URL.revokeObjectURL(T)},[l]),k=()=>{p(null),x([]),c(null),e()};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Bulk User Upload"}),a.jsx("button",{onClick:k,disabled:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx($r,{size:24})})]}),a.jsx("div",{className:"p-6",children:l?a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"flex items-center space-x-4 mb-4",children:l.failed_rows===0?a.jsxs("div",{className:"flex items-center text-green-600",children:[a.jsx(ln,{size:24,className:"mr-2"}),a.jsx("span",{className:"text-lg font-semibold",children:"Upload Completed Successfully!"})]}):a.jsxs("div",{className:"flex items-center text-amber-600",children:[a.jsx(Pl,{size:24,className:"mr-2"}),a.jsx("span",{className:"text-lg font-semibold",children:"Upload Completed with Some Errors"})]})}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.total_rows}),a.jsx("div",{className:"text-sm text-blue-800",children:"Total Rows"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.successful_rows}),a.jsx("div",{className:"text-sm text-green-800",children:"Successful"})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.failed_rows}),a.jsx("div",{className:"text-sm text-red-800",children:"Failed"})]})]})]}),l.successful_rows>0&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Created Users"}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[a.jsxs("p",{className:"text-green-800 mb-3",children:["Successfully created ",l.successful_rows," users with temporary passwords."]}),a.jsxs("button",{onClick:j,className:"inline-flex items-center px-3 py-2 bg-green-600 text-white text-sm rounded-md hover:bg-green-700",children:[a.jsx(yy,{size:16,className:"mr-2"}),"Download User Credentials"]})]})]}),l.errors&&l.errors.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:["Errors (",l.errors.length,")"]}),a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-h-64 overflow-y-auto",children:l.errors.map((E,A)=>a.jsxs("div",{className:"mb-2 text-sm",children:[a.jsxs("span",{className:"font-medium text-red-800",children:["Row ",E.row,":"]}),a.jsxs("span",{className:"text-red-700 ml-1",children:[E.email," - ",E.error]})]},A))})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t",children:a.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Close"})})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"CSV Format Requirements:"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("li",{children:[" Required headers: ",a.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"firstName"}),", ",a.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"lastName"}),", ",a.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"email"})]}),a.jsxs("li",{children:[" Optional header: ",a.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"tags"})," (separate multiple tags with semicolons)"]}),a.jsx("li",{children:" Maximum 1000 users per upload"}),a.jsx("li",{children:" Secure passwords will be auto-generated for each user"})]}),a.jsxs("button",{onClick:y,className:"mt-3 inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[a.jsx(yy,{size:16,className:"mr-1"}),"Download Template CSV"]})]}),a.jsxs("div",{onDrop:b,onDragOver:E=>{E.preventDefault(),f(!0)},onDragLeave:()=>f(!1),onClick:()=>{var E;return(E=i.current)==null?void 0:E.click()},className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ${u?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-blue-400"}`,children:[a.jsx(Ir,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-lg text-gray-600 mb-2",children:d?d.name:"Drop your CSV file here, or click to browse"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Supports .csv files up to 10MB"}),a.jsx("input",{ref:i,type:"file",accept:".csv,text/csv",onChange:w,className:"hidden"})]}),m.length>0&&a.jsxs("div",{className:"mt-6",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"File Preview (first 5 rows):"}),a.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:(_=m[0])==null?void 0:_.map((E,A)=>a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:E},A))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.slice(1).map((E,A)=>a.jsx("tr",{children:E.map((T,M)=>a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:T},M))},A))})]})})})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6 pt-6 border-t",children:[a.jsx("button",{onClick:k,disabled:s,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:N,disabled:!d||s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[s&&a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:s?"Processing...":"Upload Users"})]})]})]})})]})}):null},HN=[{key:"agents_marketplace",label:"AI Agents Marketplace",description:"Access to AI agents and custom prompts"},{key:"courses",label:"Courses",description:"Structured learning courses and programs"},{key:"missions",label:"Missions",description:"Gamified learning missions and challenges"},{key:"forums",label:"Forums",description:"Community discussion forums"},{key:"documents",label:"Documents",description:"Rich text documents and guides"},{key:"prompts",label:"Prompts",description:"Reusable prompt templates"},{key:"automations",label:"Automations",description:"Process automations and workflows"}],Sge=()=>{const{clientId:t}=us(),e=Ti(),[r,n]=O.useState(null),[i,s]=O.useState(!0),[o,l]=O.useState("settings"),[c,u]=O.useState(!1),[f,d]=O.useState({name:"",project_name:"",brand_color:"",forum_enabled:!0}),[p,m]=O.useState(!1),[x,y]=O.useState([]),[v,b]=O.useState([]),[w,N]=O.useState(""),[j,k]=O.useState("#3B82F6"),[_,E]=O.useState(null),[A,T]=O.useState(null),[M,P]=O.useState(""),[R,L]=O.useState([]),[$,F]=O.useState(""),[z,W]=O.useState("all"),[K,q]=O.useState(!1),[V,D]=O.useState(!1),U=O.useCallback(async()=>{if(t)try{const{data:ie,error:ye}=await pe.from("clients").select("*").eq("id",t).single();if(ye)throw ye;if(!ie)throw new Error("Client not found");n(ie),d({name:ie.name,project_name:ie.project_name||"",brand_color:ie.brand_color||"#3B82F6",forum_enabled:ie.forum_enabled}),await G(ie.id)}catch(ie){console.error("Error loading client:",ie),e("/clients")}finally{s(!1)}},[t,e]),G=async ie=>{try{const{data:ye}=await pe.from("client_features").select("*").eq("client_id",ie),Te=new Map((ye==null?void 0:ye.map(ue=>[ue.feature_name,ue]))||[]),Le=HN.map(ue=>{var he,we;return{id:((he=Te.get(ue.key))==null?void 0:he.id)||"",feature_name:ue.key,enabled:((we=Te.get(ue.key))==null?void 0:we.enabled)??!0}});y(Le)}catch(ye){console.error("Error initializing features:",ye)}},ee=O.useCallback(async()=>{if(t)try{const{data:ie,error:ye}=await pe.functions.invoke("manage-user-tags",{body:{client_id:t,action:"list"}});if(ye)throw ye;b(ie||[])}catch(ie){console.error("Error loading tags:",ie)}},[t]),Q=O.useCallback(async()=>{if(t)try{const{data:ie,error:ye}=await pe.from("users").select(`
          *,
          user_tag_assignments(
            user_tags(
              id,
              name,
              color
            )
          )
        `).eq("client_id",t).order("created_at",{ascending:!1});if(ye)throw ye;const Te=(ie==null?void 0:ie.map(Le=>{var ue;return{...Le,tags:((ue=Le.user_tag_assignments)==null?void 0:ue.map(he=>he.user_tags))||[]}}))||[];L(Te)}catch(ie){console.error("Error loading users:",ie)}},[t]);O.useEffect(()=>{U()},[U]),O.useEffect(()=>{o==="tags"?ee():o==="users"&&Q()},[o,ee,Q]);const H=(ie,ye)=>{d(Te=>({...Te,[ie]:ye})),m(!0)},Y=async()=>{if(r){u(!0);try{const{error:ie}=await pe.from("clients").update({name:f.name,project_name:f.project_name||null,brand_color:f.brand_color,forum_enabled:f.forum_enabled}).eq("id",r.id);if(ie)throw ie;n(ye=>ye?{...ye,...f}:null),m(!1),alert("Settings saved successfully!")}catch(ie){console.error("Error saving settings:",ie),alert("Error saving settings")}finally{u(!1)}}},re=async ie=>{var Le;const ye=x[ie],Te=!ye.enabled;try{if(ye.id){const{error:he}=await pe.from("client_features").update({enabled:Te}).eq("id",ye.id);if(he)throw he}else{const{data:he,error:we}=await pe.from("client_features").insert({client_id:t,feature_name:ye.feature_name,enabled:Te}).select().single();if(we)throw we;y(Oe=>Oe.map((be,We)=>We===ie?{...be,id:he.id,enabled:Te}:be));return}y(he=>he.map((we,Oe)=>Oe===ie?{...we,enabled:Te}:we));const ue=((Le=HN.find(he=>he.key===ye.feature_name))==null?void 0:Le.label)||ye.feature_name;alert(`${ue} ${Te?"enabled":"disabled"}`)}catch(ue){console.error("Error toggling feature:",ue),alert("Error updating feature")}},J=async()=>{if(!(!w.trim()||!t))try{const{data:ie,error:ye}=await pe.functions.invoke("manage-user-tags",{body:{client_id:t,action:"create",tag_data:{name:w.trim(),color:j}}});if(ye)throw ye;b(Te=>[...Te,{...ie,user_count:0}]),N(""),k("#3B82F6")}catch(ie){console.error("Error creating tag:",ie),alert("Error creating tag")}},ne=async()=>{if(!(!A||M!==A.name))try{const{error:ie}=await pe.functions.invoke("manage-user-tags",{body:{client_id:t,action:"delete",tag_data:{id:A.id}}});if(ie)throw ie;b(ye=>ye.filter(Te=>Te.id!==A.id)),T(null),P(""),Q()}catch(ie){console.error("Error deleting tag:",ie),alert("Error deleting tag")}},te=R.filter(ie=>{var Le,ue;const ye=((Le=ie.first_name)==null?void 0:Le.toLowerCase().includes($.toLowerCase()))||((ue=ie.last_name)==null?void 0:ue.toLowerCase().includes($.toLowerCase()))||ie.email.toLowerCase().includes($.toLowerCase()),Te=z==="all"||ie.tags.some(he=>he.id===z);return ye&&Te}),se=ie=>new Date(ie).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ve=()=>{switch(o){case"settings":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name *"}),a.jsx("input",{type:"text",value:f.name,onChange:ie=>H("name",ie.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter client name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name"}),a.jsx("input",{type:"text",value:f.project_name,onChange:ie=>H("project_name",ie.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional project name"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand Color"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-md border border-gray-300 cursor-pointer",style:{backgroundColor:f.brand_color},onClick:()=>{const ie=document.createElement("input");ie.type="color",ie.value=f.brand_color,ie.onchange=ye=>{H("brand_color",ye.target.value)},ie.click()}}),a.jsx("input",{type:"text",value:f.brand_color,onChange:ie=>H("brand_color",ie.target.value),className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono",placeholder:"#3B82F6"})]})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:f.forum_enabled,onChange:ie=>H("forum_enabled",ie.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable Forum"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Allow users to participate in community discussions"})]})]})}),a.jsx("div",{className:"flex justify-end pt-4 border-t",children:a.jsxs("button",{onClick:Y,disabled:!p||c,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[c&&a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx(Cp,{size:16}),a.jsx("span",{children:"Save Changes"})]})})]});case"features":return a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"Control which platform features are available to this client's users."}),HN.map((ie,ye)=>{const Te=x.find(ue=>ue.feature_name===ie.key),Le=(Te==null?void 0:Te.enabled)??!0;return a.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:ie.label}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ie.description})]}),a.jsxs("button",{onClick:()=>re(ye),className:`flex items-center space-x-2 px-3 py-2 rounded-md transition-colors ${Le?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[Le?a.jsx(WX,{size:20}):a.jsx(jM,{size:20}),a.jsx("span",{className:"text-sm font-medium",children:Le?"Enabled":"Disabled"})]})]},ie.key)})]});case"tags":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Create New Tag"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"text",value:w,onChange:ie=>N(ie.target.value),className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tag name"}),a.jsx("div",{className:"w-10 h-10 rounded-md border border-gray-300 cursor-pointer",style:{backgroundColor:j},onClick:()=>{const ie=document.createElement("input");ie.type="color",ie.value=j,ie.onchange=ye=>{k(ye.target.value)},ie.click()}}),a.jsxs("button",{onClick:J,disabled:!w.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[a.jsx(Vt,{size:16}),a.jsx("span",{children:"Create Tag"})]})]})]}),a.jsx("div",{className:"space-y-3",children:v.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Es,{size:48,className:"mx-auto mb-4 text-gray-300"}),a.jsx("p",{children:"No tags created yet"}),a.jsx("p",{className:"text-sm",children:"Create your first tag above"})]}):v.map(ie=>a.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-white text-sm font-medium",style:{backgroundColor:ie.color},children:ie.name}),a.jsxs("span",{className:"text-sm text-gray-500",children:["(",ie.user_count," users)"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>E(ie),className:"text-gray-400 hover:text-blue-600 transition-colors",children:a.jsx(C0,{size:16})}),a.jsx("button",{onClick:()=>T(ie),className:"text-gray-400 hover:text-red-600 transition-colors",children:a.jsx(ns,{size:16})})]})]},ie.id))}),A&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(Pl,{className:"text-red-500 mr-3",size:24}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Tag"})]}),a.jsxs("p",{className:"text-gray-600 mb-4",children:['This will permanently delete the tag "',A.name,'" and remove it from all ',A.user_count," assigned users."]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type the tag name to confirm:"}),a.jsx("input",{type:"text",value:M,onChange:ie=>P(ie.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:A.name})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>{T(null),P("")},className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{onClick:ne,disabled:M!==A.name,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete Tag"})]})]})})]});case"users":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(In,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:$,onChange:ie=>F(ie.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Search users..."})]}),a.jsxs("select",{value:z,onChange:ie=>W(ie.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Tags"}),v.map(ie=>a.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),a.jsxs("button",{onClick:()=>q(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[a.jsx(Ir,{size:20}),a.jsx("span",{children:"Upload CSV"})]})]}),a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:te.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(oi,{size:48,className:"mx-auto mb-4 text-gray-300"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:$||z!=="all"?"Try adjusting your search criteria.":"Start by uploading users via CSV or create them manually."}),!$&&z==="all"&&a.jsx("button",{onClick:()=>q(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Upload First Users"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Active"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:te.map(ie=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[ie.first_name," ",ie.last_name]}),a.jsx("div",{className:"text-sm text-gray-500",children:ie.email})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex flex-wrap gap-1",children:[ie.tags.map(ye=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs text-white rounded-full",style:{backgroundColor:ye.color},children:ye.name},ye.id)),ie.tags.length===0&&a.jsx("span",{className:"text-sm text-gray-400",children:"No tags"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ie.last_active?se(ie.last_active):"Never"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:se(ie.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:a.jsx("button",{onClick:()=>e(`/users/${ie.id}`),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"View Details",children:a.jsx(ii,{size:16})})})]},ie.id))})]})})})]});default:return null}};return i?a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r?a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex items-center justify-between py-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>e("/clients"),className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(lo,{size:24})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[r.logo_url?a.jsx("img",{src:r.logo_url,alt:r.name,className:"w-12 h-12 rounded-full object-cover border border-gray-200"}):a.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:r.brand_color},children:r.name.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.name}),r.project_name&&a.jsx("p",{className:"text-gray-600",children:r.project_name})]})]})]})})})}),a.jsx("div",{className:"bg-white border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("nav",{className:"flex space-x-8",children:[{id:"settings",label:"Settings",icon:Dn},{id:"features",label:"Enabled Features",icon:jM},{id:"tags",label:"Tag Management",icon:Es},{id:"users",label:"User Management",icon:oi}].map(ie=>{const ye=ie.icon;return a.jsxs("button",{onClick:()=>l(ie.id),className:`flex items-center space-x-2 px-1 py-4 border-b-2 font-medium text-sm transition-colors ${o===ie.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(ye,{size:18}),a.jsx("span",{children:ie.label})]},ie.id)})})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:ve()})}),a.jsx(jge,{isOpen:K,onClose:()=>q(!1),clientId:t,onUploadComplete:()=>{Q(),ee()}})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Client not found"}),a.jsx("button",{onClick:()=>e("/clients"),className:"mt-4 text-blue-600 hover:text-blue-800",children:"Back to Clients"})]})},Nge=()=>{const{userId:t}=us(),e=Ti(),[r,n]=O.useState(null),[i,s]=O.useState(!0),[o,l]=O.useState("overview"),[c,u]=O.useState([]),[f,d]=O.useState([]),[p,m]=O.useState([]),[x,y]=O.useState({totalActivities:0,contentCompleted:0,avgScore:0,streakDays:0,totalTimeSpent:0}),v=O.useCallback(async()=>{var T;if(t)try{const{data:M,error:P}=await pe.from("users").select(`
          *,
          clients!inner(
            id,
            name,
            logo_url,
            brand_color
          ),
          user_tag_assignments(
            user_tags(
              id,
              name,
              color
            )
          )
        `).eq("id",t).single();if(P)throw P;if(!M)throw new Error("User not found");const R={...M,client:M.clients,tags:((T=M.user_tag_assignments)==null?void 0:T.map(L=>L.user_tags))||[]};n(R),await b(t,R.client.id)}catch(M){console.error("Error loading user:",M),e("/clients")}finally{s(!1)}},[t,e]),b=async(T,M)=>{try{const P=new Date;P.setDate(P.getDate()-30);const{data:R}=await pe.from("user_activity_log").select("*").eq("user_id",T).gte("created_at",P.toISOString()).order("created_at",{ascending:!0}),L=new Map;R==null||R.forEach(W=>{var V;const K=new Date(W.created_at).toISOString().split("T")[0],q=L.get(K)||{score:0,activities:0};L.set(K,{score:q.score+(((V=W.activity_data)==null?void 0:V.score)||1),activities:q.activities+1})});const $=Array.from(L.entries()).map(([W,K])=>({date:W,score:K.score,activities:K.activities}));u($);const F=(R==null?void 0:R.length)||0,z=$.length>0?$.reduce((W,K)=>W+K.score,0)/$.length:0;y({totalActivities:F,contentCompleted:Math.floor(F*.7),avgScore:Math.round(z*10)/10,streakDays:j($),totalTimeSpent:Math.floor(F*15)})}catch(P){console.error("Error loading overview data:",P)}},w=async()=>{if(t)try{const{data:T}=await pe.from("user_activity_log").select(`
          *,
          content_items(
            id,
            title,
            content_type,
            thumbnail_url
          )
        `).eq("user_id",t).eq("activity_type","content_completed").order("created_at",{ascending:!1}).limit(50),M=(T==null?void 0:T.map(P=>{var R;return{id:P.id,content_item:P.content_items||{title:"Content Item",content_type:"document",thumbnail_url:null},practiced_at:P.created_at,completion_score:((R=P.activity_data)==null?void 0:R.score)||Math.floor(Math.random()*40)+60}}))||[];d(M)}catch(T){console.error("Error loading content mastery:",T)}},N=async()=>{if(t)try{const T=[{id:"1",course_title:"AI Fundamentals",progress_percentage:75,lessons_completed:6,total_lessons:8,last_accessed:new Date(Date.now()-1728e5).toISOString()},{id:"2",course_title:"Advanced Prompt Engineering",progress_percentage:45,lessons_completed:9,total_lessons:20,last_accessed:new Date(Date.now()-432e6).toISOString()},{id:"3",course_title:"Machine Learning Basics",progress_percentage:100,lessons_completed:12,total_lessons:12,last_accessed:new Date(Date.now()-864e5).toISOString()}];m(T)}catch(T){console.error("Error loading course progress:",T)}},j=T=>{if(T.length===0)return 0;let M=0;const P=[...T].sort((R,L)=>new Date(L.date).getTime()-new Date(R.date).getTime());for(const R of P)if(R.activities>0)M++;else break;return M};O.useEffect(()=>{v()},[v]),O.useEffect(()=>{o==="content"?w():o==="courses"&&N()},[o,t]);const k=T=>new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),_=T=>new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=T=>{switch(T){case"ai_agent":return a.jsx(Gr,{size:16,className:"text-blue-500"});case"video":return a.jsx(PX,{size:16,className:"text-red-500"});case"document":return a.jsx(Ot,{size:16,className:"text-green-500"});default:return a.jsx(Zn,{size:16,className:"text-gray-500"})}},A=()=>{switch(o){case"overview":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.totalActivities}),a.jsx("div",{className:"text-sm text-blue-800",children:"Total Activities"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:x.contentCompleted}),a.jsx("div",{className:"text-sm text-green-800",children:"Content Completed"})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:x.avgScore}),a.jsx("div",{className:"text-sm text-purple-800",children:"Avg Score"})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:x.streakDays}),a.jsx("div",{className:"text-sm text-orange-800",children:"Day Streak"})]}),a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[x.totalTimeSpent,"m"]}),a.jsx("div",{className:"text-sm text-gray-800",children:"Time Spent"})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Activity Score (Last 30 Days)"}),a.jsx("div",{className:"h-64",children:a.jsx(k_,{width:"100%",height:"100%",children:a.jsxs(nme,{data:c,children:[a.jsx(qE,{strokeDasharray:"3 3"}),a.jsx(wd,{dataKey:"date",tick:{fontSize:12},tickFormatter:T=>new Date(T).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),a.jsx(jd,{tick:{fontSize:12}}),a.jsx(wi,{labelFormatter:T=>k(T),formatter:(T,M)=>[T,M==="score"?"Activity Score":"Activities Count"]}),a.jsx(Fp,{type:"monotone",dataKey:"score",stroke:"#3B82F6",strokeWidth:2,dot:{fill:"#3B82F6",strokeWidth:2,r:4}})]})})})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),f.slice(0,5).length>0?a.jsx("div",{className:"space-y-3",children:f.slice(0,5).map(T=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg",children:[E(T.content_item.content_type),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.content_item.title}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Completed ",_(T.practiced_at)]})]}),a.jsxs("div",{className:"text-sm font-semibold text-green-600",children:[T.completion_score,"%"]})]},T.id))}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent activity"})]})]});case"content":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Content Mastery Log"}),a.jsxs("div",{className:"text-sm text-gray-500",children:[f.length," items practiced"]})]}),f.length>0?a.jsx("div",{className:"space-y-3",children:f.map(T=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[E(T.content_item.content_type),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:T.content_item.title}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Practiced on ",_(T.practiced_at)]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-lg font-semibold text-green-600",children:[T.completion_score,"%"]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Completion"})]}),T.completion_score>=90&&a.jsx(ln,{size:20,className:"text-green-500"})]})]},T.id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Zn,{size:48,className:"mx-auto mb-4 text-gray-300"}),a.jsx("p",{className:"text-gray-500",children:"No content practiced yet"})]})]});case"courses":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Course Progress"}),a.jsxs("div",{className:"text-sm text-gray-500",children:[p.length," courses enrolled"]})]}),p.length>0?a.jsx("div",{className:"space-y-4",children:p.map(T=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900",children:T.course_title}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${T.progress_percentage===100?"bg-green-100 text-green-800":T.progress_percentage>=50?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:[T.progress_percentage,"% Complete"]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[a.jsxs("span",{children:[T.lessons_completed," of ",T.total_lessons," lessons"]}),a.jsxs("span",{children:["Last accessed ",k(T.last_accessed)]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${T.progress_percentage}%`}})})]}),T.progress_percentage===100&&a.jsxs("div",{className:"flex items-center text-green-600",children:[a.jsx(ln,{size:16,className:"mr-2"}),a.jsx("span",{className:"text-sm font-medium",children:"Course Completed!"})]})]},T.id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Zn,{size:48,className:"mx-auto mb-4 text-gray-300"}),a.jsx("p",{className:"text-gray-500",children:"No courses enrolled yet"})]})]});default:return null}};return i?a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r?a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex items-center justify-between py-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>e(-1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(lo,{size:24})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white text-xl font-semibold",style:{backgroundColor:r.client.brand_color},children:[r.first_name.charAt(0).toUpperCase(),r.last_name.charAt(0).toUpperCase()]}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[r.first_name," ",r.last_name]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(DX,{size:16}),a.jsx("span",{children:r.email})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Fl,{size:16}),a.jsxs("span",{children:["Joined ",k(r.created_at)]})]}),r.last_active&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Xg,{size:16}),a.jsxs("span",{children:["Active ",k(r.last_active)]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[r.client.logo_url?a.jsx("img",{src:r.client.logo_url,alt:r.client.name,className:"w-6 h-6 rounded-full"}):a.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:r.client.brand_color}}),a.jsx("span",{className:"text-sm text-gray-700",children:r.client.name})]}),r.tags.length>0&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Es,{size:16,className:"text-gray-400"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:r.tags.map(T=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs text-white rounded-full",style:{backgroundColor:T.color},children:T.name},T.id))})]})]})]})]})]})})})}),a.jsx("div",{className:"bg-white border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",label:"Overview",icon:FB},{id:"content",label:"Content Mastery",icon:Zn},{id:"courses",label:"Course Progress",icon:ln}].map(T=>{const M=T.icon;return a.jsxs("button",{onClick:()=>l(T.id),className:`flex items-center space-x-2 px-1 py-4 border-b-2 font-medium text-sm transition-colors ${o===T.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(M,{size:18}),a.jsx("span",{children:T.label})]},T.id)})})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:A()})})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User not found"}),a.jsx("button",{onClick:()=>e("/clients"),className:"mt-4 text-blue-600 hover:text-blue-800",children:"Back to Clients"})]})};function kge(){const t=Ti(),{signOut:e,loading:r}=Ln();return O.useEffect(()=>{(async()=>{try{await e(),t("/login",{replace:!0})}catch(i){console.error("Logout error:",i),t("/login",{replace:!0})}})()},[e,t]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mb-4",children:a.jsx(LB,{className:"h-12 w-12 text-blue-500 mx-auto"})}),a.jsx(cr,{size:"lg"}),a.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Signing out..."})]})})}const WN=[{type:"articles",label:"Articles",icon:Ot,color:"#10B981",description:"Blog posts, tutorials, and written content",count:0},{type:"ai-agents",label:"AI Agents",icon:Kr,color:"#3B82F6",description:"Intelligent AI agents with custom prompts",count:0},{type:"videos",label:"Videos",icon:si,color:"#EF4444",description:"Educational videos with transcriptions",count:0},{type:"documents",label:"Documents",icon:Ot,color:"#10B981",description:"Rich text documents and guides",count:0},{type:"prompts",label:"Prompts",icon:Gr,color:"#8B5CF6",description:"Reusable prompt templates",count:0},{type:"automations",label:"Automations",icon:Ei,color:"#F59E0B",description:"Process automations and workflows",count:0}];function _ge(){const[t,e]=O.useState(WN),[r,n]=O.useState(!0);O.useEffect(()=>{i()},[]);const i=async()=>{try{n(!0);const{count:s}=await pe.from("content_articles").select("*",{count:"exact",head:!0}),o=WN.map(l=>{switch(l.type){case"articles":return{...l,count:s||0};default:return l}});e(o)}catch(s){console.error("Error fetching content counts:",s),e(WN)}finally{n(!1)}};return r?a.jsx(pr,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):a.jsx(pr,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Content Management"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Create and manage content for your AI platform"})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>{const o=s.icon;return a.jsxs(Qn,{to:`/content/${s.type}`,className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow group",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",style:{backgroundColor:s.color+"20"},children:a.jsx(o,{className:"h-6 w-6",style:{color:s.color}})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:s.label}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description})]})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[a.jsxs("span",{className:"text-sm text-gray-500",children:[s.count," items"]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs(Qn,{to:`/content/${s.type}/create`,className:"inline-flex items-center px-3 py-1.5 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",onClick:l=>l.stopPropagation(),children:[a.jsx(Vt,{className:"h-4 w-4 mr-1"}),"Create"]})})]})]},s.type)})}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("button",{className:"flex items-center space-x-3 p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(In,{className:"h-5 w-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Search Content"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Find existing content"})]})]}),a.jsxs("button",{className:"flex items-center space-x-3 p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(Ep,{className:"h-5 w-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Filter by Tags"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Organize content"})]})]}),a.jsxs(Qn,{to:"/content/ai-agents/create",className:"flex items-center space-x-3 p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(Kr,{className:"h-5 w-5 text-blue-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Quick Agent"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Create new AI agent"})]})]}),a.jsxs(Qn,{to:"/content/articles/create",className:"flex items-center space-x-3 p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(Ot,{className:"h-5 w-5 text-green-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"New Article"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Write blog posts and tutorials"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Recent Activity"}),a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Ot,{className:"mx-auto h-12 w-12 text-gray-300"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No recent activity"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Content creation and editing activity will appear here"})]})]})]})})}function Oge(){const[t,e]=O.useState([]),[r,n]=O.useState([]),[i,s]=O.useState(!0),[o,l]=O.useState(""),[c,u]=O.useState("all"),[f,d]=O.useState("all"),[p,m]=O.useState(!1);O.useEffect(()=>{x(),y()},[]);const x=async()=>{try{s(!0);const{data:j,error:k}=await pe.from("content_articles").select(`
          *,
          content_categories (
            id,
            name,
            color
          )
        `).order("created_at",{ascending:!1});if(k)throw k;e(j||[])}catch(j){console.error("Error fetching articles:",j)}finally{s(!1)}},y=async()=>{try{const{data:j,error:k}=await pe.from("content_categories").select("*").order("name");if(k)throw k;n(j||[])}catch(j){console.error("Error fetching categories:",j)}},v=async j=>{if(confirm("Are you sure you want to delete this article?"))try{const{error:k}=await pe.from("content_articles").delete().eq("id",j);if(k)throw k;await x()}catch(k){console.error("Error deleting article:",k)}},b=t.filter(j=>{var A;const k=j.title.toLowerCase().includes(o.toLowerCase())||j.author.toLowerCase().includes(o.toLowerCase()),_=c==="all"||((A=j.category_id)==null?void 0:A.toString())===c,E=f==="all"||j.status===f;return k&&_&&E}),w=j=>{const _={draft:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Draft"},published:{bg:"bg-green-100",text:"text-green-800",label:"Published"},archived:{bg:"bg-gray-100",text:"text-gray-800",label:"Archived"}}[j];return a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_.bg} ${_.text}`,children:_.label})},N=j=>j?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(j)):"-";return i?a.jsx(pr,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):a.jsx(pr,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Articles Management"}),a.jsx("p",{className:"text-gray-600",children:"Create and manage your content articles"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:()=>m(!p),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ep,{className:"h-4 w-4 mr-2"}),"Filters"]}),a.jsxs(Qn,{to:"/content/articles/create",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Add New Article"]})]})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 space-y-4",children:[a.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search articles by title or author...",value:o,onChange:j=>l(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})})}),p&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),a.jsxs("select",{value:c,onChange:j=>u(j.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"All Categories"}),r.map(j=>a.jsx("option",{value:j.id.toString(),children:j.name},j.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),a.jsxs("select",{value:f,onChange:j=>d(j.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"All Statuses"}),a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"published",children:"Published"}),a.jsx("option",{value:"archived",children:"Archived"})]})]})]})]}),a.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Author"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center",children:[a.jsx(Ot,{className:"mx-auto h-12 w-12 text-gray-300"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No articles found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:o||c!=="all"||f!=="all"?"Try adjusting your search or filters.":"Get started by creating your first article."})]})}):b.map(j=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:j.title}),j.excerpt&&a.jsx("div",{className:"text-sm text-gray-500 line-clamp-2",children:j.excerpt})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.content_categories?a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:j.content_categories.color}}),a.jsx("span",{className:"text-sm text-gray-900",children:j.content_categories.name})]}):a.jsx("span",{className:"text-sm text-gray-500",children:"Uncategorized"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(zB,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm text-gray-900",children:j.author})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w(j.status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fl,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm text-gray-900",children:N(j.created_at)})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx(Qn,{to:`/content/articles/${j.id}/edit`,className:"text-blue-600 hover:text-blue-900 p-1",children:a.jsx(ii,{className:"h-4 w-4"})}),a.jsx(Qn,{to:`/content/articles/${j.id}/edit`,className:"text-indigo-600 hover:text-indigo-900 p-1",children:a.jsx(yo,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>v(j.id),className:"text-red-600 hover:text-red-900 p-1",children:a.jsx(ns,{className:"h-4 w-4"})})]})})]},j.id))})]})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ot,{className:"h-8 w-8 text-blue-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Articles"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.length})]})]})}),a.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ii,{className:"h-8 w-8 text-green-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Published"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.filter(j=>j.status==="published").length})]})]})}),a.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(yo,{className:"h-8 w-8 text-yellow-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Drafts"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.filter(j=>j.status==="draft").length})]})]})}),a.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Es,{className:"h-8 w-8 text-purple-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Categories"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.length})]})]})})]})]})})}function A5(){const{id:t}=us(),e=Ti(),r=!!t,[n,i]=O.useState({title:"",content:"",excerpt:"",author:"Admin User",category_id:null,status:"draft",tags:[],featured_image_url:"",slug:"",seo_title:"",seo_description:""}),[s,o]=O.useState([]),[l,c]=O.useState(!1),[u,f]=O.useState(!1),[d,p]=O.useState(""),[m,x]=O.useState("content"),[y,v]=O.useState(null);O.useEffect(()=>{b(),r&&w()},[t]);const b=async()=>{try{const{data:T,error:M}=await pe.from("content_categories").select("*").order("name");if(M)throw M;o(T||[])}catch(T){console.error("Error fetching categories:",T)}},w=async()=>{if(t)try{c(!0);const{data:T,error:M}=await pe.from("content_articles").select("*").eq("id",parseInt(t)).single();if(M)throw M;T&&i({...T,tags:T.tags||[]})}catch(T){console.error("Error fetching article:",T)}finally{c(!1)}},N=T=>T.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),j=T=>{i(M=>({...M,title:T,slug:M.slug||N(T),seo_title:M.seo_title||T}))},k=()=>{d.trim()&&!n.tags.includes(d.trim())&&(i(T=>({...T,tags:[...T.tags,d.trim()]})),p(""))},_=T=>{i(M=>({...M,tags:M.tags.filter(P=>P!==T)}))},E=(T,M)=>{v({message:T,type:M}),setTimeout(()=>{v(null)},3e3)},A=async(T=!1)=>{try{f(!0);const M={...n,status:T?"published":n.status,published_at:T?new Date().toISOString():null,updated_at:new Date().toISOString()};if(r){const{error:P}=await pe.from("content_articles").update(M).eq("id",parseInt(t));if(P)throw P;E(T?"Article published successfully!":"Article saved successfully!","success"),setTimeout(()=>{e("/content/articles")},1500)}else{const{data:P,error:R}=await pe.from("content_articles").insert([M]).select().single();if(R)throw R;E(T?"Article published successfully!":"Article created successfully!","success"),setTimeout(()=>{P?e(`/content/articles/${P.id}/edit`,{replace:!0}):e("/content/articles")},1500)}}catch(M){console.error("Error saving article:",M),E("Failed to save article. Please try again.","error")}finally{f(!1)}};return l?a.jsx(pr,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):a.jsxs(pr,{children:[y&&a.jsx("div",{className:"fixed top-4 right-4 z-50 transition-all duration-500 ease-in-out transform translate-x-0 opacity-100",children:a.jsx("div",{className:`max-w-sm w-full ${y.type==="success"?"bg-green-500":"bg-red-500"} shadow-lg rounded-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5`,children:a.jsx("div",{className:"flex-1 w-0 p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"ml-3 flex-1",children:a.jsx("p",{className:"text-sm font-medium text-white",children:y.message})}),a.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:a.jsxs("button",{className:"bg-transparent rounded-md inline-flex text-white hover:text-gray-200 focus:outline-none focus:ring-2 focus:ring-white",onClick:()=>v(null),children:[a.jsx("span",{className:"sr-only",children:"Close"}),a.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})})})}),a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>e("/content/articles"),className:"p-2 hover:bg-gray-100 rounded-md",children:a.jsx(lo,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r?"Edit Article":"Create New Article"}),a.jsx("p",{className:"text-gray-600",children:"Write and publish your content"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:()=>A(!1),disabled:u,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx(Cp,{className:"h-4 w-4 mr-2"}),"Save Draft"]}),a.jsxs("button",{onClick:()=>A(!0),disabled:u,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx(ii,{className:"h-4 w-4 mr-2"}),"Publish"]})]})]}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsx("button",{onClick:()=>x("content"),className:`py-2 px-1 border-b-2 font-medium text-sm ${m==="content"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Content"}),a.jsx("button",{onClick:()=>x("settings"),className:`py-2 px-1 border-b-2 font-medium text-sm ${m==="settings"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Settings"}),a.jsx("button",{onClick:()=>x("seo"),className:`py-2 px-1 border-b-2 font-medium text-sm ${m==="seo"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"SEO"})]})}),m==="content"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),a.jsx("input",{type:"text",value:n.title,onChange:T=>j(T.target.value),placeholder:"Enter article title...",className:"w-full text-2xl font-bold border-0 border-b border-gray-200 focus:border-blue-500 focus:ring-0 px-0 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Excerpt"}),a.jsx("textarea",{value:n.excerpt,onChange:T=>i(M=>({...M,excerpt:T.target.value})),placeholder:"Brief description of the article...",rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),a.jsx("textarea",{value:n.content,onChange:T=>i(M=>({...M,content:T.target.value})),placeholder:"Write your article content here...",rows:20,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",required:!0}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You can use HTML tags for formatting."})]})]}),m==="settings"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),a.jsxs("select",{value:n.category_id||"",onChange:T=>i(M=>({...M,category_id:T.target.value?parseInt(T.target.value):null})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"No Category"}),s.map(T=>a.jsx("option",{value:T.id,children:T.name},T.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Author"}),a.jsx("input",{type:"text",value:n.author,onChange:T=>i(M=>({...M,author:T.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),a.jsxs("select",{value:n.status,onChange:T=>i(M=>({...M,status:T.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"published",children:"Published"}),a.jsx("option",{value:"archived",children:"Archived"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Slug"}),a.jsx("input",{type:"text",value:n.slug,onChange:T=>i(M=>({...M,slug:T.target.value})),placeholder:"article-url-slug",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Featured Image URL"}),a.jsx("input",{type:"url",value:n.featured_image_url,onChange:T=>i(M=>({...M,featured_image_url:T.target.value})),placeholder:"https://example.com/image.jpg",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:n.tags.map((T,M)=>a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[T,a.jsx("button",{type:"button",onClick:()=>_(T),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full hover:bg-blue-200",children:""})]},M))}),a.jsxs("div",{className:"flex",children:[a.jsx("input",{type:"text",value:d,onChange:T=>p(T.target.value),onKeyPress:T=>T.key==="Enter"&&k(),placeholder:"Add a tag...",className:"flex-1 border border-gray-300 rounded-l-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 border border-l-0 border-gray-300 bg-gray-50 rounded-r-md hover:bg-gray-100",children:"Add"})]})]})]}),m==="seo"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SEO Title"}),a.jsx("input",{type:"text",value:n.seo_title,onChange:T=>i(M=>({...M,seo_title:T.target.value})),placeholder:"SEO optimized title...",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Recommended: 50-60 characters"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SEO Description"}),a.jsx("textarea",{value:n.seo_description,onChange:T=>i(M=>({...M,seo_description:T.target.value})),placeholder:"Meta description for search engines...",rows:4,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Recommended: 150-160 characters"})]})]})]})]})}function qp({contentType:t,title:e,description:r,icon:n,color:i}){const s=Ti(),[o,l]=O.useState([]),[c,u]=O.useState([]),[f,d]=O.useState(!0),[p,m]=O.useState(null),[x,y]=O.useState({}),v=O.useRef(!0),b=O.useRef(""),[w,N]=O.useState({search:"",clients:[],status:"all",sortBy:"updated_at",sortOrder:"desc",viewMode:"cards"}),[j,k]=O.useState(!1),_=O.useMemo(()=>JSON.stringify({contentType:t,search:w.search,clients:w.clients.sort(),status:w.status,sortBy:w.sortBy,sortOrder:w.sortOrder}),[t,w.search,w.clients,w.status,w.sortBy,w.sortOrder]),E=O.useCallback(async()=>{if(!v.current)return;const z=_;if(b.current!==z)try{d(!0),m(null),b.current=z;let W=pe.from("content_items").select("*").eq("content_type",t);w.search.trim()&&(W=W.or(`title.ilike.%${w.search}%,description.ilike.%${w.search}%`)),w.status!=="all"&&(W=W.eq("status",w.status)),W=W.order(w.sortBy,{ascending:w.sortOrder==="asc"});const{data:K,error:q}=await W;if(!v.current)return;if(q){console.error("Error fetching content items:",q),m("Failed to load content items"),l([]);return}let V=K||[];if(w.clients.length>0){const{data:D,error:U}=await pe.from("content_client_assignments").select("content_item_id").in("client_id",w.clients);if(U)console.error("Error fetching assignments:",U);else if(D){const G=D.map(ee=>ee.content_item_id);V=V.filter(ee=>G.includes(ee.id))}}if(!v.current)return;if(l(V),V.length>0){const D=V.map(Q=>Q.id),[U,G]=await Promise.all([pe.from("content_client_assignments").select("content_item_id").in("content_item_id",D),pe.from("content_user_assignments").select("content_item_id").in("content_item_id",D)]),ee={};D.forEach(Q=>{var re,J;const H=((re=U.data)==null?void 0:re.filter(ne=>ne.content_item_id===Q).length)||0,Y=((J=G.data)==null?void 0:J.filter(ne=>ne.content_item_id===Q).length)||0;ee[Q]=H+Y}),v.current&&y(ee)}}catch(W){console.error("Error in fetchData:",W),v.current&&(m("Failed to load content"),l([]))}finally{v.current&&d(!1)}},[t,_,w.search,w.clients,w.status,w.sortBy,w.sortOrder]),A=O.useCallback(async()=>{try{const{data:z,error:W}=await pe.from("clients").select("*").eq("status","active").order("name");W?console.error("Error fetching clients:",W):z&&v.current&&u(z)}catch(z){console.error("Error fetching clients:",z)}},[]);O.useEffect(()=>{E()},[E]),O.useEffect(()=>{A()},[A]),O.useEffect(()=>()=>{v.current=!1},[]);const T=O.useCallback(()=>({ai_agent:"ai-agents",video:"videos",document:"documents",prompt:"prompts",automation:"automations"})[t]||t,[t]),M=O.useCallback(()=>{const z=T();s(`/content/${z}/create`)},[s,T]),P=O.useCallback(z=>{const W=T();s(`/content/${W}/${z}/edit`)},[s,T]),R=O.useCallback((z,W)=>{N(K=>({...K,[z]:W}))},[]),L=O.useCallback(()=>{N(z=>({search:"",clients:[],status:"all",sortBy:"updated_at",sortOrder:"desc",viewMode:z.viewMode}))},[]),$=O.useCallback(z=>a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${z==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:z==="published"?a.jsxs(a.Fragment,{children:[a.jsx(ii,{className:"h-3 w-3 mr-1"})," Published"]}):a.jsxs(a.Fragment,{children:[a.jsx(TO,{className:"h-3 w-3 mr-1"})," Draft"]})}),[]),F=O.useCallback(z=>new Date(z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),[]);return p&&!f?a.jsx(pr,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-red-500 mb-4",children:a.jsx(n,{className:"h-12 w-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Content"}),a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:p}),a.jsx("button",{onClick:()=>{m(null),E()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]})})}):a.jsx(pr,{children:a.jsxs("div",{className:"min-h-screen flex bg-gray-50",children:[a.jsxs("div",{className:`transition-all duration-300 ${j?"w-80":"w-12"} bg-white border-r border-gray-200 flex flex-col shadow-sm`,children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("button",{onClick:()=>k(!j),className:"flex items-center justify-center w-full p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[a.jsx(Ep,{className:"h-5 w-5"}),j&&a.jsx("span",{className:"ml-2 text-sm font-medium",children:"Filters"})]})}),j&&a.jsxs("div",{className:"flex-1 p-4 space-y-6 overflow-y-auto",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Content"}),a.jsxs("div",{className:"relative",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search by title or description...",value:w.search,onChange:z=>R("search",z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Publication Status"}),a.jsxs("select",{value:w.status,onChange:z=>R("status",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"published",children:"Published Only"}),a.jsx("option",{value:"draft",children:"Drafts Only"})]})]}),c.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Clients"}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-2",children:c.map(z=>a.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:w.clients.includes(z.id),onChange:W=>{W.target.checked?R("clients",[...w.clients,z.id]):R("clients",w.clients.filter(K=>K!==z.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:z.brand_color}}),a.jsx("span",{className:"text-sm text-gray-900",children:z.name})]})]},z.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort Content"}),a.jsxs("select",{value:`${w.sortBy}_${w.sortOrder}`,onChange:z=>{const[W,K]=z.target.value.split("_");R("sortBy",W),R("sortOrder",K)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[a.jsx("option",{value:"updated_at_desc",children:"Last Updated (Newest)"}),a.jsx("option",{value:"updated_at_asc",children:"Last Updated (Oldest)"}),a.jsx("option",{value:"created_at_desc",children:"Date Created (Newest)"}),a.jsx("option",{value:"created_at_asc",children:"Date Created (Oldest)"}),a.jsx("option",{value:"title_asc",children:"Title (A-Z)"}),a.jsx("option",{value:"title_desc",children:"Title (Z-A)"})]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200",children:a.jsx("button",{onClick:L,className:"w-full px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Clear All Filters"})})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4 shadow-sm",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 rounded-xl flex items-center justify-center shadow-sm",style:{backgroundColor:i+"15"},children:a.jsx(n,{className:"h-6 w-6",style:{color:i}})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r}),a.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[a.jsxs("span",{className:"text-xs text-gray-500",children:[o.length," ",o.length===1?"item":"items"]}),w.status!=="all"&&a.jsxs("span",{className:"text-xs text-gray-500",children:[" Filtered by ",w.status]}),w.clients.length>0&&a.jsxs("span",{className:"text-xs text-gray-500",children:[" ",w.clients.length," client(s)"]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>R("viewMode","cards"),className:`p-2 rounded-md transition-colors ${w.viewMode==="cards"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Card View",children:a.jsx(dd,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>R("viewMode","list"),className:`p-2 rounded-md transition-colors ${w.viewMode==="list"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"List View",children:a.jsx(rs,{className:"h-4 w-4"})})]}),a.jsxs("button",{onClick:M,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all",style:{backgroundColor:i,boxShadow:`0 4px 12px ${i}40`},children:[a.jsx(Vt,{className:"-ml-1 mr-2 h-4 w-4"}),"Create New"]})]})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:f?a.jsx("div",{className:"flex justify-center items-center py-20",children:a.jsxs("div",{className:"text-center",children:[a.jsx(cr,{size:"lg"}),a.jsxs("p",{className:"text-sm text-gray-500 mt-3",children:["Loading ",e.toLowerCase(),"..."]})]})}):a.jsx(a.Fragment,{children:o.length===0?a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"mx-auto h-24 w-24 rounded-full flex items-center justify-center mb-4",style:{backgroundColor:i+"10"},children:a.jsx(n,{className:"h-12 w-12",style:{color:i}})}),a.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["No ",e.toLowerCase()," yet"]}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:w.search||w.status!=="all"||w.clients.length>0?`No ${e.toLowerCase()} match your current filters. Try adjusting your search criteria.`:`Get started by creating your first ${t.replace("_"," ")}.`}),a.jsx("div",{className:"mt-8",children:w.search||w.status!=="all"||w.clients.length>0?a.jsx("button",{onClick:L,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Clear Filters"}):a.jsxs("button",{onClick:M,className:"inline-flex items-center px-6 py-3 border border-transparent shadow-sm text-sm font-medium rounded-lg text-white hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:i},children:[a.jsx(Vt,{className:"-ml-1 mr-2 h-5 w-5"}),"Create ",t.replace("_"," ")]})})]}):a.jsx("div",{className:w.viewMode==="cards"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-3",children:o.map(z=>a.jsx("div",{onClick:()=>P(z.id),className:`${w.viewMode==="cards"?"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md cursor-pointer transition-all hover:scale-105":"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md cursor-pointer transition-all"}`,children:w.viewMode==="cards"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"h-32 bg-gradient-to-br from-opacity-10 to-opacity-20 flex items-center justify-center relative",style:{backgroundColor:i+"08",backgroundImage:`linear-gradient(135deg, ${i}15, ${i}05)`},children:[a.jsx(n,{className:"h-8 w-8",style:{color:i}}),z.thumbnail_url&&a.jsx("img",{src:z.thumbnail_url,alt:z.title,className:"absolute inset-0 w-full h-full object-cover"})]}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 line-clamp-2 leading-5",children:z.title}),$(z.status)]}),z.description&&a.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 mb-3 leading-4",children:z.description}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Fl,{className:"h-3 w-3"}),a.jsx("span",{children:F(z.updated_at)})]}),x[z.id]>0&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(oi,{className:"h-3 w-3"}),a.jsx("span",{children:x[z.id]})]})]})]})]}):a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:i+"15"},children:a.jsx(n,{className:"h-6 w-6",style:{color:i}})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:z.title}),$(z.status)]}),z.description&&a.jsx("p",{className:"text-xs text-gray-600 truncate mt-1",children:z.description}),a.jsx("div",{className:"flex items-center justify-between mt-2",children:a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Fl,{className:"h-3 w-3"}),a.jsxs("span",{children:["Updated ",F(z.updated_at)]})]}),x[z.id]>0&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(oi,{className:"h-3 w-3"}),a.jsxs("span",{children:[x[z.id]," assignment",x[z.id]!==1?"s":""]})]})]})})]})]})},z.id))})})})]})]})})}function Ege(){return a.jsx(qp,{contentType:"ai_agent",title:xn.ai_agent.label,description:xn.ai_agent.description,icon:Kr,color:xn.ai_agent.color})}function Cge(){return a.jsx(qp,{contentType:"video",title:xn.video.label,description:xn.video.description,icon:si,color:xn.video.color})}function Age(){return a.jsx(qp,{contentType:"document",title:xn.document.label,description:xn.document.description,icon:Ot,color:xn.document.color})}function Tge(){return a.jsx(qp,{contentType:"prompt",title:xn.prompt.label,description:xn.prompt.description,icon:Gr,color:xn.prompt.color})}function Pge(){return a.jsx(qp,{contentType:"automation",title:xn.automation.label,description:xn.automation.description,icon:Ei,color:xn.automation.color})}function Mge({isOpen:t,onClose:e,client:r,contentItemId:n,onSave:i}){const[s,o]=O.useState([]),[l,c]=O.useState([]),[u,f]=O.useState([]),[d,p]=O.useState([]),[m,x]=O.useState(!1),[y,v]=O.useState(!1);O.useEffect(()=>{t&&b()},[t,r.id]);const b=async()=>{try{x(!0);const{data:N,error:j}=await pe.from("user_tags").select("*").eq("client_id",r.id).order("name");j?console.error("Error fetching tags:",j):N&&f(N);const{data:k,error:_}=await pe.from("users").select("*").eq("client_id",r.id).order("first_name");_?console.error("Error fetching users:",_):k&&p(k);const[E,A]=await Promise.all([pe.from("content_tag_assignments").select("tag_id").eq("content_item_id",n),pe.from("content_user_assignments").select("user_id").eq("content_item_id",n)]);E.data&&o(E.data.map(T=>T.tag_id)),A.data&&c(A.data.map(T=>T.user_id))}catch(N){console.error("Error fetching assignment data:",N)}finally{x(!1)}},w=async()=>{try{v(!0);const{data:{user:N}}=await pe.auth.getUser();if(!N)return;const j=[];u.length>0&&j.push(pe.from("content_tag_assignments").delete().eq("content_item_id",n).in("tag_id",u.map(_=>_.id))),d.length>0&&j.push(pe.from("content_user_assignments").delete().eq("content_item_id",n).in("user_id",d.map(_=>_.id))),await Promise.all(j);const k=[];if(s.length>0){const _=s.map(E=>({content_item_id:n,tag_id:E,assigned_by:N.id}));k.push(pe.from("content_tag_assignments").insert(_))}if(l.length>0){const _=l.map(E=>({content_item_id:n,user_id:E,assigned_by:N.id}));k.push(pe.from("content_user_assignments").insert(_))}await Promise.all(k),i(),e()}catch(N){console.error("Error saving assignments:",N)}finally{v(!1)}};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto shadow-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-8 w-8 rounded-lg flex items-center justify-center",style:{backgroundColor:r.brand_color+"20"},children:a.jsx("div",{className:"h-4 w-4 rounded-full",style:{backgroundColor:r.brand_color}})}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Assign to ",r.name]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Configure content visibility and access"})]})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 p-1 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx($r,{className:"h-5 w-5"})})]}),m?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(cr,{size:"md"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Loading assignment options..."})]}):a.jsxs("div",{className:"p-6 space-y-6",children:[u.length>0&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[a.jsx(Es,{className:"h-4 w-4 inline mr-2"}),"Assign to User Tags (",s.length," selected)"]}),a.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-3",children:u.map(N=>a.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 hover:bg-gray-50 rounded-md",children:[a.jsx("input",{type:"checkbox",checked:s.includes(N.id),onChange:j=>{j.target.checked?o([...s,N.id]):o(s.filter(k=>k!==N.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:N.color}}),a.jsx("span",{className:"text-sm text-gray-900",children:N.name})]})]},N.id))}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Content will be visible to all users with the selected tags"})]}),d.length>0&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[a.jsx(oi,{className:"h-4 w-4 inline mr-2"}),"Assign to Specific Users (",l.length," selected)"]}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto border border-gray-200 rounded-lg p-3",children:d.map(N=>a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-2 hover:bg-gray-50 rounded-md",children:[a.jsx("input",{type:"checkbox",checked:l.includes(N.id),onChange:j=>{j.target.checked?c([...l,N.id]):c(l.filter(k=>k!==N.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[N.first_name," ",N.last_name]}),a.jsx("div",{className:"text-xs text-gray-500",children:N.email})]})]},N.id))}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Content will be visible to the specifically selected users"})]}),u.length===0&&d.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(oi,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"No assignment options"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This client has no users or tags configured. Set up users and tags first."})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[a.jsx("button",{onClick:e,disabled:y,className:"px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Cancel"}),a.jsxs("button",{onClick:w,disabled:y||u.length===0&&d.length===0,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[y?a.jsx(cr,{size:"sm",className:"mr-2"}):null,"Save Assignments"]})]})]})}):null}function zp({contentType:t,isEdit:e=!1,children:r,onSaveContent:n,title:i,description:s,color:o,icon:l}){const{id:c}=us(),u=Ti(),{admin:f}=Ln(),[d,p]=O.useState(null),[m,x]=O.useState([]),[y,v]=O.useState([]),[b,w]=O.useState(e),[N,j]=O.useState(!1),[k,_]=O.useState(!1),[E,A]=O.useState(null),[T,M]=O.useState(!1),[P,R]=O.useState(null),[L,$]=O.useState(""),[F,z]=O.useState(""),[W,K]=O.useState("draft"),[q,V]=O.useState(""),D=O.useRef(null),U=O.useCallback(()=>{if(!D.current)return!1;const te=D.current;return L!==te.title||F!==te.description||W!==te.status||q!==te.thumbnailUrl||JSON.stringify(y.slice().sort())!==JSON.stringify(te.assignedClients.slice().sort())},[L,F,W,q,y]);O.useEffect(()=>{const te=setTimeout(()=>{const se=U();se!==k&&_(se)},50);return()=>clearTimeout(te)},[L,F,W,q,y,k,U]),O.useEffect(()=>{let te=!0;return(async()=>{try{R(null),e&&c&&await G(),te&&await ee()}catch(ve){te&&(console.error("Error initializing ContentEditor:",ve),R(ve instanceof Error?ve.message:"Failed to load content"))}})(),()=>{te=!1}},[e,c]);const G=O.useCallback(async()=>{if(c)try{R(null);const{data:te,error:se}=await pe.from("content_items").select("*").eq("id",c).maybeSingle();if(se)throw se;if(!te){console.warn("Content item not found, redirecting to content list"),u("/content",{replace:!0});return}p(te);const ve=te.title||"",ie=te.description||"",ye=te.status||"draft",Te=te.thumbnail_url||"";$(ve),z(ie),K(ye),V(Te);const{data:Le,error:ue}=await pe.from("content_client_assignments").select("client_id").eq("content_item_id",te.id);ue&&console.error("Error fetching client assignments:",ue);const he=Le?Le.map(we=>we.client_id):[];v(he),D.current={title:ve,description:ie,status:ye,thumbnailUrl:Te,assignedClients:he},_(!1)}catch(te){console.error("Error fetching content item:",te),R(te instanceof Error?te.message:"Failed to load content item")}finally{w(!1)}},[c,u]),ee=O.useCallback(async()=>{try{R(null);const{data:te,error:se}=await pe.from("clients").select("*").eq("status","active").order("name");if(se)throw se;x(te||[]),!e&&!D.current&&(D.current={title:"",description:"",status:"draft",thumbnailUrl:"",assignedClients:[]})}catch(te){console.error("Error fetching clients:",te),R(te instanceof Error?te.message:"Failed to load clients")}},[e]),Q=O.useCallback(()=>({ai_agent:"ai-agents",video:"videos",document:"documents",prompt:"prompts",automation:"automations"})[t]||t,[t]),H=O.useCallback(async te=>{if(!f)throw new Error("Admin authentication required");try{const{error:se}=await pe.from("content_client_assignments").delete().eq("content_item_id",te);if(se)throw se;if(y.length>0){const ve=y.map(ye=>({content_item_id:te,client_id:ye,assigned_by:f.id})),{error:ie}=await pe.from("content_client_assignments").insert(ve);if(ie)throw ie}}catch(se){throw console.error("Error saving client assignments:",se),new Error("Failed to save client assignments")}},[f,y]),Y=O.useCallback(async()=>{if(!d||!f){R("Unable to delete: missing content item or admin authentication");return}if(confirm("Are you sure you want to delete this content? This action cannot be undone."))try{j(!0),R(null);const{error:te}=await pe.from("content_items").delete().eq("id",d.id);if(te)throw te;const se=Q();u(`/content/${se}`,{replace:!0})}catch(te){console.error("Error deleting content:",te);const se=te instanceof Error?te.message:"Error deleting content. Please try again.";R(se)}finally{j(!1)}},[d,f,u]),re=O.useCallback(async()=>{if(!f){R("Admin authentication required");return}try{j(!0),R(null);let te=c;const se={title:L.trim(),description:F.trim()||null,content_type:t,status:W,thumbnail_url:q.trim()||null,created_by:f.id,updated_at:new Date().toISOString()};if(e&&te){const{error:ve}=await pe.from("content_items").update(se).eq("id",te);if(ve)throw ve}else{const{data:ve,error:ie}=await pe.from("content_items").insert([{...se,created_at:new Date().toISOString()}]).select().single();if(ie)throw ie;ve&&(te=ve.id,p(ve))}if(n&&te&&await n(te),await H(te),D.current={title:L.trim(),description:F.trim(),status:W,thumbnailUrl:q.trim(),assignedClients:[...y]},_(!1),!e&&te){const ve=Q();u(`/content/${ve}/${te}/edit`,{replace:!0})}}catch(te){console.error("Error saving content:",te);const se=te instanceof Error?te.message:"Error saving content. Please try again.";R(se)}finally{j(!1)}},[f,c,L,F,t,W,q,n,y,e,u]),J=O.useCallback(async()=>{if(!f){R("Admin authentication required");return}try{j(!0),R(null);let te=c;const se={title:L.trim(),description:F.trim()||null,content_type:t,status:W,thumbnail_url:q.trim()||null,created_by:f.id,updated_at:new Date().toISOString()};if(e&&te){const{error:ie}=await pe.from("content_items").update(se).eq("id",te);if(ie)throw ie}else{const{data:ie,error:ye}=await pe.from("content_items").insert([{...se,created_at:new Date().toISOString()}]).select().single();if(ye)throw ye;ie&&(te=ie.id,p(ie))}n&&te&&await n(te),await H(te),_(!1);const ve=Q();u(`/content/${ve}`,{replace:!0})}catch(te){console.error("Error saving content:",te);const se=te instanceof Error?te.message:"Error saving content. Please try again.";R(se)}finally{j(!1)}},[f,c,L,F,t,W,q,n,y,u]),ne=O.useCallback(te=>{v(se=>se.includes(te)?se.filter(ie=>ie!==te):[...se,te])},[]);return b?a.jsx(pr,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(cr,{size:"lg"}),a.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Loading content..."})]})})}):P?a.jsx(pr,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"text-center max-w-md mx-auto",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[a.jsxs("div",{className:"text-red-800 mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Content"}),a.jsx("p",{className:"text-sm",children:P})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:()=>{R(null),e&&c&&G(),ee()},className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Try Again"}),a.jsx(Qn,{to:"/content",className:"block w-full px-4 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500 text-center",children:"Back to Content"})]})]})})})}):a.jsx(Nh,{onError:(te,se)=>{console.error("ContentEditor Error Boundary:",te,se),R(`Component Error: ${te.message}`)},children:a.jsx(pr,{children:a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between py-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Qn,{to:`/content/${Q()}`,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(lo,{className:"h-5 w-5"})}),a.jsx("div",{className:"h-8 w-8 rounded-lg flex items-center justify-center",style:{backgroundColor:o+"20"},children:a.jsx(l,{className:"h-5 w-5",style:{color:o}})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl font-semibold text-gray-900",children:[e?"Edit":"Create"," ",i.slice(0,-1)]}),a.jsx("p",{className:"text-sm text-gray-500",children:s})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[e&&a.jsxs("button",{onClick:Y,disabled:N,className:"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-lg text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:[a.jsx(ns,{className:"h-4 w-4 mr-1"}),"Delete"]}),!e&&a.jsxs("button",{onClick:J,disabled:N||!L.trim(),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[N?a.jsx(cr,{size:"sm",className:"mr-2"}):a.jsx(lo,{className:"h-4 w-4 mr-2"}),N?"Saving...":"Save & Return to List"]}),a.jsxs("button",{onClick:re,disabled:N||!L.trim(),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50",style:{backgroundColor:o},children:[N?a.jsx(cr,{size:"sm",className:"mr-2"}):a.jsx(Cp,{className:"h-4 w-4 mr-2"}),N?"Saving...":e?"Update":"Save & Continue Editing"]})]})]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),a.jsx("input",{type:"text",id:"title",value:L,onChange:te=>$(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:`Enter ${i.slice(0,-1).toLowerCase()} title...`,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{id:"description",rows:3,value:F,onChange:te=>z(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:`Brief description of this ${i.slice(0,-1).toLowerCase()}...`})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"thumbnail",className:"block text-sm font-medium text-gray-700 mb-2",children:"Thumbnail URL"}),a.jsx("input",{type:"url",id:"thumbnail",value:q,onChange:te=>V(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/image.jpg"})]})]})]}),r]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status & Visibility"}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Publication Status"}),a.jsxs("select",{value:W,onChange:te=>K(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"draft",children:" Draft"}),a.jsx("option",{value:"published",children:" Published"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:W==="draft"?"Only visible to admin users":"Visible to assigned clients and users"})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Client Assignment"}),a.jsxs("span",{className:"text-sm text-gray-500",children:[y.length," of ",m.length]})]}),m.length>0?a.jsx("div",{className:"space-y-3",children:m.map(te=>{const se=y.includes(te.id);return a.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:se,onChange:()=>ne(te.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:te.brand_color}}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:te.name})]})]}),se&&a.jsx("button",{onClick:()=>A(te.id),className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Configure"})]},te.id)})}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx(oi,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"No clients available"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsxs("button",{onClick:()=>M(!T),className:"w-full flex items-center justify-between p-6 text-left",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Dn,{className:"h-5 w-5 text-gray-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Advanced Settings"})]}),T?a.jsx(mo,{className:"h-5 w-5 text-gray-600"}):a.jsx(jh,{className:"h-5 w-5 text-gray-600"})]}),T&&a.jsx("div",{className:"px-6 pb-6 border-t border-gray-200",children:a.jsx("div",{className:"pt-4 space-y-4",children:a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsxs("p",{children:["Content ID: ",a.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:(d==null?void 0:d.id)||"Not created yet"})]}),a.jsxs("p",{children:["Content Type: ",a.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:t})]}),d&&a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:["Created: ",new Date(d.created_at).toLocaleString()]}),a.jsxs("p",{children:["Updated: ",new Date(d.updated_at).toLocaleString()]})]})]})})})]})]})]})}),E&&a.jsx(Nh,{children:a.jsx(Mge,{isOpen:!0,onClose:()=>A(null),client:m.find(te=>te.id===E),contentItemId:(d==null?void 0:d.id)||c,onSave:()=>{}})})]})})})}function Rge(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function P5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?T5(Object(r),!0).forEach(function(n){Rge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ige(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Dge(t,e){if(t==null)return{};var r=Ige(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Lge(t,e){return $ge(t)||Bge(t,e)||Fge(t,e)||qge()}function $ge(t){if(Array.isArray(t))return t}function Bge(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(e&&r.length===e));n=!0);}catch(c){i=!0,s=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(i)throw s}}return r}}function Fge(t,e){if(t){if(typeof t=="string")return M5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M5(t,e)}}function M5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zge(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function I5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R5(Object(r),!0).forEach(function(n){zge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Uge(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){return e.reduceRight(function(i,s){return s(i)},n)}}function Ff(t){return function e(){for(var r=this,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return i.length>=t.length?t.apply(this,i):function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return e.apply(r,[].concat(i,l))}}}function xv(t){return{}.toString.call(t).includes("Object")}function Hge(t){return!Object.keys(t).length}function ap(t){return typeof t=="function"}function Wge(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Vge(t,e){return xv(e)||Sa("changeType"),Object.keys(e).some(function(r){return!Wge(t,r)})&&Sa("changeField"),e}function Kge(t){ap(t)||Sa("selectorType")}function Gge(t){ap(t)||xv(t)||Sa("handlerType"),xv(t)&&Object.values(t).some(function(e){return!ap(e)})&&Sa("handlersType")}function Yge(t){t||Sa("initialIsRequired"),xv(t)||Sa("initialType"),Hge(t)&&Sa("initialContent")}function Xge(t,e){throw new Error(t[e]||t.default)}var Jge={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Sa=Ff(Xge)(Jge),Cg={changes:Vge,selector:Kge,handler:Gge,initial:Yge};function Qge(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Cg.initial(t),Cg.handler(e);var r={current:t},n=Ff(tye)(r,e),i=Ff(eye)(r),s=Ff(Cg.changes)(t),o=Ff(Zge)(r);function l(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(f){return f};return Cg.selector(u),u(r.current)}function c(u){Uge(n,i,s,o)(u)}return[l,c]}function Zge(t,e){return ap(e)?e(t.current):e}function eye(t,e){return t.current=I5(I5({},t.current),e),e}function tye(t,e,r){return ap(e)?e(t.current):Object.keys(r).forEach(function(n){var i;return(i=e[n])===null||i===void 0?void 0:i.call(e,t.current[n])}),r}var rye={create:Qge},nye={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function iye(t){return function e(){for(var r=this,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return i.length>=t.length?t.apply(this,i):function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return e.apply(r,[].concat(i,l))}}}function sye(t){return{}.toString.call(t).includes("Object")}function oye(t){return t||D5("configIsRequired"),sye(t)||D5("configType"),t.urls?(aye(),{paths:{vs:t.urls.monacoBase}}):t}function aye(){console.warn(w8.deprecation)}function lye(t,e){throw new Error(t[e]||t.default)}var w8={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},D5=iye(lye)(w8),cye={config:oye},uye=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(i){return r.reduceRight(function(s,o){return o(s)},i)}};function j8(t,e){return Object.keys(e).forEach(function(r){e[r]instanceof Object&&t[r]&&Object.assign(e[r],j8(t[r],e[r]))}),P5(P5({},t),e)}var dye={type:"cancelation",msg:"operation is manually canceled"};function VN(t){var e=!1,r=new Promise(function(n,i){t.then(function(s){return e?i(dye):n(s)}),t.catch(i)});return r.cancel=function(){return e=!0},r}var fye=rye.create({config:nye,isInitialized:!1,resolve:null,reject:null,monaco:null}),S8=Lge(fye,2),Up=S8[0],px=S8[1];function hye(t){var e=cye.config(t),r=e.monaco,n=Dge(e,["monaco"]);px(function(i){return{config:j8(i.config,n),monaco:r}})}function pye(){var t=Up(function(e){var r=e.monaco,n=e.isInitialized,i=e.resolve;return{monaco:r,isInitialized:n,resolve:i}});if(!t.isInitialized){if(px({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),VN(KN);if(window.monaco&&window.monaco.editor)return N8(window.monaco),t.resolve(window.monaco),VN(KN);uye(mye,yye)(vye)}return VN(KN)}function mye(t){return document.body.appendChild(t)}function gye(t){var e=document.createElement("script");return t&&(e.src=t),e}function yye(t){var e=Up(function(n){var i=n.config,s=n.reject;return{config:i,reject:s}}),r=gye("".concat(e.config.paths.vs,"/loader.js"));return r.onload=function(){return t()},r.onerror=e.reject,r}function vye(){var t=Up(function(r){var n=r.config,i=r.resolve,s=r.reject;return{config:n,resolve:i,reject:s}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(r){N8(r),t.resolve(r)},function(r){t.reject(r)})}function N8(t){Up().monaco||px({monaco:t})}function xye(){return Up(function(t){var e=t.monaco;return e})}var KN=new Promise(function(t,e){return px({resolve:t,reject:e})}),k8={config:hye,init:pye,__getMonacoInstance:xye},bye={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},GN=bye,wye={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},jye=wye;function Sye({children:t}){return Z.createElement("div",{style:jye.container},t)}var Nye=Sye,kye=Nye;function _ye({width:t,height:e,isEditorReady:r,loading:n,_ref:i,className:s,wrapperProps:o}){return Z.createElement("section",{style:{...GN.wrapper,width:t,height:e},...o},!r&&Z.createElement(kye,null,n),Z.createElement("div",{ref:i,style:{...GN.fullWidth,...!r&&GN.hide},className:s}))}var Oye=_ye,_8=O.memo(Oye);function Eye(t){O.useEffect(t,[])}var O8=Eye;function Cye(t,e,r=!0){let n=O.useRef(!0);O.useEffect(n.current||!r?()=>{n.current=!1}:t,e)}var Kn=Cye;function oh(){}function pu(t,e,r,n){return Aye(t,n)||Tye(t,e,r,n)}function Aye(t,e){return t.editor.getModel(E8(t,e))}function Tye(t,e,r,n){return t.editor.createModel(e,r,n?E8(t,n):void 0)}function E8(t,e){return t.Uri.parse(e)}function Pye({original:t,modified:e,language:r,originalLanguage:n,modifiedLanguage:i,originalModelPath:s,modifiedModelPath:o,keepCurrentOriginalModel:l=!1,keepCurrentModifiedModel:c=!1,theme:u="light",loading:f="Loading...",options:d={},height:p="100%",width:m="100%",className:x,wrapperProps:y={},beforeMount:v=oh,onMount:b=oh}){let[w,N]=O.useState(!1),[j,k]=O.useState(!0),_=O.useRef(null),E=O.useRef(null),A=O.useRef(null),T=O.useRef(b),M=O.useRef(v),P=O.useRef(!1);O8(()=>{let F=k8.init();return F.then(z=>(E.current=z)&&k(!1)).catch(z=>(z==null?void 0:z.type)!=="cancelation"&&console.error("Monaco initialization: error:",z)),()=>_.current?$():F.cancel()}),Kn(()=>{if(_.current&&E.current){let F=_.current.getOriginalEditor(),z=pu(E.current,t||"",n||r||"text",s||"");z!==F.getModel()&&F.setModel(z)}},[s],w),Kn(()=>{if(_.current&&E.current){let F=_.current.getModifiedEditor(),z=pu(E.current,e||"",i||r||"text",o||"");z!==F.getModel()&&F.setModel(z)}},[o],w),Kn(()=>{let F=_.current.getModifiedEditor();F.getOption(E.current.editor.EditorOption.readOnly)?F.setValue(e||""):e!==F.getValue()&&(F.executeEdits("",[{range:F.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),F.pushUndoStop())},[e],w),Kn(()=>{var F,z;(z=(F=_.current)==null?void 0:F.getModel())==null||z.original.setValue(t||"")},[t],w),Kn(()=>{let{original:F,modified:z}=_.current.getModel();E.current.editor.setModelLanguage(F,n||r||"text"),E.current.editor.setModelLanguage(z,i||r||"text")},[r,n,i],w),Kn(()=>{var F;(F=E.current)==null||F.editor.setTheme(u)},[u],w),Kn(()=>{var F;(F=_.current)==null||F.updateOptions(d)},[d],w);let R=O.useCallback(()=>{var W;if(!E.current)return;M.current(E.current);let F=pu(E.current,t||"",n||r||"text",s||""),z=pu(E.current,e||"",i||r||"text",o||"");(W=_.current)==null||W.setModel({original:F,modified:z})},[r,e,i,t,n,s,o]),L=O.useCallback(()=>{var F;!P.current&&A.current&&(_.current=E.current.editor.createDiffEditor(A.current,{automaticLayout:!0,...d}),R(),(F=E.current)==null||F.editor.setTheme(u),N(!0),P.current=!0)},[d,u,R]);O.useEffect(()=>{w&&T.current(_.current,E.current)},[w]),O.useEffect(()=>{!j&&!w&&L()},[j,w,L]);function $(){var z,W,K,q;let F=(z=_.current)==null?void 0:z.getModel();l||((W=F==null?void 0:F.original)==null||W.dispose()),c||((K=F==null?void 0:F.modified)==null||K.dispose()),(q=_.current)==null||q.dispose()}return Z.createElement(_8,{width:m,height:p,isEditorReady:w,loading:f,_ref:A,className:x,wrapperProps:y})}var Mye=Pye;O.memo(Mye);function Rye(t){let e=O.useRef();return O.useEffect(()=>{e.current=t},[t]),e.current}var Iye=Rye,Ag=new Map;function Dye({defaultValue:t,defaultLanguage:e,defaultPath:r,value:n,language:i,path:s,theme:o="light",line:l,loading:c="Loading...",options:u={},overrideServices:f={},saveViewState:d=!0,keepCurrentModel:p=!1,width:m="100%",height:x="100%",className:y,wrapperProps:v={},beforeMount:b=oh,onMount:w=oh,onChange:N,onValidate:j=oh}){let[k,_]=O.useState(!1),[E,A]=O.useState(!0),T=O.useRef(null),M=O.useRef(null),P=O.useRef(null),R=O.useRef(w),L=O.useRef(b),$=O.useRef(),F=O.useRef(n),z=Iye(s),W=O.useRef(!1),K=O.useRef(!1);O8(()=>{let D=k8.init();return D.then(U=>(T.current=U)&&A(!1)).catch(U=>(U==null?void 0:U.type)!=="cancelation"&&console.error("Monaco initialization: error:",U)),()=>M.current?V():D.cancel()}),Kn(()=>{var U,G,ee,Q;let D=pu(T.current,t||n||"",e||i||"",s||r||"");D!==((U=M.current)==null?void 0:U.getModel())&&(d&&Ag.set(z,(G=M.current)==null?void 0:G.saveViewState()),(ee=M.current)==null||ee.setModel(D),d&&((Q=M.current)==null||Q.restoreViewState(Ag.get(s))))},[s],k),Kn(()=>{var D;(D=M.current)==null||D.updateOptions(u)},[u],k),Kn(()=>{!M.current||n===void 0||(M.current.getOption(T.current.editor.EditorOption.readOnly)?M.current.setValue(n):n!==M.current.getValue()&&(K.current=!0,M.current.executeEdits("",[{range:M.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),M.current.pushUndoStop(),K.current=!1))},[n],k),Kn(()=>{var U,G;let D=(U=M.current)==null?void 0:U.getModel();D&&i&&((G=T.current)==null||G.editor.setModelLanguage(D,i))},[i],k),Kn(()=>{var D;l!==void 0&&((D=M.current)==null||D.revealLine(l))},[l],k),Kn(()=>{var D;(D=T.current)==null||D.editor.setTheme(o)},[o],k);let q=O.useCallback(()=>{var D;if(!(!P.current||!T.current)&&!W.current){L.current(T.current);let U=s||r,G=pu(T.current,n||t||"",e||i||"",U||"");M.current=(D=T.current)==null?void 0:D.editor.create(P.current,{model:G,automaticLayout:!0,...u},f),d&&M.current.restoreViewState(Ag.get(U)),T.current.editor.setTheme(o),l!==void 0&&M.current.revealLine(l),_(!0),W.current=!0}},[t,e,r,n,i,s,u,f,d,o,l]);O.useEffect(()=>{k&&R.current(M.current,T.current)},[k]),O.useEffect(()=>{!E&&!k&&q()},[E,k,q]),F.current=n,O.useEffect(()=>{var D,U;k&&N&&((D=$.current)==null||D.dispose(),$.current=(U=M.current)==null?void 0:U.onDidChangeModelContent(G=>{K.current||N(M.current.getValue(),G)}))},[k,N]),O.useEffect(()=>{if(k){let D=T.current.editor.onDidChangeMarkers(U=>{var ee;let G=(ee=M.current.getModel())==null?void 0:ee.uri;if(G&&U.find(Q=>Q.path===G.path)){let Q=T.current.editor.getModelMarkers({resource:G});j==null||j(Q)}});return()=>{D==null||D.dispose()}}return()=>{}},[k,j]);function V(){var D,U;(D=$.current)==null||D.dispose(),p?d&&Ag.set(s,M.current.saveViewState()):(U=M.current.getModel())==null||U.dispose(),M.current.dispose()}return Z.createElement(_8,{width:m,height:x,isEditorReady:k,loading:c,_ref:P,className:y,wrapperProps:v})}var Lye=Dye,$ye=O.memo(Lye),Bye=$ye;function L5(){const{id:t}=us(),e=!!t,[r,n]=O.useState(null),[i,s]=O.useState(""),[o,l]=O.useState(""),[c,u]=O.useState(""),[f,d]=O.useState(e),[p,m]=O.useState(null),[x,y]=O.useState(!1);O.useEffect(()=>{let j=!0;return(async()=>{if(e&&t)try{await v()}catch(_){j&&(console.error("Error initializing AI agent:",_),m(_ instanceof Error?_.message:"Failed to load AI agent"))}else d(!1)})(),()=>{j=!1}},[e,t]);const v=O.useCallback(async()=>{if(!t){d(!1);return}try{m(null);const{data:j,error:k}=await pe.from("ai_agents").select("*").eq("content_item_id",t).maybeSingle();if(k)throw console.error("Error fetching AI agent:",k),new Error(`Database error: ${k.message}`);j&&(n(j),s(j.system_prompt||""),l(j.agent_name||""),u(j.short_description||""))}catch(j){throw console.error("Error fetching AI agent:",j),m(j instanceof Error?j.message:"Failed to load AI agent"),j}finally{d(!1)}},[t]),b=O.useCallback(async()=>{try{await navigator.clipboard.writeText(i),y(!0),setTimeout(()=>y(!1),2e3)}catch(j){console.error("Failed to copy prompt:",j),m("Failed to copy prompt to clipboard")}},[i]),w=O.useCallback(()=>{confirm("Are you sure you want to reset the system prompt? This action cannot be undone.")&&s("")},[]),N=O.useCallback(async j=>{if(!j)throw new Error("Content item ID is required for saving agent data");if(!o.trim())throw new Error("Agent name is required");if(!i.trim())throw new Error("System prompt is required");try{m(null);const k={content_item_id:j,system_prompt:i.trim(),agent_name:o.trim(),short_description:c.trim()||null,test_conversations:[],updated_at:new Date().toISOString()};let _;if(r){if(console.log("Updating existing AI agent:",r.id),_=await pe.from("ai_agents").update(k).eq("id",r.id).select().single(),_.error)throw console.error("Update error:",_.error),new Error(`Failed to update AI agent: ${_.error.message}`);console.log("AI agent updated successfully:",_.data)}else{if(console.log("Creating new AI agent for content item:",j),_=await pe.from("ai_agents").insert([{...k,created_at:new Date().toISOString()}]).select().single(),_.error)throw console.error("Insert error:",_.error),new Error(`Failed to create AI agent: ${_.error.message}`);console.log("AI agent created successfully:",_.data),n(_.data)}}catch(k){console.error("Error in saveAgentData:",k);const _=k instanceof Error?k.message:"Failed to save agent configuration";throw m(_),k}},[r,o,i,c]);return f?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(cr,{size:"lg"}),a.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Loading AI agent..."})]})}):a.jsx(Nh,{onError:(j,k)=>{console.error("AIAgentEditor Error Boundary:",j,k),m(`Component Error: ${j.message}`)},children:a.jsx(zp,{contentType:"ai_agent",isEdit:e,onSaveContent:N,title:"AI Agents",description:"Intelligent AI agents with custom prompts",color:"#3B82F6",icon:Kr,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(Kr,{className:"h-5 w-5 mr-2 text-blue-500"}),"Agent Configuration"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"agentName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Agent Name *"}),a.jsx("input",{type:"text",id:"agentName",value:o,onChange:j=>l(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Customer Support Assistant",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"shortDescription",className:"block text-sm font-medium text-gray-700 mb-2",children:"Short Description"}),a.jsx("input",{type:"text",id:"shortDescription",value:c,onChange:j=>u(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Brief description of agent capabilities"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"System Prompt *"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:b,className:`inline-flex items-center px-3 py-1.5 border rounded-lg text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${x?"border-green-300 text-green-700 bg-green-50 focus:ring-green-500":"border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-blue-500"}`,children:[a.jsx(gy,{className:"h-4 w-4 mr-1"}),x?"Copied!":"Copy"]}),a.jsxs("button",{onClick:w,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(zX,{className:"h-4 w-4 mr-1"}),"Reset"]})]})]}),a.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:a.jsx(Bye,{height:"300px",language:"markdown",value:i,onChange:j=>s(j||""),options:{minimap:{enabled:!1},wordWrap:"on",lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,fontSize:14,lineHeight:1.6,padding:{top:16,bottom:16},bracketPairColorization:{enabled:!0}},theme:"vs"})}),a.jsx("div",{className:"mt-3 text-sm text-gray-600",children:a.jsxs("p",{className:"flex items-start",children:[a.jsx(ql,{className:"h-4 w-4 mr-2 mt-0.5 text-blue-500 flex-shrink-0"}),"Define how your AI agent should behave, respond, and interact with users. Be specific about tone, knowledge domain, and constraints."]})})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"AI Agent Guidelines"}),a.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 mr-3 flex-shrink-0"}),a.jsx("p",{children:"Be specific about the agent's role and expertise area"})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 mr-3 flex-shrink-0"}),a.jsx("p",{children:"Define the tone and personality (professional, friendly, technical, etc.)"})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 mr-3 flex-shrink-0"}),a.jsx("p",{children:"Set clear boundaries on what the agent can and cannot do"})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2 mr-3 flex-shrink-0"}),a.jsx("p",{children:"Include examples of good responses for consistency"})]})]})]}),p&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start space-x-3",children:[a.jsx(ql,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-red-800 mb-1",children:"Error Saving AI Agent"}),a.jsx("p",{className:"text-sm text-red-700",children:p})]}),a.jsx("button",{onClick:()=>m(null),className:"text-red-400 hover:text-red-600",children:a.jsx($r,{className:"h-4 w-4"})})]})]})})})}function $5(){const{id:t}=us(),e=!!t,[r,n]=O.useState(null),[i,s]=O.useState(""),[o,l]=O.useState(""),[c,u]=O.useState(""),[f,d]=O.useState(""),[p,m]=O.useState(e),[x,y]=O.useState(!1),[v,b]=O.useState(null),[w,N]=O.useState(null);O.useEffect(()=>{e&&t&&j()},[e,t]),O.useEffect(()=>{i.trim()&&k(i.trim())},[i]);const j=async()=>{if(t)try{const{data:M,error:P}=await pe.from("videos").select("*").eq("content_item_id",t).maybeSingle();if(P)throw P;M&&(n(M),s(M.video_url),l(M.transcription||""),u(M.auto_title||""),d(M.auto_description||""),M.video_platform&&M.video_id&&N({platform:M.video_platform,videoId:M.video_id,duration:M.duration_seconds||void 0}))}catch(M){console.error("Error fetching video:",M)}finally{m(!1)}},k=async M=>{y(!0),b(null);try{const P=_(M);N(P),P.title&&u(P.title),P.description&&d(P.description)}catch(P){b(P.message||"Failed to process video URL"),N(null)}finally{y(!1)}},_=M=>{var L;const P=[/(?:youtube\.com\/watch\?v=|youtu\.be\/)([\w-]+)/,/youtube\.com\/embed\/([\w-]+)/,/youtube\.com\/v\/([\w-]+)/],R=[/vimeo\.com\/(\d+)/,/player\.vimeo\.com\/video\/(\d+)/];for(const $ of P){const F=M.match($);if(F)return{platform:"youtube",videoId:F[1],title:`YouTube Video ${F[1]}`,description:"Video imported from YouTube"}}for(const $ of R){const F=M.match($);if(F)return{platform:"vimeo",videoId:F[1],title:`Vimeo Video ${F[1]}`,description:"Video imported from Vimeo"}}if(M.match(/\.(mp4|webm|ogg|mov|avi|mkv)$/i))return{platform:"other",title:((L=M.split("/").pop())==null?void 0:L.split(".")[0])||"Video File",description:"Direct video file"};throw new Error("Unsupported video URL format. Please use YouTube, Vimeo, or direct video file URLs.")},E=M=>M.platform==="youtube"&&M.videoId?`https://www.youtube.com/embed/${M.videoId}?rel=0&modestbranding=1`:M.platform==="vimeo"&&M.videoId?`https://player.vimeo.com/video/${M.videoId}?title=0&byline=0&portrait=0`:i,A=M=>{const P=M.trim().split(/\s+/).length;return Math.ceil(P/200)},T=async M=>{try{const P={content_item_id:M,video_url:i.trim(),video_platform:(w==null?void 0:w.platform)||null,video_id:(w==null?void 0:w.videoId)||null,duration_seconds:(w==null?void 0:w.duration)||null,transcription:o.trim()||null,auto_title:c.trim()||null,auto_description:f.trim()||null};if(r){const{error:R}=await pe.from("videos").update({...P,updated_at:new Date().toISOString()}).eq("id",r.id);if(R)throw R}else{const{error:R}=await pe.from("videos").insert([P]);if(R)throw R}}catch(P){throw console.error("Error saving video data:",P),P}};return p?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(cr,{size:"lg"}),a.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Loading video..."})]})}):a.jsx(zp,{contentType:"video",isEdit:e,onSaveContent:T,title:"Videos",description:"Educational videos with transcriptions",color:"#EF4444",icon:si,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(n_,{className:"h-5 w-5 mr-2 text-red-500"}),"Video Source"]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx("label",{htmlFor:"videoUrl",className:"block text-sm font-medium text-gray-700 mb-2",children:"Video URL *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"url",id:"videoUrl",value:i,onChange:M=>s(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"https://www.youtube.com/watch?v=... or https://vimeo.com/...",required:!0}),x&&a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx(cr,{size:"sm"})})]}),v&&a.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ql,{className:"h-4 w-4 text-red-600"}),a.jsx("p",{className:"text-sm text-red-700",children:v})]})}),w&&!v&&a.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(ln,{className:"h-4 w-4 text-green-600"}),a.jsxs("p",{className:"text-sm text-green-700 font-medium",children:[w.platform.charAt(0).toUpperCase()+w.platform.slice(1)," video detected"]})]}),a.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[a.jsxs("p",{children:["Platform: ",a.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:w.platform})]}),w.videoId&&a.jsxs("p",{children:["Video ID: ",a.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:w.videoId})]}),w.duration&&a.jsxs("p",{children:["Duration: ",a.jsxs("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:[Math.floor(w.duration/60),":",(w.duration%60).toString().padStart(2,"0")]})]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Supported: YouTube, Vimeo, and direct video file URLs (.mp4, .webm, .ogg, etc.)"})]})})]}),w&&i&&!v&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(si,{className:"h-5 w-5 mr-2 text-red-500"}),"Video Preview"]}),a.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:w.platform==="youtube"||w.platform==="vimeo"?a.jsx("iframe",{src:E(w),title:"Video Preview",className:"w-full h-full",frameBorder:"0",allowFullScreen:!0}):a.jsx("video",{src:i,controls:!0,className:"w-full h-full object-cover",preload:"metadata"})}),a.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[w.platform&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(n_,{className:"h-4 w-4"}),a.jsx("span",{className:"capitalize",children:w.platform})]}),w.duration&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(go,{className:"h-4 w-4"}),a.jsxs("span",{children:[Math.floor(w.duration/60),":",(w.duration%60).toString().padStart(2,"0")]})]})]}),a.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-red-600 hover:text-red-800",children:[a.jsx(Os,{className:"h-4 w-4"}),a.jsx("span",{children:"Open Original"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(Ot,{className:"h-5 w-5 mr-2 text-blue-500"}),"Video Metadata"]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"autoTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Auto-detected Title"}),a.jsx("input",{type:"text",id:"autoTitle",value:c,onChange:M=>u(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Title will be auto-detected from video platform"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This can be used as a fallback title if main title is empty"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"autoDescription",className:"block text-sm font-medium text-gray-700 mb-2",children:"Auto-detected Description"}),a.jsx("textarea",{id:"autoDescription",rows:3,value:f,onChange:M=>d(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Description will be auto-detected from video platform"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-populated from the video platform's metadata"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[a.jsx(Ot,{className:"h-5 w-5 mr-2 text-purple-500"}),"Video Transcription"]}),a.jsx("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:o.trim()&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ot,{className:"h-4 w-4"}),a.jsxs("span",{children:[o.trim().split(/\s+/).length," words"]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(go,{className:"h-4 w-4"}),a.jsxs("span",{children:[A(o)," min read"]})]})]})})]}),a.jsxs("div",{children:[a.jsx("textarea",{value:o,onChange:M=>l(M.target.value),rows:12,className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter the video transcription here...\\n\\nThis text will be searchable and can be used for generating subtitles or providing accessible content for users."}),a.jsx("div",{className:"mt-3 p-3 bg-purple-50 rounded-lg",children:a.jsxs("p",{className:"text-xs text-purple-700",children:[a.jsx("strong",{children:"Accessibility Tip:"})," Adding transcriptions makes your video content accessible to hearing-impaired users and improves SEO by making video content searchable."]})})]})]}),w&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Technical Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("label",{className:"font-medium text-gray-700",children:"Platform"}),a.jsx("p",{className:"text-gray-900 capitalize",children:w.platform})]}),w.videoId&&a.jsxs("div",{children:[a.jsx("label",{className:"font-medium text-gray-700",children:"Video ID"}),a.jsx("p",{className:"text-gray-900 font-mono text-xs",children:w.videoId})]}),w.duration&&a.jsxs("div",{children:[a.jsx("label",{className:"font-medium text-gray-700",children:"Duration"}),a.jsxs("p",{className:"text-gray-900",children:[Math.floor(w.duration/3600),"h ",Math.floor(w.duration%3600/60),"m ",w.duration%60,"s"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"font-medium text-gray-700",children:"URL"}),a.jsx("p",{className:"text-gray-900 truncate",title:i,children:i})]})]})]})]})})}var Zg={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var Fye=Zg.exports,B5;function qye(){return B5||(B5=1,function(t,e){(function(n,i){t.exports=i()})(typeof self<"u"?self:Fye,function(){return function(r){var n={};function i(s){if(n[s])return n[s].exports;var o=n[s]={i:s,l:!1,exports:{}};return r[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=r,i.c=n,i.d=function(s,o,l){i.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:l})},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=109)}([function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(17),o=i(18),l=i(19),c=i(45),u=i(46),f=i(47),d=i(48),p=i(49),m=i(12),x=i(32),y=i(33),v=i(31),b=i(1),w={Scope:b.Scope,create:b.create,find:b.find,query:b.query,register:b.register,Container:s.default,Format:o.default,Leaf:l.default,Embed:d.default,Scroll:c.default,Block:f.default,Inline:u.default,Text:p.default,Attributor:{Attribute:m.default,Class:x.default,Style:y.default,Store:v.default}};n.default=w},function(r,n,i){var s=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var N in w)w.hasOwnProperty(N)&&(b[N]=w[N])};return function(b,w){v(b,w);function N(){this.constructor=b}b.prototype=w===null?Object.create(w):(N.prototype=w.prototype,new N)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(v){s(b,v);function b(w){var N=this;return w="[Parchment] "+w,N=v.call(this,w)||this,N.message=w,N.name=N.constructor.name,N}return b}(Error);n.ParchmentError=o;var l={},c={},u={},f={};n.DATA_KEY="__blot";var d;(function(v){v[v.TYPE=3]="TYPE",v[v.LEVEL=12]="LEVEL",v[v.ATTRIBUTE=13]="ATTRIBUTE",v[v.BLOT=14]="BLOT",v[v.INLINE=7]="INLINE",v[v.BLOCK=11]="BLOCK",v[v.BLOCK_BLOT=10]="BLOCK_BLOT",v[v.INLINE_BLOT=6]="INLINE_BLOT",v[v.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",v[v.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",v[v.ANY=15]="ANY"})(d=n.Scope||(n.Scope={}));function p(v,b){var w=x(v);if(w==null)throw new o("Unable to create "+v+" blot");var N=w,j=v instanceof Node||v.nodeType===Node.TEXT_NODE?v:N.create(b);return new N(j,b)}n.create=p;function m(v,b){return b===void 0&&(b=!1),v==null?null:v[n.DATA_KEY]!=null?v[n.DATA_KEY].blot:b?m(v.parentNode,b):null}n.find=m;function x(v,b){b===void 0&&(b=d.ANY);var w;if(typeof v=="string")w=f[v]||l[v];else if(v instanceof Text||v.nodeType===Node.TEXT_NODE)w=f.text;else if(typeof v=="number")v&d.LEVEL&d.BLOCK?w=f.block:v&d.LEVEL&d.INLINE&&(w=f.inline);else if(v instanceof HTMLElement){var N=(v.getAttribute("class")||"").split(/\s+/);for(var j in N)if(w=c[N[j]],w)break;w=w||u[v.tagName]}return w==null?null:b&d.LEVEL&w.scope&&b&d.TYPE&w.scope?w:null}n.query=x;function y(){for(var v=[],b=0;b<arguments.length;b++)v[b]=arguments[b];if(v.length>1)return v.map(function(j){return y(j)});var w=v[0];if(typeof w.blotName!="string"&&typeof w.attrName!="string")throw new o("Invalid definition");if(w.blotName==="abstract")throw new o("Cannot register abstract class");if(f[w.blotName||w.attrName]=w,typeof w.keyName=="string")l[w.keyName]=w;else if(w.className!=null&&(c[w.className]=w),w.tagName!=null){Array.isArray(w.tagName)?w.tagName=w.tagName.map(function(j){return j.toUpperCase()}):w.tagName=w.tagName.toUpperCase();var N=Array.isArray(w.tagName)?w.tagName:[w.tagName];N.forEach(function(j){(u[j]==null||w.className==null)&&(u[j]=w)})}return w}n.register=y},function(r,n,i){var s=i(51),o=i(11),l=i(3),c=i(20),u="\0",f=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};f.prototype.insert=function(d,p){var m={};return d.length===0?this:(m.insert=d,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(m.attributes=p),this.push(m))},f.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},f.prototype.retain=function(d,p){if(d<=0)return this;var m={retain:d};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(m.attributes=p),this.push(m)},f.prototype.push=function(d){var p=this.ops.length,m=this.ops[p-1];if(d=l(!0,{},d),typeof m=="object"){if(typeof d.delete=="number"&&typeof m.delete=="number")return this.ops[p-1]={delete:m.delete+d.delete},this;if(typeof m.delete=="number"&&d.insert!=null&&(p-=1,m=this.ops[p-1],typeof m!="object"))return this.ops.unshift(d),this;if(o(d.attributes,m.attributes)){if(typeof d.insert=="string"&&typeof m.insert=="string")return this.ops[p-1]={insert:m.insert+d.insert},typeof d.attributes=="object"&&(this.ops[p-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof m.retain=="number")return this.ops[p-1]={retain:m.retain+d.retain},typeof d.attributes=="object"&&(this.ops[p-1].attributes=d.attributes),this}}return p===this.ops.length?this.ops.push(d):this.ops.splice(p,0,d),this},f.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},f.prototype.filter=function(d){return this.ops.filter(d)},f.prototype.forEach=function(d){this.ops.forEach(d)},f.prototype.map=function(d){return this.ops.map(d)},f.prototype.partition=function(d){var p=[],m=[];return this.forEach(function(x){var y=d(x)?p:m;y.push(x)}),[p,m]},f.prototype.reduce=function(d,p){return this.ops.reduce(d,p)},f.prototype.changeLength=function(){return this.reduce(function(d,p){return p.insert?d+c.length(p):p.delete?d-p.delete:d},0)},f.prototype.length=function(){return this.reduce(function(d,p){return d+c.length(p)},0)},f.prototype.slice=function(d,p){d=d||0,typeof p!="number"&&(p=1/0);for(var m=[],x=c.iterator(this.ops),y=0;y<p&&x.hasNext();){var v;y<d?v=x.next(d-y):(v=x.next(p-y),m.push(v)),y+=c.length(v)}return new f(m)},f.prototype.compose=function(d){var p=c.iterator(this.ops),m=c.iterator(d.ops),x=[],y=m.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){for(var v=y.retain;p.peekType()==="insert"&&p.peekLength()<=v;)v-=p.peekLength(),x.push(p.next());y.retain-v>0&&m.next(y.retain-v)}for(var b=new f(x);p.hasNext()||m.hasNext();)if(m.peekType()==="insert")b.push(m.next());else if(p.peekType()==="delete")b.push(p.next());else{var w=Math.min(p.peekLength(),m.peekLength()),N=p.next(w),j=m.next(w);if(typeof j.retain=="number"){var k={};typeof N.retain=="number"?k.retain=w:k.insert=N.insert;var _=c.attributes.compose(N.attributes,j.attributes,typeof N.retain=="number");if(_&&(k.attributes=_),b.push(k),!m.hasNext()&&o(b.ops[b.ops.length-1],k)){var E=new f(p.rest());return b.concat(E).chop()}}else typeof j.delete=="number"&&typeof N.retain=="number"&&b.push(j)}return b.chop()},f.prototype.concat=function(d){var p=new f(this.ops.slice());return d.ops.length>0&&(p.push(d.ops[0]),p.ops=p.ops.concat(d.ops.slice(1))),p},f.prototype.diff=function(d,p){if(this.ops===d.ops)return new f;var m=[this,d].map(function(w){return w.map(function(N){if(N.insert!=null)return typeof N.insert=="string"?N.insert:u;var j=w===d?"on":"with";throw new Error("diff() called "+j+" non-document")}).join("")}),x=new f,y=s(m[0],m[1],p),v=c.iterator(this.ops),b=c.iterator(d.ops);return y.forEach(function(w){for(var N=w[1].length;N>0;){var j=0;switch(w[0]){case s.INSERT:j=Math.min(b.peekLength(),N),x.push(b.next(j));break;case s.DELETE:j=Math.min(N,v.peekLength()),v.next(j),x.delete(j);break;case s.EQUAL:j=Math.min(v.peekLength(),b.peekLength(),N);var k=v.next(j),_=b.next(j);o(k.insert,_.insert)?x.retain(j,c.attributes.diff(k.attributes,_.attributes)):x.push(_).delete(j);break}N-=j}}),x.chop()},f.prototype.eachLine=function(d,p){p=p||`
`;for(var m=c.iterator(this.ops),x=new f,y=0;m.hasNext();){if(m.peekType()!=="insert")return;var v=m.peek(),b=c.length(v)-m.peekLength(),w=typeof v.insert=="string"?v.insert.indexOf(p,b)-b:-1;if(w<0)x.push(m.next());else if(w>0)x.push(m.next(w));else{if(d(x,m.next(1).attributes||{},y)===!1)return;y+=1,x=new f}}x.length()>0&&d(x,{},y)},f.prototype.transform=function(d,p){if(p=!!p,typeof d=="number")return this.transformPosition(d,p);for(var m=c.iterator(this.ops),x=c.iterator(d.ops),y=new f;m.hasNext()||x.hasNext();)if(m.peekType()==="insert"&&(p||x.peekType()!=="insert"))y.retain(c.length(m.next()));else if(x.peekType()==="insert")y.push(x.next());else{var v=Math.min(m.peekLength(),x.peekLength()),b=m.next(v),w=x.next(v);if(b.delete)continue;w.delete?y.push(w):y.retain(v,c.attributes.transform(b.attributes,w.attributes,p))}return y.chop()},f.prototype.transformPosition=function(d,p){p=!!p;for(var m=c.iterator(this.ops),x=0;m.hasNext()&&x<=d;){var y=m.peekLength(),v=m.peekType();if(m.next(),v==="delete"){d-=Math.min(y,d-x);continue}else v==="insert"&&(x<d||!p)&&(d+=y);x+=y}return d},r.exports=f},function(r,n){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,c=function(m){return typeof Array.isArray=="function"?Array.isArray(m):s.call(m)==="[object Array]"},u=function(m){if(!m||s.call(m)!=="[object Object]")return!1;var x=i.call(m,"constructor"),y=m.constructor&&m.constructor.prototype&&i.call(m.constructor.prototype,"isPrototypeOf");if(m.constructor&&!x&&!y)return!1;var v;for(v in m);return typeof v>"u"||i.call(m,v)},f=function(m,x){o&&x.name==="__proto__"?o(m,x.name,{enumerable:!0,configurable:!0,value:x.newValue,writable:!0}):m[x.name]=x.newValue},d=function(m,x){if(x==="__proto__")if(i.call(m,x)){if(l)return l(m,x).value}else return;return m[x]};r.exports=function p(){var m,x,y,v,b,w,N=arguments[0],j=1,k=arguments.length,_=!1;for(typeof N=="boolean"&&(_=N,N=arguments[1]||{},j=2),(N==null||typeof N!="object"&&typeof N!="function")&&(N={});j<k;++j)if(m=arguments[j],m!=null)for(x in m)y=d(N,x),v=d(m,x),N!==v&&(_&&v&&(u(v)||(b=c(v)))?(b?(b=!1,w=y&&c(y)?y:[]):w=y&&u(y)?y:{},f(N,{name:x,newValue:p(_,w,v)})):typeof v<"u"&&f(N,{name:x,newValue:v}));return N}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var s=function(){function P(R,L){for(var $=0;$<L.length;$++){var F=L[$];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(R,F.key,F)}}return function(R,L,$){return L&&P(R.prototype,L),$&&P(R,$),R}}(),o=function P(R,L,$){R===null&&(R=Function.prototype);var F=Object.getOwnPropertyDescriptor(R,L);if(F===void 0){var z=Object.getPrototypeOf(R);return z===null?void 0:P(z,L,$)}else{if("value"in F)return F.value;var W=F.get;return W===void 0?void 0:W.call($)}},l=i(3),c=N(l),u=i(2),f=N(u),d=i(0),p=N(d),m=i(16),x=N(m),y=i(6),v=N(y),b=i(7),w=N(b);function N(P){return P&&P.__esModule?P:{default:P}}function j(P,R){if(!(P instanceof R))throw new TypeError("Cannot call a class as a function")}function k(P,R){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:P}function _(P,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);P.prototype=Object.create(R&&R.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(P,R):P.__proto__=R)}var E=1,A=function(P){_(R,P);function R(){return j(this,R),k(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return s(R,[{key:"attach",value:function(){o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"attach",this).call(this),this.attributes=new p.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new f.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function($,F){var z=p.default.query($,p.default.Scope.BLOCK_ATTRIBUTE);z!=null&&this.attributes.attribute(z,F)}},{key:"formatAt",value:function($,F,z,W){this.format(z,W)}},{key:"insertAt",value:function($,F,z){if(typeof F=="string"&&F.endsWith(`
`)){var W=p.default.create(T.blotName);this.parent.insertBefore(W,$===0?this:this.next),W.insertAt(0,F.slice(0,-1))}else o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,$,F,z)}}]),R}(p.default.Embed);A.scope=p.default.Scope.BLOCK_BLOT;var T=function(P){_(R,P);function R(L){j(this,R);var $=k(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,L));return $.cache={},$}return s(R,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(p.default.Leaf).reduce(function($,F){return F.length()===0?$:$.insert(F.value(),M(F))},new f.default).insert(`
`,M(this))),this.cache.delta}},{key:"deleteAt",value:function($,F){o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"deleteAt",this).call(this,$,F),this.cache={}}},{key:"formatAt",value:function($,F,z,W){F<=0||(p.default.query(z,p.default.Scope.BLOCK)?$+F===this.length()&&this.format(z,W):o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"formatAt",this).call(this,$,Math.min(F,this.length()-$-1),z,W),this.cache={})}},{key:"insertAt",value:function($,F,z){if(z!=null)return o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,$,F,z);if(F.length!==0){var W=F.split(`
`),K=W.shift();K.length>0&&($<this.length()-1||this.children.tail==null?o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,Math.min($,this.length()-1),K):this.children.tail.insertAt(this.children.tail.length(),K),this.cache={});var q=this;W.reduce(function(V,D){return q=q.split(V,!0),q.insertAt(0,D),D.length},$+K.length)}}},{key:"insertBefore",value:function($,F){var z=this.children.head;o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,$,F),z instanceof x.default&&z.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"length",this).call(this)+E),this.cache.length}},{key:"moveChildren",value:function($,F){o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"moveChildren",this).call(this,$,F),this.cache={}}},{key:"optimize",value:function($){o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,$),this.cache={}}},{key:"path",value:function($){return o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"path",this).call(this,$,!0)}},{key:"removeChild",value:function($){o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"removeChild",this).call(this,$),this.cache={}}},{key:"split",value:function($){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(F&&($===0||$>=this.length()-E)){var z=this.clone();return $===0?(this.parent.insertBefore(z,this),this):(this.parent.insertBefore(z,this.next),z)}else{var W=o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"split",this).call(this,$,F);return this.cache={},W}}}]),R}(p.default.Block);T.blotName="block",T.tagName="P",T.defaultChild="break",T.allowedChildren=[v.default,p.default.Embed,w.default];function M(P){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return P==null||(typeof P.formats=="function"&&(R=(0,c.default)(R,P.formats())),P.parent==null||P.parent.blotName=="scroll"||P.parent.statics.scope!==P.statics.scope)?R:M(P.parent,R)}n.bubbleFormats=M,n.BlockEmbed=A,n.default=T},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},o=function(){function q(V,D){var U=[],G=!0,ee=!1,Q=void 0;try{for(var H=V[Symbol.iterator](),Y;!(G=(Y=H.next()).done)&&(U.push(Y.value),!(D&&U.length===D));G=!0);}catch(re){ee=!0,Q=re}finally{try{!G&&H.return&&H.return()}finally{if(ee)throw Q}}return U}return function(V,D){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return q(V,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function q(V,D){for(var U=0;U<D.length;U++){var G=D[U];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(V,G.key,G)}}return function(V,D,U){return D&&q(V.prototype,D),U&&q(V,U),V}}();i(50);var c=i(2),u=M(c),f=i(14),d=M(f),p=i(8),m=M(p),x=i(9),y=M(x),v=i(0),b=M(v),w=i(15),N=M(w),j=i(3),k=M(j),_=i(10),E=M(_),A=i(34),T=M(A);function M(q){return q&&q.__esModule?q:{default:q}}function P(q,V,D){return V in q?Object.defineProperty(q,V,{value:D,enumerable:!0,configurable:!0,writable:!0}):q[V]=D,q}function R(q,V){if(!(q instanceof V))throw new TypeError("Cannot call a class as a function")}var L=(0,E.default)("quill"),$=function(){l(q,null,[{key:"debug",value:function(D){D===!0&&(D="log"),E.default.level(D)}},{key:"find",value:function(D){return D.__quill||b.default.find(D)}},{key:"import",value:function(D){return this.imports[D]==null&&L.error("Cannot import "+D+". Are you sure it was registered?"),this.imports[D]}},{key:"register",value:function(D,U){var G=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof D!="string"){var Q=D.attrName||D.blotName;typeof Q=="string"?this.register("formats/"+Q,D,U):Object.keys(D).forEach(function(H){G.register(H,D[H],U)})}else this.imports[D]!=null&&!ee&&L.warn("Overwriting "+D+" with",U),this.imports[D]=U,(D.startsWith("blots/")||D.startsWith("formats/"))&&U.blotName!=="abstract"?b.default.register(U):D.startsWith("modules")&&typeof U.register=="function"&&U.register()}}]);function q(V){var D=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(R(this,q),this.options=F(V,U),this.container=this.options.container,this.container==null)return L.error("Invalid Quill container",V);this.options.debug&&q.debug(this.options.debug);var G=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new m.default,this.scroll=b.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new N.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(m.default.events.EDITOR_CHANGE,function(Q){Q===m.default.events.TEXT_CHANGE&&D.root.classList.toggle("ql-blank",D.editor.isBlank())}),this.emitter.on(m.default.events.SCROLL_UPDATE,function(Q,H){var Y=D.selection.lastRange,re=Y&&Y.length===0?Y.index:void 0;z.call(D,function(){return D.editor.update(null,H,re)},Q)});var ee=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+G+"<p><br></p></div>");this.setContents(ee),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(q,[{key:"addContainer",value:function(D){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof D=="string"){var G=D;D=document.createElement("div"),D.classList.add(G)}return this.container.insertBefore(D,U),D}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(D,U,G){var ee=this,Q=W(D,U,G),H=o(Q,4);return D=H[0],U=H[1],G=H[3],z.call(this,function(){return ee.editor.deleteText(D,U)},G,D,-1*U)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(D),this.container.classList.toggle("ql-disabled",!D)}},{key:"focus",value:function(){var D=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=D,this.scrollIntoView()}},{key:"format",value:function(D,U){var G=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m.default.sources.API;return z.call(this,function(){var Q=G.getSelection(!0),H=new u.default;if(Q==null)return H;if(b.default.query(D,b.default.Scope.BLOCK))H=G.editor.formatLine(Q.index,Q.length,P({},D,U));else{if(Q.length===0)return G.selection.format(D,U),H;H=G.editor.formatText(Q.index,Q.length,P({},D,U))}return G.setSelection(Q,m.default.sources.SILENT),H},ee)}},{key:"formatLine",value:function(D,U,G,ee,Q){var H=this,Y=void 0,re=W(D,U,G,ee,Q),J=o(re,4);return D=J[0],U=J[1],Y=J[2],Q=J[3],z.call(this,function(){return H.editor.formatLine(D,U,Y)},Q,D,0)}},{key:"formatText",value:function(D,U,G,ee,Q){var H=this,Y=void 0,re=W(D,U,G,ee,Q),J=o(re,4);return D=J[0],U=J[1],Y=J[2],Q=J[3],z.call(this,function(){return H.editor.formatText(D,U,Y)},Q,D,0)}},{key:"getBounds",value:function(D){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,G=void 0;typeof D=="number"?G=this.selection.getBounds(D,U):G=this.selection.getBounds(D.index,D.length);var ee=this.container.getBoundingClientRect();return{bottom:G.bottom-ee.top,height:G.height,left:G.left-ee.left,right:G.right-ee.left,top:G.top-ee.top,width:G.width}}},{key:"getContents",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-D,G=W(D,U),ee=o(G,2);return D=ee[0],U=ee[1],this.editor.getContents(D,U)}},{key:"getFormat",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof D=="number"?this.editor.getFormat(D,U):this.editor.getFormat(D.index,D.length)}},{key:"getIndex",value:function(D){return D.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(D){return this.scroll.leaf(D)}},{key:"getLine",value:function(D){return this.scroll.line(D)}},{key:"getLines",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof D!="number"?this.scroll.lines(D.index,D.length):this.scroll.lines(D,U)}},{key:"getModule",value:function(D){return this.theme.modules[D]}},{key:"getSelection",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return D&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-D,G=W(D,U),ee=o(G,2);return D=ee[0],U=ee[1],this.editor.getText(D,U)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(D,U,G){var ee=this,Q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:q.sources.API;return z.call(this,function(){return ee.editor.insertEmbed(D,U,G)},Q,D)}},{key:"insertText",value:function(D,U,G,ee,Q){var H=this,Y=void 0,re=W(D,0,G,ee,Q),J=o(re,4);return D=J[0],Y=J[2],Q=J[3],z.call(this,function(){return H.editor.insertText(D,U,Y)},Q,D,U.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(D,U,G){this.clipboard.dangerouslyPasteHTML(D,U,G)}},{key:"removeFormat",value:function(D,U,G){var ee=this,Q=W(D,U,G),H=o(Q,4);return D=H[0],U=H[1],G=H[3],z.call(this,function(){return ee.editor.removeFormat(D,U)},G,D)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(D){var U=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return z.call(this,function(){D=new u.default(D);var ee=U.getLength(),Q=U.editor.deleteText(0,ee),H=U.editor.applyDelta(D),Y=H.ops[H.ops.length-1];Y!=null&&typeof Y.insert=="string"&&Y.insert[Y.insert.length-1]===`
`&&(U.editor.deleteText(U.getLength()-1,1),H.delete(1));var re=Q.compose(H);return re},G)}},{key:"setSelection",value:function(D,U,G){if(D==null)this.selection.setRange(null,U||q.sources.API);else{var ee=W(D,U,G),Q=o(ee,4);D=Q[0],U=Q[1],G=Q[3],this.selection.setRange(new w.Range(D,U),G),G!==m.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(D){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API,G=new u.default().insert(D);return this.setContents(G,U)}},{key:"update",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m.default.sources.USER,U=this.scroll.update(D);return this.selection.update(D),U}},{key:"updateContents",value:function(D){var U=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return z.call(this,function(){return D=new u.default(D),U.editor.applyDelta(D,G)},G,!0)}}]),q}();$.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},$.events=m.default.events,$.sources=m.default.sources,$.version="1.3.7",$.imports={delta:u.default,parchment:b.default,"core/module":y.default,"core/theme":T.default};function F(q,V){if(V=(0,k.default)(!0,{container:q,modules:{clipboard:!0,keyboard:!0,history:!0}},V),!V.theme||V.theme===$.DEFAULTS.theme)V.theme=T.default;else if(V.theme=$.import("themes/"+V.theme),V.theme==null)throw new Error("Invalid theme "+V.theme+". Did you register it?");var D=(0,k.default)(!0,{},V.theme.DEFAULTS);[D,V].forEach(function(ee){ee.modules=ee.modules||{},Object.keys(ee.modules).forEach(function(Q){ee.modules[Q]===!0&&(ee.modules[Q]={})})});var U=Object.keys(D.modules).concat(Object.keys(V.modules)),G=U.reduce(function(ee,Q){var H=$.import("modules/"+Q);return H==null?L.error("Cannot load "+Q+" module. Are you sure you registered it?"):ee[Q]=H.DEFAULTS||{},ee},{});return V.modules!=null&&V.modules.toolbar&&V.modules.toolbar.constructor!==Object&&(V.modules.toolbar={container:V.modules.toolbar}),V=(0,k.default)(!0,{},$.DEFAULTS,{modules:G},D,V),["bounds","container","scrollingContainer"].forEach(function(ee){typeof V[ee]=="string"&&(V[ee]=document.querySelector(V[ee]))}),V.modules=Object.keys(V.modules).reduce(function(ee,Q){return V.modules[Q]&&(ee[Q]=V.modules[Q]),ee},{}),V}function z(q,V,D,U){if(this.options.strict&&!this.isEnabled()&&V===m.default.sources.USER)return new u.default;var G=D==null?null:this.getSelection(),ee=this.editor.delta,Q=q();if(G!=null&&(D===!0&&(D=G.index),U==null?G=K(G,Q,V):U!==0&&(G=K(G,D,U,V)),this.setSelection(G,m.default.sources.SILENT)),Q.length()>0){var H,Y=[m.default.events.TEXT_CHANGE,Q,ee,V];if((H=this.emitter).emit.apply(H,[m.default.events.EDITOR_CHANGE].concat(Y)),V!==m.default.sources.SILENT){var re;(re=this.emitter).emit.apply(re,Y)}}return Q}function W(q,V,D,U,G){var ee={};return typeof q.index=="number"&&typeof q.length=="number"?typeof V!="number"?(G=U,U=D,D=V,V=q.length,q=q.index):(V=q.length,q=q.index):typeof V!="number"&&(G=U,U=D,D=V,V=0),(typeof D>"u"?"undefined":s(D))==="object"?(ee=D,G=U):typeof D=="string"&&(U!=null?ee[D]=U:G=D),G=G||m.default.sources.API,[q,V,ee,G]}function K(q,V,D,U){if(q==null)return null;var G=void 0,ee=void 0;if(V instanceof u.default){var Q=[q.index,q.index+q.length].map(function(J){return V.transformPosition(J,U!==m.default.sources.USER)}),H=o(Q,2);G=H[0],ee=H[1]}else{var Y=[q.index,q.index+q.length].map(function(J){return J<V||J===V&&U===m.default.sources.USER?J:D>=0?J+D:Math.max(V,J+D)}),re=o(Y,2);G=re[0],ee=re[1]}return new w.Range(G,ee-G)}n.expandConfig=F,n.overload=W,n.default=$},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function v(b,w){for(var N=0;N<w.length;N++){var j=w[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,w,N){return w&&v(b.prototype,w),N&&v(b,N),b}}(),o=function v(b,w,N){b===null&&(b=Function.prototype);var j=Object.getOwnPropertyDescriptor(b,w);if(j===void 0){var k=Object.getPrototypeOf(b);return k===null?void 0:v(k,w,N)}else{if("value"in j)return j.value;var _=j.get;return _===void 0?void 0:_.call(N)}},l=i(7),c=d(l),u=i(0),f=d(u);function d(v){return v&&v.__esModule?v:{default:v}}function p(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function m(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function x(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var y=function(v){x(b,v);function b(){return p(this,b),m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"formatAt",value:function(N,j,k,_){if(b.compare(this.statics.blotName,k)<0&&f.default.query(k,f.default.Scope.BLOT)){var E=this.isolate(N,j);_&&E.wrap(k,_)}else o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"formatAt",this).call(this,N,j,k,_)}},{key:"optimize",value:function(N){if(o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,N),this.parent instanceof b&&b.compare(this.statics.blotName,this.parent.statics.blotName)>0){var j=this.parent.isolate(this.offset(),this.length());this.moveChildren(j),j.wrap(this)}}}],[{key:"compare",value:function(N,j){var k=b.order.indexOf(N),_=b.order.indexOf(j);return k>=0||_>=0?k-_:N===j?0:N<j?-1:1}}]),b}(f.default.Inline);y.allowedChildren=[y,f.default.Embed,c.default],y.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(0),o=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function u(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(){return c(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(o.default.Text);n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function w(N,j){for(var k=0;k<j.length;k++){var _=j[k];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(N,_.key,_)}}return function(N,j,k){return j&&w(N.prototype,j),k&&w(N,k),N}}(),o=function w(N,j,k){N===null&&(N=Function.prototype);var _=Object.getOwnPropertyDescriptor(N,j);if(_===void 0){var E=Object.getPrototypeOf(N);return E===null?void 0:w(E,j,k)}else{if("value"in _)return _.value;var A=_.get;return A===void 0?void 0:A.call(k)}},l=i(54),c=d(l),u=i(10),f=d(u);function d(w){return w&&w.__esModule?w:{default:w}}function p(w,N){if(!(w instanceof N))throw new TypeError("Cannot call a class as a function")}function m(w,N){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:w}function x(w,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);w.prototype=Object.create(N&&N.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(w,N):w.__proto__=N)}var y=(0,f.default)("quill:events"),v=["selectionchange","mousedown","mouseup","click"];v.forEach(function(w){document.addEventListener(w,function(){for(var N=arguments.length,j=Array(N),k=0;k<N;k++)j[k]=arguments[k];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(_){if(_.__quill&&_.__quill.emitter){var E;(E=_.__quill.emitter).handleDOM.apply(E,j)}})})});var b=function(w){x(N,w);function N(){p(this,N);var j=m(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));return j.listeners={},j.on("error",y.error),j}return s(N,[{key:"emit",value:function(){y.log.apply(y,arguments),o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(k){for(var _=arguments.length,E=Array(_>1?_-1:0),A=1;A<_;A++)E[A-1]=arguments[A];(this.listeners[k.type]||[]).forEach(function(T){var M=T.node,P=T.handler;(k.target===M||M.contains(k.target))&&P.apply(void 0,[k].concat(E))})}},{key:"listenDOM",value:function(k,_,E){this.listeners[k]||(this.listeners[k]=[]),this.listeners[k].push({node:_,handler:E})}}]),N}(c.default);b.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},b.sources={API:"api",SILENT:"silent",USER:"user"},n.default=b},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});function s(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var o=function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,l),this.quill=c,this.options=u};o.DEFAULTS={},n.default=o},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=["error","warn","log","info"],o="warn";function l(u){if(s.indexOf(u)<=s.indexOf(o)){for(var f,d=arguments.length,p=Array(d>1?d-1:0),m=1;m<d;m++)p[m-1]=arguments[m];(f=console)[u].apply(f,p)}}function c(u){return s.reduce(function(f,d){return f[d]=l.bind(console,d,u),f},{})}l.level=c.level=function(u){o=u},n.default=c},function(r,n,i){var s=Array.prototype.slice,o=i(52),l=i(53),c=r.exports=function(p,m,x){return x||(x={}),p===m?!0:p instanceof Date&&m instanceof Date?p.getTime()===m.getTime():!p||!m||typeof p!="object"&&typeof m!="object"?x.strict?p===m:p==m:d(p,m,x)};function u(p){return p==null}function f(p){return!(!p||typeof p!="object"||typeof p.length!="number"||typeof p.copy!="function"||typeof p.slice!="function"||p.length>0&&typeof p[0]!="number")}function d(p,m,x){var y,v;if(u(p)||u(m)||p.prototype!==m.prototype)return!1;if(l(p))return l(m)?(p=s.call(p),m=s.call(m),c(p,m,x)):!1;if(f(p)){if(!f(m)||p.length!==m.length)return!1;for(y=0;y<p.length;y++)if(p[y]!==m[y])return!1;return!0}try{var b=o(p),w=o(m)}catch{return!1}if(b.length!=w.length)return!1;for(b.sort(),w.sort(),y=b.length-1;y>=0;y--)if(b[y]!=w[y])return!1;for(y=b.length-1;y>=0;y--)if(v=b[y],!c(p[v],m[v],x))return!1;return typeof p==typeof m}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(1),o=function(){function l(c,u,f){f===void 0&&(f={}),this.attrName=c,this.keyName=u;var d=s.Scope.TYPE&s.Scope.ATTRIBUTE;f.scope!=null?this.scope=f.scope&s.Scope.LEVEL|d:this.scope=s.Scope.ATTRIBUTE,f.whitelist!=null&&(this.whitelist=f.whitelist)}return l.keys=function(c){return[].map.call(c.attributes,function(u){return u.name})},l.prototype.add=function(c,u){return this.canAdd(c,u)?(c.setAttribute(this.keyName,u),!0):!1},l.prototype.canAdd=function(c,u){var f=s.query(c,s.Scope.BLOT&(this.scope|s.Scope.TYPE));return f==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},l.prototype.remove=function(c){c.removeAttribute(this.keyName)},l.prototype.value=function(c){var u=c.getAttribute(this.keyName);return this.canAdd(c,u)&&u?u:""},l}();n.default=o},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var s=function(){function A(T,M){var P=[],R=!0,L=!1,$=void 0;try{for(var F=T[Symbol.iterator](),z;!(R=(z=F.next()).done)&&(P.push(z.value),!(M&&P.length===M));R=!0);}catch(W){L=!0,$=W}finally{try{!R&&F.return&&F.return()}finally{if(L)throw $}}return P}return function(T,M){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return A(T,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function A(T,M){for(var P=0;P<M.length;P++){var R=M[P];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(T,R.key,R)}}return function(T,M,P){return M&&A(T.prototype,M),P&&A(T,P),T}}(),l=function A(T,M,P){T===null&&(T=Function.prototype);var R=Object.getOwnPropertyDescriptor(T,M);if(R===void 0){var L=Object.getPrototypeOf(T);return L===null?void 0:A(L,M,P)}else{if("value"in R)return R.value;var $=R.get;return $===void 0?void 0:$.call(P)}},c=i(2),u=w(c),f=i(0),d=w(f),p=i(4),m=w(p),x=i(6),y=w(x),v=i(7),b=w(v);function w(A){return A&&A.__esModule?A:{default:A}}function N(A,T){if(!(A instanceof T))throw new TypeError("Cannot call a class as a function")}function j(A,T){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:A}function k(A,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);A.prototype=Object.create(T&&T.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(A,T):A.__proto__=T)}var _=function(A){k(T,A);function T(){return N(this,T),j(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(y.default);_.blotName="code",_.tagName="CODE";var E=function(A){k(T,A);function T(){return N(this,T),j(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return o(T,[{key:"delta",value:function(){var P=this,R=this.domNode.textContent;return R.endsWith(`
`)&&(R=R.slice(0,-1)),R.split(`
`).reduce(function(L,$){return L.insert($).insert(`
`,P.formats())},new u.default)}},{key:"format",value:function(P,R){if(!(P===this.statics.blotName&&R)){var L=this.descendant(b.default,this.length()-1),$=s(L,1),F=$[0];F!=null&&F.deleteAt(F.length()-1,1),l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"format",this).call(this,P,R)}}},{key:"formatAt",value:function(P,R,L,$){if(R!==0&&!(d.default.query(L,d.default.Scope.BLOCK)==null||L===this.statics.blotName&&$===this.statics.formats(this.domNode))){var F=this.newlineIndex(P);if(!(F<0||F>=P+R)){var z=this.newlineIndex(P,!0)+1,W=F-z+1,K=this.isolate(z,W),q=K.next;K.format(L,$),q instanceof T&&q.formatAt(0,P-z+R-W,L,$)}}}},{key:"insertAt",value:function(P,R,L){if(L==null){var $=this.descendant(b.default,P),F=s($,2),z=F[0],W=F[1];z.insertAt(W,R)}}},{key:"length",value:function(){var P=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?P:P+1}},{key:"newlineIndex",value:function(P){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(R)return this.domNode.textContent.slice(0,P).lastIndexOf(`
`);var L=this.domNode.textContent.slice(P).indexOf(`
`);return L>-1?P+L:-1}},{key:"optimize",value:function(P){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,P);var R=this.next;R!=null&&R.prev===this&&R.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===R.statics.formats(R.domNode)&&(R.optimize(P),R.moveChildren(this),R.remove())}},{key:"replace",value:function(P){l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replace",this).call(this,P),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(R){var L=d.default.find(R);L==null?R.parentNode.removeChild(R):L instanceof d.default.Embed?L.remove():L.unwrap()})}}],[{key:"create",value:function(P){var R=l(T.__proto__||Object.getPrototypeOf(T),"create",this).call(this,P);return R.setAttribute("spellcheck",!1),R}},{key:"formats",value:function(){return!0}}]),T}(m.default);E.blotName="code-block",E.tagName="PRE",E.TAB="  ",n.Code=_,n.default=E},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},o=function(){function q(V,D){var U=[],G=!0,ee=!1,Q=void 0;try{for(var H=V[Symbol.iterator](),Y;!(G=(Y=H.next()).done)&&(U.push(Y.value),!(D&&U.length===D));G=!0);}catch(re){ee=!0,Q=re}finally{try{!G&&H.return&&H.return()}finally{if(ee)throw Q}}return U}return function(V,D){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return q(V,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function q(V,D){for(var U=0;U<D.length;U++){var G=D[U];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(V,G.key,G)}}return function(V,D,U){return D&&q(V.prototype,D),U&&q(V,U),V}}(),c=i(2),u=R(c),f=i(20),d=R(f),p=i(0),m=R(p),x=i(13),y=R(x),v=i(24),b=R(v),w=i(4),N=R(w),j=i(16),k=R(j),_=i(21),E=R(_),A=i(11),T=R(A),M=i(3),P=R(M);function R(q){return q&&q.__esModule?q:{default:q}}function L(q,V,D){return V in q?Object.defineProperty(q,V,{value:D,enumerable:!0,configurable:!0,writable:!0}):q[V]=D,q}function $(q,V){if(!(q instanceof V))throw new TypeError("Cannot call a class as a function")}var F=/^[ -~]*$/,z=function(){function q(V){$(this,q),this.scroll=V,this.delta=this.getDelta()}return l(q,[{key:"applyDelta",value:function(D){var U=this,G=!1;this.scroll.update();var ee=this.scroll.length();return this.scroll.batchStart(),D=K(D),D.reduce(function(Q,H){var Y=H.retain||H.delete||H.insert.length||1,re=H.attributes||{};if(H.insert!=null){if(typeof H.insert=="string"){var J=H.insert;J.endsWith(`
`)&&G&&(G=!1,J=J.slice(0,-1)),Q>=ee&&!J.endsWith(`
`)&&(G=!0),U.scroll.insertAt(Q,J);var ne=U.scroll.line(Q),te=o(ne,2),se=te[0],ve=te[1],ie=(0,P.default)({},(0,w.bubbleFormats)(se));if(se instanceof N.default){var ye=se.descendant(m.default.Leaf,ve),Te=o(ye,1),Le=Te[0];ie=(0,P.default)(ie,(0,w.bubbleFormats)(Le))}re=d.default.attributes.diff(ie,re)||{}}else if(s(H.insert)==="object"){var ue=Object.keys(H.insert)[0];if(ue==null)return Q;U.scroll.insertAt(Q,ue,H.insert[ue])}ee+=Y}return Object.keys(re).forEach(function(he){U.scroll.formatAt(Q,Y,he,re[he])}),Q+Y},0),D.reduce(function(Q,H){return typeof H.delete=="number"?(U.scroll.deleteAt(Q,H.delete),Q):Q+(H.retain||H.insert.length||1)},0),this.scroll.batchEnd(),this.update(D)}},{key:"deleteText",value:function(D,U){return this.scroll.deleteAt(D,U),this.update(new u.default().retain(D).delete(U))}},{key:"formatLine",value:function(D,U){var G=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(ee).forEach(function(Q){if(!(G.scroll.whitelist!=null&&!G.scroll.whitelist[Q])){var H=G.scroll.lines(D,Math.max(U,1)),Y=U;H.forEach(function(re){var J=re.length();if(!(re instanceof y.default))re.format(Q,ee[Q]);else{var ne=D-re.offset(G.scroll),te=re.newlineIndex(ne+Y)-ne+1;re.formatAt(ne,te,Q,ee[Q])}Y-=J})}}),this.scroll.optimize(),this.update(new u.default().retain(D).retain(U,(0,E.default)(ee)))}},{key:"formatText",value:function(D,U){var G=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(ee).forEach(function(Q){G.scroll.formatAt(D,U,Q,ee[Q])}),this.update(new u.default().retain(D).retain(U,(0,E.default)(ee)))}},{key:"getContents",value:function(D,U){return this.delta.slice(D,D+U)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(D,U){return D.concat(U.delta())},new u.default)}},{key:"getFormat",value:function(D){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,G=[],ee=[];U===0?this.scroll.path(D).forEach(function(H){var Y=o(H,1),re=Y[0];re instanceof N.default?G.push(re):re instanceof m.default.Leaf&&ee.push(re)}):(G=this.scroll.lines(D,U),ee=this.scroll.descendants(m.default.Leaf,D,U));var Q=[G,ee].map(function(H){if(H.length===0)return{};for(var Y=(0,w.bubbleFormats)(H.shift());Object.keys(Y).length>0;){var re=H.shift();if(re==null)return Y;Y=W((0,w.bubbleFormats)(re),Y)}return Y});return P.default.apply(P.default,Q)}},{key:"getText",value:function(D,U){return this.getContents(D,U).filter(function(G){return typeof G.insert=="string"}).map(function(G){return G.insert}).join("")}},{key:"insertEmbed",value:function(D,U,G){return this.scroll.insertAt(D,U,G),this.update(new u.default().retain(D).insert(L({},U,G)))}},{key:"insertText",value:function(D,U){var G=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return U=U.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(D,U),Object.keys(ee).forEach(function(Q){G.scroll.formatAt(D,U.length,Q,ee[Q])}),this.update(new u.default().retain(D).insert(U,(0,E.default)(ee)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var D=this.scroll.children.head;return D.statics.blotName!==N.default.blotName||D.children.length>1?!1:D.children.head instanceof k.default}},{key:"removeFormat",value:function(D,U){var G=this.getText(D,U),ee=this.scroll.line(D+U),Q=o(ee,2),H=Q[0],Y=Q[1],re=0,J=new u.default;H!=null&&(H instanceof y.default?re=H.newlineIndex(Y)-Y+1:re=H.length()-Y,J=H.delta().slice(Y,Y+re-1).insert(`
`));var ne=this.getContents(D,U+re),te=ne.diff(new u.default().insert(G).concat(J)),se=new u.default().retain(D).concat(te);return this.applyDelta(se)}},{key:"update",value:function(D){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,ee=this.delta;if(U.length===1&&U[0].type==="characterData"&&U[0].target.data.match(F)&&m.default.find(U[0].target)){var Q=m.default.find(U[0].target),H=(0,w.bubbleFormats)(Q),Y=Q.offset(this.scroll),re=U[0].oldValue.replace(b.default.CONTENTS,""),J=new u.default().insert(re),ne=new u.default().insert(Q.value()),te=new u.default().retain(Y).concat(J.diff(ne,G));D=te.reduce(function(se,ve){return ve.insert?se.insert(ve.insert,H):se.push(ve)},new u.default),this.delta=ee.compose(D)}else this.delta=this.getDelta(),(!D||!(0,T.default)(ee.compose(D),this.delta))&&(D=ee.diff(this.delta,G));return D}}]),q}();function W(q,V){return Object.keys(V).reduce(function(D,U){return q[U]==null||(V[U]===q[U]?D[U]=V[U]:Array.isArray(V[U])?V[U].indexOf(q[U])<0&&(D[U]=V[U].concat([q[U]])):D[U]=[V[U],q[U]]),D},{})}function K(q){return q.reduce(function(V,D){if(D.insert===1){var U=(0,E.default)(D.attributes);return delete U.image,V.insert({image:D.attributes.image},U)}if(D.attributes!=null&&(D.attributes.list===!0||D.attributes.bullet===!0)&&(D=(0,E.default)(D),D.attributes.list?D.attributes.list="ordered":(D.attributes.list="bullet",delete D.attributes.bullet)),typeof D.insert=="string"){var G=D.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return V.insert(G,D.attributes)}return V.push(D)},new u.default)}n.default=z},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var s=function(){function A(T,M){var P=[],R=!0,L=!1,$=void 0;try{for(var F=T[Symbol.iterator](),z;!(R=(z=F.next()).done)&&(P.push(z.value),!(M&&P.length===M));R=!0);}catch(W){L=!0,$=W}finally{try{!R&&F.return&&F.return()}finally{if(L)throw $}}return P}return function(T,M){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return A(T,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function A(T,M){for(var P=0;P<M.length;P++){var R=M[P];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(T,R.key,R)}}return function(T,M,P){return M&&A(T.prototype,M),P&&A(T,P),T}}(),l=i(0),c=b(l),u=i(21),f=b(u),d=i(11),p=b(d),m=i(8),x=b(m),y=i(10),v=b(y);function b(A){return A&&A.__esModule?A:{default:A}}function w(A){if(Array.isArray(A)){for(var T=0,M=Array(A.length);T<A.length;T++)M[T]=A[T];return M}else return Array.from(A)}function N(A,T){if(!(A instanceof T))throw new TypeError("Cannot call a class as a function")}var j=(0,v.default)("quill:selection"),k=function A(T){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;N(this,A),this.index=T,this.length=M},_=function(){function A(T,M){var P=this;N(this,A),this.emitter=M,this.scroll=T,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new k(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){P.mouseDown||setTimeout(P.update.bind(P,x.default.sources.USER),1)}),this.emitter.on(x.default.events.EDITOR_CHANGE,function(R,L){R===x.default.events.TEXT_CHANGE&&L.length()>0&&P.update(x.default.sources.SILENT)}),this.emitter.on(x.default.events.SCROLL_BEFORE_UPDATE,function(){if(P.hasFocus()){var R=P.getNativeRange();R!=null&&R.start.node!==P.cursor.textNode&&P.emitter.once(x.default.events.SCROLL_UPDATE,function(){try{P.setNativeRange(R.start.node,R.start.offset,R.end.node,R.end.offset)}catch{}})}}),this.emitter.on(x.default.events.SCROLL_OPTIMIZE,function(R,L){if(L.range){var $=L.range,F=$.startNode,z=$.startOffset,W=$.endNode,K=$.endOffset;P.setNativeRange(F,z,W,K)}}),this.update(x.default.sources.SILENT)}return o(A,[{key:"handleComposition",value:function(){var M=this;this.root.addEventListener("compositionstart",function(){M.composing=!0}),this.root.addEventListener("compositionend",function(){if(M.composing=!1,M.cursor.parent){var P=M.cursor.restore();if(!P)return;setTimeout(function(){M.setNativeRange(P.startNode,P.startOffset,P.endNode,P.endOffset)},1)}})}},{key:"handleDragging",value:function(){var M=this;this.emitter.listenDOM("mousedown",document.body,function(){M.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){M.mouseDown=!1,M.update(x.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(M,P){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[M])){this.scroll.update();var R=this.getNativeRange();if(!(R==null||!R.native.collapsed||c.default.query(M,c.default.Scope.BLOCK))){if(R.start.node!==this.cursor.textNode){var L=c.default.find(R.start.node,!1);if(L==null)return;if(L instanceof c.default.Leaf){var $=L.split(R.start.offset);L.parent.insertBefore(this.cursor,$)}else L.insertBefore(this.cursor,R.start.node);this.cursor.attach()}this.cursor.format(M,P),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(M){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=this.scroll.length();M=Math.min(M,R-1),P=Math.min(M+P,R-1)-M;var L=void 0,$=this.scroll.leaf(M),F=s($,2),z=F[0],W=F[1];if(z==null)return null;var K=z.position(W,!0),q=s(K,2);L=q[0],W=q[1];var V=document.createRange();if(P>0){V.setStart(L,W);var D=this.scroll.leaf(M+P),U=s(D,2);if(z=U[0],W=U[1],z==null)return null;var G=z.position(W,!0),ee=s(G,2);return L=ee[0],W=ee[1],V.setEnd(L,W),V.getBoundingClientRect()}else{var Q="left",H=void 0;return L instanceof Text?(W<L.data.length?(V.setStart(L,W),V.setEnd(L,W+1)):(V.setStart(L,W-1),V.setEnd(L,W),Q="right"),H=V.getBoundingClientRect()):(H=z.domNode.getBoundingClientRect(),W>0&&(Q="right")),{bottom:H.top+H.height,height:H.height,left:H[Q],right:H[Q],top:H.top,width:0}}}},{key:"getNativeRange",value:function(){var M=document.getSelection();if(M==null||M.rangeCount<=0)return null;var P=M.getRangeAt(0);if(P==null)return null;var R=this.normalizeNative(P);return j.info("getNativeRange",R),R}},{key:"getRange",value:function(){var M=this.getNativeRange();if(M==null)return[null,null];var P=this.normalizedToRange(M);return[P,M]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(M){var P=this,R=[[M.start.node,M.start.offset]];M.native.collapsed||R.push([M.end.node,M.end.offset]);var L=R.map(function(z){var W=s(z,2),K=W[0],q=W[1],V=c.default.find(K,!0),D=V.offset(P.scroll);return q===0?D:V instanceof c.default.Container?D+V.length():D+V.index(K,q)}),$=Math.min(Math.max.apply(Math,w(L)),this.scroll.length()-1),F=Math.min.apply(Math,[$].concat(w(L)));return new k(F,$-F)}},{key:"normalizeNative",value:function(M){if(!E(this.root,M.startContainer)||!M.collapsed&&!E(this.root,M.endContainer))return null;var P={start:{node:M.startContainer,offset:M.startOffset},end:{node:M.endContainer,offset:M.endOffset},native:M};return[P.start,P.end].forEach(function(R){for(var L=R.node,$=R.offset;!(L instanceof Text)&&L.childNodes.length>0;)if(L.childNodes.length>$)L=L.childNodes[$],$=0;else if(L.childNodes.length===$)L=L.lastChild,$=L instanceof Text?L.data.length:L.childNodes.length+1;else break;R.node=L,R.offset=$}),P}},{key:"rangeToNative",value:function(M){var P=this,R=M.collapsed?[M.index]:[M.index,M.index+M.length],L=[],$=this.scroll.length();return R.forEach(function(F,z){F=Math.min($-1,F);var W=void 0,K=P.scroll.leaf(F),q=s(K,2),V=q[0],D=q[1],U=V.position(D,z!==0),G=s(U,2);W=G[0],D=G[1],L.push(W,D)}),L.length<2&&(L=L.concat(L)),L}},{key:"scrollIntoView",value:function(M){var P=this.lastRange;if(P!=null){var R=this.getBounds(P.index,P.length);if(R!=null){var L=this.scroll.length()-1,$=this.scroll.line(Math.min(P.index,L)),F=s($,1),z=F[0],W=z;if(P.length>0){var K=this.scroll.line(Math.min(P.index+P.length,L)),q=s(K,1);W=q[0]}if(!(z==null||W==null)){var V=M.getBoundingClientRect();R.top<V.top?M.scrollTop-=V.top-R.top:R.bottom>V.bottom&&(M.scrollTop+=R.bottom-V.bottom)}}}}},{key:"setNativeRange",value:function(M,P){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:M,L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:P,$=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(j.info("setNativeRange",M,P,R,L),!(M!=null&&(this.root.parentNode==null||M.parentNode==null||R.parentNode==null))){var F=document.getSelection();if(F!=null)if(M!=null){this.hasFocus()||this.root.focus();var z=(this.getNativeRange()||{}).native;if(z==null||$||M!==z.startContainer||P!==z.startOffset||R!==z.endContainer||L!==z.endOffset){M.tagName=="BR"&&(P=[].indexOf.call(M.parentNode.childNodes,M),M=M.parentNode),R.tagName=="BR"&&(L=[].indexOf.call(R.parentNode.childNodes,R),R=R.parentNode);var W=document.createRange();W.setStart(M,P),W.setEnd(R,L),F.removeAllRanges(),F.addRange(W)}}else F.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(M){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.default.sources.API;if(typeof P=="string"&&(R=P,P=!1),j.info("setRange",M),M!=null){var L=this.rangeToNative(M);this.setNativeRange.apply(this,w(L).concat([P]))}else this.setNativeRange(null);this.update(R)}},{key:"update",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x.default.sources.USER,P=this.lastRange,R=this.getRange(),L=s(R,2),$=L[0],F=L[1];if(this.lastRange=$,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,p.default)(P,this.lastRange)){var z;!this.composing&&F!=null&&F.native.collapsed&&F.start.node!==this.cursor.textNode&&this.cursor.restore();var W=[x.default.events.SELECTION_CHANGE,(0,f.default)(this.lastRange),(0,f.default)(P),M];if((z=this.emitter).emit.apply(z,[x.default.events.EDITOR_CHANGE].concat(W)),M!==x.default.sources.SILENT){var K;(K=this.emitter).emit.apply(K,W)}}}}]),A}();function E(A,T){try{T.parentNode}catch{return!1}return T instanceof Text&&(T=T.parentNode),A.contains(T)}n.Range=k,n.default=_},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function x(y,v){for(var b=0;b<v.length;b++){var w=v[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,v,b){return v&&x(y.prototype,v),b&&x(y,b),y}}(),o=function x(y,v,b){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,v);if(w===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:x(N,v,b)}else{if("value"in w)return w.value;var j=w.get;return j===void 0?void 0:j.call(b)}},l=i(0),c=u(l);function u(x){return x&&x.__esModule?x:{default:x}}function f(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function d(x,y){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:x}function p(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);x.prototype=Object.create(y&&y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(x,y):x.__proto__=y)}var m=function(x){p(y,x);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,[{key:"insertInto",value:function(b,w){b.children.length===0?o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"insertInto",this).call(this,b,w):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),y}(c.default.Embed);m.blotName="break",m.tagName="BR",n.default=m},function(r,n,i){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var x in m)m.hasOwnProperty(x)&&(p[x]=m[x])};return function(p,m){d(p,m);function x(){this.constructor=p}p.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(44),l=i(30),c=i(1),u=function(d){s(p,d);function p(m){var x=d.call(this,m)||this;return x.build(),x}return p.prototype.appendChild=function(m){this.insertBefore(m)},p.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(m){m.attach()})},p.prototype.build=function(){var m=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(x){try{var y=f(x);m.insertBefore(y,m.children.head||void 0)}catch(v){if(v instanceof c.ParchmentError)return;throw v}})},p.prototype.deleteAt=function(m,x){if(m===0&&x===this.length())return this.remove();this.children.forEachAt(m,x,function(y,v,b){y.deleteAt(v,b)})},p.prototype.descendant=function(m,x){var y=this.children.find(x),v=y[0],b=y[1];return m.blotName==null&&m(v)||m.blotName!=null&&v instanceof m?[v,b]:v instanceof p?v.descendant(m,b):[null,-1]},p.prototype.descendants=function(m,x,y){x===void 0&&(x=0),y===void 0&&(y=Number.MAX_VALUE);var v=[],b=y;return this.children.forEachAt(x,y,function(w,N,j){(m.blotName==null&&m(w)||m.blotName!=null&&w instanceof m)&&v.push(w),w instanceof p&&(v=v.concat(w.descendants(m,N,b))),b-=j}),v},p.prototype.detach=function(){this.children.forEach(function(m){m.detach()}),d.prototype.detach.call(this)},p.prototype.formatAt=function(m,x,y,v){this.children.forEachAt(m,x,function(b,w,N){b.formatAt(w,N,y,v)})},p.prototype.insertAt=function(m,x,y){var v=this.children.find(m),b=v[0],w=v[1];if(b)b.insertAt(w,x,y);else{var N=y==null?c.create("text",x):c.create(x,y);this.appendChild(N)}},p.prototype.insertBefore=function(m,x){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(y){return m instanceof y}))throw new c.ParchmentError("Cannot insert "+m.statics.blotName+" into "+this.statics.blotName);m.insertInto(this,x)},p.prototype.length=function(){return this.children.reduce(function(m,x){return m+x.length()},0)},p.prototype.moveChildren=function(m,x){this.children.forEach(function(y){m.insertBefore(y,x)})},p.prototype.optimize=function(m){if(d.prototype.optimize.call(this,m),this.children.length===0)if(this.statics.defaultChild!=null){var x=c.create(this.statics.defaultChild);this.appendChild(x),x.optimize(m)}else this.remove()},p.prototype.path=function(m,x){x===void 0&&(x=!1);var y=this.children.find(m,x),v=y[0],b=y[1],w=[[this,m]];return v instanceof p?w.concat(v.path(b,x)):(v!=null&&w.push([v,b]),w)},p.prototype.removeChild=function(m){this.children.remove(m)},p.prototype.replace=function(m){m instanceof p&&m.moveChildren(this),d.prototype.replace.call(this,m)},p.prototype.split=function(m,x){if(x===void 0&&(x=!1),!x){if(m===0)return this;if(m===this.length())return this.next}var y=this.clone();return this.parent.insertBefore(y,this.next),this.children.forEachAt(m,this.length(),function(v,b,w){v=v.split(b,x),y.appendChild(v)}),y},p.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},p.prototype.update=function(m,x){var y=this,v=[],b=[];m.forEach(function(w){w.target===y.domNode&&w.type==="childList"&&(v.push.apply(v,w.addedNodes),b.push.apply(b,w.removedNodes))}),b.forEach(function(w){if(!(w.parentNode!=null&&w.tagName!=="IFRAME"&&document.body.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var N=c.find(w);N!=null&&(N.domNode.parentNode==null||N.domNode.parentNode===y.domNode)&&N.detach()}}),v.filter(function(w){return w.parentNode==y.domNode}).sort(function(w,N){return w===N?0:w.compareDocumentPosition(N)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(w){var N=null;w.nextSibling!=null&&(N=c.find(w.nextSibling));var j=f(w);(j.next!=N||j.next==null)&&(j.parent!=null&&j.parent.removeChild(y),y.insertBefore(j,N||void 0))})},p}(l.default);function f(d){var p=c.find(d);if(p==null)try{p=c.create(d)}catch{p=c.create(c.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(x){p.domNode.appendChild(x)}),d.parentNode&&d.parentNode.replaceChild(p.domNode,d),p.attach()}return p}n.default=u},function(r,n,i){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var x in m)m.hasOwnProperty(x)&&(p[x]=m[x])};return function(p,m){d(p,m);function x(){this.constructor=p}p.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(12),l=i(31),c=i(17),u=i(1),f=function(d){s(p,d);function p(m){var x=d.call(this,m)||this;return x.attributes=new l.default(x.domNode),x}return p.formats=function(m){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return m.tagName.toLowerCase()},p.prototype.format=function(m,x){var y=u.query(m);y instanceof o.default?this.attributes.attribute(y,x):x&&y!=null&&(m!==this.statics.blotName||this.formats()[m]!==x)&&this.replaceWith(m,x)},p.prototype.formats=function(){var m=this.attributes.values(),x=this.statics.formats(this.domNode);return x!=null&&(m[this.statics.blotName]=x),m},p.prototype.replaceWith=function(m,x){var y=d.prototype.replaceWith.call(this,m,x);return this.attributes.copy(y),y},p.prototype.update=function(m,x){var y=this;d.prototype.update.call(this,m,x),m.some(function(v){return v.target===y.domNode&&v.type==="attributes"})&&this.attributes.build()},p.prototype.wrap=function(m,x){var y=d.prototype.wrap.call(this,m,x);return y instanceof p&&y.statics.scope===this.statics.scope&&this.attributes.move(y),y},p}(c.default);n.default=f},function(r,n,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){u(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(30),l=i(1),c=function(u){s(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.value=function(d){return!0},f.prototype.index=function(d,p){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(p,1):-1},f.prototype.position=function(d,p){var m=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(m+=1),[this.parent.domNode,m]},f.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},f.scope=l.Scope.INLINE_BLOT,f}(o.default);n.default=c},function(r,n,i){var s=i(11),o=i(3),l={attributes:{compose:function(u,f,d){typeof u!="object"&&(u={}),typeof f!="object"&&(f={});var p=o(!0,{},f);d||(p=Object.keys(p).reduce(function(x,y){return p[y]!=null&&(x[y]=p[y]),x},{}));for(var m in u)u[m]!==void 0&&f[m]===void 0&&(p[m]=u[m]);return Object.keys(p).length>0?p:void 0},diff:function(u,f){typeof u!="object"&&(u={}),typeof f!="object"&&(f={});var d=Object.keys(u).concat(Object.keys(f)).reduce(function(p,m){return s(u[m],f[m])||(p[m]=f[m]===void 0?null:f[m]),p},{});return Object.keys(d).length>0?d:void 0},transform:function(u,f,d){if(typeof u!="object")return f;if(typeof f=="object"){if(!d)return f;var p=Object.keys(f).reduce(function(m,x){return u[x]===void 0&&(m[x]=f[x]),m},{});return Object.keys(p).length>0?p:void 0}}},iterator:function(u){return new c(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function c(u){this.ops=u,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(u){u||(u=1/0);var f=this.ops[this.index];if(f){var d=this.offset,p=l.length(f);if(u>=p-d?(u=p-d,this.index+=1,this.offset=0):this.offset+=u,typeof f.delete=="number")return{delete:u};var m={};return f.attributes&&(m.attributes=f.attributes),typeof f.retain=="number"?m.retain=u:typeof f.insert=="string"?m.insert=f.insert.substr(d,u):m.insert=f.insert,m}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,f=this.index,d=this.next(),p=this.ops.slice(this.index);return this.offset=u,this.index=f,[d].concat(p)}else return[]},r.exports=l},function(r,n){var i=function(){function s(y,v){return v!=null&&y instanceof v}var o;try{o=Map}catch{o=function(){}}var l;try{l=Set}catch{l=function(){}}var c;try{c=Promise}catch{c=function(){}}function u(y,v,b,w,N){typeof v=="object"&&(b=v.depth,w=v.prototype,N=v.includeNonEnumerable,v=v.circular);var j=[],k=[],_=typeof Buffer<"u";typeof v>"u"&&(v=!0),typeof b>"u"&&(b=1/0);function E(A,T){if(A===null)return null;if(T===0)return A;var M,P;if(typeof A!="object")return A;if(s(A,o))M=new o;else if(s(A,l))M=new l;else if(s(A,c))M=new c(function(V,D){A.then(function(U){V(E(U,T-1))},function(U){D(E(U,T-1))})});else if(u.__isArray(A))M=[];else if(u.__isRegExp(A))M=new RegExp(A.source,x(A)),A.lastIndex&&(M.lastIndex=A.lastIndex);else if(u.__isDate(A))M=new Date(A.getTime());else{if(_&&Buffer.isBuffer(A))return Buffer.allocUnsafe?M=Buffer.allocUnsafe(A.length):M=new Buffer(A.length),A.copy(M),M;s(A,Error)?M=Object.create(A):typeof w>"u"?(P=Object.getPrototypeOf(A),M=Object.create(P)):(M=Object.create(w),P=w)}if(v){var R=j.indexOf(A);if(R!=-1)return k[R];j.push(A),k.push(M)}s(A,o)&&A.forEach(function(V,D){var U=E(D,T-1),G=E(V,T-1);M.set(U,G)}),s(A,l)&&A.forEach(function(V){var D=E(V,T-1);M.add(D)});for(var L in A){var $;P&&($=Object.getOwnPropertyDescriptor(P,L)),!($&&$.set==null)&&(M[L]=E(A[L],T-1))}if(Object.getOwnPropertySymbols)for(var F=Object.getOwnPropertySymbols(A),L=0;L<F.length;L++){var z=F[L],W=Object.getOwnPropertyDescriptor(A,z);W&&!W.enumerable&&!N||(M[z]=E(A[z],T-1),W.enumerable||Object.defineProperty(M,z,{enumerable:!1}))}if(N)for(var K=Object.getOwnPropertyNames(A),L=0;L<K.length;L++){var q=K[L],W=Object.getOwnPropertyDescriptor(A,q);W&&W.enumerable||(M[q]=E(A[q],T-1),Object.defineProperty(M,q,{enumerable:!1}))}return M}return E(y,b)}u.clonePrototype=function(v){if(v===null)return null;var b=function(){};return b.prototype=v,new b};function f(y){return Object.prototype.toString.call(y)}u.__objToStr=f;function d(y){return typeof y=="object"&&f(y)==="[object Date]"}u.__isDate=d;function p(y){return typeof y=="object"&&f(y)==="[object Array]"}u.__isArray=p;function m(y){return typeof y=="object"&&f(y)==="[object RegExp]"}u.__isRegExp=m;function x(y){var v="";return y.global&&(v+="g"),y.ignoreCase&&(v+="i"),y.multiline&&(v+="m"),v}return u.__getRegExpFlags=x,u}();typeof r=="object"&&r.exports&&(r.exports=i)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function M(P,R){var L=[],$=!0,F=!1,z=void 0;try{for(var W=P[Symbol.iterator](),K;!($=(K=W.next()).done)&&(L.push(K.value),!(R&&L.length===R));$=!0);}catch(q){F=!0,z=q}finally{try{!$&&W.return&&W.return()}finally{if(F)throw z}}return L}return function(P,R){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return M(P,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function M(P,R){for(var L=0;L<R.length;L++){var $=R[L];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(P,$.key,$)}}return function(P,R,L){return R&&M(P.prototype,R),L&&M(P,L),P}}(),l=function M(P,R,L){P===null&&(P=Function.prototype);var $=Object.getOwnPropertyDescriptor(P,R);if($===void 0){var F=Object.getPrototypeOf(P);return F===null?void 0:M(F,R,L)}else{if("value"in $)return $.value;var z=$.get;return z===void 0?void 0:z.call(L)}},c=i(0),u=j(c),f=i(8),d=j(f),p=i(4),m=j(p),x=i(16),y=j(x),v=i(13),b=j(v),w=i(25),N=j(w);function j(M){return M&&M.__esModule?M:{default:M}}function k(M,P){if(!(M instanceof P))throw new TypeError("Cannot call a class as a function")}function _(M,P){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:M}function E(M,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);M.prototype=Object.create(P&&P.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(M,P):M.__proto__=P)}function A(M){return M instanceof m.default||M instanceof p.BlockEmbed}var T=function(M){E(P,M);function P(R,L){k(this,P);var $=_(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,R));return $.emitter=L.emitter,Array.isArray(L.whitelist)&&($.whitelist=L.whitelist.reduce(function(F,z){return F[z]=!0,F},{})),$.domNode.addEventListener("DOMNodeInserted",function(){}),$.optimize(),$.enable(),$}return o(P,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(L,$){var F=this.line(L),z=s(F,2),W=z[0],K=z[1],q=this.line(L+$),V=s(q,1),D=V[0];if(l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"deleteAt",this).call(this,L,$),D!=null&&W!==D&&K>0){if(W instanceof p.BlockEmbed||D instanceof p.BlockEmbed){this.optimize();return}if(W instanceof b.default){var U=W.newlineIndex(W.length(),!0);if(U>-1&&(W=W.split(U+1),W===D)){this.optimize();return}}else if(D instanceof b.default){var G=D.newlineIndex(0);G>-1&&D.split(G+1)}var ee=D.children.head instanceof y.default?null:D.children.head;W.moveChildren(D,ee),W.remove()}this.optimize()}},{key:"enable",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",L)}},{key:"formatAt",value:function(L,$,F,z){this.whitelist!=null&&!this.whitelist[F]||(l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"formatAt",this).call(this,L,$,F,z),this.optimize())}},{key:"insertAt",value:function(L,$,F){if(!(F!=null&&this.whitelist!=null&&!this.whitelist[$])){if(L>=this.length())if(F==null||u.default.query($,u.default.Scope.BLOCK)==null){var z=u.default.create(this.statics.defaultChild);this.appendChild(z),F==null&&$.endsWith(`
`)&&($=$.slice(0,-1)),z.insertAt(0,$,F)}else{var W=u.default.create($,F);this.appendChild(W)}else l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,L,$,F);this.optimize()}}},{key:"insertBefore",value:function(L,$){if(L.statics.scope===u.default.Scope.INLINE_BLOT){var F=u.default.create(this.statics.defaultChild);F.appendChild(L),L=F}l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertBefore",this).call(this,L,$)}},{key:"leaf",value:function(L){return this.path(L).pop()||[null,-1]}},{key:"line",value:function(L){return L===this.length()?this.line(L-1):this.descendant(A,L)}},{key:"lines",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,F=function z(W,K,q){var V=[],D=q;return W.children.forEachAt(K,q,function(U,G,ee){A(U)?V.push(U):U instanceof u.default.Container&&(V=V.concat(z(U,G,D))),D-=ee}),V};return F(this,L,$)}},{key:"optimize",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,L,$),L.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,L,$))}},{key:"path",value:function(L){return l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"path",this).call(this,L).slice(1)}},{key:"update",value:function(L){if(this.batch!==!0){var $=d.default.sources.USER;typeof L=="string"&&($=L),Array.isArray(L)||(L=this.observer.takeRecords()),L.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,$,L),l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"update",this).call(this,L.concat([])),L.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,$,L)}}}]),P}(u.default.Scroll);T.blotName="scroll",T.className="ql-editor",T.tagName="DIV",T.defaultChild="block",T.allowedChildren=[m.default,p.BlockEmbed,N.default],n.default=T},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},o=function(){function H(Y,re){var J=[],ne=!0,te=!1,se=void 0;try{for(var ve=Y[Symbol.iterator](),ie;!(ne=(ie=ve.next()).done)&&(J.push(ie.value),!(re&&J.length===re));ne=!0);}catch(ye){te=!0,se=ye}finally{try{!ne&&ve.return&&ve.return()}finally{if(te)throw se}}return J}return function(Y,re){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return H(Y,re);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function H(Y,re){for(var J=0;J<re.length;J++){var ne=re[J];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(Y,ne.key,ne)}}return function(Y,re,J){return re&&H(Y.prototype,re),J&&H(Y,J),Y}}(),c=i(21),u=M(c),f=i(11),d=M(f),p=i(3),m=M(p),x=i(2),y=M(x),v=i(20),b=M(v),w=i(0),N=M(w),j=i(5),k=M(j),_=i(10),E=M(_),A=i(9),T=M(A);function M(H){return H&&H.__esModule?H:{default:H}}function P(H,Y,re){return Y in H?Object.defineProperty(H,Y,{value:re,enumerable:!0,configurable:!0,writable:!0}):H[Y]=re,H}function R(H,Y){if(!(H instanceof Y))throw new TypeError("Cannot call a class as a function")}function L(H,Y){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:H}function $(H,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);H.prototype=Object.create(Y&&Y.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(H,Y):H.__proto__=Y)}var F=(0,E.default)("quill:keyboard"),z=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",W=function(H){$(Y,H),l(Y,null,[{key:"match",value:function(J,ne){return ne=Q(ne),["altKey","ctrlKey","metaKey","shiftKey"].some(function(te){return!!ne[te]!==J[te]&&ne[te]!==null})?!1:ne.key===(J.which||J.keyCode)}}]);function Y(re,J){R(this,Y);var ne=L(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,re,J));return ne.bindings={},Object.keys(ne.options.bindings).forEach(function(te){te==="list autofill"&&re.scroll.whitelist!=null&&!re.scroll.whitelist.list||ne.options.bindings[te]&&ne.addBinding(ne.options.bindings[te])}),ne.addBinding({key:Y.keys.ENTER,shiftKey:null},U),ne.addBinding({key:Y.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ne.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0},q),ne.addBinding({key:Y.keys.DELETE},{collapsed:!0},V)):(ne.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},q),ne.addBinding({key:Y.keys.DELETE},{collapsed:!0,suffix:/^.?$/},V)),ne.addBinding({key:Y.keys.BACKSPACE},{collapsed:!1},D),ne.addBinding({key:Y.keys.DELETE},{collapsed:!1},D),ne.addBinding({key:Y.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},q),ne.listen(),ne}return l(Y,[{key:"addBinding",value:function(J){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},se=Q(J);if(se==null||se.key==null)return F.warn("Attempted to add invalid keyboard binding",se);typeof ne=="function"&&(ne={handler:ne}),typeof te=="function"&&(te={handler:te}),se=(0,m.default)(se,ne,te),this.bindings[se.key]=this.bindings[se.key]||[],this.bindings[se.key].push(se)}},{key:"listen",value:function(){var J=this;this.quill.root.addEventListener("keydown",function(ne){if(!ne.defaultPrevented){var te=ne.which||ne.keyCode,se=(J.bindings[te]||[]).filter(function(ut){return Y.match(ne,ut)});if(se.length!==0){var ve=J.quill.getSelection();if(!(ve==null||!J.quill.hasFocus())){var ie=J.quill.getLine(ve.index),ye=o(ie,2),Te=ye[0],Le=ye[1],ue=J.quill.getLeaf(ve.index),he=o(ue,2),we=he[0],Oe=he[1],be=ve.length===0?[we,Oe]:J.quill.getLeaf(ve.index+ve.length),We=o(be,2),Je=We[0],Ye=We[1],Ae=we instanceof N.default.Text?we.value().slice(0,Oe):"",Me=Je instanceof N.default.Text?Je.value().slice(Ye):"",Re={collapsed:ve.length===0,empty:ve.length===0&&Te.length()<=1,format:J.quill.getFormat(ve),offset:Le,prefix:Ae,suffix:Me},sr=se.some(function(ut){if(ut.collapsed!=null&&ut.collapsed!==Re.collapsed||ut.empty!=null&&ut.empty!==Re.empty||ut.offset!=null&&ut.offset!==Re.offset)return!1;if(Array.isArray(ut.format)){if(ut.format.every(function(wt){return Re.format[wt]==null}))return!1}else if(s(ut.format)==="object"&&!Object.keys(ut.format).every(function(wt){return ut.format[wt]===!0?Re.format[wt]!=null:ut.format[wt]===!1?Re.format[wt]==null:(0,d.default)(ut.format[wt],Re.format[wt])}))return!1;return ut.prefix!=null&&!ut.prefix.test(Re.prefix)||ut.suffix!=null&&!ut.suffix.test(Re.suffix)?!1:ut.handler.call(J,ve,Re)!==!0});sr&&ne.preventDefault()}}}})}}]),Y}(T.default);W.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},W.DEFAULTS={bindings:{bold:ee("bold"),italic:ee("italic"),underline:ee("underline"),indent:{key:W.keys.TAB,format:["blockquote","indent","list"],handler:function(Y,re){if(re.collapsed&&re.offset!==0)return!0;this.quill.format("indent","+1",k.default.sources.USER)}},outdent:{key:W.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(Y,re){if(re.collapsed&&re.offset!==0)return!0;this.quill.format("indent","-1",k.default.sources.USER)}},"outdent backspace":{key:W.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(Y,re){re.format.indent!=null?this.quill.format("indent","-1",k.default.sources.USER):re.format.list!=null&&this.quill.format("list",!1,k.default.sources.USER)}},"indent code-block":G(!0),"outdent code-block":G(!1),"remove tab":{key:W.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(Y){this.quill.deleteText(Y.index-1,1,k.default.sources.USER)}},tab:{key:W.keys.TAB,handler:function(Y){this.quill.history.cutoff();var re=new y.default().retain(Y.index).delete(Y.length).insert("	");this.quill.updateContents(re,k.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index+1,k.default.sources.SILENT)}},"list empty enter":{key:W.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(Y,re){this.quill.format("list",!1,k.default.sources.USER),re.format.indent&&this.quill.format("indent",!1,k.default.sources.USER)}},"checklist enter":{key:W.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(Y){var re=this.quill.getLine(Y.index),J=o(re,2),ne=J[0],te=J[1],se=(0,m.default)({},ne.formats(),{list:"checked"}),ve=new y.default().retain(Y.index).insert(`
`,se).retain(ne.length()-te-1).retain(1,{list:"unchecked"});this.quill.updateContents(ve,k.default.sources.USER),this.quill.setSelection(Y.index+1,k.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:W.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(Y,re){var J=this.quill.getLine(Y.index),ne=o(J,2),te=ne[0],se=ne[1],ve=new y.default().retain(Y.index).insert(`
`,re.format).retain(te.length()-se-1).retain(1,{header:null});this.quill.updateContents(ve,k.default.sources.USER),this.quill.setSelection(Y.index+1,k.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(Y,re){var J=re.prefix.length,ne=this.quill.getLine(Y.index),te=o(ne,2),se=te[0],ve=te[1];if(ve>J)return!0;var ie=void 0;switch(re.prefix.trim()){case"[]":case"[ ]":ie="unchecked";break;case"[x]":ie="checked";break;case"-":case"*":ie="bullet";break;default:ie="ordered"}this.quill.insertText(Y.index," ",k.default.sources.USER),this.quill.history.cutoff();var ye=new y.default().retain(Y.index-ve).delete(J+1).retain(se.length()-2-ve).retain(1,{list:ie});this.quill.updateContents(ye,k.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index-J,k.default.sources.SILENT)}},"code exit":{key:W.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(Y){var re=this.quill.getLine(Y.index),J=o(re,2),ne=J[0],te=J[1],se=new y.default().retain(Y.index+ne.length()-te-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(se,k.default.sources.USER)}},"embed left":K(W.keys.LEFT,!1),"embed left shift":K(W.keys.LEFT,!0),"embed right":K(W.keys.RIGHT,!1),"embed right shift":K(W.keys.RIGHT,!0)}};function K(H,Y){var re,J=H===W.keys.LEFT?"prefix":"suffix";return re={key:H,shiftKey:Y,altKey:null},P(re,J,/^$/),P(re,"handler",function(te){var se=te.index;H===W.keys.RIGHT&&(se+=te.length+1);var ve=this.quill.getLeaf(se),ie=o(ve,1),ye=ie[0];return ye instanceof N.default.Embed?(H===W.keys.LEFT?Y?this.quill.setSelection(te.index-1,te.length+1,k.default.sources.USER):this.quill.setSelection(te.index-1,k.default.sources.USER):Y?this.quill.setSelection(te.index,te.length+1,k.default.sources.USER):this.quill.setSelection(te.index+te.length+1,k.default.sources.USER),!1):!0}),re}function q(H,Y){if(!(H.index===0||this.quill.getLength()<=1)){var re=this.quill.getLine(H.index),J=o(re,1),ne=J[0],te={};if(Y.offset===0){var se=this.quill.getLine(H.index-1),ve=o(se,1),ie=ve[0];if(ie!=null&&ie.length()>1){var ye=ne.formats(),Te=this.quill.getFormat(H.index-1,1);te=b.default.attributes.diff(ye,Te)||{}}}var Le=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(Y.prefix)?2:1;this.quill.deleteText(H.index-Le,Le,k.default.sources.USER),Object.keys(te).length>0&&this.quill.formatLine(H.index-Le,Le,te,k.default.sources.USER),this.quill.focus()}}function V(H,Y){var re=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(Y.suffix)?2:1;if(!(H.index>=this.quill.getLength()-re)){var J={},ne=0,te=this.quill.getLine(H.index),se=o(te,1),ve=se[0];if(Y.offset>=ve.length()-1){var ie=this.quill.getLine(H.index+1),ye=o(ie,1),Te=ye[0];if(Te){var Le=ve.formats(),ue=this.quill.getFormat(H.index,1);J=b.default.attributes.diff(Le,ue)||{},ne=Te.length()}}this.quill.deleteText(H.index,re,k.default.sources.USER),Object.keys(J).length>0&&this.quill.formatLine(H.index+ne-1,re,J,k.default.sources.USER)}}function D(H){var Y=this.quill.getLines(H),re={};if(Y.length>1){var J=Y[0].formats(),ne=Y[Y.length-1].formats();re=b.default.attributes.diff(ne,J)||{}}this.quill.deleteText(H,k.default.sources.USER),Object.keys(re).length>0&&this.quill.formatLine(H.index,1,re,k.default.sources.USER),this.quill.setSelection(H.index,k.default.sources.SILENT),this.quill.focus()}function U(H,Y){var re=this;H.length>0&&this.quill.scroll.deleteAt(H.index,H.length);var J=Object.keys(Y.format).reduce(function(ne,te){return N.default.query(te,N.default.Scope.BLOCK)&&!Array.isArray(Y.format[te])&&(ne[te]=Y.format[te]),ne},{});this.quill.insertText(H.index,`
`,J,k.default.sources.USER),this.quill.setSelection(H.index+1,k.default.sources.SILENT),this.quill.focus(),Object.keys(Y.format).forEach(function(ne){J[ne]==null&&(Array.isArray(Y.format[ne])||ne!=="link"&&re.quill.format(ne,Y.format[ne],k.default.sources.USER))})}function G(H){return{key:W.keys.TAB,shiftKey:!H,format:{"code-block":!0},handler:function(re){var J=N.default.query("code-block"),ne=re.index,te=re.length,se=this.quill.scroll.descendant(J,ne),ve=o(se,2),ie=ve[0],ye=ve[1];if(ie!=null){var Te=this.quill.getIndex(ie),Le=ie.newlineIndex(ye,!0)+1,ue=ie.newlineIndex(Te+ye+te),he=ie.domNode.textContent.slice(Le,ue).split(`
`);ye=0,he.forEach(function(we,Oe){H?(ie.insertAt(Le+ye,J.TAB),ye+=J.TAB.length,Oe===0?ne+=J.TAB.length:te+=J.TAB.length):we.startsWith(J.TAB)&&(ie.deleteAt(Le+ye,J.TAB.length),ye-=J.TAB.length,Oe===0?ne-=J.TAB.length:te-=J.TAB.length),ye+=we.length+1}),this.quill.update(k.default.sources.USER),this.quill.setSelection(ne,te,k.default.sources.SILENT)}}}}function ee(H){return{key:H[0].toUpperCase(),shortKey:!0,handler:function(re,J){this.quill.format(H,!J.format[H],k.default.sources.USER)}}}function Q(H){if(typeof H=="string"||typeof H=="number")return Q({key:H});if((typeof H>"u"?"undefined":s(H))==="object"&&(H=(0,u.default)(H,!1)),typeof H.key=="string")if(W.keys[H.key.toUpperCase()]!=null)H.key=W.keys[H.key.toUpperCase()];else if(H.key.length===1)H.key=H.key.toUpperCase().charCodeAt(0);else return null;return H.shortKey&&(H[z]=H.shortKey,delete H.shortKey),H}n.default=W,n.SHORTKEY=z},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function b(w,N){var j=[],k=!0,_=!1,E=void 0;try{for(var A=w[Symbol.iterator](),T;!(k=(T=A.next()).done)&&(j.push(T.value),!(N&&j.length===N));k=!0);}catch(M){_=!0,E=M}finally{try{!k&&A.return&&A.return()}finally{if(_)throw E}}return j}return function(w,N){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return b(w,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function b(w,N,j){w===null&&(w=Function.prototype);var k=Object.getOwnPropertyDescriptor(w,N);if(k===void 0){var _=Object.getPrototypeOf(w);return _===null?void 0:b(_,N,j)}else{if("value"in k)return k.value;var E=k.get;return E===void 0?void 0:E.call(j)}},l=function(){function b(w,N){for(var j=0;j<N.length;j++){var k=N[j];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(w,k.key,k)}}return function(w,N,j){return N&&b(w.prototype,N),j&&b(w,j),w}}(),c=i(0),u=p(c),f=i(7),d=p(f);function p(b){return b&&b.__esModule?b:{default:b}}function m(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function x(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function y(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var v=function(b){y(w,b),l(w,null,[{key:"value",value:function(){}}]);function w(N,j){m(this,w);var k=x(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,N));return k.selection=j,k.textNode=document.createTextNode(w.CONTENTS),k.domNode.appendChild(k.textNode),k._length=0,k}return l(w,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(j,k){if(this._length!==0)return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,j,k);for(var _=this,E=0;_!=null&&_.statics.scope!==u.default.Scope.BLOCK_BLOT;)E+=_.offset(_.parent),_=_.parent;_!=null&&(this._length=w.CONTENTS.length,_.optimize(),_.formatAt(E,w.CONTENTS.length,j,k),this._length=0)}},{key:"index",value:function(j,k){return j===this.textNode?0:o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,j,k)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var j=this.textNode,k=this.selection.getNativeRange(),_=void 0,E=void 0,A=void 0;if(k!=null&&k.start.node===j&&k.end.node===j){var T=[j,k.start.offset,k.end.offset];_=T[0],E=T[1],A=T[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==w.CONTENTS){var M=this.textNode.data.split(w.CONTENTS).join("");this.next instanceof d.default?(_=this.next.domNode,this.next.insertAt(0,M),this.textNode.data=w.CONTENTS):(this.textNode.data=M,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(w.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),E!=null){var P=[E,A].map(function(L){return Math.max(0,Math.min(_.data.length,L-1))}),R=s(P,2);return E=R[0],A=R[1],{startNode:_,startOffset:E,endNode:_,endOffset:A}}}}},{key:"update",value:function(j,k){var _=this;if(j.some(function(A){return A.type==="characterData"&&A.target===_.textNode})){var E=this.restore();E&&(k.range=E)}}},{key:"value",value:function(){return""}}]),w}(u.default.Embed);v.blotName="cursor",v.className="ql-cursor",v.tagName="span",v.CONTENTS="\uFEFF",n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(0),o=u(s),l=i(4),c=u(l);function u(x){return x&&x.__esModule?x:{default:x}}function f(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function d(x,y){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:x}function p(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);x.prototype=Object.create(y&&y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(x,y):x.__proto__=y)}var m=function(x){p(y,x);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(o.default.Container);m.allowedChildren=[c.default,l.BlockEmbed,m],n.default=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var s=function(){function v(b,w){for(var N=0;N<w.length;N++){var j=w[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,w,N){return w&&v(b.prototype,w),N&&v(b,N),b}}(),o=function v(b,w,N){b===null&&(b=Function.prototype);var j=Object.getOwnPropertyDescriptor(b,w);if(j===void 0){var k=Object.getPrototypeOf(b);return k===null?void 0:v(k,w,N)}else{if("value"in j)return j.value;var _=j.get;return _===void 0?void 0:_.call(N)}},l=i(0),c=u(l);function u(v){return v&&v.__esModule?v:{default:v}}function f(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function d(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function p(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var m=function(v){p(b,v);function b(){return f(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"value",value:function(N){var j=o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,N);return j.startsWith("rgb(")?(j=j.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+j.split(",").map(function(k){return("00"+parseInt(k).toString(16)).slice(-2)}).join("")):j}}]),b}(c.default.Attributor.Style),x=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),y=new m("color","color",{scope:c.default.Scope.INLINE});n.ColorAttributor=m,n.ColorClass=x,n.ColorStyle=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var s=function(){function y(v,b){for(var w=0;w<b.length;w++){var N=b[w];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,b,w){return b&&y(v.prototype,b),w&&y(v,w),v}}(),o=function y(v,b,w){v===null&&(v=Function.prototype);var N=Object.getOwnPropertyDescriptor(v,b);if(N===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,b,w)}else{if("value"in N)return N.value;var k=N.get;return k===void 0?void 0:k.call(w)}},l=i(6),c=u(l);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function p(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var m=function(y){p(v,y);function v(){return f(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"format",value:function(w,N){if(w!==this.statics.blotName||!N)return o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,w,N);N=this.constructor.sanitize(N),this.domNode.setAttribute("href",N)}}],[{key:"create",value:function(w){var N=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,w);return w=this.sanitize(w),N.setAttribute("href",w),N.setAttribute("rel","noopener noreferrer"),N.setAttribute("target","_blank"),N}},{key:"formats",value:function(w){return w.getAttribute("href")}},{key:"sanitize",value:function(w){return x(w,this.PROTOCOL_WHITELIST)?w:this.SANITIZED_URL}}]),v}(c.default);m.blotName="link",m.tagName="A",m.SANITIZED_URL="about:blank",m.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function x(y,v){var b=document.createElement("a");b.href=y;var w=b.href.slice(0,b.href.indexOf(":"));return v.indexOf(w)>-1}n.default=m,n.sanitize=x},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},o=function(){function v(b,w){for(var N=0;N<w.length;N++){var j=w[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,w,N){return w&&v(b.prototype,w),N&&v(b,N),b}}(),l=i(23),c=d(l),u=i(107),f=d(u);function d(v){return v&&v.__esModule?v:{default:v}}function p(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}var m=0;function x(v,b){v.setAttribute(b,v.getAttribute(b)!=="true")}var y=function(){function v(b){var w=this;p(this,v),this.select=b,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){w.togglePicker()}),this.label.addEventListener("keydown",function(N){switch(N.keyCode){case c.default.keys.ENTER:w.togglePicker();break;case c.default.keys.ESCAPE:w.escape(),N.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(v,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),x(this.label,"aria-expanded"),x(this.options,"aria-hidden")}},{key:"buildItem",value:function(w){var N=this,j=document.createElement("span");return j.tabIndex="0",j.setAttribute("role","button"),j.classList.add("ql-picker-item"),w.hasAttribute("value")&&j.setAttribute("data-value",w.getAttribute("value")),w.textContent&&j.setAttribute("data-label",w.textContent),j.addEventListener("click",function(){N.selectItem(j,!0)}),j.addEventListener("keydown",function(k){switch(k.keyCode){case c.default.keys.ENTER:N.selectItem(j,!0),k.preventDefault();break;case c.default.keys.ESCAPE:N.escape(),k.preventDefault();break}}),j}},{key:"buildLabel",value:function(){var w=document.createElement("span");return w.classList.add("ql-picker-label"),w.innerHTML=f.default,w.tabIndex="0",w.setAttribute("role","button"),w.setAttribute("aria-expanded","false"),this.container.appendChild(w),w}},{key:"buildOptions",value:function(){var w=this,N=document.createElement("span");N.classList.add("ql-picker-options"),N.setAttribute("aria-hidden","true"),N.tabIndex="-1",N.id="ql-picker-options-"+m,m+=1,this.label.setAttribute("aria-controls",N.id),this.options=N,[].slice.call(this.select.options).forEach(function(j){var k=w.buildItem(j);N.appendChild(k),j.selected===!0&&w.selectItem(k)}),this.container.appendChild(N)}},{key:"buildPicker",value:function(){var w=this;[].slice.call(this.select.attributes).forEach(function(N){w.container.setAttribute(N.name,N.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var w=this;this.close(),setTimeout(function(){return w.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(w){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,j=this.container.querySelector(".ql-selected");if(w!==j&&(j!=null&&j.classList.remove("ql-selected"),w!=null&&(w.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(w.parentNode.children,w),w.hasAttribute("data-value")?this.label.setAttribute("data-value",w.getAttribute("data-value")):this.label.removeAttribute("data-value"),w.hasAttribute("data-label")?this.label.setAttribute("data-label",w.getAttribute("data-label")):this.label.removeAttribute("data-label"),N))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":s(Event))==="object"){var k=document.createEvent("Event");k.initEvent("change",!0,!0),this.select.dispatchEvent(k)}this.close()}}},{key:"update",value:function(){var w=void 0;if(this.select.selectedIndex>-1){var N=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];w=this.select.options[this.select.selectedIndex],this.selectItem(N)}else this.selectItem(null);var j=w!=null&&w!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",j)}}]),v}();n.default=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(0),o=F(s),l=i(5),c=F(l),u=i(4),f=F(u),d=i(16),p=F(d),m=i(25),x=F(m),y=i(24),v=F(y),b=i(35),w=F(b),N=i(6),j=F(N),k=i(22),_=F(k),E=i(7),A=F(E),T=i(55),M=F(T),P=i(42),R=F(P),L=i(23),$=F(L);function F(z){return z&&z.__esModule?z:{default:z}}c.default.register({"blots/block":f.default,"blots/block/embed":u.BlockEmbed,"blots/break":p.default,"blots/container":x.default,"blots/cursor":v.default,"blots/embed":w.default,"blots/inline":j.default,"blots/scroll":_.default,"blots/text":A.default,"modules/clipboard":M.default,"modules/history":R.default,"modules/keyboard":$.default}),o.default.register(f.default,p.default,v.default,j.default,_.default,A.default),n.default=c.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(1),o=function(){function l(c){this.domNode=c,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(c){if(this.tagName==null)throw new s.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?u=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?u=document.createElement(c):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return s.create(c)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},l.prototype.deleteAt=function(c,u){var f=this.isolate(c,u);f.remove()},l.prototype.formatAt=function(c,u,f,d){var p=this.isolate(c,u);if(s.query(f,s.Scope.BLOT)!=null&&d)p.wrap(f,d);else if(s.query(f,s.Scope.ATTRIBUTE)!=null){var m=s.create(this.statics.scope);p.wrap(m),m.format(f,d)}},l.prototype.insertAt=function(c,u,f){var d=f==null?s.create("text",u):s.create(u,f),p=this.split(c);this.parent.insertBefore(d,p)},l.prototype.insertInto=function(c,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var f=null;c.children.insertBefore(this,u),u!=null&&(f=u.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=f)&&c.domNode.insertBefore(this.domNode,f),this.parent=c,this.attach()},l.prototype.isolate=function(c,u){var f=this.split(c);return f.split(u),f},l.prototype.length=function(){return 1},l.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},l.prototype.optimize=function(c){this.domNode[s.DATA_KEY]!=null&&delete this.domNode[s.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},l.prototype.replaceWith=function(c,u){var f=typeof c=="string"?s.create(c,u):c;return f.replace(this),f},l.prototype.split=function(c,u){return c===0?this:this.next},l.prototype.update=function(c,u){},l.prototype.wrap=function(c,u){var f=typeof c=="string"?s.create(c,u):c;return this.parent!=null&&this.parent.insertBefore(f,this.next),f.appendChild(this),f},l.blotName="abstract",l}();n.default=o},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(12),o=i(32),l=i(33),c=i(1),u=function(){function f(d){this.attributes={},this.domNode=d,this.build()}return f.prototype.attribute=function(d,p){p?d.add(this.domNode,p)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},f.prototype.build=function(){var d=this;this.attributes={};var p=s.default.keys(this.domNode),m=o.default.keys(this.domNode),x=l.default.keys(this.domNode);p.concat(m).concat(x).forEach(function(y){var v=c.query(y,c.Scope.ATTRIBUTE);v instanceof s.default&&(d.attributes[v.attrName]=v)})},f.prototype.copy=function(d){var p=this;Object.keys(this.attributes).forEach(function(m){var x=p.attributes[m].value(p.domNode);d.format(m,x)})},f.prototype.move=function(d){var p=this;this.copy(d),Object.keys(this.attributes).forEach(function(m){p.attributes[m].remove(p.domNode)}),this.attributes={}},f.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(p,m){return p[m]=d.attributes[m].value(d.domNode),p},{})},f}();n.default=u},function(r,n,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){u(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(12);function l(u,f){var d=u.getAttribute("class")||"";return d.split(/\s+/).filter(function(p){return p.indexOf(f+"-")===0})}var c=function(u){s(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(p){return p.split("-").slice(0,-1).join("-")})},f.prototype.add=function(d,p){return this.canAdd(d,p)?(this.remove(d),d.classList.add(this.keyName+"-"+p),!0):!1},f.prototype.remove=function(d){var p=l(d,this.keyName);p.forEach(function(m){d.classList.remove(m)}),d.classList.length===0&&d.removeAttribute("class")},f.prototype.value=function(d){var p=l(d,this.keyName)[0]||"",m=p.slice(this.keyName.length+1);return this.canAdd(d,m)?m:""},f}(o.default);n.default=c},function(r,n,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){u(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(12);function l(u){var f=u.split("-"),d=f.slice(1).map(function(p){return p[0].toUpperCase()+p.slice(1)}).join("");return f[0]+d}var c=function(u){s(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(p){var m=p.split(":");return m[0].trim()})},f.prototype.add=function(d,p){return this.canAdd(d,p)?(d.style[l(this.keyName)]=p,!0):!1},f.prototype.remove=function(d){d.style[l(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},f.prototype.value=function(d){var p=d.style[l(this.keyName)];return this.canAdd(d,p)?p:""},f}(o.default);n.default=c},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function c(u,f){for(var d=0;d<f.length;d++){var p=f[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}return function(u,f,d){return f&&c(u.prototype,f),d&&c(u,d),u}}();function o(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}var l=function(){function c(u,f){o(this,c),this.quill=u,this.options=f,this.modules={}}return s(c,[{key:"init",value:function(){var f=this;Object.keys(this.options.modules).forEach(function(d){f.modules[d]==null&&f.addModule(d)})}},{key:"addModule",value:function(f){var d=this.quill.constructor.import("modules/"+f);return this.modules[f]=new d(this.quill,this.options.modules[f]||{}),this.modules[f]}}]),c}();l.DEFAULTS={modules:{}},l.themes={default:l},n.default=l},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function b(w,N){for(var j=0;j<N.length;j++){var k=N[j];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(w,k.key,k)}}return function(w,N,j){return N&&b(w.prototype,N),j&&b(w,j),w}}(),o=function b(w,N,j){w===null&&(w=Function.prototype);var k=Object.getOwnPropertyDescriptor(w,N);if(k===void 0){var _=Object.getPrototypeOf(w);return _===null?void 0:b(_,N,j)}else{if("value"in k)return k.value;var E=k.get;return E===void 0?void 0:E.call(j)}},l=i(0),c=d(l),u=i(7),f=d(u);function d(b){return b&&b.__esModule?b:{default:b}}function p(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function m(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function x(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var y="\uFEFF",v=function(b){x(w,b);function w(N){p(this,w);var j=m(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,N));return j.contentNode=document.createElement("span"),j.contentNode.setAttribute("contenteditable",!1),[].slice.call(j.domNode.childNodes).forEach(function(k){j.contentNode.appendChild(k)}),j.leftGuard=document.createTextNode(y),j.rightGuard=document.createTextNode(y),j.domNode.appendChild(j.leftGuard),j.domNode.appendChild(j.contentNode),j.domNode.appendChild(j.rightGuard),j}return s(w,[{key:"index",value:function(j,k){return j===this.leftGuard?0:j===this.rightGuard?1:o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,j,k)}},{key:"restore",value:function(j){var k=void 0,_=void 0,E=j.data.split(y).join("");if(j===this.leftGuard)if(this.prev instanceof f.default){var A=this.prev.length();this.prev.insertAt(A,E),k={startNode:this.prev.domNode,startOffset:A+E.length}}else _=document.createTextNode(E),this.parent.insertBefore(c.default.create(_),this),k={startNode:_,startOffset:E.length};else j===this.rightGuard&&(this.next instanceof f.default?(this.next.insertAt(0,E),k={startNode:this.next.domNode,startOffset:E.length}):(_=document.createTextNode(E),this.parent.insertBefore(c.default.create(_),this.next),k={startNode:_,startOffset:E.length}));return j.data=y,k}},{key:"update",value:function(j,k){var _=this;j.forEach(function(E){if(E.type==="characterData"&&(E.target===_.leftGuard||E.target===_.rightGuard)){var A=_.restore(E.target);A&&(k.range=A)}})}}]),w}(c.default.Embed);n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var s=i(0),o=l(s);function l(p){return p&&p.__esModule?p:{default:p}}var c={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new o.default.Attributor.Attribute("align","align",c),f=new o.default.Attributor.Class("align","ql-align",c),d=new o.default.Attributor.Style("align","text-align",c);n.AlignAttribute=u,n.AlignClass=f,n.AlignStyle=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var s=i(0),o=c(s),l=i(26);function c(d){return d&&d.__esModule?d:{default:d}}var u=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),f=new l.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});n.BackgroundClass=u,n.BackgroundStyle=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var s=i(0),o=l(s);function l(p){return p&&p.__esModule?p:{default:p}}var c={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},u=new o.default.Attributor.Attribute("direction","dir",c),f=new o.default.Attributor.Class("direction","ql-direction",c),d=new o.default.Attributor.Style("direction","direction",c);n.DirectionAttribute=u,n.DirectionClass=f,n.DirectionStyle=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var s=function(){function b(w,N){for(var j=0;j<N.length;j++){var k=N[j];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(w,k.key,k)}}return function(w,N,j){return N&&b(w.prototype,N),j&&b(w,j),w}}(),o=function b(w,N,j){w===null&&(w=Function.prototype);var k=Object.getOwnPropertyDescriptor(w,N);if(k===void 0){var _=Object.getPrototypeOf(w);return _===null?void 0:b(_,N,j)}else{if("value"in k)return k.value;var E=k.get;return E===void 0?void 0:E.call(j)}},l=i(0),c=u(l);function u(b){return b&&b.__esModule?b:{default:b}}function f(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function d(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function p(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var m={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},x=new c.default.Attributor.Class("font","ql-font",m),y=function(b){p(w,b);function w(){return f(this,w),d(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,[{key:"value",value:function(j){return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,j).replace(/["']/g,"")}}]),w}(c.default.Attributor.Style),v=new y("font","font-family",m);n.FontStyle=v,n.FontClass=x},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var s=i(0),o=l(s);function l(f){return f&&f.__esModule?f:{default:f}}var c=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=c,n.SizeStyle=u},function(r,n,i){r.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var s=function(){function N(j,k){for(var _=0;_<k.length;_++){var E=k[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(j,E.key,E)}}return function(j,k,_){return k&&N(j.prototype,k),_&&N(j,_),j}}(),o=i(0),l=p(o),c=i(5),u=p(c),f=i(9),d=p(f);function p(N){return N&&N.__esModule?N:{default:N}}function m(N,j){if(!(N instanceof j))throw new TypeError("Cannot call a class as a function")}function x(N,j){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:N}function y(N,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);N.prototype=Object.create(j&&j.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(N,j):N.__proto__=j)}var v=function(N){y(j,N);function j(k,_){m(this,j);var E=x(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,k,_));return E.lastRecorded=0,E.ignoreChange=!1,E.clear(),E.quill.on(u.default.events.EDITOR_CHANGE,function(A,T,M,P){A!==u.default.events.TEXT_CHANGE||E.ignoreChange||(!E.options.userOnly||P===u.default.sources.USER?E.record(T,M):E.transform(T))}),E.quill.keyboard.addBinding({key:"Z",shortKey:!0},E.undo.bind(E)),E.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},E.redo.bind(E)),/Win/i.test(navigator.platform)&&E.quill.keyboard.addBinding({key:"Y",shortKey:!0},E.redo.bind(E)),E}return s(j,[{key:"change",value:function(_,E){if(this.stack[_].length!==0){var A=this.stack[_].pop();this.stack[E].push(A),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(A[_],u.default.sources.USER),this.ignoreChange=!1;var T=w(A[_]);this.quill.setSelection(T)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(_,E){if(_.ops.length!==0){this.stack.redo=[];var A=this.quill.getContents().diff(E),T=Date.now();if(this.lastRecorded+this.options.delay>T&&this.stack.undo.length>0){var M=this.stack.undo.pop();A=A.compose(M.undo),_=M.redo.compose(_)}else this.lastRecorded=T;this.stack.undo.push({redo:_,undo:A}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(_){this.stack.undo.forEach(function(E){E.undo=_.transform(E.undo,!0),E.redo=_.transform(E.redo,!0)}),this.stack.redo.forEach(function(E){E.undo=_.transform(E.undo,!0),E.redo=_.transform(E.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),j}(d.default);v.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function b(N){var j=N.ops[N.ops.length-1];return j==null?!1:j.insert!=null?typeof j.insert=="string"&&j.insert.endsWith(`
`):j.attributes!=null?Object.keys(j.attributes).some(function(k){return l.default.query(k,l.default.Scope.BLOCK)!=null}):!1}function w(N){var j=N.reduce(function(_,E){return _+=E.delete||0,_},0),k=N.length()-j;return b(N)&&(k-=1),k}n.default=v,n.getLastChangeIndex=w},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var s=function(){function U(G,ee){for(var Q=0;Q<ee.length;Q++){var H=ee[Q];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(G,H.key,H)}}return function(G,ee,Q){return ee&&U(G.prototype,ee),Q&&U(G,Q),G}}(),o=function U(G,ee,Q){G===null&&(G=Function.prototype);var H=Object.getOwnPropertyDescriptor(G,ee);if(H===void 0){var Y=Object.getPrototypeOf(G);return Y===null?void 0:U(Y,ee,Q)}else{if("value"in H)return H.value;var re=H.get;return re===void 0?void 0:re.call(Q)}},l=i(3),c=T(l),u=i(2),f=T(u),d=i(8),p=T(d),m=i(23),x=T(m),y=i(34),v=T(y),b=i(59),w=T(b),N=i(60),j=T(N),k=i(28),_=T(k),E=i(61),A=T(E);function T(U){return U&&U.__esModule?U:{default:U}}function M(U,G){if(!(U instanceof G))throw new TypeError("Cannot call a class as a function")}function P(U,G){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G&&(typeof G=="object"||typeof G=="function")?G:U}function R(U,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);U.prototype=Object.create(G&&G.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(U,G):U.__proto__=G)}var L=[!1,"center","right","justify"],$=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],F=[!1,"serif","monospace"],z=["1","2","3",!1],W=["small",!1,"large","huge"],K=function(U){R(G,U);function G(ee,Q){M(this,G);var H=P(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,ee,Q)),Y=function re(J){if(!document.body.contains(ee.root))return document.body.removeEventListener("click",re);H.tooltip!=null&&!H.tooltip.root.contains(J.target)&&document.activeElement!==H.tooltip.textbox&&!H.quill.hasFocus()&&H.tooltip.hide(),H.pickers!=null&&H.pickers.forEach(function(ne){ne.container.contains(J.target)||ne.close()})};return ee.emitter.listenDOM("click",document.body,Y),H}return s(G,[{key:"addModule",value:function(Q){var H=o(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"addModule",this).call(this,Q);return Q==="toolbar"&&this.extendToolbar(H),H}},{key:"buildButtons",value:function(Q,H){Q.forEach(function(Y){var re=Y.getAttribute("class")||"";re.split(/\s+/).forEach(function(J){if(J.startsWith("ql-")&&(J=J.slice(3),H[J]!=null))if(J==="direction")Y.innerHTML=H[J][""]+H[J].rtl;else if(typeof H[J]=="string")Y.innerHTML=H[J];else{var ne=Y.value||"";ne!=null&&H[J][ne]&&(Y.innerHTML=H[J][ne])}})})}},{key:"buildPickers",value:function(Q,H){var Y=this;this.pickers=Q.map(function(J){if(J.classList.contains("ql-align"))return J.querySelector("option")==null&&D(J,L),new j.default(J,H.align);if(J.classList.contains("ql-background")||J.classList.contains("ql-color")){var ne=J.classList.contains("ql-background")?"background":"color";return J.querySelector("option")==null&&D(J,$,ne==="background"?"#ffffff":"#000000"),new w.default(J,H[ne])}else return J.querySelector("option")==null&&(J.classList.contains("ql-font")?D(J,F):J.classList.contains("ql-header")?D(J,z):J.classList.contains("ql-size")&&D(J,W)),new _.default(J)});var re=function(){Y.pickers.forEach(function(ne){ne.update()})};this.quill.on(p.default.events.EDITOR_CHANGE,re)}}]),G}(v.default);K.DEFAULTS=(0,c.default)(!0,{},v.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var G=this,ee=this.container.querySelector("input.ql-image[type=file]");ee==null&&(ee=document.createElement("input"),ee.setAttribute("type","file"),ee.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),ee.classList.add("ql-image"),ee.addEventListener("change",function(){if(ee.files!=null&&ee.files[0]!=null){var Q=new FileReader;Q.onload=function(H){var Y=G.quill.getSelection(!0);G.quill.updateContents(new f.default().retain(Y.index).delete(Y.length).insert({image:H.target.result}),p.default.sources.USER),G.quill.setSelection(Y.index+1,p.default.sources.SILENT),ee.value=""},Q.readAsDataURL(ee.files[0])}}),this.container.appendChild(ee)),ee.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var q=function(U){R(G,U);function G(ee,Q){M(this,G);var H=P(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,ee,Q));return H.textbox=H.root.querySelector('input[type="text"]'),H.listen(),H}return s(G,[{key:"listen",value:function(){var Q=this;this.textbox.addEventListener("keydown",function(H){x.default.match(H,"enter")?(Q.save(),H.preventDefault()):x.default.match(H,"escape")&&(Q.cancel(),H.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),H!=null?this.textbox.value=H:Q!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+Q)||""),this.root.setAttribute("data-mode",Q)}},{key:"restoreFocus",value:function(){var Q=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=Q}},{key:"save",value:function(){var Q=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var H=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",Q,p.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",Q,p.default.sources.USER)),this.quill.root.scrollTop=H;break}case"video":Q=V(Q);case"formula":{if(!Q)break;var Y=this.quill.getSelection(!0);if(Y!=null){var re=Y.index+Y.length;this.quill.insertEmbed(re,this.root.getAttribute("data-mode"),Q,p.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(re+1," ",p.default.sources.USER),this.quill.setSelection(re+2,p.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),G}(A.default);function V(U){var G=U.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||U.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return G?(G[1]||"https")+"://www.youtube.com/embed/"+G[2]+"?showinfo=0":(G=U.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(G[1]||"https")+"://player.vimeo.com/video/"+G[2]+"/":U}function D(U,G){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;G.forEach(function(Q){var H=document.createElement("option");Q===ee?H.setAttribute("selected","selected"):H.setAttribute("value",Q),U.appendChild(H)})}n.BaseTooltip=q,n.default=K},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},o.prototype.contains=function(l){for(var c,u=this.iterator();c=u();)if(c===l)return!0;return!1},o.prototype.insertBefore=function(l,c){l&&(l.next=c,c!=null?(l.prev=c.prev,c.prev!=null&&(c.prev.next=l),c.prev=l,c===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},o.prototype.offset=function(l){for(var c=0,u=this.head;u!=null;){if(u===l)return c;c+=u.length(),u=u.next}return-1},o.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},o.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var c=l;return l!=null&&(l=l.next),c}},o.prototype.find=function(l,c){c===void 0&&(c=!1);for(var u,f=this.iterator();u=f();){var d=u.length();if(l<d||c&&l===d&&(u.next==null||u.next.length()!==0))return[u,l];l-=d}return[null,0]},o.prototype.forEach=function(l){for(var c,u=this.iterator();c=u();)l(c)},o.prototype.forEachAt=function(l,c,u){if(!(c<=0))for(var f=this.find(l),d=f[0],p=f[1],m,x=l-p,y=this.iterator(d);(m=y())&&x<l+c;){var v=m.length();l>x?u(m,l-x,Math.min(c,x+v-l)):u(m,0,Math.min(v,l+c-x)),x+=v}},o.prototype.map=function(l){return this.reduce(function(c,u){return c.push(l(u)),c},[])},o.prototype.reduce=function(l,c){for(var u,f=this.iterator();u=f();)c=l(c,u);return c},o}();n.default=s},function(r,n,i){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var x in m)m.hasOwnProperty(x)&&(p[x]=m[x])};return function(p,m){d(p,m);function x(){this.constructor=p}p.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(17),l=i(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,f=function(d){s(p,d);function p(m){var x=d.call(this,m)||this;return x.scroll=x,x.observer=new MutationObserver(function(y){x.update(y)}),x.observer.observe(x.domNode,c),x.attach(),x}return p.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},p.prototype.deleteAt=function(m,x){this.update(),m===0&&x===this.length()?this.children.forEach(function(y){y.remove()}):d.prototype.deleteAt.call(this,m,x)},p.prototype.formatAt=function(m,x,y,v){this.update(),d.prototype.formatAt.call(this,m,x,y,v)},p.prototype.insertAt=function(m,x,y){this.update(),d.prototype.insertAt.call(this,m,x,y)},p.prototype.optimize=function(m,x){var y=this;m===void 0&&(m=[]),x===void 0&&(x={}),d.prototype.optimize.call(this,x);for(var v=[].slice.call(this.observer.takeRecords());v.length>0;)m.push(v.pop());for(var b=function(k,_){_===void 0&&(_=!0),!(k==null||k===y)&&k.domNode.parentNode!=null&&(k.domNode[l.DATA_KEY].mutations==null&&(k.domNode[l.DATA_KEY].mutations=[]),_&&b(k.parent))},w=function(k){k.domNode[l.DATA_KEY]==null||k.domNode[l.DATA_KEY].mutations==null||(k instanceof o.default&&k.children.forEach(w),k.optimize(x))},N=m,j=0;N.length>0;j+=1){if(j>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(N.forEach(function(k){var _=l.find(k.target,!0);_!=null&&(_.domNode===k.target&&(k.type==="childList"?(b(l.find(k.previousSibling,!1)),[].forEach.call(k.addedNodes,function(E){var A=l.find(E,!1);b(A,!1),A instanceof o.default&&A.children.forEach(function(T){b(T,!1)})})):k.type==="attributes"&&b(_.prev)),b(_))}),this.children.forEach(w),N=[].slice.call(this.observer.takeRecords()),v=N.slice();v.length>0;)m.push(v.pop())}},p.prototype.update=function(m,x){var y=this;x===void 0&&(x={}),m=m||this.observer.takeRecords(),m.map(function(v){var b=l.find(v.target,!0);return b==null?null:b.domNode[l.DATA_KEY].mutations==null?(b.domNode[l.DATA_KEY].mutations=[v],b):(b.domNode[l.DATA_KEY].mutations.push(v),null)}).forEach(function(v){v==null||v===y||v.domNode[l.DATA_KEY]==null||v.update(v.domNode[l.DATA_KEY].mutations||[],x)}),this.domNode[l.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,x),this.optimize(m,x)},p.blotName="scroll",p.defaultChild="block",p.scope=l.Scope.BLOCK_BLOT,p.tagName="DIV",p}(o.default);n.default=f},function(r,n,i){var s=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var m in p)p.hasOwnProperty(m)&&(d[m]=p[m])};return function(d,p){f(d,p);function m(){this.constructor=d}d.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(18),l=i(1);function c(f,d){if(Object.keys(f).length!==Object.keys(d).length)return!1;for(var p in f)if(f[p]!==d[p])return!1;return!0}var u=function(f){s(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return d.formats=function(p){if(p.tagName!==d.tagName)return f.formats.call(this,p)},d.prototype.format=function(p,m){var x=this;p===this.statics.blotName&&!m?(this.children.forEach(function(y){y instanceof o.default||(y=y.wrap(d.blotName,!0)),x.attributes.copy(y)}),this.unwrap()):f.prototype.format.call(this,p,m)},d.prototype.formatAt=function(p,m,x,y){if(this.formats()[x]!=null||l.query(x,l.Scope.ATTRIBUTE)){var v=this.isolate(p,m);v.format(x,y)}else f.prototype.formatAt.call(this,p,m,x,y)},d.prototype.optimize=function(p){f.prototype.optimize.call(this,p);var m=this.formats();if(Object.keys(m).length===0)return this.unwrap();var x=this.next;x instanceof d&&x.prev===this&&c(m,x.formats())&&(x.moveChildren(this),x.remove())},d.blotName="inline",d.scope=l.Scope.INLINE_BLOT,d.tagName="SPAN",d}(o.default);n.default=u},function(r,n,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){u(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(18),l=i(1),c=function(u){s(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.formats=function(d){var p=l.query(f.blotName).tagName;if(d.tagName!==p)return u.formats.call(this,d)},f.prototype.format=function(d,p){l.query(d,l.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!p?this.replaceWith(f.blotName):u.prototype.format.call(this,d,p))},f.prototype.formatAt=function(d,p,m,x){l.query(m,l.Scope.BLOCK)!=null?this.format(m,x):u.prototype.formatAt.call(this,d,p,m,x)},f.prototype.insertAt=function(d,p,m){if(m==null||l.query(p,l.Scope.INLINE)!=null)u.prototype.insertAt.call(this,d,p,m);else{var x=this.split(d),y=l.create(p,m);x.parent.insertBefore(y,x)}},f.prototype.update=function(d,p){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,d,p)},f.blotName="block",f.scope=l.Scope.BLOCK_BLOT,f.tagName="P",f}(o.default);n.default=c},function(r,n,i){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)f.hasOwnProperty(d)&&(u[d]=f[d])};return function(u,f){c(u,f);function d(){this.constructor=u}u.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),l=function(c){s(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.formats=function(f){},u.prototype.format=function(f,d){c.prototype.formatAt.call(this,0,this.length(),f,d)},u.prototype.formatAt=function(f,d,p,m){f===0&&d===this.length()?this.format(p,m):c.prototype.formatAt.call(this,f,d,p,m)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u}(o.default);n.default=l},function(r,n,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){u(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=i(19),l=i(1),c=function(u){s(f,u);function f(d){var p=u.call(this,d)||this;return p.text=p.statics.value(p.domNode),p}return f.create=function(d){return document.createTextNode(d)},f.value=function(d){var p=d.data;return p.normalize&&(p=p.normalize()),p},f.prototype.deleteAt=function(d,p){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+p)},f.prototype.index=function(d,p){return this.domNode===d?p:-1},f.prototype.insertAt=function(d,p,m){m==null?(this.text=this.text.slice(0,d)+p+this.text.slice(d),this.domNode.data=this.text):u.prototype.insertAt.call(this,d,p,m)},f.prototype.length=function(){return this.text.length},f.prototype.optimize=function(d){u.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof f&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},f.prototype.position=function(d,p){return[this.domNode,d]},f.prototype.split=function(d,p){if(p===void 0&&(p=!1),!p){if(d===0)return this;if(d===this.length())return this.next}var m=l.create(this.domNode.splitText(d));return this.parent.insertBefore(m,this.next),this.text=this.statics.value(this.domNode),m},f.prototype.update=function(d,p){var m=this;d.some(function(x){return x.type==="characterData"&&x.target===m.domNode})&&(this.text=this.statics.value(this.domNode))},f.prototype.value=function(){return this.text},f.blotName="text",f.scope=l.Scope.INLINE_BLOT,f}(o.default);n.default=c},function(r,n,i){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,c){return arguments.length>1&&!this.contains(l)==!c?c:o.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,c){return c=c||0,this.substr(c,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,c){var u=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>u.length)&&(c=u.length),c-=l.length;var f=u.indexOf(l,c);return f!==-1&&f===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),f=u.length>>>0,d=arguments[1],p,m=0;m<f;m++)if(p=u[m],c.call(d,p,m,u))return p}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(r,n){var i=-1,s=1,o=0;function l(j,k,_){if(j==k)return j?[[o,j]]:[];(_<0||j.length<_)&&(_=null);var E=d(j,k),A=j.substring(0,E);j=j.substring(E),k=k.substring(E),E=p(j,k);var T=j.substring(j.length-E);j=j.substring(0,j.length-E),k=k.substring(0,k.length-E);var M=c(j,k);return A&&M.unshift([o,A]),T&&M.push([o,T]),x(M),_!=null&&(M=b(M,_)),M=w(M),M}function c(j,k){var _;if(!j)return[[s,k]];if(!k)return[[i,j]];var E=j.length>k.length?j:k,A=j.length>k.length?k:j,T=E.indexOf(A);if(T!=-1)return _=[[s,E.substring(0,T)],[o,A],[s,E.substring(T+A.length)]],j.length>k.length&&(_[0][0]=_[2][0]=i),_;if(A.length==1)return[[i,j],[s,k]];var M=m(j,k);if(M){var P=M[0],R=M[1],L=M[2],$=M[3],F=M[4],z=l(P,L),W=l(R,$);return z.concat([[o,F]],W)}return u(j,k)}function u(j,k){for(var _=j.length,E=k.length,A=Math.ceil((_+E)/2),T=A,M=2*A,P=new Array(M),R=new Array(M),L=0;L<M;L++)P[L]=-1,R[L]=-1;P[T+1]=0,R[T+1]=0;for(var $=_-E,F=$%2!=0,z=0,W=0,K=0,q=0,V=0;V<A;V++){for(var D=-V+z;D<=V-W;D+=2){var U=T+D,G;D==-V||D!=V&&P[U-1]<P[U+1]?G=P[U+1]:G=P[U-1]+1;for(var ee=G-D;G<_&&ee<E&&j.charAt(G)==k.charAt(ee);)G++,ee++;if(P[U]=G,G>_)W+=2;else if(ee>E)z+=2;else if(F){var Q=T+$-D;if(Q>=0&&Q<M&&R[Q]!=-1){var H=_-R[Q];if(G>=H)return f(j,k,G,ee)}}}for(var Y=-V+K;Y<=V-q;Y+=2){var Q=T+Y,H;Y==-V||Y!=V&&R[Q-1]<R[Q+1]?H=R[Q+1]:H=R[Q-1]+1;for(var re=H-Y;H<_&&re<E&&j.charAt(_-H-1)==k.charAt(E-re-1);)H++,re++;if(R[Q]=H,H>_)q+=2;else if(re>E)K+=2;else if(!F){var U=T+$-Y;if(U>=0&&U<M&&P[U]!=-1){var G=P[U],ee=T+G-U;if(H=_-H,G>=H)return f(j,k,G,ee)}}}}return[[i,j],[s,k]]}function f(j,k,_,E){var A=j.substring(0,_),T=k.substring(0,E),M=j.substring(_),P=k.substring(E),R=l(A,T),L=l(M,P);return R.concat(L)}function d(j,k){if(!j||!k||j.charAt(0)!=k.charAt(0))return 0;for(var _=0,E=Math.min(j.length,k.length),A=E,T=0;_<A;)j.substring(T,A)==k.substring(T,A)?(_=A,T=_):E=A,A=Math.floor((E-_)/2+_);return A}function p(j,k){if(!j||!k||j.charAt(j.length-1)!=k.charAt(k.length-1))return 0;for(var _=0,E=Math.min(j.length,k.length),A=E,T=0;_<A;)j.substring(j.length-A,j.length-T)==k.substring(k.length-A,k.length-T)?(_=A,T=_):E=A,A=Math.floor((E-_)/2+_);return A}function m(j,k){var _=j.length>k.length?j:k,E=j.length>k.length?k:j;if(_.length<4||E.length*2<_.length)return null;function A(W,K,q){for(var V=W.substring(q,q+Math.floor(W.length/4)),D=-1,U="",G,ee,Q,H;(D=K.indexOf(V,D+1))!=-1;){var Y=d(W.substring(q),K.substring(D)),re=p(W.substring(0,q),K.substring(0,D));U.length<re+Y&&(U=K.substring(D-re,D)+K.substring(D,D+Y),G=W.substring(0,q-re),ee=W.substring(q+Y),Q=K.substring(0,D-re),H=K.substring(D+Y))}return U.length*2>=W.length?[G,ee,Q,H,U]:null}var T=A(_,E,Math.ceil(_.length/4)),M=A(_,E,Math.ceil(_.length/2)),P;if(!T&&!M)return null;M?T?P=T[4].length>M[4].length?T:M:P=M:P=T;var R,L,$,F;j.length>k.length?(R=P[0],L=P[1],$=P[2],F=P[3]):($=P[0],F=P[1],R=P[2],L=P[3]);var z=P[4];return[R,L,$,F,z]}function x(j){j.push([o,""]);for(var k=0,_=0,E=0,A="",T="",M;k<j.length;)switch(j[k][0]){case s:E++,T+=j[k][1],k++;break;case i:_++,A+=j[k][1],k++;break;case o:_+E>1?(_!==0&&E!==0&&(M=d(T,A),M!==0&&(k-_-E>0&&j[k-_-E-1][0]==o?j[k-_-E-1][1]+=T.substring(0,M):(j.splice(0,0,[o,T.substring(0,M)]),k++),T=T.substring(M),A=A.substring(M)),M=p(T,A),M!==0&&(j[k][1]=T.substring(T.length-M)+j[k][1],T=T.substring(0,T.length-M),A=A.substring(0,A.length-M))),_===0?j.splice(k-E,_+E,[s,T]):E===0?j.splice(k-_,_+E,[i,A]):j.splice(k-_-E,_+E,[i,A],[s,T]),k=k-_-E+(_?1:0)+(E?1:0)+1):k!==0&&j[k-1][0]==o?(j[k-1][1]+=j[k][1],j.splice(k,1)):k++,E=0,_=0,A="",T="";break}j[j.length-1][1]===""&&j.pop();var P=!1;for(k=1;k<j.length-1;)j[k-1][0]==o&&j[k+1][0]==o&&(j[k][1].substring(j[k][1].length-j[k-1][1].length)==j[k-1][1]?(j[k][1]=j[k-1][1]+j[k][1].substring(0,j[k][1].length-j[k-1][1].length),j[k+1][1]=j[k-1][1]+j[k+1][1],j.splice(k-1,1),P=!0):j[k][1].substring(0,j[k+1][1].length)==j[k+1][1]&&(j[k-1][1]+=j[k+1][1],j[k][1]=j[k][1].substring(j[k+1][1].length)+j[k+1][1],j.splice(k+1,1),P=!0)),k++;P&&x(j)}var y=l;y.INSERT=s,y.DELETE=i,y.EQUAL=o,r.exports=y;function v(j,k){if(k===0)return[o,j];for(var _=0,E=0;E<j.length;E++){var A=j[E];if(A[0]===i||A[0]===o){var T=_+A[1].length;if(k===T)return[E+1,j];if(k<T){j=j.slice();var M=k-_,P=[A[0],A[1].slice(0,M)],R=[A[0],A[1].slice(M)];return j.splice(E,1,P,R),[E+1,j]}else _=T}}throw new Error("cursor_pos is out of bounds!")}function b(j,k){var _=v(j,k),E=_[1],A=_[0],T=E[A],M=E[A+1];if(T==null)return j;if(T[0]!==o)return j;if(M!=null&&T[1]+M[1]===M[1]+T[1])return E.splice(A,2,M,T),N(E,A,2);if(M!=null&&M[1].indexOf(T[1])===0){E.splice(A,2,[M[0],T[1]],[0,T[1]]);var P=M[1].slice(T[1].length);return P.length>0&&E.splice(A+2,0,[M[0],P]),N(E,A,3)}else return j}function w(j){for(var k=!1,_=function(M){return M.charCodeAt(0)>=56320&&M.charCodeAt(0)<=57343},E=function(M){return M.charCodeAt(M.length-1)>=55296&&M.charCodeAt(M.length-1)<=56319},A=2;A<j.length;A+=1)j[A-2][0]===o&&E(j[A-2][1])&&j[A-1][0]===i&&_(j[A-1][1])&&j[A][0]===s&&_(j[A][1])&&(k=!0,j[A-1][1]=j[A-2][1].slice(-1)+j[A-1][1],j[A][1]=j[A-2][1].slice(-1)+j[A][1],j[A-2][1]=j[A-2][1].slice(0,-1));if(!k)return j;for(var T=[],A=0;A<j.length;A+=1)j[A][1].length>0&&T.push(j[A]);return T}function N(j,k,_){for(var E=k+_-1;E>=0&&E>=k-1;E--)if(E+1<j.length){var A=j[E],T=j[E+1];A[0]===T[1]&&j.splice(E,2,[A[0],A[1]+T[1]])}return j}},function(r,n){n=r.exports=typeof Object.keys=="function"?Object.keys:i,n.shim=i;function i(s){var o=[];for(var l in s)o.push(l);return o}},function(r,n){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=r.exports=i?s:o,n.supported=s;function s(l){return Object.prototype.toString.call(l)=="[object Arguments]"}n.unsupported=o;function o(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}},function(r,n){var i=Object.prototype.hasOwnProperty,s="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(s=!1));function l(u,f,d){this.fn=u,this.context=f,this.once=d||!1}function c(){this._events=new o,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],d,p;if(this._eventsCount===0)return f;for(p in d=this._events)i.call(d,p)&&f.push(s?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},c.prototype.listeners=function(f,d){var p=s?s+f:f,m=this._events[p];if(d)return!!m;if(!m)return[];if(m.fn)return[m.fn];for(var x=0,y=m.length,v=new Array(y);x<y;x++)v[x]=m[x].fn;return v},c.prototype.emit=function(f,d,p,m,x,y){var v=s?s+f:f;if(!this._events[v])return!1;var b=this._events[v],w=arguments.length,N,j;if(b.fn){switch(b.once&&this.removeListener(f,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,p),!0;case 4:return b.fn.call(b.context,d,p,m),!0;case 5:return b.fn.call(b.context,d,p,m,x),!0;case 6:return b.fn.call(b.context,d,p,m,x,y),!0}for(j=1,N=new Array(w-1);j<w;j++)N[j-1]=arguments[j];b.fn.apply(b.context,N)}else{var k=b.length,_;for(j=0;j<k;j++)switch(b[j].once&&this.removeListener(f,b[j].fn,void 0,!0),w){case 1:b[j].fn.call(b[j].context);break;case 2:b[j].fn.call(b[j].context,d);break;case 3:b[j].fn.call(b[j].context,d,p);break;case 4:b[j].fn.call(b[j].context,d,p,m);break;default:if(!N)for(_=1,N=new Array(w-1);_<w;_++)N[_-1]=arguments[_];b[j].fn.apply(b[j].context,N)}}return!0},c.prototype.on=function(f,d,p){var m=new l(d,p||this),x=s?s+f:f;return this._events[x]?this._events[x].fn?this._events[x]=[this._events[x],m]:this._events[x].push(m):(this._events[x]=m,this._eventsCount++),this},c.prototype.once=function(f,d,p){var m=new l(d,p||this,!0),x=s?s+f:f;return this._events[x]?this._events[x].fn?this._events[x]=[this._events[x],m]:this._events[x].push(m):(this._events[x]=m,this._eventsCount++),this},c.prototype.removeListener=function(f,d,p,m){var x=s?s+f:f;if(!this._events[x])return this;if(!d)return--this._eventsCount===0?this._events=new o:delete this._events[x],this;var y=this._events[x];if(y.fn)y.fn===d&&(!m||y.once)&&(!p||y.context===p)&&(--this._eventsCount===0?this._events=new o:delete this._events[x]);else{for(var v=0,b=[],w=y.length;v<w;v++)(y[v].fn!==d||m&&!y[v].once||p&&y[v].context!==p)&&b.push(y[v]);b.length?this._events[x]=b.length===1?b[0]:b:--this._eventsCount===0?this._events=new o:delete this._events[x]}return this},c.prototype.removeAllListeners=function(f){var d;return f?(d=s?s+f:f,this._events[d]&&(--this._eventsCount===0?this._events=new o:delete this._events[d])):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=s,c.EventEmitter=c,typeof r<"u"&&(r.exports=c)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},o=function(){function ue(he,we){var Oe=[],be=!0,We=!1,Je=void 0;try{for(var Ye=he[Symbol.iterator](),Ae;!(be=(Ae=Ye.next()).done)&&(Oe.push(Ae.value),!(we&&Oe.length===we));be=!0);}catch(Me){We=!0,Je=Me}finally{try{!be&&Ye.return&&Ye.return()}finally{if(We)throw Je}}return Oe}return function(he,we){if(Array.isArray(he))return he;if(Symbol.iterator in Object(he))return ue(he,we);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function ue(he,we){for(var Oe=0;Oe<we.length;Oe++){var be=we[Oe];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(he,be.key,be)}}return function(he,we,Oe){return we&&ue(he.prototype,we),Oe&&ue(he,Oe),he}}(),c=i(3),u=R(c),f=i(2),d=R(f),p=i(0),m=R(p),x=i(5),y=R(x),v=i(10),b=R(v),w=i(9),N=R(w),j=i(36),k=i(37),_=i(13),E=R(_),A=i(26),T=i(38),M=i(39),P=i(40);function R(ue){return ue&&ue.__esModule?ue:{default:ue}}function L(ue,he,we){return he in ue?Object.defineProperty(ue,he,{value:we,enumerable:!0,configurable:!0,writable:!0}):ue[he]=we,ue}function $(ue,he){if(!(ue instanceof he))throw new TypeError("Cannot call a class as a function")}function F(ue,he){if(!ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return he&&(typeof he=="object"||typeof he=="function")?he:ue}function z(ue,he){if(typeof he!="function"&&he!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof he);ue.prototype=Object.create(he&&he.prototype,{constructor:{value:ue,enumerable:!1,writable:!0,configurable:!0}}),he&&(Object.setPrototypeOf?Object.setPrototypeOf(ue,he):ue.__proto__=he)}var W=(0,b.default)("quill:clipboard"),K="__ql-matcher",q=[[Node.TEXT_NODE,Le],[Node.TEXT_NODE,ie],["br",te],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,ne],[Node.ELEMENT_NODE,ye],[Node.ELEMENT_NODE,J],[Node.ELEMENT_NODE,Te],["li",ve],["b",re.bind(re,"bold")],["i",re.bind(re,"italic")],["style",se]],V=[j.AlignAttribute,T.DirectionAttribute].reduce(function(ue,he){return ue[he.keyName]=he,ue},{}),D=[j.AlignStyle,k.BackgroundStyle,A.ColorStyle,T.DirectionStyle,M.FontStyle,P.SizeStyle].reduce(function(ue,he){return ue[he.keyName]=he,ue},{}),U=function(ue){z(he,ue);function he(we,Oe){$(this,he);var be=F(this,(he.__proto__||Object.getPrototypeOf(he)).call(this,we,Oe));return be.quill.root.addEventListener("paste",be.onPaste.bind(be)),be.container=be.quill.addContainer("ql-clipboard"),be.container.setAttribute("contenteditable",!0),be.container.setAttribute("tabindex",-1),be.matchers=[],q.concat(be.options.matchers).forEach(function(We){var Je=o(We,2),Ye=Je[0],Ae=Je[1];!Oe.matchVisual&&Ae===ye||be.addMatcher(Ye,Ae)}),be}return l(he,[{key:"addMatcher",value:function(Oe,be){this.matchers.push([Oe,be])}},{key:"convert",value:function(Oe){if(typeof Oe=="string")return this.container.innerHTML=Oe.replace(/\>\r?\n +\</g,"><"),this.convert();var be=this.quill.getFormat(this.quill.selection.savedRange.index);if(be[E.default.blotName]){var We=this.container.innerText;return this.container.innerHTML="",new d.default().insert(We,L({},E.default.blotName,be[E.default.blotName]))}var Je=this.prepareMatching(),Ye=o(Je,2),Ae=Ye[0],Me=Ye[1],Re=Y(this.container,Ae,Me);return Q(Re,`
`)&&Re.ops[Re.ops.length-1].attributes==null&&(Re=Re.compose(new d.default().retain(Re.length()-1).delete(1))),W.log("convert",this.container.innerHTML,Re),this.container.innerHTML="",Re}},{key:"dangerouslyPasteHTML",value:function(Oe,be){var We=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof Oe=="string")this.quill.setContents(this.convert(Oe),be),this.quill.setSelection(0,y.default.sources.SILENT);else{var Je=this.convert(be);this.quill.updateContents(new d.default().retain(Oe).concat(Je),We),this.quill.setSelection(Oe+Je.length(),y.default.sources.SILENT)}}},{key:"onPaste",value:function(Oe){var be=this;if(!(Oe.defaultPrevented||!this.quill.isEnabled())){var We=this.quill.getSelection(),Je=new d.default().retain(We.index),Ye=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(y.default.sources.SILENT),setTimeout(function(){Je=Je.concat(be.convert()).delete(We.length),be.quill.updateContents(Je,y.default.sources.USER),be.quill.setSelection(Je.length()-We.length,y.default.sources.SILENT),be.quill.scrollingContainer.scrollTop=Ye,be.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Oe=this,be=[],We=[];return this.matchers.forEach(function(Je){var Ye=o(Je,2),Ae=Ye[0],Me=Ye[1];switch(Ae){case Node.TEXT_NODE:We.push(Me);break;case Node.ELEMENT_NODE:be.push(Me);break;default:[].forEach.call(Oe.container.querySelectorAll(Ae),function(Re){Re[K]=Re[K]||[],Re[K].push(Me)});break}}),[be,We]}}]),he}(N.default);U.DEFAULTS={matchers:[],matchVisual:!0};function G(ue,he,we){return(typeof he>"u"?"undefined":s(he))==="object"?Object.keys(he).reduce(function(Oe,be){return G(Oe,be,he[be])},ue):ue.reduce(function(Oe,be){return be.attributes&&be.attributes[he]?Oe.push(be):Oe.insert(be.insert,(0,u.default)({},L({},he,we),be.attributes))},new d.default)}function ee(ue){if(ue.nodeType!==Node.ELEMENT_NODE)return{};var he="__ql-computed-style";return ue[he]||(ue[he]=window.getComputedStyle(ue))}function Q(ue,he){for(var we="",Oe=ue.ops.length-1;Oe>=0&&we.length<he.length;--Oe){var be=ue.ops[Oe];if(typeof be.insert!="string")break;we=be.insert+we}return we.slice(-1*he.length)===he}function H(ue){if(ue.childNodes.length===0)return!1;var he=ee(ue);return["block","list-item"].indexOf(he.display)>-1}function Y(ue,he,we){return ue.nodeType===ue.TEXT_NODE?we.reduce(function(Oe,be){return be(ue,Oe)},new d.default):ue.nodeType===ue.ELEMENT_NODE?[].reduce.call(ue.childNodes||[],function(Oe,be){var We=Y(be,he,we);return be.nodeType===ue.ELEMENT_NODE&&(We=he.reduce(function(Je,Ye){return Ye(be,Je)},We),We=(be[K]||[]).reduce(function(Je,Ye){return Ye(be,Je)},We)),Oe.concat(We)},new d.default):new d.default}function re(ue,he,we){return G(we,ue,!0)}function J(ue,he){var we=m.default.Attributor.Attribute.keys(ue),Oe=m.default.Attributor.Class.keys(ue),be=m.default.Attributor.Style.keys(ue),We={};return we.concat(Oe).concat(be).forEach(function(Je){var Ye=m.default.query(Je,m.default.Scope.ATTRIBUTE);Ye!=null&&(We[Ye.attrName]=Ye.value(ue),We[Ye.attrName])||(Ye=V[Je],Ye!=null&&(Ye.attrName===Je||Ye.keyName===Je)&&(We[Ye.attrName]=Ye.value(ue)||void 0),Ye=D[Je],Ye!=null&&(Ye.attrName===Je||Ye.keyName===Je)&&(Ye=D[Je],We[Ye.attrName]=Ye.value(ue)||void 0))}),Object.keys(We).length>0&&(he=G(he,We)),he}function ne(ue,he){var we=m.default.query(ue);if(we==null)return he;if(we.prototype instanceof m.default.Embed){var Oe={},be=we.value(ue);be!=null&&(Oe[we.blotName]=be,he=new d.default().insert(Oe,we.formats(ue)))}else typeof we.formats=="function"&&(he=G(he,we.blotName,we.formats(ue)));return he}function te(ue,he){return Q(he,`
`)||he.insert(`
`),he}function se(){return new d.default}function ve(ue,he){var we=m.default.query(ue);if(we==null||we.blotName!=="list-item"||!Q(he,`
`))return he;for(var Oe=-1,be=ue.parentNode;!be.classList.contains("ql-clipboard");)(m.default.query(be)||{}).blotName==="list"&&(Oe+=1),be=be.parentNode;return Oe<=0?he:he.compose(new d.default().retain(he.length()-1).retain(1,{indent:Oe}))}function ie(ue,he){return Q(he,`
`)||(H(ue)||he.length()>0&&ue.nextSibling&&H(ue.nextSibling))&&he.insert(`
`),he}function ye(ue,he){if(H(ue)&&ue.nextElementSibling!=null&&!Q(he,`

`)){var we=ue.offsetHeight+parseFloat(ee(ue).marginTop)+parseFloat(ee(ue).marginBottom);ue.nextElementSibling.offsetTop>ue.offsetTop+we*1.5&&he.insert(`
`)}return he}function Te(ue,he){var we={},Oe=ue.style||{};return Oe.fontStyle&&ee(ue).fontStyle==="italic"&&(we.italic=!0),Oe.fontWeight&&(ee(ue).fontWeight.startsWith("bold")||parseInt(ee(ue).fontWeight)>=700)&&(we.bold=!0),Object.keys(we).length>0&&(he=G(he,we)),parseFloat(Oe.textIndent||0)>0&&(he=new d.default().insert("	").concat(he)),he}function Le(ue,he){var we=ue.data;if(ue.parentNode.tagName==="O:P")return he.insert(we.trim());if(we.trim().length===0&&ue.parentNode.classList.contains("ql-clipboard"))return he;if(!ee(ue.parentNode).whiteSpace.startsWith("pre")){var Oe=function(We,Je){return Je=Je.replace(/[^\u00a0]/g,""),Je.length<1&&We?" ":Je};we=we.replace(/\r\n/g," ").replace(/\n/g," "),we=we.replace(/\s\s+/g,Oe.bind(Oe,!0)),(ue.previousSibling==null&&H(ue.parentNode)||ue.previousSibling!=null&&H(ue.previousSibling))&&(we=we.replace(/^\s+/,Oe.bind(Oe,!1))),(ue.nextSibling==null&&H(ue.parentNode)||ue.nextSibling!=null&&H(ue.nextSibling))&&(we=we.replace(/\s+$/,Oe.bind(Oe,!1)))}return he.insert(we)}n.default=U,n.matchAttributor=J,n.matchBlot=ne,n.matchNewline=ie,n.matchSpacing=ye,n.matchText=Le},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function x(y,v){for(var b=0;b<v.length;b++){var w=v[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,v,b){return v&&x(y.prototype,v),b&&x(y,b),y}}(),o=function x(y,v,b){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,v);if(w===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:x(N,v,b)}else{if("value"in w)return w.value;var j=w.get;return j===void 0?void 0:j.call(b)}},l=i(6),c=u(l);function u(x){return x&&x.__esModule?x:{default:x}}function f(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function d(x,y){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:x}function p(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);x.prototype=Object.create(y&&y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(x,y):x.__proto__=y)}var m=function(x){p(y,x);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,[{key:"optimize",value:function(b){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,b),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),y}(c.default);m.blotName="bold",m.tagName=["STRONG","B"],n.default=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var s=function(){function P(R,L){var $=[],F=!0,z=!1,W=void 0;try{for(var K=R[Symbol.iterator](),q;!(F=(q=K.next()).done)&&($.push(q.value),!(L&&$.length===L));F=!0);}catch(V){z=!0,W=V}finally{try{!F&&K.return&&K.return()}finally{if(z)throw W}}return $}return function(R,L){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return P(R,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function P(R,L){for(var $=0;$<L.length;$++){var F=L[$];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(R,F.key,F)}}return function(R,L,$){return L&&P(R.prototype,L),$&&P(R,$),R}}(),l=i(2),c=b(l),u=i(0),f=b(u),d=i(5),p=b(d),m=i(10),x=b(m),y=i(9),v=b(y);function b(P){return P&&P.__esModule?P:{default:P}}function w(P,R,L){return R in P?Object.defineProperty(P,R,{value:L,enumerable:!0,configurable:!0,writable:!0}):P[R]=L,P}function N(P,R){if(!(P instanceof R))throw new TypeError("Cannot call a class as a function")}function j(P,R){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:P}function k(P,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);P.prototype=Object.create(R&&R.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(P,R):P.__proto__=R)}var _=(0,x.default)("quill:toolbar"),E=function(P){k(R,P);function R(L,$){N(this,R);var F=j(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,L,$));if(Array.isArray(F.options.container)){var z=document.createElement("div");T(z,F.options.container),L.container.parentNode.insertBefore(z,L.container),F.container=z}else typeof F.options.container=="string"?F.container=document.querySelector(F.options.container):F.container=F.options.container;if(!(F.container instanceof HTMLElement)){var W;return W=_.error("Container required for toolbar",F.options),j(F,W)}return F.container.classList.add("ql-toolbar"),F.controls=[],F.handlers={},Object.keys(F.options.handlers).forEach(function(K){F.addHandler(K,F.options.handlers[K])}),[].forEach.call(F.container.querySelectorAll("button, select"),function(K){F.attach(K)}),F.quill.on(p.default.events.EDITOR_CHANGE,function(K,q){K===p.default.events.SELECTION_CHANGE&&F.update(q)}),F.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){var K=F.quill.selection.getRange(),q=s(K,1),V=q[0];F.update(V)}),F}return o(R,[{key:"addHandler",value:function($,F){this.handlers[$]=F}},{key:"attach",value:function($){var F=this,z=[].find.call($.classList,function(K){return K.indexOf("ql-")===0});if(z){if(z=z.slice(3),$.tagName==="BUTTON"&&$.setAttribute("type","button"),this.handlers[z]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[z]==null){_.warn("ignoring attaching to disabled format",z,$);return}if(f.default.query(z)==null){_.warn("ignoring attaching to nonexistent format",z,$);return}}var W=$.tagName==="SELECT"?"change":"click";$.addEventListener(W,function(K){var q=void 0;if($.tagName==="SELECT"){if($.selectedIndex<0)return;var V=$.options[$.selectedIndex];V.hasAttribute("selected")?q=!1:q=V.value||!1}else $.classList.contains("ql-active")?q=!1:q=$.value||!$.hasAttribute("value"),K.preventDefault();F.quill.focus();var D=F.quill.selection.getRange(),U=s(D,1),G=U[0];if(F.handlers[z]!=null)F.handlers[z].call(F,q);else if(f.default.query(z).prototype instanceof f.default.Embed){if(q=prompt("Enter "+z),!q)return;F.quill.updateContents(new c.default().retain(G.index).delete(G.length).insert(w({},z,q)),p.default.sources.USER)}else F.quill.format(z,q,p.default.sources.USER);F.update(G)}),this.controls.push([z,$])}}},{key:"update",value:function($){var F=$==null?{}:this.quill.getFormat($);this.controls.forEach(function(z){var W=s(z,2),K=W[0],q=W[1];if(q.tagName==="SELECT"){var V=void 0;if($==null)V=null;else if(F[K]==null)V=q.querySelector("option[selected]");else if(!Array.isArray(F[K])){var D=F[K];typeof D=="string"&&(D=D.replace(/\"/g,'\\"')),V=q.querySelector('option[value="'+D+'"]')}V==null?(q.value="",q.selectedIndex=-1):V.selected=!0}else if($==null)q.classList.remove("ql-active");else if(q.hasAttribute("value")){var U=F[K]===q.getAttribute("value")||F[K]!=null&&F[K].toString()===q.getAttribute("value")||F[K]==null&&!q.getAttribute("value");q.classList.toggle("ql-active",U)}else q.classList.toggle("ql-active",F[K]!=null)})}}]),R}(v.default);E.DEFAULTS={};function A(P,R,L){var $=document.createElement("button");$.setAttribute("type","button"),$.classList.add("ql-"+R),L!=null&&($.value=L),P.appendChild($)}function T(P,R){Array.isArray(R[0])||(R=[R]),R.forEach(function(L){var $=document.createElement("span");$.classList.add("ql-formats"),L.forEach(function(F){if(typeof F=="string")A($,F);else{var z=Object.keys(F)[0],W=F[z];Array.isArray(W)?M($,z,W):A($,z,W)}}),P.appendChild($)})}function M(P,R,L){var $=document.createElement("select");$.classList.add("ql-"+R),L.forEach(function(F){var z=document.createElement("option");F!==!1?z.setAttribute("value",F):z.setAttribute("selected","selected"),$.appendChild(z)}),P.appendChild($)}E.DEFAULTS={container:null,handlers:{clean:function(){var R=this,L=this.quill.getSelection();if(L!=null)if(L.length==0){var $=this.quill.getFormat();Object.keys($).forEach(function(F){f.default.query(F,f.default.Scope.INLINE)!=null&&R.quill.format(F,!1)})}else this.quill.removeFormat(L,p.default.sources.USER)},direction:function(R){var L=this.quill.getFormat().align;R==="rtl"&&L==null?this.quill.format("align","right",p.default.sources.USER):!R&&L==="right"&&this.quill.format("align",!1,p.default.sources.USER),this.quill.format("direction",R,p.default.sources.USER)},indent:function(R){var L=this.quill.getSelection(),$=this.quill.getFormat(L),F=parseInt($.indent||0);if(R==="+1"||R==="-1"){var z=R==="+1"?1:-1;$.direction==="rtl"&&(z*=-1),this.quill.format("indent",F+z,p.default.sources.USER)}},link:function(R){R===!0&&(R=prompt("Enter link URL:")),this.quill.format("link",R,p.default.sources.USER)},list:function(R){var L=this.quill.getSelection(),$=this.quill.getFormat(L);R==="check"?$.list==="checked"||$.list==="unchecked"?this.quill.format("list",!1,p.default.sources.USER):this.quill.format("list","unchecked",p.default.sources.USER):this.quill.format("list",R,p.default.sources.USER)}}},n.default=E,n.addControls=T},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function x(y,v){for(var b=0;b<v.length;b++){var w=v[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,v,b){return v&&x(y.prototype,v),b&&x(y,b),y}}(),o=function x(y,v,b){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,v);if(w===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:x(N,v,b)}else{if("value"in w)return w.value;var j=w.get;return j===void 0?void 0:j.call(b)}},l=i(28),c=u(l);function u(x){return x&&x.__esModule?x:{default:x}}function f(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function d(x,y){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:x}function p(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);x.prototype=Object.create(y&&y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(x,y):x.__proto__=y)}var m=function(x){p(y,x);function y(v,b){f(this,y);var w=d(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,v));return w.label.innerHTML=b,w.container.classList.add("ql-color-picker"),[].slice.call(w.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(N){N.classList.add("ql-primary")}),w}return s(y,[{key:"buildItem",value:function(b){var w=o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"buildItem",this).call(this,b);return w.style.backgroundColor=b.getAttribute("value")||"",w}},{key:"selectItem",value:function(b,w){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,b,w);var N=this.label.querySelector(".ql-color-label"),j=b&&b.getAttribute("data-value")||"";N&&(N.tagName==="line"?N.style.stroke=j:N.style.fill=j)}}]),y}(c.default);n.default=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function x(y,v){for(var b=0;b<v.length;b++){var w=v[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,v,b){return v&&x(y.prototype,v),b&&x(y,b),y}}(),o=function x(y,v,b){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,v);if(w===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:x(N,v,b)}else{if("value"in w)return w.value;var j=w.get;return j===void 0?void 0:j.call(b)}},l=i(28),c=u(l);function u(x){return x&&x.__esModule?x:{default:x}}function f(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function d(x,y){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:x}function p(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);x.prototype=Object.create(y&&y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(x,y):x.__proto__=y)}var m=function(x){p(y,x);function y(v,b){f(this,y);var w=d(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,v));return w.container.classList.add("ql-icon-picker"),[].forEach.call(w.container.querySelectorAll(".ql-picker-item"),function(N){N.innerHTML=b[N.getAttribute("data-value")||""]}),w.defaultItem=w.container.querySelector(".ql-selected"),w.selectItem(w.defaultItem),w}return s(y,[{key:"selectItem",value:function(b,w){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,b,w),b=b||this.defaultItem,this.label.innerHTML=b.innerHTML}}]),y}(c.default);n.default=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function c(u,f){for(var d=0;d<f.length;d++){var p=f[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}return function(u,f,d){return f&&c(u.prototype,f),d&&c(u,d),u}}();function o(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}var l=function(){function c(u,f){var d=this;o(this,c),this.quill=u,this.boundsContainer=f||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return s(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(f){var d=f.left+f.width/2-this.root.offsetWidth/2,p=f.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=p+"px",this.root.classList.remove("ql-flip");var m=this.boundsContainer.getBoundingClientRect(),x=this.root.getBoundingClientRect(),y=0;if(x.right>m.right&&(y=m.right-x.right,this.root.style.left=d+y+"px"),x.left<m.left&&(y=m.left-x.left,this.root.style.left=d+y+"px"),x.bottom>m.bottom){var v=x.bottom-x.top,b=f.bottom-f.top+v;this.root.style.top=p-b+"px",this.root.classList.add("ql-flip")}return y}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c}();n.default=l},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function M(P,R){var L=[],$=!0,F=!1,z=void 0;try{for(var W=P[Symbol.iterator](),K;!($=(K=W.next()).done)&&(L.push(K.value),!(R&&L.length===R));$=!0);}catch(q){F=!0,z=q}finally{try{!$&&W.return&&W.return()}finally{if(F)throw z}}return L}return function(P,R){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return M(P,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function M(P,R,L){P===null&&(P=Function.prototype);var $=Object.getOwnPropertyDescriptor(P,R);if($===void 0){var F=Object.getPrototypeOf(P);return F===null?void 0:M(F,R,L)}else{if("value"in $)return $.value;var z=$.get;return z===void 0?void 0:z.call(L)}},l=function(){function M(P,R){for(var L=0;L<R.length;L++){var $=R[L];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(P,$.key,$)}}return function(P,R,L){return R&&M(P.prototype,R),L&&M(P,L),P}}(),c=i(3),u=N(c),f=i(8),d=N(f),p=i(43),m=N(p),x=i(27),y=N(x),v=i(15),b=i(41),w=N(b);function N(M){return M&&M.__esModule?M:{default:M}}function j(M,P){if(!(M instanceof P))throw new TypeError("Cannot call a class as a function")}function k(M,P){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:M}function _(M,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);M.prototype=Object.create(P&&P.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(M,P):M.__proto__=P)}var E=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],A=function(M){_(P,M);function P(R,L){j(this,P),L.modules.toolbar!=null&&L.modules.toolbar.container==null&&(L.modules.toolbar.container=E);var $=k(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,R,L));return $.quill.container.classList.add("ql-snow"),$}return l(P,[{key:"extendToolbar",value:function(L){L.container.classList.add("ql-snow"),this.buildButtons([].slice.call(L.container.querySelectorAll("button")),w.default),this.buildPickers([].slice.call(L.container.querySelectorAll("select")),w.default),this.tooltip=new T(this.quill,this.options.bounds),L.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function($,F){L.handlers.link.call(L,!F.format.link)})}}]),P}(m.default);A.DEFAULTS=(0,u.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(P){if(P){var R=this.quill.getSelection();if(R==null||R.length==0)return;var L=this.quill.getText(R);/^\S+@\S+\.\S+$/.test(L)&&L.indexOf("mailto:")!==0&&(L="mailto:"+L);var $=this.quill.theme.tooltip;$.edit("link",L)}else this.quill.format("link",!1)}}}}});var T=function(M){_(P,M);function P(R,L){j(this,P);var $=k(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,R,L));return $.preview=$.root.querySelector("a.ql-preview"),$}return l(P,[{key:"listen",value:function(){var L=this;o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function($){L.root.classList.contains("ql-editing")?L.save():L.edit("link",L.preview.textContent),$.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function($){if(L.linkRange!=null){var F=L.linkRange;L.restoreFocus(),L.quill.formatText(F,"link",!1,d.default.sources.USER),delete L.linkRange}$.preventDefault(),L.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function($,F,z){if($!=null){if($.length===0&&z===d.default.sources.USER){var W=L.quill.scroll.descendant(y.default,$.index),K=s(W,2),q=K[0],V=K[1];if(q!=null){L.linkRange=new v.Range($.index-V,q.length());var D=y.default.formats(q.domNode);L.preview.textContent=D,L.preview.setAttribute("href",D),L.show(),L.position(L.quill.getBounds(L.linkRange));return}}else delete L.linkRange;L.hide()}})}},{key:"show",value:function(){o(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),P}(p.BaseTooltip);T.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=A},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(29),o=be(s),l=i(36),c=i(38),u=i(64),f=i(65),d=be(f),p=i(66),m=be(p),x=i(67),y=be(x),v=i(37),b=i(26),w=i(39),N=i(40),j=i(56),k=be(j),_=i(68),E=be(_),A=i(27),T=be(A),M=i(69),P=be(M),R=i(70),L=be(R),$=i(71),F=be($),z=i(72),W=be(z),K=i(73),q=be(K),V=i(13),D=be(V),U=i(74),G=be(U),ee=i(75),Q=be(ee),H=i(57),Y=be(H),re=i(41),J=be(re),ne=i(28),te=be(ne),se=i(59),ve=be(se),ie=i(60),ye=be(ie),Te=i(61),Le=be(Te),ue=i(108),he=be(ue),we=i(62),Oe=be(we);function be(We){return We&&We.__esModule?We:{default:We}}o.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":v.BackgroundClass,"attributors/class/color":b.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":w.FontClass,"attributors/class/size":N.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":v.BackgroundStyle,"attributors/style/color":b.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":w.FontStyle,"attributors/style/size":N.SizeStyle},!0),o.default.register({"formats/align":l.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":u.IndentClass,"formats/background":v.BackgroundStyle,"formats/color":b.ColorStyle,"formats/font":w.FontClass,"formats/size":N.SizeClass,"formats/blockquote":d.default,"formats/code-block":D.default,"formats/header":m.default,"formats/list":y.default,"formats/bold":k.default,"formats/code":V.Code,"formats/italic":E.default,"formats/link":T.default,"formats/script":P.default,"formats/strike":L.default,"formats/underline":F.default,"formats/image":W.default,"formats/video":q.default,"formats/list/item":x.ListItem,"modules/formula":G.default,"modules/syntax":Q.default,"modules/toolbar":Y.default,"themes/bubble":he.default,"themes/snow":Oe.default,"ui/icons":J.default,"ui/picker":te.default,"ui/icon-picker":ye.default,"ui/color-picker":ve.default,"ui/tooltip":Le.default},!0),n.default=o.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var s=function(){function y(v,b){for(var w=0;w<b.length;w++){var N=b[w];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,b,w){return b&&y(v.prototype,b),w&&y(v,w),v}}(),o=function y(v,b,w){v===null&&(v=Function.prototype);var N=Object.getOwnPropertyDescriptor(v,b);if(N===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,b,w)}else{if("value"in N)return N.value;var k=N.get;return k===void 0?void 0:k.call(w)}},l=i(0),c=u(l);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function p(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var m=function(y){p(v,y);function v(){return f(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"add",value:function(w,N){if(N==="+1"||N==="-1"){var j=this.value(w)||0;N=N==="+1"?j+1:j-1}return N===0?(this.remove(w),!0):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"add",this).call(this,w,N)}},{key:"canAdd",value:function(w,N){return o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,w,N)||o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,w,parseInt(N))}},{key:"value",value:function(w){return parseInt(o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,w))||void 0}}]),v}(c.default.Attributor.Class),x=new m("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=x},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(4),o=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function u(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(){return c(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(o.default);d.blotName="blockquote",d.tagName="blockquote",n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function m(x,y){for(var v=0;v<y.length;v++){var b=y[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(x,b.key,b)}}return function(x,y,v){return y&&m(x.prototype,y),v&&m(x,v),x}}(),o=i(4),l=c(o);function c(m){return m&&m.__esModule?m:{default:m}}function u(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")}function f(m,x){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:m}function d(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);m.prototype=Object.create(x&&x.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(m,x):m.__proto__=x)}var p=function(m){d(x,m);function x(){return u(this,x),f(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return s(x,null,[{key:"formats",value:function(v){return this.tagName.indexOf(v.tagName)+1}}]),x}(l.default);p.blotName="header",p.tagName=["H1","H2","H3","H4","H5","H6"],n.default=p},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var s=function(){function j(k,_){for(var E=0;E<_.length;E++){var A=_[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(k,A.key,A)}}return function(k,_,E){return _&&j(k.prototype,_),E&&j(k,E),k}}(),o=function j(k,_,E){k===null&&(k=Function.prototype);var A=Object.getOwnPropertyDescriptor(k,_);if(A===void 0){var T=Object.getPrototypeOf(k);return T===null?void 0:j(T,_,E)}else{if("value"in A)return A.value;var M=A.get;return M===void 0?void 0:M.call(E)}},l=i(0),c=m(l),u=i(4),f=m(u),d=i(25),p=m(d);function m(j){return j&&j.__esModule?j:{default:j}}function x(j,k,_){return k in j?Object.defineProperty(j,k,{value:_,enumerable:!0,configurable:!0,writable:!0}):j[k]=_,j}function y(j,k){if(!(j instanceof k))throw new TypeError("Cannot call a class as a function")}function v(j,k){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:j}function b(j,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);j.prototype=Object.create(k&&k.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(j,k):j.__proto__=k)}var w=function(j){b(k,j);function k(){return y(this,k),v(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return s(k,[{key:"format",value:function(E,A){E===N.blotName&&!A?this.replaceWith(c.default.create(this.statics.scope)):o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,E,A)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(E,A){return this.parent.isolate(this.offset(this.parent),this.length()),E===this.parent.statics.blotName?(this.parent.replaceWith(E,A),this):(this.parent.unwrap(),o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replaceWith",this).call(this,E,A))}}],[{key:"formats",value:function(E){return E.tagName===this.tagName?void 0:o(k.__proto__||Object.getPrototypeOf(k),"formats",this).call(this,E)}}]),k}(f.default);w.blotName="list-item",w.tagName="LI";var N=function(j){b(k,j),s(k,null,[{key:"create",value:function(E){var A=E==="ordered"?"OL":"UL",T=o(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,A);return(E==="checked"||E==="unchecked")&&T.setAttribute("data-checked",E==="checked"),T}},{key:"formats",value:function(E){if(E.tagName==="OL")return"ordered";if(E.tagName==="UL")return E.hasAttribute("data-checked")?E.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function k(_){y(this,k);var E=v(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,_)),A=function(M){if(M.target.parentNode===_){var P=E.statics.formats(_),R=c.default.find(M.target);P==="checked"?R.format("list","unchecked"):P==="unchecked"&&R.format("list","checked")}};return _.addEventListener("touchstart",A),_.addEventListener("mousedown",A),E}return s(k,[{key:"format",value:function(E,A){this.children.length>0&&this.children.tail.format(E,A)}},{key:"formats",value:function(){return x({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(E,A){if(E instanceof w)o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,E,A);else{var T=A==null?this.length():A.offset(this),M=this.split(T);M.parent.insertBefore(E,M)}}},{key:"optimize",value:function(E){o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,E);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&A.domNode.tagName===this.domNode.tagName&&A.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(A.moveChildren(this),A.remove())}},{key:"replace",value:function(E){if(E.statics.blotName!==this.statics.blotName){var A=c.default.create(this.statics.defaultChild);E.moveChildren(A),this.appendChild(A)}o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replace",this).call(this,E)}}]),k}(p.default);N.blotName="list",N.scope=c.default.Scope.BLOCK_BLOT,N.tagName=["OL","UL"],N.defaultChild="list-item",N.allowedChildren=[w],n.ListItem=w,n.default=N},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(56),o=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function u(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(){return c(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(o.default);d.blotName="italic",d.tagName=["EM","I"],n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function x(y,v){for(var b=0;b<v.length;b++){var w=v[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,v,b){return v&&x(y.prototype,v),b&&x(y,b),y}}(),o=function x(y,v,b){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,v);if(w===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:x(N,v,b)}else{if("value"in w)return w.value;var j=w.get;return j===void 0?void 0:j.call(b)}},l=i(6),c=u(l);function u(x){return x&&x.__esModule?x:{default:x}}function f(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function d(x,y){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:x}function p(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);x.prototype=Object.create(y&&y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(x,y):x.__proto__=y)}var m=function(x){p(y,x);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,null,[{key:"create",value:function(b){return b==="super"?document.createElement("sup"):b==="sub"?document.createElement("sub"):o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,b)}},{key:"formats",value:function(b){if(b.tagName==="SUB")return"sub";if(b.tagName==="SUP")return"super"}}]),y}(c.default);m.blotName="script",m.tagName=["SUB","SUP"],n.default=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(6),o=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function u(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(){return c(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(o.default);d.blotName="strike",d.tagName="S",n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(6),o=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function u(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(){return c(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(o.default);d.blotName="underline",d.tagName="U",n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function v(b,w){for(var N=0;N<w.length;N++){var j=w[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,w,N){return w&&v(b.prototype,w),N&&v(b,N),b}}(),o=function v(b,w,N){b===null&&(b=Function.prototype);var j=Object.getOwnPropertyDescriptor(b,w);if(j===void 0){var k=Object.getPrototypeOf(b);return k===null?void 0:v(k,w,N)}else{if("value"in j)return j.value;var _=j.get;return _===void 0?void 0:_.call(N)}},l=i(0),c=f(l),u=i(27);function f(v){return v&&v.__esModule?v:{default:v}}function d(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function p(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function m(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var x=["alt","height","width"],y=function(v){m(b,v);function b(){return d(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"format",value:function(N,j){x.indexOf(N)>-1?j?this.domNode.setAttribute(N,j):this.domNode.removeAttribute(N):o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,N,j)}}],[{key:"create",value:function(N){var j=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,N);return typeof N=="string"&&j.setAttribute("src",this.sanitize(N)),j}},{key:"formats",value:function(N){return x.reduce(function(j,k){return N.hasAttribute(k)&&(j[k]=N.getAttribute(k)),j},{})}},{key:"match",value:function(N){return/\.(jpe?g|gif|png)$/.test(N)||/^data:image\/.+;base64/.test(N)}},{key:"sanitize",value:function(N){return(0,u.sanitize)(N,["http","https","data"])?N:"//:0"}},{key:"value",value:function(N){return N.getAttribute("src")}}]),b}(c.default.Embed);y.blotName="image",y.tagName="IMG",n.default=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function v(b,w){for(var N=0;N<w.length;N++){var j=w[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,w,N){return w&&v(b.prototype,w),N&&v(b,N),b}}(),o=function v(b,w,N){b===null&&(b=Function.prototype);var j=Object.getOwnPropertyDescriptor(b,w);if(j===void 0){var k=Object.getPrototypeOf(b);return k===null?void 0:v(k,w,N)}else{if("value"in j)return j.value;var _=j.get;return _===void 0?void 0:_.call(N)}},l=i(4),c=i(27),u=f(c);function f(v){return v&&v.__esModule?v:{default:v}}function d(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function p(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function m(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var x=["height","width"],y=function(v){m(b,v);function b(){return d(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"format",value:function(N,j){x.indexOf(N)>-1?j?this.domNode.setAttribute(N,j):this.domNode.removeAttribute(N):o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,N,j)}}],[{key:"create",value:function(N){var j=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,N);return j.setAttribute("frameborder","0"),j.setAttribute("allowfullscreen",!0),j.setAttribute("src",this.sanitize(N)),j}},{key:"formats",value:function(N){return x.reduce(function(j,k){return N.hasAttribute(k)&&(j[k]=N.getAttribute(k)),j},{})}},{key:"sanitize",value:function(N){return u.default.sanitize(N)}},{key:"value",value:function(N){return N.getAttribute("src")}}]),b}(l.BlockEmbed);y.blotName="video",y.className="ql-video",y.tagName="IFRAME",n.default=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var s=function(){function N(j,k){for(var _=0;_<k.length;_++){var E=k[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(j,E.key,E)}}return function(j,k,_){return k&&N(j.prototype,k),_&&N(j,_),j}}(),o=function N(j,k,_){j===null&&(j=Function.prototype);var E=Object.getOwnPropertyDescriptor(j,k);if(E===void 0){var A=Object.getPrototypeOf(j);return A===null?void 0:N(A,k,_)}else{if("value"in E)return E.value;var T=E.get;return T===void 0?void 0:T.call(_)}},l=i(35),c=m(l),u=i(5),f=m(u),d=i(9),p=m(d);function m(N){return N&&N.__esModule?N:{default:N}}function x(N,j){if(!(N instanceof j))throw new TypeError("Cannot call a class as a function")}function y(N,j){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:N}function v(N,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);N.prototype=Object.create(j&&j.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(N,j):N.__proto__=j)}var b=function(N){v(j,N);function j(){return x(this,j),y(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return s(j,null,[{key:"create",value:function(_){var E=o(j.__proto__||Object.getPrototypeOf(j),"create",this).call(this,_);return typeof _=="string"&&(window.katex.render(_,E,{throwOnError:!1,errorColor:"#f00"}),E.setAttribute("data-value",_)),E}},{key:"value",value:function(_){return _.getAttribute("data-value")}}]),j}(c.default);b.blotName="formula",b.className="ql-formula",b.tagName="SPAN";var w=function(N){v(j,N),s(j,null,[{key:"register",value:function(){f.default.register(b,!0)}}]);function j(){x(this,j);var k=y(this,(j.__proto__||Object.getPrototypeOf(j)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return k}return j}(p.default);n.FormulaBlot=b,n.default=w},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var s=function(){function _(E,A){for(var T=0;T<A.length;T++){var M=A[T];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(E,M.key,M)}}return function(E,A,T){return A&&_(E.prototype,A),T&&_(E,T),E}}(),o=function _(E,A,T){E===null&&(E=Function.prototype);var M=Object.getOwnPropertyDescriptor(E,A);if(M===void 0){var P=Object.getPrototypeOf(E);return P===null?void 0:_(P,A,T)}else{if("value"in M)return M.value;var R=M.get;return R===void 0?void 0:R.call(T)}},l=i(0),c=y(l),u=i(5),f=y(u),d=i(9),p=y(d),m=i(13),x=y(m);function y(_){return _&&_.__esModule?_:{default:_}}function v(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function b(_,E){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:_}function w(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(_,E):_.__proto__=E)}var N=function(_){w(E,_);function E(){return v(this,E),b(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return s(E,[{key:"replaceWith",value:function(T){this.domNode.textContent=this.domNode.textContent,this.attach(),o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replaceWith",this).call(this,T)}},{key:"highlight",value:function(T){var M=this.domNode.textContent;this.cachedText!==M&&((M.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=T(M),this.domNode.normalize(),this.attach()),this.cachedText=M)}}]),E}(x.default);N.className="ql-syntax";var j=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),k=function(_){w(E,_),s(E,null,[{key:"register",value:function(){f.default.register(j,!0),f.default.register(N,!0)}}]);function E(A,T){v(this,E);var M=b(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A,T));if(typeof M.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var P=null;return M.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(P),P=setTimeout(function(){M.highlight(),P=null},M.options.interval)}),M.highlight(),M}return s(E,[{key:"highlight",value:function(){var T=this;if(!this.quill.selection.composing){this.quill.update(f.default.sources.USER);var M=this.quill.getSelection();this.quill.scroll.descendants(N).forEach(function(P){P.highlight(T.options.highlight)}),this.quill.update(f.default.sources.SILENT),M!=null&&this.quill.setSelection(M,f.default.sources.SILENT)}}}]),E}(p.default);k.DEFAULTS={highlight:function(){return window.hljs==null?null:function(_){var E=window.hljs.highlightAuto(_);return E.value}}(),interval:1e3},n.CodeBlock=N,n.CodeToken=j,n.default=k},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var s=function E(A,T,M){A===null&&(A=Function.prototype);var P=Object.getOwnPropertyDescriptor(A,T);if(P===void 0){var R=Object.getPrototypeOf(A);return R===null?void 0:E(R,T,M)}else{if("value"in P)return P.value;var L=P.get;return L===void 0?void 0:L.call(M)}},o=function(){function E(A,T){for(var M=0;M<T.length;M++){var P=T[M];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(A,P.key,P)}}return function(A,T,M){return T&&E(A.prototype,T),M&&E(A,M),A}}(),l=i(3),c=v(l),u=i(8),f=v(u),d=i(43),p=v(d),m=i(15),x=i(41),y=v(x);function v(E){return E&&E.__esModule?E:{default:E}}function b(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function w(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:E}function N(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}var j=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],k=function(E){N(A,E);function A(T,M){b(this,A),M.modules.toolbar!=null&&M.modules.toolbar.container==null&&(M.modules.toolbar.container=j);var P=w(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,T,M));return P.quill.container.classList.add("ql-bubble"),P}return o(A,[{key:"extendToolbar",value:function(M){this.tooltip=new _(this.quill,this.options.bounds),this.tooltip.root.appendChild(M.container),this.buildButtons([].slice.call(M.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(M.container.querySelectorAll("select")),y.default)}}]),A}(p.default);k.DEFAULTS=(0,c.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(A){A?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var _=function(E){N(A,E);function A(T,M){b(this,A);var P=w(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,T,M));return P.quill.on(f.default.events.EDITOR_CHANGE,function(R,L,$,F){if(R===f.default.events.SELECTION_CHANGE)if(L!=null&&L.length>0&&F===f.default.sources.USER){P.show(),P.root.style.left="0px",P.root.style.width="",P.root.style.width=P.root.offsetWidth+"px";var z=P.quill.getLines(L.index,L.length);if(z.length===1)P.position(P.quill.getBounds(L));else{var W=z[z.length-1],K=P.quill.getIndex(W),q=Math.min(W.length()-1,L.index+L.length-K),V=P.quill.getBounds(new m.Range(K,q));P.position(V)}}else document.activeElement!==P.textbox&&P.quill.hasFocus()&&P.hide()}),P}return o(A,[{key:"listen",value:function(){var M=this;s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){M.root.classList.remove("ql-editing")}),this.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!M.root.classList.contains("ql-hidden")){var P=M.quill.getSelection();P!=null&&M.position(M.quill.getBounds(P))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(M){var P=s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"position",this).call(this,M),R=this.root.querySelector(".ql-tooltip-arrow");if(R.style.marginLeft="",P===0)return P;R.style.marginLeft=-1*P-R.offsetWidth/2+"px"}}]),A}(d.BaseTooltip);_.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=_,n.default=k},function(r,n,i){r.exports=i(63)}]).default})}(Zg)),Zg.exports}var Vi,F5;function zye(){if(F5)return Vi;F5=1;var t=Vi&&Vi.__extends||function(){var f=function(d,p){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,x){m.__proto__=x}||function(m,x){for(var y in x)x.hasOwnProperty(y)&&(m[y]=x[y])},f(d,p)};return function(d,p){f(d,p);function m(){this.constructor=d}d.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}(),e=Vi&&Vi.__assign||function(){return e=Object.assign||function(f){for(var d,p=1,m=arguments.length;p<m;p++){d=arguments[p];for(var x in d)Object.prototype.hasOwnProperty.call(d,x)&&(f[x]=d[x])}return f},e.apply(this,arguments)},r=Vi&&Vi.__spreadArrays||function(){for(var f=0,d=0,p=arguments.length;d<p;d++)f+=arguments[d].length;for(var m=Array(f),x=0,d=0;d<p;d++)for(var y=arguments[d],v=0,b=y.length;v<b;v++,x++)m[x]=y[v];return m},n=Vi&&Vi.__importDefault||function(f){return f&&f.__esModule?f:{default:f}},i=n(ad()),s=n(xO()),o=n(Iq()),l=n(qye()),c=function(f){t(d,f);function d(p){var m=f.call(this,p)||this;m.dirtyProps=["modules","formats","bounds","theme","children"],m.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],m.state={generation:0},m.selection=null,m.onEditorChange=function(y,v,b,w){var N,j,k,_;y==="text-change"?(j=(N=m).onEditorChangeText)===null||j===void 0||j.call(N,m.editor.root.innerHTML,v,w,m.unprivilegedEditor):y==="selection-change"&&((_=(k=m).onEditorChangeSelection)===null||_===void 0||_.call(k,v,w,m.unprivilegedEditor))};var x=m.isControlled()?p.value:p.defaultValue;return m.value=x??"",m}return d.prototype.validateProps=function(p){var m;if(i.default.Children.count(p.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(i.default.Children.count(p.children)){var x=i.default.Children.only(p.children);if(((m=x)===null||m===void 0?void 0:m.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&p.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},d.prototype.shouldComponentUpdate=function(p,m){var x=this,y;if(this.validateProps(p),!this.editor||this.state.generation!==m.generation)return!0;if("value"in p){var v=this.getEditorContents(),b=(y=p.value,y??"");this.isEqualValue(b,v)||this.setEditorContents(this.editor,b)}return p.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,p.readOnly),r(this.cleanProps,this.dirtyProps).some(function(w){return!o.default(p[w],x.props[w])})},d.prototype.shouldComponentRegenerate=function(p){var m=this;return this.dirtyProps.some(function(x){return!o.default(p[x],m.props[x])})},d.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},d.prototype.componentWillUnmount=function(){this.destroyEditor()},d.prototype.componentDidUpdate=function(p,m){var x=this;if(this.editor&&this.shouldComponentRegenerate(p)){var y=this.editor.getContents(),v=this.editor.getSelection();this.regenerationSnapshot={delta:y,selection:v},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==m.generation){var b=this.regenerationSnapshot,y=b.delta,w=b.selection;delete this.regenerationSnapshot,this.instantiateEditor();var N=this.editor;N.setContents(y),u(function(){return x.setEditorSelection(N,w)})}},d.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},d.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},d.prototype.isControlled=function(){return"value"in this.props},d.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},d.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},d.prototype.createEditor=function(p,m){var x=new l.default(p,m);return m.tabIndex!=null&&this.setEditorTabIndex(x,m.tabIndex),this.hookEditor(x),x},d.prototype.hookEditor=function(p){this.unprivilegedEditor=this.makeUnprivilegedEditor(p),p.on("editor-change",this.onEditorChange)},d.prototype.unhookEditor=function(p){p.off("editor-change",this.onEditorChange)},d.prototype.getEditorContents=function(){return this.value},d.prototype.getEditorSelection=function(){return this.selection},d.prototype.isDelta=function(p){return p&&p.ops},d.prototype.isEqualValue=function(p,m){return this.isDelta(p)&&this.isDelta(m)?o.default(p.ops,m.ops):o.default(p,m)},d.prototype.setEditorContents=function(p,m){var x=this;this.value=m;var y=this.getEditorSelection();typeof m=="string"?p.setContents(p.clipboard.convert(m)):p.setContents(m),u(function(){return x.setEditorSelection(p,y)})},d.prototype.setEditorSelection=function(p,m){if(this.selection=m,m){var x=p.getLength();m.index=Math.max(0,Math.min(m.index,x-1)),m.length=Math.max(0,Math.min(m.length,x-1-m.index)),p.setSelection(m)}},d.prototype.setEditorTabIndex=function(p,m){var x,y;!((y=(x=p)===null||x===void 0?void 0:x.scroll)===null||y===void 0)&&y.domNode&&(p.scroll.domNode.tabIndex=m)},d.prototype.setEditorReadOnly=function(p,m){m?p.disable():p.enable()},d.prototype.makeUnprivilegedEditor=function(p){var m=p;return{getHTML:function(){return m.root.innerHTML},getLength:m.getLength.bind(m),getText:m.getText.bind(m),getContents:m.getContents.bind(m),getSelection:m.getSelection.bind(m),getBounds:m.getBounds.bind(m)}},d.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var p=s.default.findDOMNode(this.editingArea);if(!p)throw new Error("Cannot find element for editing area");if(p.nodeType===3)throw new Error("Editing area cannot be a text node");return p},d.prototype.renderEditingArea=function(){var p=this,m=this.props,x=m.children,y=m.preserveWhitespace,v=this.state.generation,b={key:v,ref:function(w){p.editingArea=w}};return i.default.Children.count(x)?i.default.cloneElement(i.default.Children.only(x),b):y?i.default.createElement("pre",e({},b)):i.default.createElement("div",e({},b))},d.prototype.render=function(){var p;return i.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(p=this.props.className,p??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},d.prototype.onEditorChangeText=function(p,m,x,y){var v,b;if(this.editor){var w=this.isDelta(this.value)?y.getContents():y.getHTML();w!==this.getEditorContents()&&(this.lastDeltaChangeSet=m,this.value=w,(b=(v=this.props).onChange)===null||b===void 0||b.call(v,p,m,x,y))}},d.prototype.onEditorChangeSelection=function(p,m,x){var y,v,b,w,N,j;if(this.editor){var k=this.getEditorSelection(),_=!k&&p,E=k&&!p;o.default(p,k)||(this.selection=p,(v=(y=this.props).onChangeSelection)===null||v===void 0||v.call(y,p,m,x),_?(w=(b=this.props).onFocus)===null||w===void 0||w.call(b,p,m,x):E&&((j=(N=this.props).onBlur)===null||j===void 0||j.call(N,k,m,x)))}},d.prototype.focus=function(){this.editor&&this.editor.focus()},d.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},d.displayName="React Quill",d.Quill=l.default,d.defaultProps={theme:"snow",modules:{},readOnly:!1},d}(i.default.Component);function u(f){Promise.resolve().then(f)}return Vi=c,Vi}var Uye=zye();const Hye=ht(Uye);function q5(){const{id:t}=us(),e=!!t,r=O.useRef(null),[n,i]=O.useState(null),[s,o]=O.useState(""),[l,c]=O.useState(null),[u,f]=O.useState(e),[d,p]=O.useState(!1),[m,x]=O.useState({wordCount:0,characterCount:0,readingTime:0,paragraphs:0});O.useEffect(()=>{e&&t&&y()},[e,t]),O.useEffect(()=>{v(s)},[s]);const y=async()=>{if(t)try{const{data:k,error:_}=await pe.from("documents").select("*").eq("content_item_id",t).maybeSingle();if(_)throw _;k&&(i(k),o(k.content_html||""),c(k.content_json))}catch(k){console.error("Error fetching document:",k)}finally{f(!1)}},v=k=>{const _=k.replace(/<[^>]*>/g,"").trim(),E=_?_.split(/\s+/).length:0,A=_.length,T=Math.ceil(E/200),M=k.split(/<\/p>/gi).length-1||(_?1:0);x({wordCount:E,characterCount:A,readingTime:Math.max(1,T),paragraphs:M})},b=async k=>{try{const _={content_item_id:k,content_html:s,content_json:l,word_count:m.wordCount,reading_time_minutes:m.readingTime};if(n){const{error:E}=await pe.from("documents").update({..._,updated_at:new Date().toISOString()}).eq("id",n.id);if(E)throw E}else{const{error:E}=await pe.from("documents").insert([_]);if(E)throw E}}catch(_){throw console.error("Error saving document data:",_),_}},w=(k,_,E,A)=>{o(k),c(A.getContents())},N={toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]},{size:[]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{align:[]}],["blockquote","code-block"],["link","image","video"],["clean"]]},clipboard:{matchVisual:!1}},j=["header","font","size","bold","italic","underline","strike","color","background","script","list","bullet","indent","align","blockquote","code-block","link","image","video"];return u?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(cr,{size:"lg"}),a.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Loading document..."})]})}):a.jsx(zp,{contentType:"document",isEdit:e,onSaveContent:b,title:"Documents",description:"Rich text documents and guides",color:"#10B981",icon:Ot,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(py,{className:"h-5 w-5 mr-2 text-green-500"}),"Document Statistics"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.wordCount.toLocaleString()}),a.jsx("div",{className:"text-xs text-blue-600 uppercase tracking-wide font-medium",children:"Words"})]}),a.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.characterCount.toLocaleString()}),a.jsx("div",{className:"text-xs text-green-600 uppercase tracking-wide font-medium",children:"Characters"})]}),a.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:m.readingTime}),a.jsx("div",{className:"text-xs text-purple-600 uppercase tracking-wide font-medium",children:"Min Read"})]}),a.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:m.paragraphs}),a.jsx("div",{className:"text-xs text-orange-600 uppercase tracking-wide font-medium",children:"Paragraphs"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[a.jsx(DO,{className:"h-5 w-5 mr-2 text-green-500"}),"Document Content"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:()=>p(!1),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${d?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-green-100 text-green-700"}`,children:[a.jsx(MX,{className:"h-4 w-4 mr-1 inline"}),"Edit"]}),a.jsxs("button",{onClick:()=>p(!0),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${d?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(ii,{className:"h-4 w-4 mr-1 inline"}),"Preview"]})]})]}),d?a.jsx("div",{className:"prose max-w-none",children:a.jsx("div",{className:"min-h-96 p-6 border border-gray-200 rounded-lg bg-gray-50",children:s?a.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:s}}):a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(Ot,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"No content to preview"}),a.jsx("p",{className:"text-sm mt-1",children:"Switch to Edit mode to start writing"})]})})}):a.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:a.jsx(Hye,{ref:r,theme:"snow",value:s,onChange:w,modules:N,formats:j,placeholder:"Start writing your document content here...\\n\\nYou can use the toolbar above to format text, add images, create lists, and more. This editor supports rich text formatting similar to Google Docs or Microsoft Word.",style:{minHeight:"400px",fontSize:"16px",lineHeight:"1.6"}})}),a.jsx("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Ot,{className:"h-4 w-4 text-green-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-green-700",children:[a.jsx("p",{className:"font-medium mb-1",children:"Professional Document Editor"}),a.jsx("p",{className:"text-xs leading-relaxed",children:"This rich-text editor supports all standard formatting options including headers, lists, links, images, and code blocks. Content is automatically saved and can be exported or shared with clients."})]})]})})]}),n&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Document Metadata"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("label",{className:"font-medium text-gray-700",children:"Word Count"}),a.jsxs("p",{className:"text-gray-900",children:[m.wordCount.toLocaleString()," words"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"font-medium text-gray-700",children:"Reading Time"}),a.jsxs("p",{className:"text-gray-900",children:[m.readingTime," minute",m.readingTime!==1?"s":""]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"font-medium text-gray-700",children:"Last Updated"}),a.jsx("p",{className:"text-gray-900",children:new Date(n.updated_at).toLocaleString()})]}),a.jsxs("div",{children:[a.jsx("label",{className:"font-medium text-gray-700",children:"Document ID"}),a.jsx("p",{className:"text-gray-900 font-mono text-xs",children:n.id})]})]})]})]})})}const Wye=["General","Creative Writing","Business","Technical","Educational","Marketing","Customer Support","Data Analysis","Programming","Research","Social Media","Email","Other"];function z5(){const{id:t}=us(),e=!!t,[r,n]=O.useState(null),[i,s]=O.useState(""),[o,l]=O.useState("General"),[c,u]=O.useState(e),[f,d]=O.useState(!1),[p,m]=O.useState({characterCount:0,wordCount:0,lineCount:0,variables:[]});O.useEffect(()=>{e&&t&&x()},[e,t]),O.useEffect(()=>{y(i)},[i]);const x=async()=>{if(t)try{const{data:N,error:j}=await pe.from("prompts").select("*").eq("content_item_id",t).maybeSingle();if(j)throw j;N&&(n(N),s(N.prompt_text||""),l(N.prompt_category||"General"))}catch(N){console.error("Error fetching prompt:",N)}finally{u(!1)}},y=N=>{const j=N.length,k=N.trim()?N.trim().split(/\s+/).length:0,_=N.split(`
`).length,E=N.match(/\{([^}]+)\}|\[([^\]]+)\]/g)||[],A=[...new Set(E.map(T=>T.replace(/[{}\[\]]/g,"")))];m({characterCount:j,wordCount:k,lineCount:_,variables:A})},v=async()=>{try{await navigator.clipboard.writeText(i),d(!0),setTimeout(()=>d(!1),2e3),r&&(await pe.from("prompts").update({usage_count:(r.usage_count||0)+1,last_copied_at:new Date().toISOString()}).eq("id",r.id),n(N=>N?{...N,usage_count:(N.usage_count||0)+1,last_copied_at:new Date().toISOString()}:null))}catch(N){console.error("Failed to copy prompt:",N)}},b=N=>{const j=document.getElementById("promptText");if(j){const k=j.selectionStart,_=j.selectionEnd,E=i.substring(0,k)+`{${N}}`+i.substring(_);s(E),setTimeout(()=>{j.focus(),j.setSelectionRange(k+N.length+2,k+N.length+2)},0)}},w=async N=>{try{const j={content_item_id:N,prompt_text:i,prompt_category:o,usage_count:(r==null?void 0:r.usage_count)||0,last_copied_at:(r==null?void 0:r.last_copied_at)||null};if(r){const{error:k}=await pe.from("prompts").update({...j,updated_at:new Date().toISOString()}).eq("id",r.id);if(k)throw k}else{const{error:k}=await pe.from("prompts").insert([j]);if(k)throw k}}catch(j){throw console.error("Error saving prompt data:",j),j}};return c?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(cr,{size:"lg"}),a.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Loading prompt..."})]})}):a.jsx(zp,{contentType:"prompt",isEdit:e,onSaveContent:w,title:"Prompts",description:"Reusable prompt templates",color:"#8B5CF6",icon:Gr,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(py,{className:"h-5 w-5 mr-2 text-purple-500"}),"Prompt Statistics"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.characterCount.toLocaleString()}),a.jsx("div",{className:"text-xs text-blue-600 uppercase tracking-wide font-medium",children:"Characters"})]}),a.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:p.wordCount.toLocaleString()}),a.jsx("div",{className:"text-xs text-green-600 uppercase tracking-wide font-medium",children:"Words"})]}),a.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:p.lineCount}),a.jsx("div",{className:"text-xs text-purple-600 uppercase tracking-wide font-medium",children:"Lines"})]}),a.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:p.variables.length}),a.jsx("div",{className:"text-xs text-orange-600 uppercase tracking-wide font-medium",children:"Variables"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(Es,{className:"h-5 w-5 mr-2 text-purple-500"}),"Category & Classification"]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Prompt Category"}),a.jsx("select",{id:"category",value:o,onChange:N=>l(N.target.value),className:"w-full md:w-64 px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:Wye.map(N=>a.jsx("option",{value:N,children:N},N))}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Categorize your prompt to make it easier to find and organize"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[a.jsx(Gr,{className:"h-5 w-5 mr-2 text-purple-500"}),"Prompt Content"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:v,disabled:!i.trim(),className:`inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-md transition-all ${f?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700 hover:bg-purple-200"} disabled:opacity-50`,children:f?a.jsxs(a.Fragment,{children:[a.jsx(ln,{className:"h-4 w-4 mr-1"}),"Copied!"]}):a.jsxs(a.Fragment,{children:[a.jsx(gy,{className:"h-4 w-4 mr-1"}),"Copy"]})}),a.jsxs("div",{className:"text-sm text-gray-500",children:[p.characterCount," / ",p.wordCount," words"]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("textarea",{id:"promptText",value:i,onChange:N=>s(N.target.value),rows:12,className:"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 font-mono text-sm leading-relaxed",placeholder:"Enter your prompt template here...\\n\\nYou can use variables like {name}, {topic}, or [variable] to make your prompts reusable.\\n\\nExample:\\nYou are a helpful AI assistant specialized in {field}. Please help me with {task} by providing {output_format} that is {tone} and {length}."}),p.variables.length>0&&a.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[a.jsxs("h4",{className:"text-sm font-medium text-purple-900 mb-2 flex items-center",children:[a.jsx(xM,{className:"h-4 w-4 mr-1"}),"Detected Variables (",p.variables.length,")"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:p.variables.map((N,j)=>a.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-md font-mono",children:[a.jsx(xM,{className:"h-3 w-3 mr-1"}),N]},j))}),a.jsx("p",{className:"text-xs text-purple-700 mt-2",children:"These variables can be replaced when using the prompt"})]}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Quick Variables"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["name","topic","context","tone","format","length","audience","goal"].map(N=>a.jsxs("button",{onClick:()=>b(N),className:"inline-flex items-center px-2 py-1 bg-white border border-gray-200 text-gray-700 text-xs rounded-md hover:bg-gray-100 transition-colors",children:["+ ",N]},N))}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Click to insert common variables into your prompt"})]}),a.jsx("div",{className:"p-4 bg-purple-50 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Gr,{className:"h-4 w-4 text-purple-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-purple-700",children:[a.jsx("p",{className:"font-medium mb-1",children:"Prompt Template Tips"}),a.jsxs("ul",{className:"text-xs space-y-1 list-disc list-inside",children:[a.jsxs("li",{children:["Use ","{variable}"," or [variable] syntax for replaceable parts"]}),a.jsx("li",{children:"Be specific about the desired output format and style"}),a.jsx("li",{children:"Include context and constraints to guide the AI response"}),a.jsx("li",{children:"Test your prompts with different variables to ensure consistency"})]})]})]})})]})]}),r&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(go,{className:"h-5 w-5 mr-2 text-blue-500"}),"Usage Statistics"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.usage_count||0}),a.jsx("div",{className:"text-sm text-blue-600",children:"Times Copied"})]}),a.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-green-600",children:r.last_copied_at?new Date(r.last_copied_at).toLocaleDateString():"Never"}),a.jsx("div",{className:"text-sm text-green-600",children:"Last Copied"})]})]})]}),i.trim()&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Prompt Preview"}),a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border",children:a.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 font-mono leading-relaxed",children:i})}),a.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm text-gray-600",children:[a.jsx("span",{children:"This is how your prompt will appear when copied"}),a.jsxs("button",{onClick:v,className:"inline-flex items-center px-3 py-1 bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 transition-colors",children:[a.jsx(gy,{className:"h-3 w-3 mr-1"}),"Copy Preview"]})]})]})]})})}const Vye=["Zapier","Make (Integromat)","Microsoft Power Automate","IFTTT","n8n","Bubble","Airtable","Google Sheets","Slack","Discord","Trello","Asana","Notion","Monday.com","HubSpot","Salesforce","Gmail","Outlook","Google Drive","Dropbox","AWS Lambda","GitHub Actions","Custom API","Other"];function U5(){const{id:t}=us(),e=!!t,[r,n]=O.useState(null),[i,s]=O.useState(""),[o,l]=O.useState([]),[c,u]=O.useState(""),[f,d]=O.useState(""),[p,m]=O.useState(""),[x,y]=O.useState(e),[v,b]=O.useState(!1),[w,N]=O.useState(null);O.useEffect(()=>{e&&t&&j()},[e,t]),O.useEffect(()=>{i.trim()?k(i.trim()):N(null)},[i]);const j=async()=>{if(t)try{const{data:M,error:P}=await pe.from("automations").select("*").eq("content_item_id",t).maybeSingle();if(P)throw P;M&&(n(M),s(M.automation_url||""),l(M.required_tools||[]),u(M.tool_description||""),d(M.setup_instructions||""))}catch(M){console.error("Error fetching automation:",M)}finally{y(!1)}},k=async M=>{b(!0);try{const P=new URL(M);let R="Unknown";P.hostname.includes("zapier.com")?R="Zapier":P.hostname.includes("make.com")||P.hostname.includes("integromat.com")?R="Make (Integromat)":P.hostname.includes("flow.microsoft.com")?R="Microsoft Power Automate":P.hostname.includes("ifttt.com")?R="IFTTT":P.hostname.includes("n8n.io")?R="n8n":P.hostname.includes("bubble.io")&&(R="Bubble"),N({isValid:!0,isReachable:!0,platform:R,title:`${R} Automation`,description:`Automation workflow hosted on ${R}`})}catch{N({isValid:!1,isReachable:!1})}finally{b(!1)}},_=M=>{const P=M.trim();P&&!o.includes(P)&&l([...o,P]),m("")},E=M=>{l(o.filter(P=>P!==M))},A=M=>{o.includes(M)||l([...o,M])},T=async M=>{try{const P={content_item_id:M,automation_url:i.trim(),required_tools:o,tool_description:c.trim()||null,setup_instructions:f.trim()||null};if(r){const{error:R}=await pe.from("automations").update({...P,updated_at:new Date().toISOString()}).eq("id",r.id);if(R)throw R}else{const{error:R}=await pe.from("automations").insert([P]);if(R)throw R}}catch(P){throw console.error("Error saving automation data:",P),P}};return x?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(cr,{size:"lg"}),a.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Loading automation..."})]})}):a.jsx(zp,{contentType:"automation",isEdit:e,onSaveContent:T,title:"Automations",description:"Process automations and workflows",color:"#F59E0B",icon:Ei,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(n_,{className:"h-5 w-5 mr-2 text-orange-500"}),"Automation Link"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"automationUrl",className:"block text-sm font-medium text-gray-700 mb-2",children:"Automation URL *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"url",id:"automationUrl",value:i,onChange:M=>s(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"https://zapier.com/shared/... or https://make.com/template/...",required:!0}),v&&a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx(cr,{size:"sm"})})]}),w&&a.jsxs("div",{className:`mt-2 p-3 rounded-lg border ${w.isValid?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[w.isValid?a.jsx(ln,{className:"h-4 w-4 text-green-600"}):a.jsx(ql,{className:"h-4 w-4 text-red-600"}),a.jsx("p",{className:`text-sm font-medium ${w.isValid?"text-green-700":"text-red-700"}`,children:w.isValid?`Valid ${w.platform} automation URL`:"Invalid URL format"})]}),w.isValid&&w.platform&&a.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:["Platform: ",a.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:w.platform})]})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Link to the automation template, workflow, or shared automation"})]}),i.trim()&&(w==null?void 0:w.isValid)&&a.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-medium text-orange-900",children:"Automation Preview"}),a.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-orange-600 hover:text-orange-800",children:[a.jsx(Os,{className:"h-4 w-4 mr-1"}),"Open in New Tab"]})]}),a.jsxs("div",{className:"text-sm text-orange-800",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"URL:"})," ",a.jsx("span",{className:"font-mono text-xs break-all",children:i})]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Platform:"})," ",w.platform]})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(KX,{className:"h-5 w-5 mr-2 text-orange-500"}),"Required Tools & Services"]}),a.jsxs("div",{className:"space-y-4",children:[o.length>0&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Selected Tools (",o.length,")"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((M,P)=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-orange-100 text-orange-800 border border-orange-200",children:[M,a.jsx("button",{onClick:()=>E(M),className:"ml-2 text-orange-600 hover:text-orange-800",children:a.jsx($r,{className:"h-3 w-3"})})]},P))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Custom Tool"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:p,onChange:M=>m(M.target.value),onKeyPress:M=>M.key==="Enter"&&_(p),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter tool or service name..."}),a.jsxs("button",{onClick:()=>_(p),disabled:!p.trim()||o.includes(p.trim()),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50",children:[a.jsx(Vt,{className:"h-4 w-4 mr-1"}),"Add"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quick Add - Common Tools"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:Vye.map(M=>a.jsxs("button",{onClick:()=>A(M),disabled:o.includes(M),className:`px-3 py-2 text-sm border rounded-lg transition-colors ${o.includes(M)?"bg-green-50 border-green-200 text-green-700 cursor-default":"bg-white border-gray-200 text-gray-700 hover:bg-gray-50"}`,children:[o.includes(M)?a.jsx(ln,{className:"h-3 w-3 inline mr-1"}):a.jsx(Vt,{className:"h-3 w-3 inline mr-1"}),M]},M))})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(Zn,{className:"h-5 w-5 mr-2 text-blue-500"}),"Tools Description"]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"toolDescription",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description of Required Tools"}),a.jsx("textarea",{id:"toolDescription",rows:4,value:c,onChange:M=>u(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Explain what each tool is used for in this automation...\\n\\nExample:\\n- Zapier: Connects different apps and triggers actions\\n- Google Sheets: Stores and manages data\\n- Slack: Sends notifications to the team"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Help users understand what each tool does in the automation workflow"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(Ei,{className:"h-5 w-5 mr-2 text-orange-500"}),"Setup Instructions"]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"setupInstructions",className:"block text-sm font-medium text-gray-700 mb-2",children:"Step-by-Step Setup Guide"}),a.jsx("textarea",{id:"setupInstructions",rows:8,value:f,onChange:M=>d(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 font-mono text-sm",placeholder:"Provide detailed setup instructions...\\n\\nExample:\\n1. Click the automation link above\\n2. Sign up for a Zapier account if you don't have one\\n3. Connect your Google Sheets and Slack accounts\\n4. Configure the trigger conditions\\n5. Test the automation\\n6. Turn on the automation\\n\\nTroubleshooting:\\n- If connection fails, check API permissions\\n- Make sure all required fields are filled"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Provide clear, step-by-step instructions for setting up this automation"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Automation Summary"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Configuration"}),a.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"URL:"})," ",i?"Configured":"Not set"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Required Tools:"})," ",o.length," tool",o.length!==1?"s":""]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Instructions:"})," ",f.trim()?"Provided":"None"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Tool Description:"})," ",c.trim()?"Provided":"None"]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Tools Required"}),a.jsx("div",{className:"space-y-1",children:o.length>0?a.jsx("ul",{className:"text-sm text-gray-600 space-y-0.5",children:o.map((M,P)=>a.jsxs("li",{className:"flex items-center",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-orange-400 rounded-full mr-2"}),M]},P))}):a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No tools specified"})})]})]})]})]})})}const qf={async getAll(t){let e=pe.from("missions").select("*").order("created_at",{ascending:!1});t!=null&&t.status&&(e=e.eq("status",t.status)),t!=null&&t.difficulty_level&&(e=e.eq("difficulty_level",t.difficulty_level)),t!=null&&t.tags&&t.tags.length>0&&(e=e.overlaps("tags",t.tags));const{data:r,error:n}=await e;if(n)throw n;return r||[]},async getById(t){const{data:e,error:r}=await pe.from("missions").select("*").eq("id",t).maybeSingle();if(r)throw r;return e},async create(t){const{data:e,error:r}=await pe.from("missions").insert(t).select().single();if(r)throw r;return e},async update(t,e){const{data:r,error:n}=await pe.from("missions").update(e).eq("id",t).select().single();if(n)throw n;return r},async delete(t){const{error:e}=await pe.from("missions").delete().eq("id",t);if(e)throw e},async getAssignments(t){const[e,r,n]=await Promise.all([pe.from("mission_client_assignments").select("*").eq("mission_id",t),pe.from("mission_user_assignments").select("*").eq("mission_id",t),pe.from("mission_tag_assignments").select("*").eq("mission_id",t)]);return{clients:e.data||[],users:r.data||[],tags:n.data||[]}},async assignToClients(t,e,r){const n=e.map(s=>({mission_id:t,client_id:s,assigned_by:r})),{error:i}=await pe.from("mission_client_assignments").upsert(n);if(i)throw i}},zf={async getAll(t){let e=pe.from("courses").select("*").order("created_at",{ascending:!1});t!=null&&t.status&&(e=e.eq("status",t.status)),t!=null&&t.difficulty_level&&(e=e.eq("difficulty_level",t.difficulty_level)),t!=null&&t.tags&&t.tags.length>0&&(e=e.overlaps("tags",t.tags));const{data:r,error:n}=await e;if(n)throw n;return r||[]},async getById(t){const{data:e,error:r}=await pe.from("courses").select("*").eq("id",t).maybeSingle();if(r)throw r;return e},async create(t){const{data:e,error:r}=await pe.from("courses").insert(t).select().single();if(r)throw r;return e},async update(t,e){const{data:r,error:n}=await pe.from("courses").update(e).eq("id",t).select().single();if(n)throw n;return r},async delete(t){const{error:e}=await pe.from("courses").delete().eq("id",t);if(e)throw e}},YN={async getByParent(t,e){const r=t==="mission"?"mission_id":"course_id",{data:n,error:i}=await pe.from("pages").select("*").eq(r,e).order("order_index",{ascending:!0});if(i)throw i;return n||[]},async getById(t,e=!1){const{data:r,error:n}=await pe.from("pages").select("*").eq("id",t).maybeSingle();if(n)throw n;if(!r)return null;if(e){const i=await Uf.getByPageId(t);return{...r,blocks:i}}return r},async create(t){const{data:e,error:r}=await pe.from("pages").insert(t).select().single();if(r)throw r;return e},async update(t,e){const{data:r,error:n}=await pe.from("pages").update(e).eq("id",t).select().single();if(n)throw n;return r},async delete(t){const{error:e}=await pe.from("pages").delete().eq("id",t);if(e)throw e},async reorder(t){const e=t.map((r,n)=>({id:r,order_index:n}));for(const r of e)await pe.from("pages").update({order_index:r.order_index}).eq("id",r.id)}},Uf={async getByPageId(t){const{data:e,error:r}=await pe.from("blocks").select("*").eq("page_id",t).eq("is_visible",!0).order("order_index",{ascending:!0});if(r)throw r;return e||[]},async getById(t){const{data:e,error:r}=await pe.from("blocks").select("*").eq("id",t).maybeSingle();if(r)throw r;return e},async create(t){const{data:e,error:r}=await pe.from("blocks").insert(t).select().single();if(r)throw r;return e},async update(t,e){const{data:r,error:n}=await pe.from("blocks").update(e).eq("id",t).select().single();if(n)throw n;return r},async delete(t){const{error:e}=await pe.from("blocks").delete().eq("id",t);if(e)throw e},async reorder(t){const e=t.map((r,n)=>({id:r,order_index:n}));for(const r of e)await pe.from("blocks").update({order_index:r.order_index}).eq("id",r.id)}},H5={async trackProgress(t){const{data:e,error:r}=await pe.functions.invoke("track-user-progress",{body:t});if(r)throw r;return e.data},async getUserProgress(t,e,r){const n=e==="mission"?"mission_id":"course_id",{data:i,error:s}=await pe.from("user_progress").select("*").eq("user_id",t).eq(n,r).order("created_at",{ascending:!1});if(s)throw s;return i||[]}},W5={async getStructure(t,e,r){const{data:n,error:i}=await pe.functions.invoke("page-structure-manager",{body:{parentType:t,parentId:e,includeBlocks:(r==null?void 0:r.includeBlocks)??!1,includeProgress:(r==null?void 0:r.includeProgress)??!1,userId:r==null?void 0:r.userId}});if(i)throw i;return n.data},async bulkCreatePages(t,e,r,n){const{data:i,error:s}=await pe.functions.invoke("page-builder-bulk-create",{body:{pages:r,userId:n,parentId:e,parentType:t}});if(s)throw s;return i.data}};function Kye(){const[t,e]=O.useState([]),[r,n]=O.useState(!1),[i,s]=O.useState(null),o=O.useCallback(async f=>{try{n(!0),s(null);const d=await qf.getAll(f);e(d)}catch(d){s(d instanceof Error?d.message:"Failed to fetch missions")}finally{n(!1)}},[]),l=O.useCallback(async f=>{try{s(null);const d=await qf.create(f);return e(p=>[d,...p]),d}catch(d){throw s(d instanceof Error?d.message:"Failed to create mission"),d}},[]),c=O.useCallback(async(f,d)=>{try{s(null);const p=await qf.update(f,d);return e(m=>m.map(x=>x.id===f?p:x)),p}catch(p){throw s(p instanceof Error?p.message:"Failed to update mission"),p}},[]),u=O.useCallback(async f=>{try{s(null),await qf.delete(f),e(d=>d.filter(p=>p.id!==f))}catch(d){throw s(d instanceof Error?d.message:"Failed to delete mission"),d}},[]);return O.useEffect(()=>{o()},[]),{missions:t,loading:r,error:i,fetchMissions:o,createMission:l,updateMission:c,deleteMission:u}}function Gye(){const[t,e]=O.useState([]),[r,n]=O.useState(!1),[i,s]=O.useState(null),o=O.useCallback(async f=>{try{n(!0),s(null);const d=await zf.getAll(f);e(d)}catch(d){s(d instanceof Error?d.message:"Failed to fetch courses")}finally{n(!1)}},[]),l=O.useCallback(async f=>{try{s(null);const d=await zf.create(f);return e(p=>[d,...p]),d}catch(d){throw s(d instanceof Error?d.message:"Failed to create course"),d}},[]),c=O.useCallback(async(f,d)=>{try{s(null);const p=await zf.update(f,d);return e(m=>m.map(x=>x.id===f?p:x)),p}catch(p){throw s(p instanceof Error?p.message:"Failed to update course"),p}},[]),u=O.useCallback(async f=>{try{s(null),await zf.delete(f),e(d=>d.filter(p=>p.id!==f))}catch(d){throw s(d instanceof Error?d.message:"Failed to delete course"),d}},[]);return O.useEffect(()=>{o()},[]),{courses:t,loading:r,error:i,fetchCourses:o,createCourse:l,updateCourse:c,deleteCourse:u}}function C8(t,e){const{user:r}=Ln(),[n,i]=O.useState(null),[s,o]=O.useState(null),[l,c]=O.useState(null),[u,f]=O.useState(!1),[d,p]=O.useState(!1),[m,x]=O.useState(!1),[y,v]=O.useState(!1),[b,w]=O.useState(null),[N,j]=O.useState(!1),k=O.useCallback(async($=!1)=>{try{v(!0),w(null);const F=await W5.getStructure(t,e,{includeBlocks:!0,includeProgress:$,userId:r==null?void 0:r.id});if(F.pages.length===0&&(r!=null&&r.id)&&!N){console.log("No pages found, auto-creating Page 1 (ONCE ONLY)"),j(!0);try{await new Promise(W=>setTimeout(W,100));const z=await W5.getStructure(t,e,{includeBlocks:!1,includeProgress:!1,userId:r.id});if(z.pages.length===0){console.log("Confirmed no pages exist, creating Page 1");const W=await YN.create({title:"Page 1",description:"",status:"draft",is_locked:!1,[t==="mission"?"mission_id":"course_id"]:e,order_index:0,unlock_conditions:{},page_config:{},created_by:r.id});F.pages=[W],console.log("Page 1 auto-created successfully:",W.id)}else console.log("Pages were created concurrently, using existing pages:",z.pages.length),F.pages=z.pages}catch(z){console.error("Failed to auto-create Page 1:",z)}finally{j(!1)}}i(F),F.pages.length>0&&!s&&(o(F.pages[0]),console.log("Set current page to:",F.pages[0].title))}catch(F){w(F instanceof Error?F.message:"Failed to load page structure")}finally{v(!1),j(!1)}},[t,e,r==null?void 0:r.id,N]),_=O.useCallback(async $=>{try{w(null);const F=await YN.create({...$,status:$.status||"draft",is_locked:$.is_locked||!1,[t==="mission"?"mission_id":"course_id"]:e,order_index:(n==null?void 0:n.pages.length)||0,unlock_conditions:{},page_config:{},created_by:(r==null?void 0:r.id)||""});return await k(),o(F),F}catch(F){throw w(F instanceof Error?F.message:"Failed to create page"),F}},[t,e,n==null?void 0:n.pages.length,r==null?void 0:r.id,k]),E=O.useCallback(async $=>{if(s)try{w(null);const F=await YN.update(s.id,$);return o(F),n&&i({...n,pages:n.pages.map(z=>z.id===s.id?F:z)}),F}catch(F){throw w(F instanceof Error?F.message:"Failed to update page"),F}},[s,n]),A=O.useCallback(async($,F={})=>{var z;if(!(!s||!(r!=null&&r.id)))try{w(null);const W=await Uf.create({page_id:s.id,block_type:$,order_index:((z=s.blocks)==null?void 0:z.length)||0,config:{},style:{},content:F,visibility_conditions:{},is_visible:!0,created_by:r.id}),K=[...s.blocks||[],W];return o({...s,blocks:K}),W}catch(W){throw w(W instanceof Error?W.message:"Failed to create block"),W}},[s,r==null?void 0:r.id]),T=O.useCallback(async($,F)=>{var z;if(s)try{w(null);const W=await Uf.update($,F),K=((z=s.blocks)==null?void 0:z.map(q=>q.id===$?W:q))||[];return o({...s,blocks:K}),(l==null?void 0:l.id)===$&&c(W),W}catch(W){throw w(W instanceof Error?W.message:"Failed to update block"),W}},[s,l]),M=O.useCallback(async $=>{var F;if(s)try{w(null),await Uf.delete($);const z=((F=s.blocks)==null?void 0:F.filter(W=>W.id!==$))||[];o({...s,blocks:z}),(l==null?void 0:l.id)===$&&c(null)}catch(z){throw w(z instanceof Error?z.message:"Failed to delete block"),z}},[s,l]),P=O.useCallback(async $=>{if(s)try{w(null),await Uf.reorder($);const F=$.map((z,W)=>{var q;const K=(q=s.blocks)==null?void 0:q.find(V=>V.id===z);return K?{...K,order_index:W}:null}).filter(Boolean);o({...s,blocks:F})}catch(F){throw w(F instanceof Error?F.message:"Failed to reorder blocks"),F}},[s]),R=O.useCallback($=>{o($),c(null)},[]),L=O.useCallback($=>{n!=null&&n.pages&&n.pages[$]&&R(n.pages[$])},[n==null?void 0:n.pages,R]);return O.useEffect(()=>{e&&k()},[e,k]),{structure:n,currentPage:s,selectedBlock:l,isEditing:u,isDragging:d,previewMode:m,loading:y,error:b,loadStructure:k,createPage:_,updatePage:E,navigateToPage:R,navigateToPageIndex:L,createBlock:A,updateBlock:T,deleteBlock:M,reorderBlocks:P,setSelectedBlock:c,setIsEditing:f,setIsDragging:p,setPreviewMode:x}}function A8(t,e){const{user:r}=Ln(),[n,i]=O.useState([]),[s,o]=O.useState(!1),[l,c]=O.useState(null),u=O.useCallback(async()=>{if(r!=null&&r.id)try{o(!0),c(null);const p=await H5.getUserProgress(r.id,t,e);i(p)}catch(p){c(p instanceof Error?p.message:"Failed to load progress")}finally{o(!1)}},[r==null?void 0:r.id,t,e]),f=O.useCallback(async p=>{if(r!=null&&r.id)try{c(null);const m=await H5.trackProgress({userId:r.id,[t==="mission"?"missionId":"courseId"]:e,...p});return i(x=>[m.progress,...x]),m}catch(m){throw c(m instanceof Error?m.message:"Failed to track progress"),m}},[r==null?void 0:r.id,t,e]),d=O.useMemo(()=>{const p=n.filter(w=>w.progress_type==="page_completed"),m=n.filter(w=>w.progress_type==="block_interacted"),x=n.filter(w=>w.progress_type==="quiz_completed"),y=n.reduce((w,N)=>w+N.time_spent_seconds,0),v=n.length>0?n.reduce((w,N)=>w+N.completion_percentage,0)/n.length:0,b=n.length>0?n.reduce((w,N)=>new Date(N.created_at)>new Date(w.created_at)?N:w):null;return{totalPages:new Set(n.map(w=>w.page_id).filter(Boolean)).size,completedPages:new Set(p.map(w=>w.page_id)).size,totalInteractions:m.length,completedQuizzes:x.length,totalTimeSpent:y,averageCompletion:Math.round(v*100)/100,lastActivity:b}},[n]);return O.useEffect(()=>{u()},[u]),{progress:n,progressMetrics:d,loading:s,error:l,loadProgress:u,trackProgress:f}}function fe({className:t,variant:e="default",size:r="default",children:n,...i}){const s={default:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",ghost:"bg-transparent hover:bg-gray-100 text-gray-700 focus:ring-gray-500",link:"bg-transparent underline text-blue-600 hover:text-blue-700"},o={default:"px-4 py-2 text-sm",sm:"px-3 py-1.5 text-sm",lg:"px-6 py-3 text-base"};return a.jsx("button",{className:ge("inline-flex items-center justify-center rounded-md font-medium transition-colors","focus:outline-none focus:ring-2 focus:ring-offset-2","disabled:opacity-50 disabled:pointer-events-none",s[e],o[r],t),...i,children:n})}const ct=Z.forwardRef(({className:t,...e},r)=>a.jsx("input",{ref:r,className:ge("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm","placeholder:text-gray-400","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","disabled:cursor-not-allowed disabled:opacity-50",t),...e}));ct.displayName="Input";function At({className:t,variant:e="default",children:r,...n}){const i={default:"bg-blue-100 text-blue-800 border-blue-200",secondary:"bg-gray-100 text-gray-800 border-gray-200",destructive:"bg-red-100 text-red-800 border-red-200",outline:"bg-transparent border-gray-300 text-gray-700"};return a.jsx("span",{className:ge("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border",i[e],t),...n,children:r})}function T8({isOpen:t,onClose:e,onConfirm:r,title:n,message:i,confirmText:s="Confirm",cancelText:o="Cancel",variant:l="default",isLoading:c=!1}){const u=async()=>{try{await r()}catch(f){console.error("Confirmation action failed:",f)}};return t?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:c?void 0:e}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${l==="destructive"?"bg-red-100":"bg-yellow-100"}`,children:a.jsx(Pl,{className:`w-5 h-5 ${l==="destructive"?"text-red-600":"text-yellow-600"}`})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n}),a.jsx("p",{className:"text-gray-600",children:i})]})]})}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[a.jsx(fe,{type:"button",variant:"outline",onClick:e,disabled:c,children:o}),a.jsx(fe,{onClick:u,disabled:c,variant:l==="destructive"?"destructive":"default",className:"min-w-[100px]",children:c?a.jsx(i_,{className:"w-4 h-4 animate-spin"}):s})]})]})]}):null}function Yye(){const t=Ti(),{user:e}=Ln(),[r,n]=O.useState("wods"),[i,s]=O.useState(""),[o,l]=O.useState("all"),[c,u]=O.useState("closed"),[f,d]=O.useState(null),[p,m]=O.useState(!1);Z.useEffect(()=>{console.log("Modal state changed to:",c,"Selected item:",(f==null?void 0:f.title)||"none")},[c,f]);const{missions:x,loading:y,error:v,createMission:b,deleteMission:w}=Kye(),{courses:N,loading:j,error:k,createCourse:_,deleteCourse:E}=Gye(),A=r==="wods"?y:j,T=r==="wods"?v:k,P=(r==="wods"?x:N).filter(q=>{const V=q.title.toLowerCase().includes(i.toLowerCase())||(q.description||"").toLowerCase().includes(i.toLowerCase()),D=o==="all"||q.status===o;return V&&D}),R=async()=>{console.log("Create new clicked, creating directly and navigating to builder"),m(!0);try{if(r==="wods"){const q=await b({title:"Untitled WOD",description:"",status:"draft",thumbnail_url:"",estimated_duration_minutes:void 0,difficulty_level:void 0,tags:[],created_by:(e==null?void 0:e.id)||""});console.log("WOD created successfully:",q.id),t(`/training-zone/wods/${q.id}`)}else{const q=await _({title:"Untitled Block",description:"",status:"draft",thumbnail_url:"",estimated_duration_minutes:void 0,difficulty_level:void 0,tags:[],prerequisite_course_ids:[],created_by:(e==null?void 0:e.id)||""});console.log("Block created successfully:",q.id),t(`/training-zone/blocks/${q.id}`)}}catch(q){console.error("Failed to create new item:",q)}finally{m(!1)}},L=q=>{t(r==="wods"?`/training-zone/wods/${q.id}`:`/training-zone/blocks/${q.id}`)},$=q=>{console.log("Edit clicked for:",q.title,"Navigating directly to builder"),t(r==="wods"?`/training-zone/wods/${q.id}`:`/training-zone/blocks/${q.id}`)},F=q=>{console.log("Delete clicked for:",q.title,"Setting modal state to delete"),d(q),u("delete")},z=async()=>{if(!f)return;m(!0);const q=new AbortController,V=setTimeout(()=>{q.abort(),m(!1),console.error("Delete operation timed out")},15e3);try{r==="wods"?await w(f.id):await E(f.id),clearTimeout(V),u("closed"),d(null)}catch(D){clearTimeout(V),console.error("Failed to delete:",D)}finally{m(!1)}},W=q=>{switch(q){case"published":return"default";case"draft":return"secondary";case"archived":return"outline";default:return"secondary"}},K=q=>{switch(q){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return a.jsxs(pr,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Training Zone"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Create and manage WODs (Workouts of the Day), Blocks, and Programs"})]}),a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs(fe,{onClick:R,className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsxs("span",{children:["Create ",r==="wods"?"WOD":"Block"]})]})})]}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsx("button",{onClick:()=>n("wods"),className:ge("py-2 px-1 border-b-2 font-medium text-sm transition-colors",r==="wods"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Bw,{className:"w-4 h-4"}),a.jsx("span",{children:"WODs"}),a.jsx(At,{variant:"outline",className:"ml-1",children:x.length})]})}),a.jsx("button",{onClick:()=>n("blocks"),className:ge("py-2 px-1 border-b-2 font-medium text-sm transition-colors",r==="blocks"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Zn,{className:"w-4 h-4"}),a.jsx("span",{children:"Blocks"}),a.jsx(At,{variant:"outline",className:"ml-1",children:N.length})]})}),a.jsx("button",{onClick:()=>n("programs"),className:ge("py-2 px-1 border-b-2 font-medium text-sm transition-colors",r==="programs"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fl,{className:"w-4 h-4"}),a.jsx("span",{children:"Programs"}),a.jsx(At,{variant:"outline",className:"ml-1",children:"0"})]})})]})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"flex-1 max-w-md",children:a.jsxs("div",{className:"relative",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(ct,{type:"text",placeholder:`Search ${r}...`,value:i,onChange:q=>s(q.target.value),className:"pl-10"})]})}),a.jsxs("select",{value:o,onChange:q=>l(q.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"published",children:"Published"}),a.jsx("option",{value:"archived",children:"Archived"})]})]}),A?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):T?a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:a.jsxs("p",{className:"text-red-800",children:["Error: ",T]})}):P.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:r==="wods"?a.jsx(Bw,{className:"w-12 h-12 mx-auto"}):a.jsx(Zn,{className:"w-12 h-12 mx-auto"})}),a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",r," found"]}),a.jsx("p",{className:"text-gray-500 mb-6",children:i||o!=="all"?`No ${r} match your search criteria.`:`Get started by creating your first ${r==="wods"?"WOD":"block"}.`}),!i&&o==="all"&&a.jsxs(fe,{onClick:R,children:[a.jsx(Vt,{className:"w-4 h-4 mr-2"}),"Create ",r==="wods"?"WOD":"Block"]})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(q=>a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg hover:shadow-lg transition-shadow group relative",children:[a.jsxs("div",{className:"absolute top-4 right-4 flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[a.jsx(fe,{variant:"outline",size:"sm",onClick:V=>{V.stopPropagation(),$(q)},className:"w-8 h-8 p-0",children:a.jsx(yo,{className:"w-3 h-3"})}),a.jsx(fe,{variant:"outline",size:"sm",onClick:V=>{V.stopPropagation(),F(q)},className:"w-8 h-8 p-0 text-red-600 border-red-200 hover:bg-red-50",children:a.jsx(ns,{className:"w-3 h-3"})})]}),a.jsxs("div",{onClick:()=>L(q),className:"p-6 cursor-pointer",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[r==="wods"?a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(Bw,{className:"w-4 h-4 text-blue-600"})}):a.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(Zn,{className:"w-4 h-4 text-green-600"})}),a.jsx(At,{variant:W(q.status),children:q.status})]}),q.thumbnail_url&&a.jsx("img",{src:q.thumbnail_url,alt:"Thumbnail",className:"w-12 h-12 rounded-lg object-cover"})]}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:q.title}),q.description&&a.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:q.description}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[q.difficulty_level&&a.jsx("span",{className:ge("px-2 py-1 rounded-full text-xs font-medium",K(q.difficulty_level)),children:q.difficulty_level}),q.estimated_duration_minutes&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Fl,{className:"w-3 h-3"}),a.jsxs("span",{children:[q.estimated_duration_minutes,"min"]})]})]}),a.jsx("span",{className:"text-xs",children:new Date(q.updated_at).toLocaleDateString()})]})]})]},q.id))})]}),a.jsx(T8,{isOpen:c==="delete",onClose:()=>{u("closed"),d(null)},onConfirm:z,title:`Delete ${r==="wods"?"WOD":"Block"}`,message:`Are you sure you want to delete "${f==null?void 0:f.title}"? This action cannot be undone.`,confirmText:"Delete",variant:"destructive",isLoading:p})]})}const Xye={section_header:{type:"section_header",label:"Section Header",icon:"Heading",category:"foundational",description:"Create section headers with different levels",defaultContent:{title:"Section Title",level:2},defaultConfig:{},defaultStyle:{marginBottom:"1rem"},isInteractive:!1},rich_text:{type:"rich_text",label:"Rich Text",icon:"Type",category:"foundational",description:"Rich text editor with formatting options",defaultContent:{html:"<p>Enter your text here...</p>",text:"Enter your text here..."},defaultConfig:{},defaultStyle:{},isInteractive:!1},image:{type:"image",label:"Image",icon:"Image",category:"foundational",description:"Add images with captions",defaultContent:{src:"",alt:"Image",caption:""},defaultConfig:{},defaultStyle:{},isInteractive:!1},list:{type:"list",label:"List",icon:"List",category:"foundational",description:"Create ordered or unordered lists",defaultContent:{type:"unordered",items:[{id:"1",text:"First item"}]},defaultConfig:{},defaultStyle:{},isInteractive:!1},quote:{type:"quote",label:"Quote",icon:"Quote",category:"foundational",description:"Add inspirational quotes",defaultContent:{text:"Quote text",author:"",source:""},defaultConfig:{},defaultStyle:{},isInteractive:!1},divider:{type:"divider",label:"Divider",icon:"Minus",category:"foundational",description:"Add visual dividers between content",defaultContent:{},defaultConfig:{},defaultStyle:{margin:"2rem 0"},isInteractive:!1},video:{type:"video",label:"Video",icon:"Play",category:"embedded",description:"Embed videos with progress tracking",defaultContent:{url:"",controls:!0,autoplay:!1},defaultConfig:{},defaultStyle:{},isInteractive:!0},agent:{type:"agent",label:"AI Agent",icon:"Bot",category:"embedded",description:"Interactive AI agent conversations",defaultContent:{agent_id:"",agent_name:"AI Assistant",initial_message:"Hello! How can I help you?"},defaultConfig:{},defaultStyle:{},isInteractive:!0},document:{type:"document",label:"Document",icon:"FileText",category:"embedded",description:"Embed documents and guides",defaultContent:{document_id:"",title:"Document",display_mode:"embedded"},defaultConfig:{},defaultStyle:{},isInteractive:!0},prompt:{type:"prompt",label:"Prompt",icon:"MessageSquare",category:"embedded",description:"Reusable prompt templates",defaultContent:{prompt_id:"",title:"Prompt",show_copy_button:!0},defaultConfig:{},defaultStyle:{},isInteractive:!0},automation:{type:"automation",label:"Automation",icon:"Zap",category:"embedded",description:"Embed automation workflows and tools",defaultContent:{automation_id:"",automation_name:"Automation",display_mode:"embedded"},defaultConfig:{},defaultStyle:{},isInteractive:!0},quiz:{type:"quiz",label:"Quiz",icon:"HelpCircle",category:"interactive",description:"Create interactive quizzes",defaultContent:{title:"Quiz",questions:[{id:"1",question:"Sample question?",type:"multiple_choice",options:["Option 1","Option 2"],correct_answer:"Option 1",points:1}]},defaultConfig:{},defaultStyle:{},isInteractive:!0},user_submission:{type:"user_submission",label:"User Submission",icon:"Upload",category:"interactive",description:"Collect user submissions and files",defaultContent:{title:"Submit Your Work",submission_type:"text",instructions:"Please provide your submission below"},defaultConfig:{},defaultStyle:{},isInteractive:!0},accordion:{type:"accordion",label:"Accordion",icon:"ChevronDown",category:"interactive",description:"Collapsible content sections",defaultContent:{items:[{id:"1",title:"Section 1",content:"Content for section 1",is_open_by_default:!1}],allow_multiple_open:!0},defaultConfig:{},defaultStyle:{},isInteractive:!0}};var XN={exports:{}},JN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V5;function Jye(){if(V5)return JN;V5=1;var t=ad();function e(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(d,p){var m=p(),x=n({inst:{value:m,getSnapshot:p}}),y=x[0].inst,v=x[1];return s(function(){y.value=m,y.getSnapshot=p,c(y)&&v({inst:y})},[d,m,p]),i(function(){return c(y)&&v({inst:y}),d(function(){c(y)&&v({inst:y})})},[d]),o(m),m}function c(d){var p=d.getSnapshot;d=d.value;try{var m=p();return!r(d,m)}catch{return!0}}function u(d,p){return p()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return JN.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,JN}var K5;function P8(){return K5||(K5=1,XN.exports=Jye()),XN.exports}var M8=P8();function Hr(t){this.content=t}Hr.prototype={constructor:Hr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,i=n.find(t),s=n.content.slice();return i==-1?s.push(r||t,e):(s[i+1]=e,r&&(s[i]=r)),new Hr(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new Hr(r)},addToStart:function(t,e){return new Hr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new Hr(r)},addBefore:function(t,e,r){var n=this.remove(e),i=n.content.slice(),s=n.find(t);return i.splice(s==-1?i.length:s,0,e,r),new Hr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Hr.from(t),t.size?new Hr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Hr.from(t),t.size?new Hr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Hr.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};Hr.from=function(t){if(t instanceof Hr)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new Hr(e)};function R8(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let i=t.child(n),s=e.child(n);if(i==s){r+=i.nodeSize;continue}if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)r++;return r}if(i.content.size||s.content.size){let o=R8(i.content,s.content,r+1);if(o!=null)return o}r+=i.nodeSize}}function I8(t,e,r,n){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:r,b:n};let o=t.child(--i),l=e.child(--s),c=o.nodeSize;if(o==l){r-=c,n-=c;continue}if(!o.sameMarkup(l))return{a:r,b:n};if(o.isText&&o.text!=l.text){let u=0,f=Math.min(o.text.length,l.text.length);for(;u<f&&o.text[o.text.length-u-1]==l.text[l.text.length-u-1];)u++,r--,n--;return{a:r,b:n}}if(o.content.size||l.content.size){let u=I8(o.content,l.content,r-1,n-1);if(u)return u}r-=c,n-=c}}class Ne{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,i=0,s){for(let o=0,l=0;l<r;o++){let c=this.content[o],u=l+c.nodeSize;if(u>e&&n(c,i+l,s||null,o)!==!1&&c.content.size){let f=l+1;c.nodesBetween(Math.max(0,e-f),Math.min(c.content.size,r-f),n,i+f)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,i){let s="",o=!0;return this.nodesBetween(e,r,(l,c)=>{let u=l.isText?l.text.slice(Math.max(e,c)-c,r-c):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&n&&(o?o=!1:s+=n),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,i=this.content.slice(),s=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Ne(i,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],i=0;if(r>e)for(let s=0,o=0;o<r;s++){let l=this.content[s],c=o+l.nodeSize;c>e&&((o<e||c>r)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,r-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,r-o-1))),n.push(l),i+=l.nodeSize),o=c}return new Ne(n,i)}cutByIndex(e,r){return e==r?Ne.empty:e==0&&r==this.content.length?this:new Ne(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let i=this.content.slice(),s=this.size+r.nodeSize-n.nodeSize;return i[e]=r,new Ne(i,s)}addToStart(e){return new Ne([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ne(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];e(i,n,r),n+=i.nodeSize}}findDiffStart(e,r=0){return R8(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return I8(this,e,r,n)}findIndex(e){if(e==0)return Tg(0,e);if(e==this.size)return Tg(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),s=n+i.nodeSize;if(s>=e)return s==e?Tg(r+1,s):Tg(r,n);n=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return Ne.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ne(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ne.empty;let r,n=0;for(let i=0;i<e.length;i++){let s=e[i];n+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(r||(r=e.slice(0,i)),r[r.length-1]=s.withText(r[r.length-1].text+s.text)):r&&r.push(s)}return new Ne(r||e,n)}static from(e){if(!e)return Ne.empty;if(e instanceof Ne)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ne([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ne.empty=new Ne([],0);const QN={index:0,offset:0};function Tg(t,e){return QN.index=t,QN.offset=e,QN}function bv(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!bv(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!bv(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let Tt=class A2{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))r||(r=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(r||(r=e.slice(0,i)),r.push(this),n=!0),r&&r.push(s)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&bv(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return A2.none;if(e instanceof A2)return[e];let r=e.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};Tt.none=[];class wv extends Error{}class Ie{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=L8(this.content,e+this.openStart,r);return n&&new Ie(n,this.openStart,this.openEnd)}removeBetween(e,r){return new Ie(D8(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return Ie.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ie(Ne.fromJSON(e,r.content),n,i)}static maxOpen(e,r=!0){let n=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild)i++;return new Ie(e,n,i)}}Ie.empty=new Ie(Ne.empty,0,0);function D8(t,e,r){let{index:n,offset:i}=t.findIndex(e),s=t.maybeChild(n),{index:o,offset:l}=t.findIndex(r);if(i==e||s.isText){if(l!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(D8(s.content,e-i-1,r-i-1)))}function L8(t,e,r,n){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return n&&!n.canReplace(i,i,r)?null:t.cut(0,e).append(r).append(t.cut(e));let l=L8(o.content,e-s-1,r,o);return l&&t.replaceChild(i,o.copy(l))}function Qye(t,e,r){if(r.openStart>t.depth)throw new wv("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new wv("Inconsistent open depths");return $8(t,e,r,0)}function $8(t,e,r,n){let i=t.index(n),s=t.node(n);if(i==e.index(n)&&n<t.depth-r.openStart){let o=$8(t,e,r,n+1);return s.copy(s.content.replaceChild(i,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,l=o.content;return Dl(o,l.cut(0,t.parentOffset).append(r.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=Zye(r,t);return Dl(s,F8(t,o,l,e,n))}else return Dl(s,jv(t,e,n))}function B8(t,e){if(!e.type.compatibleContent(t.type))throw new wv("Cannot join "+e.type.name+" onto "+t.type.name)}function T2(t,e,r){let n=t.node(r);return B8(n,e.node(r)),n}function Il(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function ah(t,e,r,n){let i=(e||t).node(r),s=0,o=e?e.index(r):i.childCount;t&&(s=t.index(r),t.depth>r?s++:t.textOffset&&(Il(t.nodeAfter,n),s++));for(let l=s;l<o;l++)Il(i.child(l),n);e&&e.depth==r&&e.textOffset&&Il(e.nodeBefore,n)}function Dl(t,e){return t.type.checkContent(e),t.copy(e)}function F8(t,e,r,n,i){let s=t.depth>i&&T2(t,e,i+1),o=n.depth>i&&T2(r,n,i+1),l=[];return ah(null,t,i,l),s&&o&&e.index(i)==r.index(i)?(B8(s,o),Il(Dl(s,F8(t,e,r,n,i+1)),l)):(s&&Il(Dl(s,jv(t,e,i+1)),l),ah(e,r,i,l),o&&Il(Dl(o,jv(r,n,i+1)),l)),ah(n,null,i,l),new Ne(l)}function jv(t,e,r){let n=[];if(ah(null,t,r,n),t.depth>r){let i=T2(t,e,r+1);Il(Dl(i,jv(t,e,r+1)),n)}return ah(e,null,r,n),new Ne(n)}function Zye(t,e){let r=e.depth-t.openStart,i=e.node(r).copy(t.content);for(let s=r-1;s>=0;s--)i=e.node(s).copy(Ne.from(i));return{start:i.resolveNoCache(t.openStart+r),end:i.resolveNoCache(i.content.size-t.openEnd-r)}}class lp{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(r);return n?e.child(r).cut(n):i}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let s=0;s<e;s++)i+=n.child(s).nodeSize;return i}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return Tt.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),i=e.maybeChild(r);if(!n){let l=n;n=i,i=l}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!i||!n[s].isInSet(i.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new Sv(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,s=r;for(let o=e;;){let{index:l,offset:c}=o.content.findIndex(s),u=s-c;if(n.push(o,l,i+c),!u||(o=o.child(l),o.isText))break;s=u-1,i+=c+1}return new lp(r,n,s)}static resolveCached(e,r){let n=G5.get(e);if(n)for(let s=0;s<n.elts.length;s++){let o=n.elts[s];if(o.pos==r)return o}else G5.set(e,n=new eve);let i=n.elts[n.i]=lp.resolve(e,r);return n.i=(n.i+1)%tve,i}}class eve{constructor(){this.elts=[],this.i=0}}const tve=12,G5=new WeakMap;class Sv{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const rve=Object.create(null);let Na=class P2{constructor(e,r,n,i=Tt.none){this.type=e,this.attrs=r,this.marks=i,this.content=n||Ne.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,i=0){this.content.nodesBetween(e,r,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,i){return this.content.textBetween(e,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&bv(this.attrs,r||e.defaultAttrs||rve)&&Tt.sameSet(this.marks,n||Tt.none)}copy(e=null){return e==this.content?this:new P2(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new P2(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return Ie.empty;let i=this.resolve(e),s=this.resolve(r),o=n?0:i.sharedDepth(r),l=i.start(o),u=i.node(o).content.cut(i.pos-l,s.pos-l);return new Ie(u,i.depth-o,s.depth-o)}replace(e,r,n){return Qye(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(i==e||r.isText)return r;e-=i+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(e){return lp.resolveCached(this,e)}resolveNoCache(e){return lp.resolve(this,e)}rangeHasMark(e,r,n){let i=!1;return r>e&&this.nodesBetween(e,r,s=>(n.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),q8(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=Ne.empty,i=0,s=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,i,s),l=o&&o.matchFragment(this.content,r);if(!l||!l.validEnd)return!1;for(let c=i;c<s;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0}canReplaceWith(e,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(n),o=s&&s.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Tt.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Tt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let i=Ne.fromJSON(e,r.content),s=e.nodeType(r.type).create(r.attrs,i,n);return s.type.checkAttrs(s.attrs),s}};Na.prototype.text=void 0;class Nv extends Na{constructor(e,r,n,i){if(super(e,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):q8(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Nv(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Nv(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function q8(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class Kl{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new nve(e,r);if(n.next==null)return Kl.empty;let i=z8(n);n.next&&n.err("Unexpected trailing text");let s=uve(cve(i));return dve(s,n),s}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let i=this;for(let s=r;i&&s<n;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let i=[this];function s(o,l){let c=o.matchFragment(e,n);if(c&&(!r||c.validEnd))return Ne.from(l.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:f,next:d}=o.next[u];if(!(f.isText||f.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let p=s(d,l.concat(f));if(p)return p}}return null}return s(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:c}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in r)&&(!i.type||c.validEnd)&&(n.push({match:l.contentMatch,type:l,via:i}),r[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let i=0;i<n.next.length;i++)e.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),e.map((n,i)=>{let s=i+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return s}).join(`
`)}}Kl.empty=new Kl(!0);class nve{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function z8(t){let e=[];do e.push(ive(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function ive(t){let e=[];do e.push(sve(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function sve(t){let e=lve(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=ove(t,e);else break;return e}function Y5(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function ove(t,e){let r=Y5(t),n=r;return t.eat(",")&&(t.next!="}"?n=Y5(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function ave(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let i=[];for(let s in r){let o=r[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function lve(t){if(t.eat("(")){let e=z8(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=ave(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function cve(t){let e=[[]];return i(s(t,0),r()),e;function r(){return e.push([])-1}function n(o,l,c){let u={term:c,to:l};return e[o].push(u),u}function i(o,l){o.forEach(c=>c.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((c,u)=>c.concat(s(u,l)),[]);if(o.type=="seq")for(let c=0;;c++){let u=s(o.exprs[c],l);if(c==o.exprs.length-1)return u;i(u,l=r())}else if(o.type=="star"){let c=r();return n(l,c),i(s(o.expr,c),c),[n(c)]}else if(o.type=="plus"){let c=r();return i(s(o.expr,l),c),i(s(o.expr,c),c),[n(c)]}else{if(o.type=="opt")return[n(l)].concat(s(o.expr,l));if(o.type=="range"){let c=l;for(let u=0;u<o.min;u++){let f=r();i(s(o.expr,c),f),c=f}if(o.max==-1)i(s(o.expr,c),c);else for(let u=o.min;u<o.max;u++){let f=r();n(c,f),i(s(o.expr,c),f),c=f}return[n(c)]}else{if(o.type=="name")return[n(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function U8(t,e){return e-t}function X5(t,e){let r=[];return n(e),r.sort(U8);function n(i){let s=t[i];if(s.length==1&&!s[0].term)return n(s[0].to);r.push(i);for(let o=0;o<s.length;o++){let{term:l,to:c}=s[o];!l&&r.indexOf(c)==-1&&n(c)}}}function uve(t){let e=Object.create(null);return r(X5(t,0));function r(n){let i=[];n.forEach(o=>{t[o].forEach(({term:l,to:c})=>{if(!l)return;let u;for(let f=0;f<i.length;f++)i[f][0]==l&&(u=i[f][1]);X5(t,c).forEach(f=>{u||i.push([l,u=[]]),u.indexOf(f)==-1&&u.push(f)})})});let s=e[n.join(",")]=new Kl(n.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(U8);s.next.push({type:i[o][0],next:e[l.join(",")]||r(l)})}return s}}function dve(t,e){for(let r=0,n=[t];r<n.length;r++){let i=n[r],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:c,next:u}=i.next[l];o.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),n.indexOf(u)==-1&&n.push(u)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function H8(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function W8(t,e){let r=Object.create(null);for(let n in t){let i=e&&e[n];if(i===void 0){let s=t[n];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function V8(t,e,r,n){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function K8(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new hve(t,n,e[n]);return r}let J5=class G8{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=K8(e,n.attrs),this.defaultAttrs=H8(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Kl.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:W8(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Na(this,this.computeAttrs(e),Ne.from(r),Tt.setFrom(n))}createChecked(e=null,r,n){return r=Ne.from(r),this.checkContent(r),new Na(this,this.computeAttrs(e),r,Tt.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=Ne.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let i=this.contentMatch.matchFragment(r),s=i&&i.fillBefore(Ne.empty,!0);return s?new Na(this,e,r.append(s),Tt.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){V8(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:Tt.none:e}static compile(e,r){let n=Object.create(null);e.forEach((s,o)=>n[s]=new G8(s,r,o));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function fve(t,e,r){let n=r.split("|");return i=>{let s=i===null?"null":typeof i;if(n.indexOf(s)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${s}`)}}class hve{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?fve(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class mx{constructor(e,r,n,i){this.name=e,this.rank=r,this.schema=n,this.spec=i,this.attrs=K8(e,i.attrs),this.excluded=null;let s=H8(this.attrs);this.instance=s?new Tt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Tt(this,W8(this.attrs,e))}static compile(e,r){let n=Object.create(null),i=0;return e.forEach((s,o)=>n[s]=new mx(s,i++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){V8(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Y8{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in e)r[i]=e[i];r.nodes=Hr.from(e.nodes),r.marks=Hr.from(e.marks||{}),this.nodes=J5.compile(this.spec.nodes,this),this.marks=mx.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=n[o]||(n[o]=Kl.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?Q5(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Q5(this,o.split(" "))}this.nodeFromJSON=i=>Na.fromJSON(this,i),this.markFromJSON=i=>Tt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof J5){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,i)}text(e,r){let n=this.nodes.text;return new Nv(n,n.defaultAttrs,e,Tt.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function Q5(t,e){let r=[];for(let n=0;n<e.length;n++){let i=e[n],s=t.marks[i],o=s;if(s)r.push(s);else for(let l in t.marks){let c=t.marks[l];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&r.push(o=c)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function pve(t){return t.tag!=null}function mve(t){return t.style!=null}class ka{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(pve(i))this.tags.push(i);else if(mve(i)){let s=/[^=]*/.exec(i.style)[0];n.indexOf(s)<0&&n.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,r={}){let n=new e$(this,r,!1);return n.addAll(e,Tt.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new e$(this,r,!0);return n.addAll(e,Tt.none,r.from,r.to),Ie.maxOpen(n.finish())}matchTag(e,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(vve(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||r.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,r,n,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=r))){if(o.getAttrs){let c=o.getAttrs(r);if(c===!1)continue;o.attrs=c||void 0}return o}}}static schemaRules(e){let r=[];function n(i){let s=i.priority==null?50:i.priority,o=0;for(;o<r.length;o++){let l=r[o];if((l.priority==null?50:l.priority)<s)break}r.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{n(o=t$(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{n(o=t$(o)),o.node||o.ignore||o.mark||(o.node=i)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ka(e,ka.schemaRules(e)))}}const X8={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},gve={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},J8={ol:!0,ul:!0},cp=1,M2=2,ey=4;function Z5(t,e,r){return e!=null?(e?cp:0)|(e==="full"?M2:0):t&&t.whitespace=="pre"?cp|M2:r&-5}class Pg{constructor(e,r,n,i,s,o){this.type=e,this.attrs=r,this.marks=n,this.solid=i,this.options=o,this.content=[],this.activeMarks=Tt.none,this.match=s||(o&ey?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(Ne.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(e.type))?(this.match=n,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&cp)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let r=Ne.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(Ne.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!X8.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class e${constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,s,o=Z5(null,r.preserveWhitespace,0)|(n?ey:0);i?s=new Pg(i.type,i.attrs,Tt.none,!0,r.topMatch||i.type.contentMatch,o):n?s=new Pg(null,null,Tt.none,!0,null,o):s=new Pg(e.schema.topNodeType,null,Tt.none,!0,null,o),this.nodes=[s],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,i=this.top,s=i.options&M2?"full":this.localPreserveWS||(i.options&cp)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)s!=="full"?n=n.replace(/\r?\n|\r/g," "):n=n.replace(/\r\n?/g,`
`);else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=e.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),l;J8.hasOwnProperty(o)&&this.parser.normalizeLists&&yve(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,n));e:if(c?c.ignore:gve.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let u,f=this.needsBlock;if(X8.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let d=c&&c.skip?r:this.readStyles(e,r);d&&this.addAll(e,d),u&&this.sync(s),this.needsBlock=f}else{let u=this.readStyles(e,r);u&&this.addElementByRule(e,c,u,c.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=n.getPropertyValue(s);if(o)for(let l=void 0;;){let c=this.parser.matchStyle(s,o,this,l);if(!c)break;if(c.ignore)return null;if(c.clearMark?r=r.filter(u=>!c.clearMark(u)):r=r.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)l=c;else break}}return r}addElementByRule(e,r,n,i){let s,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let c=this.enter(o,r.attrs||null,n,r.preserveWhitespace);c&&(s=!0,n=c)}else{let c=this.parser.schema.marks[r.mark];n=n.concat(c.create(r.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,n,i);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,n,!1));else{let c=e;typeof r.contentElement=="string"?c=e.querySelector(r.contentElement):typeof r.contentElement=="function"?c=r.contentElement(e):r.contentElement&&(c=r.contentElement),this.findAround(e,c,!0),this.addAll(c,n),this.findAround(e,c,!1)}s&&this.sync(l)&&this.open--}addAll(e,r,n,i){let s=n||0;for(let o=n?e.childNodes[n]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,r);this.findAtPoint(e,s)}findPlace(e,r,n){let i,s;for(let o=this.open,l=0;o>=0;o--){let c=this.nodes[o],u=c.findWrapping(e);if(u&&(!i||i.length>u.length+l)&&(i=u,s=c,!u.length))break;if(c.solid){if(n)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)r=this.enterInner(i[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(r=this.enterInner(s,null,r))}let i=this.findPlace(e,r,n);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Tt.none;for(let l of i.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):r$(l.type,e.type))&&(o=l.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,r,n,i){let s=this.findPlace(e.create(r),n,!1);return s&&(s=this.enterInner(e,r,n,!0,i)),s}enterInner(e,r,n,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=Z5(e,s,o.options);o.options&ey&&o.content.length==0&&(l|=ey);let c=Tt.none;return n=n.filter(u=>(o.type?o.type.allowsMarkType(u.type):r$(u.type,e))?(c=u.addToSet(c),!1):!0),this.nodes.push(new Pg(e,r,c,i,null,l)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=cp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)e+=n[i].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(i?0:1),o=(l,c)=>{for(;l>=0;l--){let u=r[l];if(u==""){if(l==r.length-1||l==0)continue;for(;c>=s;c--)if(o(l-1,c))return!0;return!1}else{let f=c>0||c==0&&i?this.nodes[c].type:n&&c>=s?n.node(c-s).type:null;if(!f||f.name!=u&&!f.isInGroup(u))return!1;c--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function yve(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&J8.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function vve(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function t$(t){let e={};for(let r in t)e[r]=t[r];return e}function r$(t,e){let r=e.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let c=0;c<l.edgeCount;c++){let{type:u,next:f}=l.edge(c);if(u==e||s.indexOf(f)<0&&o(f))return!0}};if(o(i.contentMatch))return!0}}class uc{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=ZN(r).createDocumentFragment());let i=n,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,c=0;for(;l<s.length&&c<o.marks.length;){let u=o.marks[c];if(!this.marks[u.type.name]){c++;continue}if(!u.eq(s[l][0])||u.type.spec.spanning===!1)break;l++,c++}for(;l<s.length;)i=s.pop()[1];for(;c<o.marks.length;){let u=o.marks[c++],f=this.serializeMark(u,o.isInline,r);f&&(s.push([u,i]),i.appendChild(f.dom),i=f.contentDOM||f.dom)}}i.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:i}=ty(ZN(r),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,i)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,r);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,r,n={}){let i=this.marks[e.type.name];return i&&ty(ZN(n),i(e,r),null,e.attrs)}static renderSpec(e,r,n=null,i){return ty(e,r,n,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new uc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=n$(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return n$(e.marks)}}function n$(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function ZN(t){return t.document||window.document}const i$=new WeakMap;function xve(t){let e=i$.get(t);return e===void 0&&i$.set(t,e=bve(t)),e}function bve(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(t),e}function ty(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(s=xve(n))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let l,c=r?t.createElementNS(r,i):t.createElement(i),u=e[1],f=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){f=2;for(let d in u)if(u[d]!=null){let p=d.indexOf(" ");p>0?c.setAttributeNS(d.slice(0,p),d.slice(p+1),u[d]):d=="style"&&c.style?c.style.cssText=u[d]:c.setAttribute(d,u[d])}}for(let d=f;d<e.length;d++){let p=e[d];if(p===0){if(d<e.length-1||d>f)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:m,contentDOM:x}=ty(t,p,r,n);if(c.appendChild(m),x){if(l)throw new RangeError("Multiple content holes");l=x}}}return{dom:c,contentDOM:l}}const Q8=65535,Z8=Math.pow(2,16);function wve(t,e){return t+e*Z8}function s$(t){return t&Q8}function jve(t){return(t-(t&Q8))/Z8}const eU=1,tU=2,ry=4,rU=8;class R2{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&rU)>0}get deletedBefore(){return(this.delInfo&(eU|ry))>0}get deletedAfter(){return(this.delInfo&(tU|ry))>0}get deletedAcross(){return(this.delInfo&ry)>0}}class Jn{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&Jn.empty)return Jn.empty}recover(e){let r=0,n=s$(e);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+jve(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?i:0);if(c>e)break;let u=this.ranges[l+s],f=this.ranges[l+o],d=c+u;if(e<=d){let p=u?e==c?-1:e==d?1:r:r,m=c+i+(p<0?0:f);if(n)return m;let x=e==(r<0?c:d)?null:wve(l/3,e-c),y=e==c?tU:e==d?eU:ry;return(r<0?e!=c:e!=d)&&(y|=rU),new R2(m,y,x)}i+=f-u}return n?e+i:new R2(e+i,0,null)}touches(e,r){let n=0,i=s$(r),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?n:0);if(c>e)break;let u=this.ranges[l+s],f=c+u;if(e<=f&&l==i*3)return!0;n+=this.ranges[l+o]-u}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),c=o+(this.inverted?0:s),u=this.ranges[i+r],f=this.ranges[i+n];e(l,l+u,c,c+f),s+=f-u}}invert(){return new Jn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Jn.empty:new Jn(e<0?[0,-e,0]:[0,0,e])}}Jn.empty=new Jn([]);class up{constructor(e,r,n=0,i=e?e.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new up(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let i=e.getMirror(r);this.appendMap(e._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let i=e.getMirror(r);this.appendMap(e._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let e=new up;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(e,r);if(l.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,e=this._maps[c].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return n?e:new R2(e,i,null)}}const ek=Object.create(null);class cn{getMap(){return Jn.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=ek[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in ek)throw new RangeError("Duplicate use of step JSON ID "+e);return ek[e]=r,r.prototype.jsonID=e,r}}class hr{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new hr(e,null)}static fail(e){return new hr(null,e)}static fromReplace(e,r,n,i){try{return hr.ok(e.replace(r,n,i))}catch(s){if(s instanceof wv)return hr.fail(s.message);throw s}}}function UE(t,e,r){let n=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(UE(s.content,e,s))),s.isInline&&(s=e(s,r,i)),n.push(s)}return Ne.fromArray(n)}class va extends cn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new Ie(UE(r.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),r.openStart,r.openEnd);return hr.fromReplace(e,this.from,this.to,s)}invert(){return new es(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new va(r.pos,n.pos,this.mark)}merge(e){return e instanceof va&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new va(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new va(r.from,r.to,e.markFromJSON(r.mark))}}cn.jsonID("addMark",va);class es extends cn{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new Ie(UE(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),r.openStart,r.openEnd);return hr.fromReplace(e,this.from,this.to,n)}invert(){return new va(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new es(r.pos,n.pos,this.mark)}merge(e){return e instanceof es&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new es(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new es(r.from,r.to,e.markFromJSON(r.mark))}}cn.jsonID("removeMark",es);class xa extends cn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return hr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return hr.fromReplace(e,this.pos,this.pos+1,new Ie(Ne.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new xa(this.pos,r.marks[i]);return new xa(this.pos,this.mark)}}return new Gl(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new xa(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new xa(r.pos,e.markFromJSON(r.mark))}}cn.jsonID("addNodeMark",xa);class Gl extends cn{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return hr.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return hr.fromReplace(e,this.pos,this.pos+1,new Ie(Ne.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new xa(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Gl(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Gl(r.pos,e.markFromJSON(r.mark))}}cn.jsonID("removeNodeMark",Gl);class Rr extends cn{constructor(e,r,n,i=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=i}apply(e){return this.structure&&I2(e,this.from,this.to)?hr.fail("Structure replace would overwrite content"):hr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Jn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Rr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new Rr(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Rr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?Ie.empty:new Ie(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Rr(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?Ie.empty:new Ie(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Rr(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Rr(r.from,r.to,Ie.fromJSON(e,r.slice),!!r.structure)}}cn.jsonID("replace",Rr);class Dr extends cn{constructor(e,r,n,i,s,o,l=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(I2(e,this.from,this.gapFrom)||I2(e,this.gapTo,this.to)))return hr.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return hr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?hr.fromReplace(e,this.from,this.to,n):hr.fail("Content does not fit in gap")}getMap(){return new Jn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new Dr(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||s>n.pos?null:new Dr(r.pos,n.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Dr(r.from,r.to,r.gapFrom,r.gapTo,Ie.fromJSON(e,r.slice),r.insert,!!r.structure)}}cn.jsonID("replaceAround",Dr);function I2(t,e,r){let n=t.resolve(e),i=r-e,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Sve(t,e,r,n){let i=[],s=[],o,l;t.doc.nodesBetween(e,r,(c,u,f)=>{if(!c.isInline)return;let d=c.marks;if(!n.isInSet(d)&&f.type.allowsMarkType(n.type)){let p=Math.max(u,e),m=Math.min(u+c.nodeSize,r),x=n.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(x)||(o&&o.to==p&&o.mark.eq(d[y])?o.to=m:i.push(o=new es(p,m,d[y])));l&&l.to==p?l.to=m:s.push(l=new va(p,m,n))}}),i.forEach(c=>t.step(c)),s.forEach(c=>t.step(c))}function Nve(t,e,r,n){let i=[],s=0;t.doc.nodesBetween(e,r,(o,l)=>{if(!o.isInline)return;s++;let c=null;if(n instanceof mx){let u=o.marks,f;for(;f=n.isInSet(u);)(c||(c=[])).push(f),u=f.removeFromSet(u)}else n?n.isInSet(o.marks)&&(c=[n]):c=o.marks;if(c&&c.length){let u=Math.min(l+o.nodeSize,r);for(let f=0;f<c.length;f++){let d=c[f],p;for(let m=0;m<i.length;m++){let x=i[m];x.step==s-1&&d.eq(i[m].style)&&(p=x)}p?(p.to=u,p.step=s):i.push({style:d,from:Math.max(l,e),to:u,step:s})}}}),i.forEach(o=>t.step(new es(o.from,o.to,o.style)))}function HE(t,e,r,n=r.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let c=0;c<s.childCount;c++){let u=s.child(c),f=l+u.nodeSize,d=n.matchType(u.type);if(!d)o.push(new Rr(l,f,Ie.empty));else{n=d;for(let p=0;p<u.marks.length;p++)r.allowsMarkType(u.marks[p].type)||t.step(new es(l,f,u.marks[p]));if(i&&u.isText&&r.whitespace!="pre"){let p,m=/\r?\n|\r/g,x;for(;p=m.exec(u.text);)x||(x=new Ie(Ne.from(r.schema.text(" ",r.allowedMarks(u.marks))),0,0)),o.push(new Rr(l+p.index,l+p.index+p[0].length,x))}}l=f}if(!n.validEnd){let c=n.fillBefore(Ne.empty,!0);t.replace(l,l,new Ie(c,0,0))}for(let c=o.length-1;c>=0;c--)t.step(o[c])}function kve(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function Sd(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth;;--n){let i=t.$from.node(n),s=t.$from.index(n),o=t.$to.indexAfter(n);if(n<t.depth&&i.canReplace(s,o,r))return n;if(n==0||i.type.spec.isolating||!kve(i,s,o))break}return null}function _ve(t,e,r){let{$from:n,$to:i,depth:s}=e,o=n.before(s+1),l=i.after(s+1),c=o,u=l,f=Ne.empty,d=0;for(let x=s,y=!1;x>r;x--)y||n.index(x)>0?(y=!0,f=Ne.from(n.node(x).copy(f)),d++):c--;let p=Ne.empty,m=0;for(let x=s,y=!1;x>r;x--)y||i.after(x+1)<i.end(x)?(y=!0,p=Ne.from(i.node(x).copy(p)),m++):u++;t.step(new Dr(c,u,o,l,new Ie(f.append(p),d,m),f.size-d,!0))}function WE(t,e,r=null,n=t){let i=Ove(t,e),s=i&&Eve(n,e);return s?i.map(o$).concat({type:e,attrs:r}).concat(s.map(o$)):null}function o$(t){return{type:t,attrs:null}}function Ove(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return r.canReplaceWith(n,i,o)?s:null}function Eve(t,e){let{parent:r,startIndex:n,endIndex:i}=t,s=r.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let c=(o.length?o[o.length-1]:e).contentMatch;for(let u=n;c&&u<i;u++)c=c.matchType(r.child(u).type);return!c||!c.validEnd?null:o}function Cve(t,e,r){let n=Ne.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let l=r[o].type.contentMatch.matchFragment(n);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=Ne.from(r[o].type.create(r[o].attrs,n))}let i=e.start,s=e.end;t.step(new Dr(i,s,i,s,new Ie(n,0,0),r.length,!0))}function Ave(t,e,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,r,(o,l)=>{let c=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(n,c)&&Tve(t.doc,t.mapping.slice(s).map(l),n)){let u=null;if(n.schema.linebreakReplacement){let m=n.whitespace=="pre",x=!!n.contentMatch.matchType(n.schema.linebreakReplacement);m&&!x?u=!1:!m&&x&&(u=!0)}u===!1&&iU(t,o,l,s),HE(t,t.mapping.slice(s).map(l,1),n,void 0,u===null);let f=t.mapping.slice(s),d=f.map(l,1),p=f.map(l+o.nodeSize,1);return t.step(new Dr(d,p,d+1,p-1,new Ie(Ne.from(n.create(c,null,o.marks)),0,0),1,!0)),u===!0&&nU(t,o,l,s),!1}})}function nU(t,e,r,n){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let c=t.mapping.slice(n).map(r+1+s+o.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function iU(t,e,r,n){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function Tve(t,e,r){let n=t.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function Pve(t,e,r,n,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");r||(r=s.type);let o=r.create(n,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!r.validContent(s.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new Dr(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Ie(Ne.from(o),0,0),1,!0))}function ho(t,e,r=1,n){let i=t.resolve(e),s=i.depth-r,o=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,f=r-2;u>s;u--,f--){let d=i.node(u),p=i.index(u);if(d.type.spec.isolating)return!1;let m=d.content.cutByIndex(p,d.childCount),x=n&&n[f+1];x&&(m=m.replaceChild(0,x.type.create(x.attrs)));let y=n&&n[f]||d;if(!d.canReplace(p+1,d.childCount)||!y.type.validContent(m))return!1}let l=i.indexAfter(s),c=n&&n[0];return i.node(s).canReplaceWith(l,l,c?c.type:i.node(s+1).type)}function Mve(t,e,r=1,n){let i=t.doc.resolve(e),s=Ne.empty,o=Ne.empty;for(let l=i.depth,c=i.depth-r,u=r-1;l>c;l--,u--){s=Ne.from(i.node(l).copy(s));let f=n&&n[u];o=Ne.from(f?f.type.create(f.attrs,o):i.node(l).copy(o))}t.step(new Rr(e,e,new Ie(s.append(o),r,r),!0))}function Ha(t,e){let r=t.resolve(e),n=r.index();return sU(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function Rve(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==n?t.type.schema.nodes.text:s.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(s.marks))return!1}return r.validEnd}function sU(t,e){return!!(t&&e&&!t.isLeaf&&Rve(t,e))}function gx(t,e,r=-1){let n=t.resolve(e);for(let i=n.depth;;i--){let s,o,l=n.index(i);if(i==n.depth?(s=n.nodeBefore,o=n.nodeAfter):r>0?(s=n.node(i+1),l++,o=n.node(i).maybeChild(l)):(s=n.node(i).maybeChild(l-1),o=n.node(i+1)),s&&!s.isTextblock&&sU(s,o)&&n.node(i).canReplace(l,l+1))return e;if(i==0)break;e=r<0?n.before(i):n.after(i)}}function Ive(t,e,r){let n=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-r),o=s.node().type;if(i&&o.inlineContent){let f=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);f&&!d?n=!1:!f&&d&&(n=!0)}let l=t.steps.length;if(n===!1){let f=t.doc.resolve(e+r);iU(t,f.node(),f.before(),l)}o.inlineContent&&HE(t,e+r-1,o,s.node().contentMatchAt(s.index()),n==null);let c=t.mapping.slice(l),u=c.map(e-r);if(t.step(new Rr(u,c.map(e+r,-1),Ie.empty,!0)),n===!0){let f=t.doc.resolve(u);nU(t,f.node(),f.before(),t.steps.length)}return t}function Dve(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let s=n.index(i);if(n.node(i).canReplaceWith(s,s,r))return n.before(i+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let s=n.indexAfter(i);if(n.node(i).canReplaceWith(s,s,r))return n.after(i+1);if(s<n.node(i).childCount)return null}return null}function oU(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let i=r.content;for(let s=0;s<r.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(r.openStart==0&&r.size?2:1);s++)for(let o=n.depth;o>=0;o--){let l=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,c=n.index(o)+(l>0?1:0),u=n.node(o),f=!1;if(s==1)f=u.canReplace(c,c,i);else{let d=u.contentMatchAt(c).findWrapping(i.firstChild.type);f=d&&u.canReplaceWith(c,c,d[0])}if(f)return l==0?n.pos:l<0?n.before(o+1):n.after(o+1)}return null}function yx(t,e,r=e,n=Ie.empty){if(e==r&&!n.size)return null;let i=t.resolve(e),s=t.resolve(r);return aU(i,s,n)?new Rr(e,r,n):new Lve(i,s,n).fit()}function aU(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class Lve{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=Ne.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Ne.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let s=this.placed,o=n.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let c=new Ie(s,o,l);return e>-1?new Dr(n.pos,e,this.$to.pos,this.$to.end(),c,r):c.size||n.pos!=this.$to.pos?new Rr(n.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let s=r.firstChild;if(r.childCount>1&&(i=0),s.type.spec.isolating&&i<=n){e=n;break}r=s.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let i,s=null;n?(s=tk(this.unplaced.content,n-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:u}=this.frontier[l],f,d=null;if(r==1&&(o?u.matchType(o.type)||(d=u.fillBefore(Ne.from(o),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:l,parent:s,inject:d};if(r==2&&o&&(f=u.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:l,parent:s,wrap:f};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=tk(e,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Ie(e,r+1,Math.max(n,i.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,i=tk(e,r);if(i.childCount<=1&&r>0){let s=e.size-r<=r+i.size;this.unplaced=new Ie(Hf(e,r-1,1),r-1,s?r-1:n)}else this.unplaced=new Ie(Hf(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:i,wrap:s}){for(;this.depth>r;)this.closeFrontierNode();if(s)for(let y=0;y<s.length;y++)this.openFrontierNode(s[y]);let o=this.unplaced,l=n?n.content:o.content,c=o.openStart-e,u=0,f=[],{match:d,type:p}=this.frontier[r];if(i){for(let y=0;y<i.childCount;y++)f.push(i.child(y));d=d.matchFragment(i)}let m=l.size+e-(o.content.size-o.openEnd);for(;u<l.childCount;){let y=l.child(u),v=d.matchType(y.type);if(!v)break;u++,(u>1||c==0||y.content.size)&&(d=v,f.push(lU(y.mark(p.allowedMarks(y.marks)),u==1?c:0,u==l.childCount?m:-1)))}let x=u==l.childCount;x||(m=-1),this.placed=Wf(this.placed,r,Ne.from(f)),this.frontier[r].match=d,x&&m<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,v=l;y<m;y++){let b=v.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),v=b.content}this.unplaced=x?e==0?Ie.empty:new Ie(Hf(o.content,e-1,1),e-1,m<0?o.openEnd:e-1):new Ie(Hf(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!rk(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],s=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=rk(e,r,i,n,s);if(o){for(let l=r-1;l>=0;l--){let{match:c,type:u}=this.frontier[l],f=rk(e,l,u,c,!0);if(!f||f.childCount)continue e}return{depth:r,fit:o,move:s?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=Wf(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let i=e.node(n),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(n));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Wf(this.placed,this.depth,Ne.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(Ne.empty,!0);r.childCount&&(this.placed=Wf(this.placed,this.frontier.length,r))}}function Hf(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(Hf(t.firstChild.content,e-1,r)))}function Wf(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(Wf(t.lastChild.content,e-1,r)))}function tk(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function lU(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,lU(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(Ne.empty,!0)))),t.copy(n)}function rk(t,e,r,n,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!r.compatibleContent(s.type))return null;let l=n.fillBefore(s.content,!0,o);return l&&!$ve(r,s.content,o)?l:null}function $ve(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function Bve(t){return t.spec.defining||t.spec.definingForContent}function Fve(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),s=t.doc.resolve(r);if(aU(i,s,n))return t.step(new Rr(e,r,n));let o=uU(i,t.doc.resolve(r));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let p=i.depth,m=i.pos-1;p>0;p--,m--){let x=i.node(p).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;o.indexOf(p)>-1?l=p:i.before(p)==m&&o.splice(1,0,-p)}let c=o.indexOf(l),u=[],f=n.openStart;for(let p=n.content,m=0;;m++){let x=p.firstChild;if(u.push(x),m==n.openStart)break;p=x.content}for(let p=f-1;p>=0;p--){let m=u[p],x=Bve(m.type);if(x&&!m.sameMarkup(i.node(Math.abs(l)-1)))f=p;else if(x||!m.type.isTextblock)break}for(let p=n.openStart;p>=0;p--){let m=(p+f+1)%(n.openStart+1),x=u[m];if(x)for(let y=0;y<o.length;y++){let v=o[(y+c)%o.length],b=!0;v<0&&(b=!1,v=-v);let w=i.node(v-1),N=i.index(v-1);if(w.canReplaceWith(N,N,x.type,x.marks))return t.replace(i.before(v),b?s.after(v):r,new Ie(cU(n.content,0,n.openStart,m),m,n.openEnd))}}let d=t.steps.length;for(let p=o.length-1;p>=0&&(t.replace(e,r,n),!(t.steps.length>d));p--){let m=o[p];m<0||(e=i.before(m),r=s.after(m))}}function cU(t,e,r,n,i){if(e<r){let s=t.firstChild;t=t.replaceChild(0,s.copy(cU(s.content,e+1,r,n,s)))}if(e>n){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Ne.empty,!0))}return t}function qve(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let i=Dve(t.doc,e,n.type);i!=null&&(e=r=i)}t.replaceRange(e,r,new Ie(Ne.from(n),0,0))}function zve(t,e,r){let n=t.doc.resolve(e),i=t.doc.resolve(r),s=uU(n,i);for(let o=0;o<s.length;o++){let l=s[o],c=o==s.length-1;if(c&&l==0||n.node(l).type.contentMatch.validEnd)return t.delete(n.start(l),i.end(l));if(l>0&&(c||n.node(l-1).canReplace(n.index(l-1),i.indexAfter(l-1))))return t.delete(n.before(l),i.after(l))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&i.end(o)-r!=i.depth-o&&n.start(o-1)==i.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),i.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function uU(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let i=n;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&r.push(i)}return r}class wu extends cn{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return hr.fail("No node at attribute step's position");let n=Object.create(null);for(let s in r.attrs)n[s]=r.attrs[s];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return hr.fromReplace(e,this.pos,this.pos+1,new Ie(Ne.from(i),0,r.isLeaf?0:1))}getMap(){return Jn.empty}invert(e){return new wu(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new wu(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new wu(r.pos,r.attr,r.value)}}cn.jsonID("attr",wu);class dp extends cn{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let i in e.attrs)r[i]=e.attrs[i];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return hr.ok(n)}getMap(){return Jn.empty}invert(e){return new dp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new dp(r.attr,r.value)}}cn.jsonID("docAttr",dp);let ed=class extends Error{};ed=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};ed.prototype=Object.create(Error.prototype);ed.prototype.constructor=ed;ed.prototype.name="TransformError";class dU{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new up}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new ed(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=Ie.empty){let i=yx(this.doc,e,r,n);return i&&this.step(i),this}replaceWith(e,r,n){return this.replace(e,r,new Ie(Ne.from(n),0,0))}delete(e,r){return this.replace(e,r,Ie.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return Fve(this,e,r,n),this}replaceRangeWith(e,r,n){return qve(this,e,r,n),this}deleteRange(e,r){return zve(this,e,r),this}lift(e,r){return _ve(this,e,r),this}join(e,r=1){return Ive(this,e,r),this}wrap(e,r){return Cve(this,e,r),this}setBlockType(e,r=e,n,i=null){return Ave(this,e,r,n,i),this}setNodeMarkup(e,r,n=null,i){return Pve(this,e,r,n,i),this}setNodeAttribute(e,r,n){return this.step(new wu(e,r,n)),this}setDocAttribute(e,r){return this.step(new dp(e,r)),this}addNodeMark(e,r){return this.step(new xa(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof Tt)r.isInSet(n.marks)&&this.step(new Gl(e,r));else{let i=n.marks,s,o=[];for(;s=r.isInSet(i);)o.push(new Gl(e,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(e,r=1,n){return Mve(this,e,r,n),this}addMark(e,r,n){return Sve(this,e,r,n),this}removeMark(e,r,n){return Nve(this,e,r,n),this}clearIncompatible(e,r,n){return HE(this,e,r,n),this}}const nk=Object.create(null);class ot{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new Uve(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=Ie.empty){let n=r.content.lastChild,i=null;for(let l=0;l<r.openEnd;l++)i=n,n=n.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:c,$to:u}=o[l],f=e.mapping.slice(s);e.replaceRange(f.map(c.pos),f.map(u.pos),l?Ie.empty:r),l==0&&c$(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],c=e.mapping.slice(n),u=c.map(o.pos),f=c.map(l.pos);s?e.deleteRange(u,f):(e.replaceRangeWith(u,f,r),c$(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let i=e.parent.inlineContent?new et(e):su(e.node(0),e.parent,e.pos,e.index(),r,n);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=r<0?su(e.node(0),e.node(s),e.before(s+1),e.index(s),r,n):su(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new ri(e.node(0))}static atStart(e){return su(e,e,0,0,1)||new ri(e)}static atEnd(e){return su(e,e,e.content.size,e.childCount,-1)||new ri(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=nk[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in nk)throw new RangeError("Duplicate use of selection JSON ID "+e);return nk[e]=r,r.prototype.jsonID=e,r}getBookmark(){return et.between(this.$anchor,this.$head).getBookmark()}}ot.prototype.visible=!0;class Uve{constructor(e,r){this.$from=e,this.$to=r}}let a$=!1;function l$(t){!a$&&!t.parent.inlineContent&&(a$=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class et extends ot{constructor(e,r=e){l$(e),l$(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return ot.near(n);let i=e.resolve(r.map(this.anchor));return new et(i.parent.inlineContent?i:n,n)}replace(e,r=Ie.empty){if(super.replace(e,r),r==Ie.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof et&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new vx(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new et(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let i=e.resolve(r);return new this(i,n==r?i:e.resolve(n))}static between(e,r,n){let i=e.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let s=ot.findFrom(r,n,!0)||ot.findFrom(r,-n,!0);if(s)r=s.$head;else return ot.near(r,n)}return e.parent.inlineContent||(i==0?e=r:(e=(ot.findFrom(e,-n,!0)||ot.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=i<0&&(e=r))),new et(e,r)}}ot.jsonID("text",et);class vx{constructor(e,r){this.anchor=e,this.head=r}map(e){return new vx(e.map(this.anchor),e.map(this.head))}resolve(e){return et.between(e.resolve(this.anchor),e.resolve(this.head))}}class He extends ot{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),s=e.resolve(i);return n?ot.near(s):new He(s)}content(){return new Ie(Ne.from(this.node),0,0)}eq(e){return e instanceof He&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new VE(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new He(e.resolve(r.anchor))}static create(e,r){return new He(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}He.prototype.visible=!1;ot.jsonID("node",He);class VE{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new vx(n,n):new VE(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&He.isSelectable(n)?new He(r):ot.near(r)}}class ri extends ot{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=Ie.empty){if(r==Ie.empty){e.delete(0,e.doc.content.size);let n=ot.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new ri(e)}map(e){return new ri(e)}eq(e){return e instanceof ri}getBookmark(){return Hve}}ot.jsonID("all",ri);const Hve={map(){return this},resolve(t){return new ri(t)}};function su(t,e,r,n,i,s=!1){if(e.inlineContent)return et.create(t,r);for(let o=n-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&He.isSelectable(l))return He.create(t,r-(i<0?l.nodeSize:0))}else{let c=su(t,l,r+i,i<0?l.childCount:0,i,s);if(c)return c}r+=l.nodeSize*i}return null}function c$(t,e,r){let n=t.steps.length-1;if(n<e)return;let i=t.steps[n];if(!(i instanceof Rr||i instanceof Dr))return;let s=t.mapping.maps[n],o;s.forEach((l,c,u,f)=>{o==null&&(o=f)}),t.setSelection(ot.near(t.doc.resolve(o),r))}const u$=1,d$=2,f$=4;class Wve extends dU{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|u$)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&u$)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=d$,this}ensureMarks(e){return Tt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&d$)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Tt.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let i=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),n=n??r,!e)return this.deleteRange(r,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(r);s=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(e,s)),this.selection.empty||this.setSelection(ot.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=f$,this}get scrolledIntoView(){return(this.updated&f$)>0}}function h$(t,e){return!e||!t?t:t.bind(e)}class Vf{constructor(e,r,n){this.name=e,this.init=h$(r.init,n),this.apply=h$(r.apply,n)}}const Vve=[new Vf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Vf("selection",{init(t,e){return t.selection||ot.atStart(e.doc)},apply(t){return t.selection}}),new Vf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new Vf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class ik{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Vve.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Vf(n.key,n.spec.state,n))})}}class mu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let c=i?i[o].n:0,u=i?i[o].state:this,f=c<r.length&&l.spec.appendTransaction.call(l,c?r.slice(c):r,u,n);if(f&&n.filterTransaction(f,o)){if(f.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:n,n:r.length}:{state:this,n:0})}r.push(f),n=n.applyInner(f),s=!0}i&&(i[o]={state:n,n:r.length})}}if(!s)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new mu(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let s=n[i];r[s.name]=s.apply(e,this[s.name],this,r)}return r}get tr(){return new Wve(this)}static create(e){let r=new ik(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new mu(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(e,n);return n}reconfigure(e){let r=new ik(this.schema,e.plugins),n=r.fields,i=new mu(r);for(let s=0;s<n.length;s++){let o=n[s].name;i[o]=this.hasOwnProperty(o)?this[o]:n[s].init(e,i)}return i}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],s=i.spec.state;s&&s.toJSON&&(r[n]=s.toJSON.call(i,this[i.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new ik(e.schema,e.plugins),s=new mu(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Na.fromJSON(e.schema,r.doc);else if(o.name=="selection")s.selection=ot.fromJSON(s.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(s.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let l in n){let c=n[l],u=c.spec.state;if(c.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(r,l)){s[o.name]=u.fromJSON.call(c,e,r[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function fU(t,e,r){for(let n in t){let i=t[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=fU(i,e,{})),r[n]=i}return r}class nr{constructor(e){this.spec=e,this.props={},e.props&&fU(e.props,this,this.props),this.key=e.key?e.key.key:hU("plugin")}getState(e){return e[this.key]}}const sk=Object.create(null);function hU(t){return t in sk?t+"$"+ ++sk[t]:(sk[t]=0,t+"$")}class Fr{constructor(e="key"){this.key=hU(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Wr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},td=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let D2=null;const no=function(t,e,r){let n=D2||(D2=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},Kve=function(){D2=null},Yl=function(t,e,r,n){return r&&(p$(t,e,r,n,-1)||p$(t,e,r,n,1))},Gve=/^(img|br|input|textarea|hr)$/i;function p$(t,e,r,n,i){for(var s;;){if(t==r&&e==n)return!0;if(e==(i<0?0:ki(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Hp(t)||Gve.test(t.nodeName)||t.contentEditable=="false")return!1;e=Wr(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?ki(t):0}else return!1}}function ki(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Yve(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=ki(t)}else if(t.parentNode&&!Hp(t))e=Wr(t),t=t.parentNode;else return null}}function Xve(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Hp(t))e=Wr(t)+1,t=t.parentNode;else return null}}function Jve(t,e,r){for(let n=e==0,i=e==ki(t);n||i;){if(t==r)return!0;let s=Wr(t);if(t=t.parentNode,!t)return!1;n=n&&s==0,i=i&&s==ki(t)}}function Hp(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const xx=function(t){return t.focusNode&&Yl(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Sl(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function Qve(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Zve(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(ki(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(ki(n.startContainer),n.startOffset)}}}const Ts=typeof navigator<"u"?navigator:null,m$=typeof document<"u"?document:null,Wa=Ts&&Ts.userAgent||"",L2=/Edge\/(\d+)/.exec(Wa),pU=/MSIE \d/.exec(Wa),$2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Wa),Rn=!!(pU||$2||L2),_a=pU?document.documentMode:$2?+$2[1]:L2?+L2[1]:0,is=!Rn&&/gecko\/(\d+)/i.test(Wa);is&&+(/Firefox\/(\d+)/.exec(Wa)||[0,0])[1];const B2=!Rn&&/Chrome\/(\d+)/.exec(Wa),an=!!B2,mU=B2?+B2[1]:0,bn=!Rn&&!!Ts&&/Apple Computer/.test(Ts.vendor),rd=bn&&(/Mobile\/\w+/.test(Wa)||!!Ts&&Ts.maxTouchPoints>2),ji=rd||(Ts?/Mac/.test(Ts.platform):!1),e0e=Ts?/Win/.test(Ts.platform):!1,ao=/Android \d/.test(Wa),Wp=!!m$&&"webkitFontSmoothing"in m$.documentElement.style,t0e=Wp?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function r0e(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Xs(t,e){return typeof t=="number"?t:t[e]}function n0e(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function g$(t,e,r){let n=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=td(o);continue}let l=o,c=l==s.body,u=c?r0e(s):n0e(l),f=0,d=0;if(e.top<u.top+Xs(n,"top")?d=-(u.top-e.top+Xs(i,"top")):e.bottom>u.bottom-Xs(n,"bottom")&&(d=e.bottom-e.top>u.bottom-u.top?e.top+Xs(i,"top")-u.top:e.bottom-u.bottom+Xs(i,"bottom")),e.left<u.left+Xs(n,"left")?f=-(u.left-e.left+Xs(i,"left")):e.right>u.right-Xs(n,"right")&&(f=e.right-u.right+Xs(i,"right")),f||d)if(c)s.defaultView.scrollBy(f,d);else{let m=l.scrollLeft,x=l.scrollTop;d&&(l.scrollTop+=d),f&&(l.scrollLeft+=f);let y=l.scrollLeft-m,v=l.scrollTop-x;e={left:e.left-y,top:e.top-v,right:e.right-y,bottom:e.bottom-v}}let p=c?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(p))break;o=p=="absolute"?o.offsetParent:td(o)}}function i0e(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,i;for(let s=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=r-20){n=l,i=c.top;break}}return{refDOM:n,refTop:i,stack:gU(t.dom)}}function gU(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=td(n));return e}function s0e({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;yU(r,n==0?0:n-e)}function yU(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:i,left:s}=t[r];n.scrollTop!=i+e&&(n.scrollTop=i+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let Qc=null;function o0e(t){if(t.setActive)return t.setActive();if(Qc)return t.focus(Qc);let e=gU(t);t.focus(Qc==null?{get preventScroll(){return Qc={preventScroll:!0},!0}}:void 0),Qc||(Qc=!1,yU(e,0))}function vU(t,e){let r,n=2e8,i,s=0,o=e.top,l=e.top,c,u;for(let f=t.firstChild,d=0;f;f=f.nextSibling,d++){let p;if(f.nodeType==1)p=f.getClientRects();else if(f.nodeType==3)p=no(f).getClientRects();else continue;for(let m=0;m<p.length;m++){let x=p[m];if(x.top<=o&&x.bottom>=l){o=Math.max(x.bottom,o),l=Math.min(x.top,l);let y=x.left>e.left?x.left-e.left:x.right<e.left?e.left-x.right:0;if(y<n){r=f,n=y,i=y&&r.nodeType==3?{left:x.right<e.left?x.right:x.left,top:e.top}:e,f.nodeType==1&&y&&(s=d+(e.left>=(x.left+x.right)/2?1:0));continue}}else x.top>e.top&&!c&&x.left<=e.left&&x.right>=e.left&&(c=f,u={left:Math.max(x.left,Math.min(x.right,e.left)),top:x.top});!r&&(e.left>=x.right&&e.top>=x.top||e.left>=x.left&&e.top>=x.bottom)&&(s=d+1)}}return!r&&c&&(r=c,i=u,n=0),r&&r.nodeType==3?a0e(r,i):!r||n&&r.nodeType==1?{node:t,offset:s}:vU(r,i)}function a0e(t,e){let r=t.nodeValue.length,n=document.createRange();for(let i=0;i<r;i++){n.setEnd(t,i+1),n.setStart(t,i);let s=ia(n,1);if(s.top!=s.bottom&&KE(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function KE(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function l0e(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function c0e(t,e,r){let{node:n,offset:i}=vU(e,r),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,i,s)}function u0e(t,e,r,n){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0),c;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((c=l.dom.getBoundingClientRect()).width||c.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&c.left>n.left||c.top>n.top?i=l.posBefore:(!o&&c.right<n.left||c.bottom<n.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?n.top<(c.top+c.bottom)/2:n.left<(c.left+c.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,r,-1)}function xU(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(KE(e,u))return xU(o,e,u)}}if((s=(s+1)%n)==i)break}return t}function d0e(t,e){let r=t.dom.ownerDocument,n,i=0,s=Zve(r,e.left,e.top);s&&({node:n,offset:i}=s);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!KE(e,u)||(o=xU(t.dom,e,u),!o))return null}if(bn)for(let u=o;n&&u;u=td(u))u.draggable&&(n=void 0);if(o=l0e(o,e),n){if(is&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let f=n.childNodes[i],d;f.nodeName=="IMG"&&(d=f.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let u;Wp&&i&&n.nodeType==1&&(u=n.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,n==t.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(l=u0e(t,n,i,e))}l==null&&(l=c0e(t,o,e));let c=t.docView.nearestDesc(o,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function y$(t){return t.top<t.bottom||t.left<t.right}function ia(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(y$(n))return n}return Array.prototype.find.call(r,y$)||t.getBoundingClientRect()}const f0e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function bU(t,e,r){let{node:n,offset:i,atom:s}=t.docView.domFromPos(e,r<0?-1:1),o=Wp||is;if(n.nodeType==3)if(o&&(f0e.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let c=ia(no(n,i,i),r);if(is&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let u=ia(no(n,i-1,i-1),-1);if(u.top==c.top){let f=ia(no(n,i,i+1),-1);if(f.top!=c.top)return Mf(f,f.left<u.left)}}return c}else{let c=i,u=i,f=r<0?1:-1;return r<0&&!i?(u++,f=-1):r>=0&&i==n.nodeValue.length?(c--,f=1):r<0?c--:u++,Mf(ia(no(n,c,u),f),f<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(r<0||i==ki(n))){let c=n.childNodes[i-1];if(c.nodeType==1)return ok(c.getBoundingClientRect(),!1)}if(s==null&&i<ki(n)){let c=n.childNodes[i];if(c.nodeType==1)return ok(c.getBoundingClientRect(),!0)}return ok(n.getBoundingClientRect(),r>=0)}if(s==null&&i&&(r<0||i==ki(n))){let c=n.childNodes[i-1],u=c.nodeType==3?no(c,ki(c)-(o?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(u)return Mf(ia(u,1),!1)}if(s==null&&i<ki(n)){let c=n.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let u=c?c.nodeType==3?no(c,0,o?0:1):c.nodeType==1?c:null:null;if(u)return Mf(ia(u,-1),!0)}return Mf(ia(n.nodeType==3?no(n):n,-r),r>=0)}function Mf(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function ok(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function wU(t,e,r){let n=t.state,i=t.root.activeElement;n!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),i!=t.dom&&i&&i.focus()}}function h0e(t,e,r){let n=e.selection,i=r=="up"?n.$from:n.$to;return wU(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=bU(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=no(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<c.length;u++){let f=c[u];if(f.bottom>f.top+1&&(r=="up"?o.top-f.top>(f.bottom-o.top)*2:f.bottom-o.bottom>(o.bottom-f.top)*2))return!1}}return!0})}const p0e=/[\u0590-\u08ac]/;function m0e(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=!i,o=i==n.parent.content.size,l=t.domSelection();return l?!p0e.test(n.parent.textContent)||!l.modify?r=="left"||r=="backward"?s:o:wU(t,e,()=>{let{focusNode:c,focusOffset:u,anchorNode:f,anchorOffset:d}=t.domSelectionRange(),p=l.caretBidiLevel;l.modify("move",r,"character");let m=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:x,focusOffset:y}=t.domSelectionRange(),v=x&&!m.contains(x.nodeType==1?x:x.parentNode)||c==x&&u==y;try{l.collapse(f,d),c&&(c!=f||u!=d)&&l.extend&&l.extend(c,u)}catch{}return p!=null&&(l.caretBidiLevel=p),v}):n.pos==n.start()||n.pos==n.end()}let v$=null,x$=null,b$=!1;function g0e(t,e,r){return v$==e&&x$==r?b$:(v$=e,x$=r,b$=r=="up"||r=="down"?h0e(t,e,r):m0e(t,e,r))}const Oi=0,w$=1,El=2,Ps=3;class Vp{constructor(e,r,n,i){this.parent=e,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=Oi,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let s,o;if(e==this.contentDOM)s=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=r>Wr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&r==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!r||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return s}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(n==e&&s!=n){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(e<s)return i.descAt(e-n-i.border);n=s}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],l=s+o.size;if(l>e||o instanceof SU){i=e-s;break}s=l}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof jU&&s.side>=0;n--);if(r<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&r&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,r):{node:this.contentDOM,offset:s?Wr(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,r):{node:this.contentDOM,offset:s?Wr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=n,l=0;;l++){let c=this.children[l],u=o+c.size;if(i==-1&&e<=u){let f=o+c.border;if(e>=f&&r<=u-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,r,f);e=o;for(let d=l;d>0;d--){let p=this.children[d-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=Wr(p.dom)+1;break}e-=p.size}i==-1&&(i=0)}if(i>-1&&(u>r||l==this.children.length-1)){r=u;for(let f=l+1;f<this.children.length;f++){let d=this.children[f];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Wr(d.dom);break}r+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:r,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,i=!1){let s=Math.min(e,r),o=Math.max(e,r);for(let m=0,x=0;m<this.children.length;m++){let y=this.children[m],v=x+y.size;if(s>x&&o<v)return y.setSelection(e-x-y.border,r-x-y.border,n,i);x=v}let l=this.domFromPos(e,e?-1:1),c=r==e?l:this.domFromPos(r,r?-1:1),u=n.root.getSelection(),f=n.domSelectionRange(),d=!1;if((is||bn)&&e==r){let{node:m,offset:x}=l;if(m.nodeType==3){if(d=!!(x&&m.nodeValue[x-1]==`
`),d&&x==m.nodeValue.length)for(let y=m,v;y;y=y.parentNode){if(v=y.nextSibling){v.nodeName=="BR"&&(l=c={node:v.parentNode,offset:Wr(v)+1});break}let b=y.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let y=m.childNodes[x-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(is&&f.focusNode&&f.focusNode!=c.node&&f.focusNode.nodeType==1){let m=f.focusNode.childNodes[f.focusOffset];m&&m.contentEditable=="false"&&(i=!0)}if(!(i||d&&bn)&&Yl(l.node,l.offset,f.anchorNode,f.anchorOffset)&&Yl(c.node,c.offset,f.focusNode,f.focusOffset))return;let p=!1;if((u.extend||e==r)&&!d){u.collapse(l.node,l.offset);try{e!=r&&u.extend(c.node,c.offset),p=!0}catch{}}if(!p){if(e>r){let x=l;l=c,c=x}let m=document.createRange();m.setEnd(c.node,c.offset),m.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(m)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,i=0;i<this.children.length;i++){let s=this.children[i],o=n+s.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let l=n+s.border,c=o-s.border;if(e>=l&&r<=c){this.dirty=e==n||r==o?El:w$,e==l&&r==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Ps:s.markDirty(e-l,r-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?El:Ps}n=o}this.dirty=El}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?El:w$;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class jU extends Vp{constructor(e,r,n,i){let s,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!r.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,s=this}matchesWidget(e){return this.dirty==Oi&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class y0e extends Vp{constructor(e,r,n,i){super(e,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Xl extends Vp{constructor(e,r,n,i,s){super(e,[],n,i),this.mark=r,this.spec=s}static create(e,r,n,i){let s=i.nodeViews[r.type.name],o=s&&s(r,i,n);return(!o||!o.dom)&&(o=uc.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new Xl(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Ps||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ps&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Oi){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Oi}}slice(e,r,n){let i=Xl.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;r<o&&(s=q2(s,r,o,n)),e>0&&(s=q2(s,0,e,n));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Oa extends Vp{constructor(e,r,n,i,s,o,l,c,u){super(e,[],s,o),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=l}static create(e,r,n,i,s,o){let l=s.nodeViews[r.type.name],c,u=l&&l(r,s,()=>{if(!c)return o;if(c.parent)return c.parent.posBeforeChild(c)},n,i),f=u&&u.dom,d=u&&u.contentDOM;if(r.isText){if(!f)f=document.createTextNode(r.text);else if(f.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else f||({dom:f,contentDOM:d}=uc.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!d&&!r.isText&&f.nodeName!="BR"&&(f.hasAttribute("contenteditable")||(f.contentEditable="false"),r.type.spec.draggable&&(f.draggable=!0));let p=f;return f=_U(f,n,r),u?c=new v0e(e,r,n,i,f,d||null,p,u,s,o+1):r.isText?new bx(e,r,n,i,f,p,s):new Oa(e,r,n,i,f,d||null,p,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ne.empty)}return e}matchesNode(e,r,n){return this.dirty==Oi&&e.eq(this.node)&&kv(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,i=r,s=e.composing?this.localCompositionInfo(e,r):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,c=new b0e(this,o&&o.node,e);S0e(this.node,this.innerDeco,(u,f,d)=>{u.spec.marks?c.syncToMarks(u.spec.marks,n,e):u.type.side>=0&&!d&&c.syncToMarks(f==this.node.childCount?Tt.none:this.node.child(f).marks,n,e),c.placeWidget(u,e,i)},(u,f,d,p)=>{c.syncToMarks(u.marks,n,e);let m;c.findNodeMatch(u,f,d,p)||l&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(m=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(u,f,d,m,e)||c.updateNextNode(u,f,d,e,p,i)||c.addNode(u,f,d,e,i),i+=u.nodeSize}),c.syncToMarks([],n,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==El)&&(o&&this.protectLocalComposition(e,o),NU(this.contentDOM,this.children,e),rd&&N0e(this.dom))}localCompositionInfo(e,r){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof et)||n<r||i>r+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=k0e(this.node.content,o,n-r,i-r);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let s=r;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new y0e(this,s,r,i);e.input.compositionNodes.push(o),this.children=q2(this.children,n,n+i.length,e,o)}update(e,r,n,i){return this.dirty==Ps||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,i),!0)}updateInner(e,r,n,i){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Oi}updateOuterDeco(e){if(kv(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=kU(this.dom,this.nodeDOM,F2(this.outerDeco,this.node,r),F2(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function j$(t,e,r,n,i){_U(n,e,t);let s=new Oa(void 0,t,e,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class bx extends Oa{constructor(e,r,n,i,s,o,l){super(e,r,n,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,i){return this.dirty==Ps||this.dirty!=Oi&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Oi||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Oi,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let i=this.node.cut(e,r),s=document.createTextNode(i.text);return new bx(this.parent,i,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=Ps)}get domAtom(){return!1}isText(e){return this.node.text==e}}class SU extends Vp{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Oi&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class v0e extends Oa{constructor(e,r,n,i,s,o,l,c,u,f){super(e,r,n,i,s,o,l,u,f),this.spec=c}update(e,r,n,i){if(this.dirty==Ps)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,r,n);return s&&this.updateInner(e,r,n,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,i){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function NU(t,e,r){let n=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=n;)n=S$(n),i=!0;n=n.nextSibling}else i=!0,t.insertBefore(l,n);if(o instanceof Xl){let c=n?n.previousSibling:t.lastChild;NU(o.contentDOM,o.children,r),n=c?c.nextSibling:t.firstChild}}for(;n;)n=S$(n),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}const lh=function(t){t&&(this.nodeName=t)};lh.prototype=Object.create(null);const Cl=[new lh];function F2(t,e,r){if(t.length==0)return Cl;let n=r?Cl[0]:new lh,i=[n];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(n=new lh(o.nodeName));for(let l in o){let c=o[l];c!=null&&(r&&i.length==1&&i.push(n=new lh(e.isInline?"span":"div")),l=="class"?n.class=(n.class?n.class+" ":"")+c:l=="style"?n.style=(n.style?n.style+";":"")+c:l!="nodeName"&&(n[l]=c))}}}return i}function kU(t,e,r,n){if(r==Cl&&n==Cl)return e;let i=e;for(let s=0;s<n.length;s++){let o=n[s],l=r[s];if(s){let c;l&&l.nodeName==o.nodeName&&i!=t&&(c=i.parentNode)&&c.nodeName.toLowerCase()==o.nodeName||(c=document.createElement(o.nodeName),c.pmIsDeco=!0,c.appendChild(i),l=Cl[0]),i=c}x0e(i,l||Cl[0],o)}return i}function x0e(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)i.indexOf(n[s])==-1&&t.classList.remove(n[s]);for(let s=0;s<i.length;s++)n.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(e.style);)t.style.removeProperty(i[1])}r.style&&(t.style.cssText+=r.style)}}function _U(t,e,r){return kU(t,t,Cl,F2(e,r,t.nodeType!=1))}function kv(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function S$(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class b0e{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=w0e(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Oi,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let u=this.top.children[c];if(u.matchesMark(e[s])&&!this.isLocked(u.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=Xl.create(this.top,e[s],r,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,s++}}findNodeMatch(e,r,n,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let u=this.top.children[l];if(u.matchesNode(e,r,n)&&!this.preMatch.matched.has(u)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,r,n,i,s){let o=this.top.children[i];return o.dirty==Ps&&o.dom==o.contentDOM&&(o.dirty=El),o.update(e,r,n,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}e=r}}updateNextNode(e,r,n,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof Oa){let u=this.preMatch.matched.get(c);if(u!=null&&u!=s)return!1;let f=c.dom,d,p=this.isLocked(f)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=Ps&&kv(r,c.outerDeco));if(!p&&c.update(e,r,n,i))return this.destroyBetween(this.index,l),c.dom!=f&&(this.changed=!0),this.index++,!0;if(!p&&(d=this.recreateWrapper(c,e,r,n,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=El,d.updateChildren(i,o+1),d.dirty=Oi),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,i,s,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!kv(n,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=Oa.create(this.top,r,n,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let c of l.children)c.parent=l}return e.destroy(),l}addNode(e,r,n,i,s){let o=Oa.create(this.top,e,r,n,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new jU(this.top,e,r,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof Xl;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof bx)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((bn||an)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new SU(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function w0e(t,e){let r=e,n=r.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(n){let u=r.children[n-1];if(u instanceof Xl)r=u,n=u.children.length;else{l=u,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let c=l.node;if(c){if(c!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function j0e(t,e){return t.type.side-e.type.side}function S0e(t,e,r,n){let i=e.locals(t),s=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let f=t.child(u);n(f,i,e.forChild(s,f),u),s+=f.nodeSize}return}let o=0,l=[],c=null;for(let u=0;;){let f,d;for(;o<i.length&&i[o].to==s;){let v=i[o++];v.widget&&(f?(d||(d=[f])).push(v):f=v)}if(f)if(d){d.sort(j0e);for(let v=0;v<d.length;v++)r(d[v],u,!!c)}else r(f,u,!!c);let p,m;if(c)m=-1,p=c,c=null;else if(u<t.childCount)m=u,p=t.child(u++);else break;for(let v=0;v<l.length;v++)l[v].to<=s&&l.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let x=s+p.nodeSize;if(p.isText){let v=x;o<i.length&&i[o].from<v&&(v=i[o].from);for(let b=0;b<l.length;b++)l[b].to<v&&(v=l[b].to);v<x&&(c=p.cut(v-s),p=p.cut(0,v-s),x=v,m=-1)}else for(;o<i.length&&i[o].to<x;)o++;let y=p.isInline&&!p.isLeaf?l.filter(v=>!v.inline):l.slice();n(p,y,e.forChild(s,p),m),s=x}}function N0e(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function k0e(t,e,r,n){for(let i=0,s=0;i<t.childCount&&s<=n;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let c=o.text;for(;i<t.childCount;){let u=t.child(i++);if(s+=u.nodeSize,!u.isText)break;c+=u.text}if(s>=r){if(s>=n&&c.slice(n-e.length-l,n-l)==e)return n-e.length;let u=l<n?c.lastIndexOf(e,n-l-1):-1;if(u>=0&&u+e.length+l>=r)return l+u;if(r==n&&c.length>=n+e.length-l&&c.slice(n-l,n-l+e.length)==e)return n}}return-1}function q2(t,e,r,n,i){let s=[];for(let o=0,l=0;o<t.length;o++){let c=t[o],u=l,f=l+=c.size;u>=r||f<=e?s.push(c):(u<e&&s.push(c.slice(0,e-u,n)),i&&(s.push(i),i=void 0),f>r&&s.push(c.slice(r-u,c.size,n)))}return s}function GE(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let i=t.docView.nearestDesc(r.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let l=n.resolve(o),c,u;if(xx(r)){for(c=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&He.isSelectable(d)&&i.parent&&!(d.isInline&&Jve(r.focusNode,r.focusOffset,i.dom))){let p=i.posBefore;u=new He(o==p?l:n.resolve(p))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let d=o,p=o;for(let m=0;m<r.rangeCount;m++){let x=r.getRangeAt(m);d=Math.min(d,t.docView.posFromDOM(x.startContainer,x.startOffset,1)),p=Math.max(p,t.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(d<0)return null;[c,o]=p==t.state.selection.anchor?[p,d]:[d,p],l=n.resolve(o)}else c=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(c<0)return null}let f=n.resolve(c);if(!u){let d=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;u=YE(t,f,l,d)}return u}function OU(t){return t.editable?t.hasFocus():CU(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function po(t,e=!1){let r=t.state.selection;if(EU(t,r),!!OU(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&an){let n=t.domSelectionRange(),i=t.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&Yl(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)O0e(t);else{let{anchor:n,head:i}=r,s,o;N$&&!(r instanceof et)&&(r.$from.parent.inlineContent||(s=k$(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=k$(t,r.to))),t.docView.setSelection(n,i,t,e),N$&&(s&&_$(s),o&&_$(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&_0e(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const N$=bn||an&&mU<63;function k$(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(bn&&i&&i.contentEditable=="false")return ak(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return ak(i);if(s)return ak(s)}}function ak(t){return t.contentEditable="true",bn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function _$(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function _0e(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!OU(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function O0e(t){let e=t.domSelection(),r=document.createRange();if(!e)return;let n=t.cursorWrapper.dom,i=n.nodeName=="IMG";i?r.setStart(n.parentNode,Wr(n)+1):r.setStart(n,0),r.collapse(!0),e.removeAllRanges(),e.addRange(r),!i&&!t.state.selection.visible&&Rn&&_a<=11&&(n.disabled=!0,n.disabled=!1)}function EU(t,e){if(e instanceof He){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(O$(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else O$(t)}function O$(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function YE(t,e,r,n){return t.someProp("createSelectionBetween",i=>i(t,e,r))||et.between(e,r,n)}function E$(t){return t.editable&&!t.hasFocus()?!1:CU(t)}function CU(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function E0e(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return Yl(e.node,e.offset,r.anchorNode,r.anchorOffset)}function z2(t,e){let{$anchor:r,$head:n}=t.selection,i=e>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&ot.findFrom(s,e)}function aa(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function C$(t,e,r){let n=t.state.selection;if(n instanceof et)if(r.indexOf("s")>-1){let{$head:i}=n,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return aa(t,new et(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=z2(t.state,e);return i&&i instanceof He?aa(t,i):!1}else if(!(ji&&r.indexOf("m")>-1)){let i=n.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?He.isSelectable(s)?aa(t,new He(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Wp?aa(t,new et(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(n instanceof He&&n.node.isInline)return aa(t,new et(e>0?n.$to:n.$from));{let i=z2(t.state,e);return i?aa(t,i):!1}}}function _v(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ch(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Zc(t,e){return e<0?C0e(t):A0e(t)}function C0e(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i,s,o=!1;for(is&&r.nodeType==1&&n<_v(r)&&ch(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let l=r.childNodes[n-1];if(ch(l,-1))i=r,s=--n;else if(l.nodeType==3)r=l,n=r.nodeValue.length;else break}}else{if(AU(r))break;{let l=r.previousSibling;for(;l&&ch(l,-1);)i=r.parentNode,s=Wr(l),l=l.previousSibling;if(l)r=l,n=_v(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?U2(t,r,n):i&&U2(t,i,s)}function A0e(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let i=_v(r),s,o;for(;;)if(n<i){if(r.nodeType!=1)break;let l=r.childNodes[n];if(ch(l,1))s=r,o=++n;else break}else{if(AU(r))break;{let l=r.nextSibling;for(;l&&ch(l,1);)s=l.parentNode,o=Wr(l)+1,l=l.nextSibling;if(l)r=l,n=0,i=_v(r);else{if(r=r.parentNode,r==t.dom)break;n=i=0}}}s&&U2(t,s,o)}function AU(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function T0e(t,e){for(;t&&e==t.childNodes.length&&!Hp(t);)e=Wr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function P0e(t,e){for(;t&&!e&&!Hp(t);)e=Wr(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function U2(t,e,r){if(e.nodeType!=3){let s,o;(o=T0e(e,r))?(e=o,r=0):(s=P0e(e,r))&&(e=s,r=s.nodeValue.length)}let n=t.domSelection();if(!n)return;if(xx(n)){let s=document.createRange();s.setEnd(e,r),s.setStart(e,r),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&po(t)},50)}function A$(t,e){let r=t.state.doc.resolve(e);if(!(an||e0e)&&r.parent.inlineContent){let i=t.coordsAtPos(e);if(e>r.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<r.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function T$(t,e,r){let n=t.state.selection;if(n instanceof et&&!n.empty||r.indexOf("s")>-1||ji&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=z2(t.state,e);if(o&&o instanceof He)return aa(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=n instanceof ri?ot.near(o,e):ot.findFrom(o,e);return l?aa(t,l):!1}return!1}function P$(t,e){if(!(t.state.selection instanceof et))return!0;let{$head:r,$anchor:n,empty:i}=t.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(r.pos-s.nodeSize,r.pos):o.delete(r.pos,r.pos+s.nodeSize),t.dispatch(o),!0}return!1}function M$(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function M0e(t){if(!bn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;M$(t,n,"true"),setTimeout(()=>M$(t,n,"false"),20)}return!1}function R0e(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function I0e(t,e){let r=e.keyCode,n=R0e(e);if(r==8||ji&&r==72&&n=="c")return P$(t,-1)||Zc(t,-1);if(r==46&&!e.shiftKey||ji&&r==68&&n=="c")return P$(t,1)||Zc(t,1);if(r==13||r==27)return!0;if(r==37||ji&&r==66&&n=="c"){let i=r==37?A$(t,t.state.selection.from)=="ltr"?-1:1:-1;return C$(t,i,n)||Zc(t,i)}else if(r==39||ji&&r==70&&n=="c"){let i=r==39?A$(t,t.state.selection.from)=="ltr"?1:-1:1;return C$(t,i,n)||Zc(t,i)}else{if(r==38||ji&&r==80&&n=="c")return T$(t,-1,n)||Zc(t,-1);if(r==40||ji&&r==78&&n=="c")return M0e(t)||T$(t,1,n)||Zc(t,1);if(n==(ji?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function XE(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let r=[],{content:n,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,s--;let m=n.firstChild;r.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),n=m.content}let o=t.someProp("clipboardSerializer")||uc.fromSchema(t.state.schema),l=DU(),c=l.createElement("div");c.appendChild(o.serializeFragment(n,{document:l}));let u=c.firstChild,f,d=0;for(;u&&u.nodeType==1&&(f=IU[u.nodeName.toLowerCase()]);){for(let m=f.length-1;m>=0;m--){let x=l.createElement(f[m]);for(;c.firstChild;)x.appendChild(c.firstChild);c.appendChild(x),d++}u=c.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(r)}`);let p=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:p,slice:e}}function TU(t,e,r,n,i){let s=i.parent.type.spec.code,o,l;if(!r&&!e)return null;let c=e&&(n||s||!r);if(c){if(t.someProp("transformPastedText",p=>{e=p(e,s||n,t)}),s)return e?new Ie(Ne.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Ie.empty;let d=t.someProp("clipboardTextParser",p=>p(e,i,n,t));if(d)l=d;else{let p=i.marks(),{schema:m}=t.state,x=uc.fromSchema(m);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let v=o.appendChild(document.createElement("p"));y&&v.appendChild(x.serializeNode(m.text(y,p)))})}}else t.someProp("transformPastedHTML",d=>{r=d(r,t)}),o=B0e(r),Wp&&F0e(o);let u=o&&o.querySelector("[data-pm-slice]"),f=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(f&&f[3])for(let d=+f[3];d>0;d--){let p=o.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;o=p}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||ka.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(c||f),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!D0e.test(p.parentNode.nodeName)?{ignore:!0}:null}})),f)l=q0e(R$(l,+f[1],+f[2]),f[4]);else if(l=Ie.maxOpen(L0e(l.content,i),!0),l.openStart||l.openEnd){let d=0,p=0;for(let m=l.content.firstChild;d<l.openStart&&!m.type.spec.isolating;d++,m=m.firstChild);for(let m=l.content.lastChild;p<l.openEnd&&!m.type.spec.isolating;p++,m=m.lastChild);l=R$(l,d,p)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const D0e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function L0e(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let i=e.node(r).contentMatchAt(e.index(r)),s,o=[];if(t.forEach(l=>{if(!o)return;let c=i.findWrapping(l.type),u;if(!c)return o=null;if(u=o.length&&s.length&&MU(c,s,l,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=RU(o[o.length-1],s.length));let f=PU(l,c);o.push(f),i=i.matchType(f.type),s=c}}),o)return Ne.from(o)}return t}function PU(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,Ne.from(t));return t}function MU(t,e,r,n,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=MU(t,e,r,n.lastChild,i+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==t.length-1?r.type:t[i+1]))return n.copy(n.content.append(Ne.from(PU(r,t,i+1))))}}function RU(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,RU(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(Ne.empty,!0);return t.copy(r.append(n))}function H2(t,e,r,n,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<n-1&&(l=H2(l,e,r,n,i+1,s)),i>=r&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(Ne.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function R$(t,e,r){return e<t.openStart&&(t=new Ie(H2(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new Ie(H2(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const IU={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let I$=null;function DU(){return I$||(I$=document.implementation.createHTMLDocument("title"))}let lk=null;function $0e(t){let e=window.trustedTypes;return e?(lk||(lk=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),lk.createHTML(t)):t}function B0e(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=DU().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),i;if((i=n&&IU[n[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),r.innerHTML=$0e(t),i)for(let s=0;s<i.length;s++)r=r.querySelector(i[s])||r;return r}function F0e(t){let e=t.querySelectorAll(an?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function q0e(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=n.length-2;l>=0;l-=2){let c=r.nodes[n[l]];if(!c||c.hasRequiredAttrs())break;i=Ne.from(c.create(n[l+1],i)),s++,o++}return new Ie(i,s,o)}const wn={},jn={},z0e={touchstart:!0,touchmove:!0};class U0e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function H0e(t){for(let e in wn){let r=wn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{V0e(t,n)&&!JE(t,n)&&(t.editable||!(n.type in jn))&&r(t,n)},z0e[e]?{passive:!0}:void 0)}bn&&t.dom.addEventListener("input",()=>null),W2(t)}function ba(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function W0e(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function W2(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>JE(t,n))})}function JE(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function V0e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function K0e(t,e){!JE(t,e)&&wn[e.type]&&(t.editable||!(e.type in jn))&&wn[e.type](t,e)}jn.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!$U(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ao&&an&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),rd&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",i=>i(t,Sl(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||I0e(t,r)?r.preventDefault():ba(t,"key")};jn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};jn.keypress=(t,e)=>{let r=e;if($U(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||ji&&r.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof et)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,i,s))&&t.dispatch(s()),r.preventDefault()}};function wx(t){return{left:t.clientX,top:t.clientY}}function G0e(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function QE(t,e,r,n,i){if(n==-1)return!1;let s=t.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,r,s.nodeAfter,s.before(o),i,!0):l(t,r,s.node(o),s.before(o),i,!1)))return!0;return!1}function ju(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function Y0e(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&He.isSelectable(n)?(ju(t,new He(r)),!0):!1}function X0e(t,e){if(e==-1)return!1;let r=t.state.selection,n,i;r instanceof He&&(n=r.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(He.isSelectable(l)){n&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?i=s.before(r.$from.depth):i=s.before(o);break}}return i!=null?(ju(t,He.create(t.state.doc,i)),!0):!1}function J0e(t,e,r,n,i){return QE(t,"handleClickOn",e,r,n)||t.someProp("handleClick",s=>s(t,e,n))||(i?X0e(t,r):Y0e(t,r))}function Q0e(t,e,r,n){return QE(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",i=>i(t,e,n))}function Z0e(t,e,r,n){return QE(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",i=>i(t,e,n))||exe(t,r,n)}function exe(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(ju(t,et.create(n,0,n.content.size)),!0):!1;let i=n.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)ju(t,et.create(n,l+1,l+1+o.content.size));else if(He.isSelectable(o))ju(t,He.create(n,l));else continue;return!0}}function ZE(t){return Ov(t)}const LU=ji?"metaKey":"ctrlKey";wn.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=ZE(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&G0e(r,t.input.lastClick)&&!r[LU]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:s,button:r.button};let o=t.posAtCoords(wx(r));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new txe(t,o,r,!!n)):(s=="doubleClick"?Q0e:Z0e)(t,o.pos,o.inside,r)?r.preventDefault():ba(t,"pointer"))};class txe{constructor(e,r,n,i){this.view=e,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[LU],this.allowDefault=n.shiftKey;let s,o;if(r.inside>-1)s=e.state.doc.nodeAt(r.inside),o=r.inside;else{let f=e.state.doc.resolve(r.pos);s=f.parent,o=f.depth?f.before():0}const l=i?null:n.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c&&c.dom.nodeType==1?c.dom:null;let{selection:u}=e.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof He&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&is&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ba(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>po(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(wx(e))),this.updateAllowDefault(e),this.allowDefault||!r?ba(this.view,"pointer"):J0e(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||bn&&this.mightDrag&&!this.mightDrag.node.isAtom||an&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(ju(this.view,ot.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):ba(this.view,"pointer")}move(e){this.updateAllowDefault(e),ba(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}wn.touchstart=t=>{t.input.lastTouch=Date.now(),ZE(t),ba(t,"pointer")};wn.touchmove=t=>{t.input.lastTouch=Date.now(),ba(t,"pointer")};wn.contextmenu=t=>ZE(t);function $U(t,e){return t.composing?!0:bn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const rxe=ao?5e3:-1;jn.compositionstart=jn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof et&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||r.marks(),Ov(t,!0),t.markCursor=null;else if(Ov(t,!e.selection.empty),is&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let i=n.focusNode,s=n.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}BU(t,rxe)};jn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,BU(t,20))};function BU(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Ov(t),e))}function FU(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=ixe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function nxe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=Yve(e.focusNode,e.focusOffset),n=Xve(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(r==s||n==s)return s;if(!i||!i.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function ixe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Ov(t,e=!1){if(!(ao&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),FU(t),e||t.docView&&t.docView.dirty){let r=GE(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function sxe(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const fp=Rn&&_a<15||rd&&t0e<604;wn.copy=jn.cut=(t,e)=>{let r=e,n=t.state.selection,i=r.type=="cut";if(n.empty)return;let s=fp?null:r.clipboardData,o=n.content(),{dom:l,text:c}=XE(t,o);s?(r.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",c)):sxe(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function oxe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function axe(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?hp(t,n.value,null,i,e):hp(t,n.textContent,n.innerHTML,i,e)},50)}function hp(t,e,r,n,i){let s=TU(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",c=>c(t,i,s||Ie.empty)))return!0;if(!s)return!1;let o=oxe(s),l=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function qU(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}jn.paste=(t,e)=>{let r=e;if(t.composing&&!ao)return;let n=fp?null:r.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&hp(t,qU(n),n.getData("text/html"),i,r)?r.preventDefault():axe(t,r)};class zU{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const lxe=ji?"altKey":"ctrlKey";function UU(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[lxe]}wn.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(wx(r)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof He?i.to-1:i.to))){if(n&&n.mightDrag)o=He.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let d=t.docView.nearestDesc(r.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=He.create(t.state.doc,d.posBefore))}}let l=(o||t.state.selection).content(),{dom:c,text:u,slice:f}=XE(t,l);(!r.dataTransfer.files.length||!an||mU>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(fp?"Text":"text/html",c.innerHTML),r.dataTransfer.effectAllowed="copyMove",fp||r.dataTransfer.setData("text/plain",u),t.dragging=new zU(f,UU(t,r),o)};wn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};jn.dragover=jn.dragenter=(t,e)=>e.preventDefault();jn.drop=(t,e)=>{let r=e,n=t.dragging;if(t.dragging=null,!r.dataTransfer)return;let i=t.posAtCoords(wx(r));if(!i)return;let s=t.state.doc.resolve(i.pos),o=n&&n.slice;o?t.someProp("transformPasted",x=>{o=x(o,t)}):o=TU(t,qU(r.dataTransfer),fp?null:r.dataTransfer.getData("text/html"),!1,s);let l=!!(n&&UU(t,r));if(t.someProp("handleDrop",x=>x(t,r,o||Ie.empty,l))){r.preventDefault();return}if(!o)return;r.preventDefault();let c=o?oU(t.state.doc,s.pos,o):s.pos;c==null&&(c=s.pos);let u=t.state.tr;if(l){let{node:x}=n;x?x.replace(u):u.deleteSelection()}let f=u.mapping.map(c),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,p=u.doc;if(d?u.replaceRangeWith(f,f,o.content.firstChild):u.replaceRange(f,f,o),u.doc.eq(p))return;let m=u.doc.resolve(f);if(d&&He.isSelectable(o.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(o.content.firstChild))u.setSelection(new He(m));else{let x=u.mapping.map(c);u.mapping.maps[u.mapping.maps.length-1].forEach((y,v,b,w)=>x=w),u.setSelection(YE(t,m,u.doc.resolve(x)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};wn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&po(t)},20))};wn.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};wn.beforeinput=(t,e)=>{if(an&&ao&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Sl(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in jn)wn[t]=jn[t];function pp(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class Ev{constructor(e,r){this.toDOM=e,this.spec=r||Ll,this.side=this.spec.side||0}map(e,r,n,i){let{pos:s,deleted:o}=e.mapResult(r.from+i,this.side<0?-1:1);return o?null:new vn(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Ev&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&pp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ea{constructor(e,r){this.attrs=e,this.spec=r||Ll}map(e,r,n,i){let s=e.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new vn(s,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof Ea&&pp(this.attrs,e.attrs)&&pp(this.spec,e.spec)}static is(e){return e.type instanceof Ea}destroy(){}}class eC{constructor(e,r){this.attrs=e,this.spec=r||Ll}map(e,r,n,i){let s=e.mapResult(r.from+i,1);if(s.deleted)return null;let o=e.mapResult(r.to+i,-1);return o.deleted||o.pos<=s.pos?null:new vn(s.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:i}=e.content.findIndex(r.from),s;return i==r.from&&!(s=e.child(n)).isText&&i+s.nodeSize==r.to}eq(e){return this==e||e instanceof eC&&pp(this.attrs,e.attrs)&&pp(this.spec,e.spec)}destroy(){}}class vn{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new vn(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new vn(e,e,new Ev(r,n))}static inline(e,r,n,i){return new vn(e,r,new Ea(n,i))}static node(e,r,n,i){return new vn(e,r,new eC(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ea}get widget(){return this.type instanceof Ev}}const ou=[],Ll={};class Qt{constructor(e,r){this.local=e.length?e:ou,this.children=r.length?r:ou}static create(e,r){return r.length?Cv(r,e,0,Ll):sn}find(e,r,n){let i=[];return this.findInner(e??0,r??1e9,i,0,n),i}findInner(e,r,n,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=r&&l.to>=e&&(!s||s(l.spec))&&n.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,r-l,n,i+l,s)}}map(e,r,n){return this==sn||e.maps.length==0?this:this.mapInner(e,r,0,0,n||Ll)}mapInner(e,r,n,i,s){let o;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(e,n,i);c&&c.type.valid(r,c)?(o||(o=[])).push(c):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?cxe(this.children,o||[],e,r,n,i,s):o?new Qt(o.sort($l),ou):sn}add(e,r){return r.length?this==sn?Qt.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let i,s=0;e.forEach((l,c)=>{let u=c+n,f;if(f=WU(r,l,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<c;)s+=3;i[s]==c?i[s+2]=i[s+2].addInner(l,f,u+1):i.splice(s,0,c,c+l.nodeSize,Cv(f,l,u+1,Ll)),s+=3}});let o=HU(s?VU(r):r,-n);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new Qt(o.length?this.local.concat(o).sort($l):this.local,i||this.children)}remove(e){return e.length==0||this==sn?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,i=this.local;for(let s=0;s<n.length;s+=3){let o,l=n[s]+r,c=n[s+1]+r;for(let f=0,d;f<e.length;f++)(d=e[f])&&d.from>l&&d.to<c&&(e[f]=null,(o||(o=[])).push(d));if(!o)continue;n==this.children&&(n=this.children.slice());let u=n[s+2].removeInner(o,l+1);u!=sn?n[s+2]=u:(n.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,r)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new Qt(i,n):sn}forChild(e,r){if(this==sn)return this;if(r.isLeaf)return Qt.empty;let n,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(n=this.children[l+2]);break}let s=e+1,o=s+r.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<o&&c.to>s&&c.type instanceof Ea){let u=Math.max(s,c.from)-s,f=Math.min(o,c.to)-s;u<f&&(i||(i=[])).push(c.copy(u,f))}}if(i){let l=new Qt(i.sort($l),ou);return n?new pa([l,n]):l}return n||sn}eq(e){if(this==e)return!0;if(!(e instanceof Qt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return tC(this.localsInner(e))}localsInner(e){if(this==sn)return ou;if(e.inlineContent||!this.local.some(Ea.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Ea||r.push(this.local[n]);return r}forEachSet(e){e(this)}}Qt.empty=new Qt([],[]);Qt.removeOverlap=tC;const sn=Qt.empty;class pa{constructor(e){this.members=e}map(e,r){const n=this.members.map(i=>i.map(e,r,Ll));return pa.from(n)}forChild(e,r){if(r.isLeaf)return Qt.empty;let n=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,r);s!=sn&&(s instanceof pa?n=n.concat(s.members):n.push(s))}return pa.from(n)}eq(e){if(!(e instanceof pa)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!r)r=s;else{n&&(r=r.slice(),n=!1);for(let o=0;o<s.length;o++)r.push(s[o])}}return r?tC(n?r:r.sort($l)):ou}static from(e){switch(e.length){case 0:return sn;case 1:return e[0];default:return new pa(e.every(r=>r instanceof Qt)?e:e.reduce((r,n)=>r.concat(n instanceof Qt?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function cxe(t,e,r,n,i,s,o){let l=t.slice();for(let u=0,f=s;u<r.maps.length;u++){let d=0;r.maps[u].forEach((p,m,x,y)=>{let v=y-x-(m-p);for(let b=0;b<l.length;b+=3){let w=l[b+1];if(w<0||p>w+f-d)continue;let N=l[b]+f-d;m>=N?l[b+1]=p<=N?-2:-1:p>=f&&v&&(l[b]+=v,l[b+1]+=v)}d+=v}),f=r.maps[u].map(f,-1)}let c=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){c=!0,l[u+1]=-1;continue}let f=r.map(t[u]+s),d=f-i;if(d<0||d>=n.content.size){c=!0;continue}let p=r.map(t[u+1]+s,-1),m=p-i,{index:x,offset:y}=n.content.findIndex(d),v=n.maybeChild(x);if(v&&y==d&&y+v.nodeSize==m){let b=l[u+2].mapInner(r,v,f+1,t[u]+s+1,o);b!=sn?(l[u]=d,l[u+1]=m,l[u+2]=b):(l[u+1]=-2,c=!0)}else c=!0}if(c){let u=uxe(l,t,e,r,i,s,o),f=Cv(u,n,0,o);e=f.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,p=0;d<f.children.length;d+=3){let m=f.children[d];for(;p<l.length&&l[p]<m;)p+=3;l.splice(p,0,f.children[d],f.children[d+1],f.children[d+2])}}return new Qt(e.sort($l),l)}function HU(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let i=t[n];r.push(new vn(i.from+e,i.to+e,i.type))}return r}function uxe(t,e,r,n,i,s,o){function l(c,u){for(let f=0;f<c.local.length;f++){let d=c.local[f].map(n,i,u);d?r.push(d):o.onRemove&&o.onRemove(c.local[f].spec)}for(let f=0;f<c.children.length;f+=3)l(c.children[f+2],c.children[f]+u+1)}for(let c=0;c<t.length;c+=3)t[c+1]==-1&&l(t[c+2],e[c]+s+1);return r}function WU(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>r&&o.to<n&&((i||(i=[])).push(o),t[s]=null);return i}function VU(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function Cv(t,e,r,n){let i=[],s=!1;e.forEach((l,c)=>{let u=WU(t,l,c+r);if(u){s=!0;let f=Cv(u,l,r+c+1,n);f!=sn&&i.push(c,c+l.nodeSize,f)}});let o=HU(s?VU(t):t,-r).sort($l);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(n.onRemove&&n.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Qt(o,i):sn}function $l(t,e){return t.from-e.from||t.to-e.to}function tC(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let i=r+1;i<e.length;i++){let s=e[i];if(s.from==n.from){s.to!=n.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,n.to),D$(e,i+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,s.from),D$(e,i,n.copy(s.from,n.to)));break}}}return e}function D$(t,e,r){for(;e<t.length&&$l(r,t[e])>0;)e++;t.splice(e,0,r)}function ck(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=sn&&e.push(n)}),t.cursorWrapper&&e.push(Qt.create(t.state.doc,[t.cursorWrapper.deco])),pa.from(e)}const dxe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},fxe=Rn&&_a<=11;class hxe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class pxe{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new hxe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);Rn&&_a<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),fxe&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,dxe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(E$(this.view)){if(this.suppressingSelectionUpdates)return po(this.view);if(Rn&&_a<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Yl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let s=e.focusNode;s;s=td(s))r.add(s);for(let s=e.anchorNode;s;s=td(s))if(r.has(s)){n=s;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&E$(e)&&!this.ignoreSelectionChange(n),s=-1,o=-1,l=!1,c=[];if(e.editable)for(let f=0;f<r.length;f++){let d=this.registerMutation(r[f],c);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(l=!0))}if(is&&c.length){let f=c.filter(d=>d.nodeName=="BR");if(f.length==2){let[d,p]=f;d.parentNode&&d.parentNode.parentNode==p.parentNode?p.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let p of f){let m=p.parentNode;m&&m.nodeName=="LI"&&(!d||yxe(e,d)!=m)&&p.remove()}}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&xx(n)&&(u=GE(e))&&u.eq(ot.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,po(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),mxe(e)),this.handleDOMChange(s,o,l,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||po(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let f=0;f<e.addedNodes.length;f++){let d=e.addedNodes[f];r.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Rn&&_a<=11&&e.addedNodes.length)for(let f=0;f<e.addedNodes.length;f++){let{previousSibling:d,nextSibling:p}=e.addedNodes[f];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(s=p)}let o=i&&i.parentNode==e.target?Wr(i)+1:0,l=n.localPosFromDOM(e.target,o,-1),c=s&&s.parentNode==e.target?Wr(s):e.target.childNodes.length,u=n.localPosFromDOM(e.target,c,1);return{from:l,to:u}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let L$=new WeakMap,$$=!1;function mxe(t){if(!L$.has(t)&&(L$.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=is,$$)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),$$=!0}}function B$(t,e){let r=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Yl(o.node,o.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function gxe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return B$(t,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?B$(t,r):null}function yxe(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function vxe(t,e,r){let{node:n,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,r),c=t.domSelectionRange(),u,f=c.anchorNode;if(f&&t.dom.contains(f.nodeType==1?f:f.parentNode)&&(u=[{node:f,offset:c.anchorOffset}],xx(c)||u.push({node:c.focusNode,offset:c.focusOffset})),an&&t.input.lastKeyCode===8)for(let v=s;v>i;v--){let b=n.childNodes[v-1],w=b.pmViewDesc;if(b.nodeName=="BR"&&!w){s=v;break}if(!w||w.size)break}let d=t.state.doc,p=t.someProp("domParser")||ka.fromSchema(t.state.schema),m=d.resolve(o),x=null,y=p.parse(n,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:i,to:s,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:xxe,context:m});if(u&&u[0].pos!=null){let v=u[0].pos,b=u[1]&&u[1].pos;b==null&&(b=v),x={anchor:v+o,head:b+o}}return{doc:y,sel:x,from:o,to:l}}function xxe(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(bn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||bn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const bxe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function wxe(t,e,r,n,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let A=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,T=GE(t,A);if(T&&!t.state.selection.eq(T)){if(an&&ao&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",P=>P(t,Sl(13,"Enter"))))return;let M=t.state.tr.setSelection(T);A=="pointer"?M.setMeta("pointer",!0):A=="key"&&M.scrollIntoView(),s&&M.setMeta("composition",s),t.dispatch(M)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(r);e=o.before(l+1),r=t.state.doc.resolve(r).after(l+1);let c=t.state.selection,u=vxe(t,e,r),f=t.state.doc,d=f.slice(u.from,u.to),p,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(p=t.state.selection.to,m="end"):(p=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let x=Nxe(d.content,u.doc.content,u.from,p,m);if(x&&t.input.domChangeCount++,(rd&&t.input.lastIOSEnter>Date.now()-225||ao)&&i.some(A=>A.nodeType==1&&!bxe.test(A.nodeName))&&(!x||x.endA>=x.endB)&&t.someProp("handleKeyDown",A=>A(t,Sl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!x)if(n&&c instanceof et&&!c.empty&&c.$head.sameParent(c.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))x={start:c.from,endA:c.to,endB:c.to};else{if(u.sel){let A=F$(t,t.state.doc,u.sel);if(A&&!A.eq(t.state.selection)){let T=t.state.tr.setSelection(A);s&&T.setMeta("composition",s),t.dispatch(T)}}return}t.state.selection.from<t.state.selection.to&&x.start==x.endB&&t.state.selection instanceof et&&(x.start>t.state.selection.from&&x.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?x.start=t.state.selection.from:x.endA<t.state.selection.to&&x.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(x.endB+=t.state.selection.to-x.endA,x.endA=t.state.selection.to)),Rn&&_a<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>u.from&&u.doc.textBetween(x.start-u.from-1,x.start-u.from+1)==" "&&(x.start--,x.endA--,x.endB--);let y=u.doc.resolveNoCache(x.start-u.from),v=u.doc.resolveNoCache(x.endB-u.from),b=f.resolve(x.start),w=y.sameParent(v)&&y.parent.inlineContent&&b.end()>=x.endA,N;if((rd&&t.input.lastIOSEnter>Date.now()-225&&(!w||i.some(A=>A.nodeName=="DIV"||A.nodeName=="P"))||!w&&y.pos<u.doc.content.size&&(!y.sameParent(v)||!y.parent.inlineContent)&&!/\S/.test(u.doc.textBetween(y.pos,v.pos,"",""))&&(N=ot.findFrom(u.doc.resolve(y.pos+1),1,!0))&&N.head>y.pos)&&t.someProp("handleKeyDown",A=>A(t,Sl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>x.start&&Sxe(f,x.start,x.endA,y,v)&&t.someProp("handleKeyDown",A=>A(t,Sl(8,"Backspace")))){ao&&an&&t.domObserver.suppressSelectionUpdates();return}an&&x.endB==x.start&&(t.input.lastChromeDelete=Date.now()),ao&&!w&&y.start()!=v.start()&&v.parentOffset==0&&y.depth==v.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==x.endA&&(x.endB-=2,v=u.doc.resolveNoCache(x.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(A){return A(t,Sl(13,"Enter"))})},20));let j=x.start,k=x.endA,_=A=>{let T=A||t.state.tr.replace(j,k,u.doc.slice(x.start-u.from,x.endB-u.from));if(u.sel){let M=F$(t,T.doc,u.sel);M&&!(an&&t.composing&&M.empty&&(x.start!=x.endB||t.input.lastChromeDelete<Date.now()-100)&&(M.head==j||M.head==T.mapping.map(k)-1)||Rn&&M.empty&&M.head==j)&&T.setSelection(M)}return s&&T.setMeta("composition",s),T.scrollIntoView()},E;if(w){if(y.pos==v.pos){Rn&&_a<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>po(t),20));let A=_(t.state.tr.delete(j,k)),T=f.resolve(x.start).marksAcross(f.resolve(x.endA));T&&A.ensureMarks(T),t.dispatch(A)}else if(x.endA==x.endB&&(E=jxe(y.parent.content.cut(y.parentOffset,v.parentOffset),b.parent.content.cut(b.parentOffset,x.endA-b.start())))){let A=_(t.state.tr);E.type=="add"?A.addMark(j,k,E.mark):A.removeMark(j,k,E.mark),t.dispatch(A)}else if(y.parent.child(y.index()).isText&&y.index()==v.index()-(v.textOffset?0:1)){let A=y.parent.textBetween(y.parentOffset,v.parentOffset),T=()=>_(t.state.tr.insertText(A,j,k));t.someProp("handleTextInput",M=>M(t,j,k,A,T))||t.dispatch(T())}}else t.dispatch(_())}function F$(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:YE(t,e.resolve(r.anchor),e.resolve(r.head))}function jxe(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,i=r,s=n,o,l,c;for(let f=0;f<n.length;f++)i=n[f].removeFromSet(i);for(let f=0;f<r.length;f++)s=r[f].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",c=f=>f.mark(l.addToSet(f.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",c=f=>f.mark(l.removeFromSet(f.marks));else return null;let u=[];for(let f=0;f<e.childCount;f++)u.push(c(e.child(f)));if(Ne.from(u).eq(t))return{mark:l,type:o}}function Sxe(t,e,r,n,i){if(r-e<=i.pos-n.pos||uk(n,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!n.parent.isTextblock){let l=s.nodeAfter;return l!=null&&r==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(uk(s,!0,!0));return!o.parent.isTextblock||o.pos>r||uk(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function uk(t,e,r){let n=t.depth,i=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,i++,e=!1;if(r){let s=t.node(n).maybeChild(t.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function Nxe(t,e,r,n,i){let s=t.findDiffStart(e,r);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,r+t.size,r+e.size);if(i=="end"){let c=Math.max(0,s-Math.min(o,l));n-=o+c-s}if(o<s&&t.size<e.size){let c=n<=s&&n>=o?s-n:0;s-=c,s&&s<e.size&&q$(e.textBetween(s-1,s+1))&&(s+=c?1:-1),l=s+(l-o),o=s}else if(l<s){let c=n<=s&&n>=l?s-n:0;s-=c,s&&s<t.size&&q$(t.textBetween(s-1,s+1))&&(s+=c?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function q$(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class KU{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new U0e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(V$),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=H$(this),U$(this),this.nodeViews=W$(this),this.docView=j$(this.state.doc,z$(this),ck(this),this.dom,this),this.domObserver=new pxe(this,(n,i,s,o)=>wxe(this,n,i,s,o)),this.domObserver.start(),H0e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&W2(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(V$),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(FU(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=r.plugins;if(l||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let m=W$(this);_xe(m,this.nodeViews)&&(this.nodeViews=m,s=!0)}(l||r.handleDOMEvents!=this._props.handleDOMEvents)&&W2(this),this.editable=H$(this),U$(this);let c=ck(this),u=z$(this),f=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,u,c);(d||!e.selection.eq(i.selection))&&(o=!0);let p=f=="preserve"&&o&&this.dom.style.overflowAnchor==null&&i0e(this);if(o){this.domObserver.stop();let m=d&&(Rn||an)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&kxe(i.selection,e.selection);if(d){let x=an?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=nxe(this)),(s||!this.docView.update(e.doc,u,c,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=j$(e.doc,u,c,this.dom,this)),x&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&E0e(this))?po(this,m):(EU(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),f=="reset"?this.dom.scrollTop=0:f=="to selection"?this.scrollToSelection():p&&s0e(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof He){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&g$(this,r.getBoundingClientRect(),e)}else g$(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let s=n.from+(this.state.doc.content.size-r.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(i=s)}this.dragging=new zU(e.slice,e.move,i<0?void 0:He.create(this.state.doc,i))}someProp(e,r){let n=this._props&&this._props[e],i;if(n!=null&&(i=r?r(n):n))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=r?r(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=r?r(l):l))return i}}hasFocus(){if(Rn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&o0e(this.dom),po(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return d0e(this,e)}coordsAtPos(e,r=1){return bU(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let i=this.docView.posFromDOM(e,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,r){return g0e(this,r||this.state,e)}pasteHTML(e,r){return hp(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return hp(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return XE(this,e)}destroy(){this.docView&&(W0e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ck(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Kve())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return K0e(this,e)}domSelectionRange(){let e=this.domSelection();return e?bn&&this.root.nodeType===11&&Qve(this.dom.ownerDocument)==this.dom&&gxe(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}KU.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function z$(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[vn.node(0,t.state.doc.content.size,e)]}function U$(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:vn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function H$(t){return!t.someProp("editable",e=>e(t.state)===!1)}function kxe(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function W$(t){let e=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function _xe(t,e){let r=0,n=0;for(let i in t){if(t[i]!=e[i])return!0;r++}for(let i in e)n++;return r!=n}function V$(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ta={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Av={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Oxe=typeof navigator<"u"&&/Mac/.test(navigator.platform),Exe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Vr=0;Vr<10;Vr++)Ta[48+Vr]=Ta[96+Vr]=String(Vr);for(var Vr=1;Vr<=24;Vr++)Ta[Vr+111]="F"+Vr;for(var Vr=65;Vr<=90;Vr++)Ta[Vr]=String.fromCharCode(Vr+32),Av[Vr]=String.fromCharCode(Vr);for(var dk in Ta)Av.hasOwnProperty(dk)||(Av[dk]=Ta[dk]);function Cxe(t){var e=Oxe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Exe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?Av:Ta)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const Axe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Txe=typeof navigator<"u"&&/Win/.test(navigator.platform);function Pxe(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,i,s,o;for(let l=0;l<e.length-1;l++){let c=e[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))Axe?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),o&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function Mxe(t){let e=Object.create(null);for(let r in t)e[Pxe(r)]=t[r];return e}function fk(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function Rxe(t){return new nr({props:{handleKeyDown:GU(t)}})}function GU(t){let e=Mxe(t);return function(r,n){let i=Cxe(n),s,o=e[fk(i,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let l=e[fk(i,n,!1)];if(l&&l(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(Txe&&n.ctrlKey&&n.altKey)&&(s=Ta[n.keyCode])&&s!=i){let l=e[fk(s,n)];if(l&&l(r.state,r.dispatch,r))return!0}}return!1}}const rC=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function YU(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const XU=(t,e,r)=>{let n=YU(t,r);if(!n)return!1;let i=nC(n);if(!i){let o=n.blockRange(),l=o&&Sd(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(s7(t,i,e,-1))return!0;if(n.parent.content.size==0&&(nd(s,"end")||He.isSelectable(s)))for(let o=n.depth;;o--){let l=yx(t.doc,n.before(o),n.after(o),Ie.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=t.tr.step(l);c.setSelection(nd(s,"end")?ot.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):He.create(c.doc,i.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},Ixe=(t,e,r)=>{let n=YU(t,r);if(!n)return!1;let i=nC(n);return i?JU(t,i,e):!1},Dxe=(t,e,r)=>{let n=ZU(t,r);if(!n)return!1;let i=iC(n);return i?JU(t,i,e):!1};function JU(t,e,r){let n=e.nodeBefore,i=n,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let f=i.lastChild;if(!f)return!1;i=f}let o=e.nodeAfter,l=o,c=e.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let f=l.firstChild;if(!f)return!1;l=f}let u=yx(t.doc,s,c,Ie.empty);if(!u||u.from!=s||u instanceof Rr&&u.slice.size>=c-s)return!1;if(r){let f=t.tr.step(u);f.setSelection(et.create(f.doc,s)),r(f.scrollIntoView())}return!0}function nd(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const QU=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;s=nC(n)}let o=s&&s.nodeBefore;return!o||!He.isSelectable(o)?!1:(e&&e(t.tr.setSelection(He.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function nC(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function ZU(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const e7=(t,e,r)=>{let n=ZU(t,r);if(!n)return!1;let i=iC(n);if(!i)return!1;let s=i.nodeAfter;if(s7(t,i,e,1))return!0;if(n.parent.content.size==0&&(nd(s,"start")||He.isSelectable(s))){let o=yx(t.doc,n.before(),n.after(),Ie.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(nd(s,"start")?ot.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):He.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==n.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},t7=(t,e,r)=>{let{$head:n,empty:i}=t.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;s=iC(n)}let o=s&&s.nodeAfter;return!o||!He.isSelectable(o)?!1:(e&&e(t.tr.setSelection(He.create(t.doc,s.pos)).scrollIntoView()),!0)};function iC(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const Lxe=(t,e)=>{let r=t.selection,n=r instanceof He,i;if(n){if(r.node.isTextblock||!Ha(t.doc,r.from))return!1;i=r.from}else if(i=gx(t.doc,r.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);n&&s.setSelection(He.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},$xe=(t,e)=>{let r=t.selection,n;if(r instanceof He){if(r.node.isTextblock||!Ha(t.doc,r.to))return!1;n=r.to}else if(n=gx(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},Bxe=(t,e)=>{let{$from:r,$to:n}=t.selection,i=r.blockRange(n),s=i&&Sd(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},r7=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function sC(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const Fxe=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),o=sC(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=r.after(),c=t.tr.replaceWith(l,l,o.createAndFill());c.setSelection(ot.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0},n7=(t,e)=>{let r=t.selection,{$from:n,$to:i}=r;if(r instanceof ri||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=sC(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(et.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},i7=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let s=r.before();if(ho(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let n=r.blockRange(),i=n&&Sd(n);return i==null?!1:(e&&e(t.tr.lift(n,i).scrollIntoView()),!0)};function qxe(t){return(e,r)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof He&&e.selection.node.isBlock)return!n.parentOffset||!ho(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let s=[],o,l,c=!1,u=!1;for(let m=n.depth;;m--)if(n.node(m).isBlock){c=n.end(m)==n.pos+(n.depth-m),u=n.start(m)==n.pos-(n.depth-m),l=sC(n.node(m-1).contentMatchAt(n.indexAfter(m-1))),s.unshift(c&&l?{type:l}:null),o=m;break}else{if(m==1)return!1;s.unshift(null)}let f=e.tr;(e.selection instanceof et||e.selection instanceof ri)&&f.deleteSelection();let d=f.mapping.map(n.pos),p=ho(f.doc,d,s.length,s);if(p||(s[0]=l?{type:l}:null,p=ho(f.doc,d,s.length,s)),!p)return!1;if(f.split(d,s.length,s),!c&&u&&n.node(o).type!=l){let m=f.mapping.map(n.before(o)),x=f.doc.resolve(m);l&&n.node(o-1).canReplaceWith(x.index(),x.index()+1,l)&&f.setNodeMarkup(f.mapping.map(n.before(o)),l)}return r&&r(f.scrollIntoView()),!0}}const zxe=qxe(),Uxe=(t,e)=>{let{$from:r,to:n}=t.selection,i,s=r.sharedDepth(n);return s==0?!1:(i=r.before(s),e&&e(t.tr.setSelection(He.create(t.doc,i))),!0)};function Hxe(t,e,r){let n=e.nodeBefore,i=e.nodeAfter,s=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(s-1,s)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Ha(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function s7(t,e,r,n){let i=e.nodeBefore,s=e.nodeAfter,o,l,c=i.type.spec.isolating||s.type.spec.isolating;if(!c&&Hxe(t,e,r))return!0;let u=!c&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(r){let m=e.pos+s.nodeSize,x=Ne.empty;for(let b=o.length-1;b>=0;b--)x=Ne.from(o[b].create(null,x));x=Ne.from(i.copy(x));let y=t.tr.step(new Dr(e.pos-1,m,e.pos,m,new Ie(x,1,0),o.length,!0)),v=y.doc.resolve(m+2*o.length);v.nodeAfter&&v.nodeAfter.type==i.type&&Ha(y.doc,v.pos)&&y.join(v.pos),r(y.scrollIntoView())}return!0}let f=s.type.spec.isolating||n>0&&c?null:ot.findFrom(e,1),d=f&&f.$from.blockRange(f.$to),p=d&&Sd(d);if(p!=null&&p>=e.depth)return r&&r(t.tr.lift(d,p).scrollIntoView()),!0;if(u&&nd(s,"start",!0)&&nd(i,"end")){let m=i,x=[];for(;x.push(m),!m.isTextblock;)m=m.lastChild;let y=s,v=1;for(;!y.isTextblock;y=y.firstChild)v++;if(m.canReplace(m.childCount,m.childCount,y.content)){if(r){let b=Ne.empty;for(let N=x.length-1;N>=0;N--)b=Ne.from(x[N].copy(b));let w=t.tr.step(new Dr(e.pos-x.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new Ie(b,x.length,0),0,!0));r(w.scrollIntoView())}return!0}}return!1}function o7(t){return function(e,r){let n=e.selection,i=t<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(r&&r(e.tr.setSelection(et.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Wxe=o7(-1),Vxe=o7(1);function Kxe(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s),l=o&&WE(o,t,e);return l?(n&&n(r.tr.wrap(o,l).scrollIntoView()),!0):!1}}function K$(t,e=null){return function(r,n){let i=!1;for(let s=0;s<r.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=r.selection.ranges[s];r.doc.nodesBetween(o,l,(c,u)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)i=!0;else{let f=r.doc.resolve(u),d=f.index();i=f.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(n){let s=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:c}}=r.selection.ranges[o];s.setBlockType(l,c,t,e)}n(s.scrollIntoView())}return!0}}function oC(...t){return function(e,r,n){for(let i=0;i<t.length;i++)if(t[i](e,r,n))return!0;return!1}}oC(rC,XU,QU);oC(rC,e7,t7);oC(r7,n7,i7,zxe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Gxe(t,e=null){return function(r,n){let{$from:i,$to:s}=r.selection,o=i.blockRange(s);if(!o)return!1;let l=n?r.tr:null;return Yxe(l,o,t,e)?(n&&n(l.scrollIntoView()),!0):!1}}function Yxe(t,e,r,n=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=o.resolve(e.start-2);s=new Sv(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new Sv(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=WE(s,r,n,e);return l?(t&&Xxe(t,e,l,i,r),!0):!1}function Xxe(t,e,r,n,i){let s=Ne.empty;for(let f=r.length-1;f>=0;f--)s=Ne.from(r[f].type.create(r[f].attrs,s));t.step(new Dr(e.start-(n?2:0),e.end,e.start,e.end,new Ie(s,0,0),r.length,!0));let o=0;for(let f=0;f<r.length;f++)r[f].type==i&&(o=f+1);let l=r.length-o,c=e.start+r.length-(n?2:0),u=e.parent;for(let f=e.startIndex,d=e.endIndex,p=!0;f<d;f++,p=!1)!p&&ho(t.doc,c,l)&&(t.split(c,l),c+=2*l),c+=u.child(f).nodeSize;return t}function Jxe(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?r?n.node(s.depth-1).type==t?Qxe(e,r,t,s):Zxe(e,r,s):!0:!1}}function Qxe(t,e,r,n){let i=t.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(i.step(new Dr(s-1,o,s,o,new Ie(Ne.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new Sv(i.doc.resolve(n.$from.pos),i.doc.resolve(o),n.depth));const l=Sd(n);if(l==null)return!1;i.lift(n,l);let c=i.doc.resolve(i.mapping.map(s,-1)-1);return Ha(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function Zxe(t,e,r){let n=t.tr,i=r.parent;for(let m=r.end,x=r.endIndex-1,y=r.startIndex;x>y;x--)m-=i.child(x).nodeSize,n.delete(m-1,m+1);let s=n.doc.resolve(r.start),o=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let l=r.startIndex==0,c=r.endIndex==i.childCount,u=s.node(-1),f=s.index(-1);if(!u.canReplace(f+(l?0:1),f+1,o.content.append(c?Ne.empty:Ne.from(i))))return!1;let d=s.pos,p=d+o.nodeSize;return n.step(new Dr(d-(l?1:0),p+(c?1:0),d+1,p-1,new Ie((l?Ne.empty:Ne.from(i.copy(Ne.empty))).append(c?Ne.empty:Ne.from(i.copy(Ne.empty))),l?0:1,c?0:1),l?0:1)),e(n.scrollIntoView()),!0}function ebe(t){return function(e,r){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,c=l.child(o-1);if(c.type!=t)return!1;if(r){let u=c.lastChild&&c.lastChild.type==l.type,f=Ne.from(u?t.create():null),d=new Ie(Ne.from(t.create(null,Ne.from(l.type.create(null,f)))),u?3:1,0),p=s.start,m=s.end;r(e.tr.step(new Dr(p-(u?3:1),m,p,m,d,1,!0)).scrollIntoView())}return!0}}var tbe=Object.defineProperty,a7=(t,e)=>{for(var r in e)tbe(t,r,{get:e[r],enumerable:!0})};function jx(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:i}=r,{storedMarks:s}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,s=r.storedMarks,r}}}var Sx=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,l])=>[o,(...u)=>{const f=l(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o=[],l=!!t,c=t||i.tr,u=()=>(!l&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),o.every(d=>d===!0)),f={...Object.fromEntries(Object.entries(r).map(([d,p])=>[d,(...x)=>{const y=this.buildProps(c,e),v=p(...x)(y);return o.push(v),f}])),run:u};return f}createCan(t){const{rawCommands:e,state:r}=this,n=!1,i=t||r.tr,s=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(e).map(([l,c])=>[l,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:i}=this,{view:s}=n,o={tr:t,editor:n,view:s,state:jx({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(o)]))}};return o}},rbe=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}};function l7(t,e){const r=new dU(t);return e.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}var c7=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&c7(n)}return t};function Mg(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return c7(r)}function mp(t,e,r){if(t instanceof Na||t instanceof Ne)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,i=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return Ne.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(s){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),mp("",e,r)}if(i){if(r.errorOnInvalidContent){let o=!1,l="";const c=new Y8({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(r.slice?ka.fromSchema(c).parseSlice(Mg(t),r.parseOptions):ka.fromSchema(c).parse(Mg(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=ka.fromSchema(e);return r.slice?s.parseSlice(Mg(t),r.parseOptions).content:s.parse(Mg(t),r.parseOptions)}return mp("",e,r)}function V2(t,e,r={},n={}){return mp(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}function nbe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function ibe(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(i,s)=>{r(i)&&n.push({node:i,pos:s})}),n}function sbe(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function Nx(t){return e=>sbe(e.$from,t)}function Ue(t,e,r){return t.config[e]===void 0&&t.parent?Ue(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?Ue(t.parent,e,r):null}):t.config[e]}function aC(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=Ue(e,"addExtensions",r);return n?[e,...aC(n())]:e}).flat(10)}function lC(t,e){const r=uc.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function u7(t){return typeof t=="function"}function St(t,e=void 0,...r){return u7(t)?e?t.bind(e)(...r):t(...r):t}function obe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function gp(t){const e=t.filter(i=>i.type==="extension"),r=t.filter(i=>i.type==="node"),n=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function d7(t){const e=[],{nodeExtensions:r,markExtensions:n}=gp(t),i=[...r,...n],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},c=Ue(o,"addGlobalAttributes",l);if(!c)return;c().forEach(f=>{f.types.forEach(d=>{Object.entries(f.attributes).forEach(([p,m])=>{e.push({type:d,name:p,attribute:{...s,...m}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},c=Ue(o,"addAttributes",l);if(!c)return;const u=c();Object.entries(u).forEach(([f,d])=>{const p={...s,...d};typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,e.push({type:o.name,name:f,attribute:p})})}),e}function ur(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([i,s])=>{if(!n[i]){n[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],c=n[i]?n[i].split(" "):[],u=l.filter(f=>!c.includes(f));n[i]=[...c,...u].join(" ")}else if(i==="style"){const l=s?s.split(";").map(f=>f.trim()).filter(Boolean):[],c=n[i]?n[i].split(";").map(f=>f.trim()).filter(Boolean):[],u=new Map;c.forEach(f=>{const[d,p]=f.split(":").map(m=>m.trim());u.set(d,p)}),l.forEach(f=>{const[d,p]=f.split(":").map(m=>m.trim());u.set(d,p)}),n[i]=Array.from(u.entries()).map(([f,d])=>`${f}: ${d}`).join("; ")}else n[i]=s}),n},{})}function Tv(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>ur(r,n),{})}function abe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function G$(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(r):abe(r.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...n,...i}}}}function Y$(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&obe(r)?!1:r!=null))}function lbe(t,e){var r;const n=d7(t),{nodeExtensions:i,markExtensions:s}=gp(t),o=(r=i.find(u=>Ue(u,"topNode")))==null?void 0:r.name,l=Object.fromEntries(i.map(u=>{const f=n.filter(b=>b.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},p=t.reduce((b,w)=>{const N=Ue(w,"extendNodeSchema",d);return{...b,...N?N(u):{}}},{}),m=Y$({...p,content:St(Ue(u,"content",d)),marks:St(Ue(u,"marks",d)),group:St(Ue(u,"group",d)),inline:St(Ue(u,"inline",d)),atom:St(Ue(u,"atom",d)),selectable:St(Ue(u,"selectable",d)),draggable:St(Ue(u,"draggable",d)),code:St(Ue(u,"code",d)),whitespace:St(Ue(u,"whitespace",d)),linebreakReplacement:St(Ue(u,"linebreakReplacement",d)),defining:St(Ue(u,"defining",d)),isolating:St(Ue(u,"isolating",d)),attrs:Object.fromEntries(f.map(b=>{var w,N;return[b.name,{default:(w=b==null?void 0:b.attribute)==null?void 0:w.default,validate:(N=b==null?void 0:b.attribute)==null?void 0:N.validate}]}))}),x=St(Ue(u,"parseHTML",d));x&&(m.parseDOM=x.map(b=>G$(b,f)));const y=Ue(u,"renderHTML",d);y&&(m.toDOM=b=>y({node:b,HTMLAttributes:Tv(b,f)}));const v=Ue(u,"renderText",d);return v&&(m.toText=v),[u.name,m]})),c=Object.fromEntries(s.map(u=>{const f=n.filter(v=>v.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},p=t.reduce((v,b)=>{const w=Ue(b,"extendMarkSchema",d);return{...v,...w?w(u):{}}},{}),m=Y$({...p,inclusive:St(Ue(u,"inclusive",d)),excludes:St(Ue(u,"excludes",d)),group:St(Ue(u,"group",d)),spanning:St(Ue(u,"spanning",d)),code:St(Ue(u,"code",d)),attrs:Object.fromEntries(f.map(v=>{var b,w;return[v.name,{default:(b=v==null?void 0:v.attribute)==null?void 0:b.default,validate:(w=v==null?void 0:v.attribute)==null?void 0:w.validate}]}))}),x=St(Ue(u,"parseHTML",d));x&&(m.parseDOM=x.map(v=>G$(v,f)));const y=Ue(u,"renderHTML",d);return y&&(m.toDOM=v=>y({mark:v,HTMLAttributes:Tv(v,f)})),[u.name,m]}));return new Y8({topNode:o,nodes:l,marks:c})}function cbe(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function cC(t){return t.sort((r,n)=>{const i=Ue(r,"priority")||100,s=Ue(n,"priority")||100;return i>s?-1:i<s?1:0})}function f7(t){const e=cC(aC(t)),r=cbe(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function h7(t,e,r){const{from:n,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=r||{};let l="";return t.nodesBetween(n,i,(c,u,f,d)=>{var p;c.isBlock&&u>n&&(l+=s);const m=o==null?void 0:o[c.type.name];if(m)return f&&(l+=m({node:c,pos:u,parent:f,index:d,range:e})),!1;c.isText&&(l+=(p=c==null?void 0:c.text)==null?void 0:p.slice(Math.max(n,u)-u,i-u))}),l}function ube(t,e){const r={from:0,to:t.content.size};return h7(t,r,e)}function p7(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function Ao(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function m7(t,e){const r=Ao(e,t.schema),{from:n,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,i,c=>{o.push(...c.marks)});const l=o.find(c=>c.type.name===r.name);return l?{...l.attrs}:{}}function gr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function dbe(t,e){const r=gr(e,t.schema),{from:n,to:i}=t.selection,s=[];t.doc.nodesBetween(n,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===r.name);return o?{...o.attrs}:{}}function kx(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function g7(t,e){const r=kx(typeof e=="string"?e:e.name,t.schema);return r==="node"?dbe(t,e):r==="mark"?m7(t,e):{}}function fbe(t,e=JSON.stringify){const r={};return t.filter(n=>{const i=e(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function hbe(t){const e=fbe(t);return e.length===1?e:e.filter((r,n)=>!e.filter((s,o)=>o!==n).some(s=>r.oldRange.from>=s.oldRange.from&&r.oldRange.to<=s.oldRange.to&&r.newRange.from>=s.newRange.from&&r.newRange.to<=s.newRange.to))}function y7(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,c)=>{o.push({from:l,to:c})});else{const{from:l,to:c}=r[s];if(l===void 0||c===void 0)return;o.push({from:l,to:c})}o.forEach(({from:l,to:c})=>{const u=e.slice(s).map(l,-1),f=e.slice(s).map(c),d=e.invert().map(u,-1),p=e.invert().map(f);n.push({oldRange:{from:d,to:p},newRange:{from:u,to:f}})})}),hbe(n)}function uC(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Pv(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(i=>r.strict?e[i]===t[i]:uC(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function v7(t,e,r={}){return t.find(n=>n.type===e&&Pv(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function X$(t,e,r={}){return!!v7(t,e,r)}function dC(t,e,r){var n;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(f=>f.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(f=>f.type===e)||(r=r||((n=i.node.marks[0])==null?void 0:n.attrs),!v7([...i.node.marks],e,r)))return;let o=i.index,l=t.start()+i.offset,c=o+1,u=l+i.node.nodeSize;for(;o>0&&X$([...t.parent.child(o-1).marks],e,r);)o-=1,l-=t.parent.child(o).nodeSize;for(;c<t.parent.childCount&&X$([...t.parent.child(c).marks],e,r);)u+=t.parent.child(c).nodeSize,c+=1;return{from:l,to:u}}function fC(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(i=>{const s=r.resolve(t),o=dC(s,i.type);o&&n.push({mark:i,...o})}):r.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),n}var pbe=(t,e,r,n=20)=>{const i=t.doc.resolve(r);let s=n,o=null;for(;s>0&&o===null;){const l=i.node(s);(l==null?void 0:l.type.name)===e?o=l:s-=1}return[o,s]};function hk(t,e){return e.nodes[t]||e.marks[t]||null}function ny(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=t.find(s=>s.type===e&&s.name===n);return i?i.attribute.keepOnSplit:!1}))}var mbe=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(i,s,o,l)=>{var c,u;const f=((u=(c=i.type.spec).toText)==null?void 0:u.call(c,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?f:f.slice(0,Math.max(0,n-s))}),r};function K2(t,e,r={}){const{empty:n,ranges:i}=t.selection,s=e?Ao(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Pv(d.attrs,r,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:d,$to:p})=>{const m=d.pos,x=p.pos;t.doc.nodesBetween(m,x,(y,v)=>{if(!y.isText&&!y.marks.length)return;const b=Math.max(m,v),w=Math.min(x,v+y.nodeSize),N=w-b;o+=N,l.push(...y.marks.map(j=>({mark:j,from:b,to:w})))})}),o===0)return!1;const c=l.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Pv(d.mark.attrs,r,{strict:!1})).reduce((d,p)=>d+p.to-p.from,0),u=l.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,p)=>d+p.to-p.from,0);return(c>0?c+u:c)>=o}function Pa(t,e,r={}){const{from:n,to:i,empty:s}=t.selection,o=e?gr(e,t.schema):null,l=[];t.doc.nodesBetween(n,i,(d,p)=>{if(d.isText)return;const m=Math.max(n,p),x=Math.min(i,p+d.nodeSize);l.push({node:d,from:m,to:x})});const c=i-n,u=l.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Pv(d.node.attrs,r,{strict:!1}));return s?!!u.length:u.reduce((d,p)=>d+p.to-p.from,0)>=c}function gbe(t,e,r={}){if(!e)return Pa(t,null,r)||K2(t,null,r);const n=kx(e,t.schema);return n==="node"?Pa(t,e,r):n==="mark"?K2(t,e,r):!1}var ybe=(t,e)=>{const{$from:r,$to:n,$anchor:i}=t.selection;if(e){const s=Nx(l=>l.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},vbe=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function J$(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function Q$(t,e){const{nodeExtensions:r}=gp(e),n=r.find(o=>o.name===t);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},s=St(Ue(n,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function _x(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(_x(s,{ignoreWhitespace:r,checkChildren:e})||(i=!1))}),i}return!1}function x7(t){return t instanceof He}function b7(t){return t instanceof et}function Al(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function w7(t,e=null){if(!e)return null;const r=ot.atStart(t),n=ot.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const i=r.from,s=n.to;return e==="all"?et.create(t,Al(0,i,s),Al(t.content.size,i,s)):et.create(t,Al(e,i,s),Al(e,i,s))}function xbe(t,e,r){const n=t.steps.length-1;if(n<e)return;const i=t.steps[n];if(!(i instanceof Rr||i instanceof Dr))return;const s=t.mapping.maps[n];let o=0;s.forEach((l,c,u,f)=>{o===0&&(o=f)}),t.setSelection(ot.near(t.doc.resolve(o),r))}var Kp=class{constructor(t){this.find=t.find,this.handler=t.handler}},bbe=(t,e)=>{if(uC(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function Rg(t){var e;const{editor:r,from:n,to:i,text:s,rules:o,plugin:l}=t,{view:c}=r;if(c.composing)return!1;const u=c.state.doc.resolve(n);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(p=>p.type.spec.code))return!1;let f=!1;const d=mbe(u)+s;return o.forEach(p=>{if(f)return;const m=bbe(d,p.find);if(!m)return;const x=c.state.tr,y=jx({state:c.state,transaction:x}),v={from:n-(m[0].length-s.length),to:i},{commands:b,chain:w,can:N}=new Sx({editor:r,state:y});p.handler({state:y,range:v,match:m,commands:b,chain:w,can:N})===null||!x.steps.length||(x.setMeta(l,{transform:x,from:n,to:i,text:s}),c.dispatch(x),f=!0)}),f}function wbe(t){const{editor:e,rules:r}=t,n=new nr({state:{init(){return null},apply(i,s,o){const l=i.getMeta(n);if(l)return l;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:f}=c;typeof f=="string"?f=f:f=lC(Ne.from(f),o.schema);const{from:d}=c,p=d+f.length;Rg({editor:e,from:d,to:p,text:f,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return Rg({editor:e,from:s,to:o,text:l,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Rg({editor:e,from:s.pos,to:s.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Rg({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function jbe(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ig(t){return jbe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function j7(t,e){const r={...t};return Ig(t)&&Ig(e)&&Object.keys(e).forEach(n=>{Ig(e[n])&&Ig(t[n])?r[n]=j7(t[n],e[n]):r[n]=e[n]}),r}var hC=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...St(Ue(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...St(Ue(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>j7(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Va=class S7 extends hC{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new S7(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===r.name))return!1;const c=o.find(u=>(u==null?void 0:u.type.name)===r.name);return c&&n.removeStoredMark(c),n.insertText(" ",i.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Sbe(t){return typeof t=="number"}var Nbe=class{constructor(t){this.find=t.find,this.handler=t.handler}},kbe=(t,e,r)=>{if(uC(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function _be(t){const{editor:e,state:r,from:n,to:i,rule:s,pasteEvent:o,dropEvent:l}=t,{commands:c,chain:u,can:f}=new Sx({editor:e,state:r}),d=[];return r.doc.nodesBetween(n,i,(m,x)=>{var y,v,b,w,N;if((v=(y=m.type)==null?void 0:y.spec)!=null&&v.code||!(m.isText||m.isTextblock||m.isInline))return;const j=(N=(w=(b=m.content)==null?void 0:b.size)!=null?w:m.nodeSize)!=null?N:0,k=Math.max(n,x),_=Math.min(i,x+j);if(k>=_)return;const E=m.isText?m.text||"":m.textBetween(k-x,_-x,void 0,"");kbe(E,s.find,o).forEach(T=>{if(T.index===void 0)return;const M=k+T.index+1,P=M+T[0].length,R={from:r.tr.mapping.map(M),to:r.tr.mapping.map(P)},L=s.handler({state:r,range:R,match:T,commands:c,chain:u,can:f,pasteEvent:o,dropEvent:l});d.push(L)})}),d.every(m=>m!==null)}var Dg=null,Obe=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function Ebe(t){const{editor:e,rules:r}=t;let n=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const c=({state:f,from:d,to:p,rule:m,pasteEvt:x})=>{const y=f.tr,v=jx({state:f,transaction:y});if(!(!_be({editor:e,state:v,from:Math.max(d-1,0),to:p.b-1,rule:m,pasteEvent:x,dropEvent:l})||!y.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return r.map(f=>new nr({view(d){const p=x=>{var y;n=(y=d.dom.parentElement)!=null&&y.contains(x.target)?d.dom.parentElement:null,n&&(Dg=e)},m=()=>{Dg&&(Dg=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(d,p)=>{if(s=n===d.dom.parentElement,l=p,!s){const m=Dg;m!=null&&m.isEditable&&setTimeout(()=>{const x=m.state.selection;x&&m.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(d,p)=>{var m;const x=(m=p.clipboardData)==null?void 0:m.getData("text/html");return o=p,i=!!(x!=null&&x.includes("data-pm-slice")),!1}}},appendTransaction:(d,p,m)=>{const x=d[0],y=x.getMeta("uiEvent")==="paste"&&!i,v=x.getMeta("uiEvent")==="drop"&&!s,b=x.getMeta("applyPasteRules"),w=!!b;if(!y&&!v&&!w)return;if(w){let{text:k}=b;typeof k=="string"?k=k:k=lC(Ne.from(k),m.schema);const{from:_}=b,E=_+k.length,A=Obe(k);return c({rule:f,state:m,from:_,to:{b:E},pasteEvt:A})}const N=p.doc.content.findDiffStart(m.doc.content),j=p.doc.content.findDiffEnd(m.doc.content);if(!(!Sbe(N)||!j||N===j.b))return c({rule:f,state:m,from:N,to:j,pasteEvt:o})}}))}var Ox=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=f7(t),this.schema=lbe(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:hk(e.name,this.schema)},n=Ue(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return cC([...this.extensions].reverse()).map(n=>{const i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:hk(n.name,this.schema)},s=[],o=Ue(n,"addKeyboardShortcuts",i);let l={};if(n.type==="mark"&&Ue(n,"exitable",i)&&(l.ArrowRight=()=>Va.handleExit({editor:t,mark:n})),o){const p=Object.fromEntries(Object.entries(o()).map(([m,x])=>[m,()=>x({editor:t})]));l={...l,...p}}const c=Rxe(l);s.push(c);const u=Ue(n,"addInputRules",i);if(J$(n,t.options.enableInputRules)&&u){const p=u();if(p&&p.length){const m=wbe({editor:t,rules:p}),x=Array.isArray(m)?m:[m];s.push(...x)}}const f=Ue(n,"addPasteRules",i);if(J$(n,t.options.enablePasteRules)&&f){const p=f();if(p&&p.length){const m=Ebe({editor:t,rules:p});s.push(...m)}}const d=Ue(n,"addProseMirrorPlugins",i);if(d){const p=d();s.push(...p)}return s}).flat()}get attributes(){return d7(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=gp(this.extensions);return Object.fromEntries(e.filter(r=>!!Ue(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:gr(r.name,this.schema)},s=Ue(r,"addNodeView",i);if(!s)return[];const o=(l,c,u,f,d)=>{const p=Tv(l,n);return s()({node:l,view:c,getPos:u,decorations:f,innerDecorations:d,editor:t,extension:r,HTMLAttributes:p})};return[r.name,o]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=gp(this.extensions);return Object.fromEntries(e.filter(r=>!!Ue(r,"addMarkView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Ao(r.name,this.schema)},s=Ue(r,"addMarkView",i);if(!s)return[];const o=(l,c,u)=>{const f=Tv(l,n);return s()({mark:l,view:c,inline:u,editor:t,extension:r,HTMLAttributes:f,updateAttributes:d=>{Hwe(l,t,d)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:hk(e.name,this.schema)};e.type==="mark"&&((r=St(Ue(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const i=Ue(e,"onBeforeCreate",n),s=Ue(e,"onCreate",n),o=Ue(e,"onUpdate",n),l=Ue(e,"onSelectionUpdate",n),c=Ue(e,"onTransaction",n),u=Ue(e,"onFocus",n),f=Ue(e,"onBlur",n),d=Ue(e,"onDestroy",n);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),c&&this.editor.on("transaction",c),u&&this.editor.on("focus",u),f&&this.editor.on("blur",f),d&&this.editor.on("destroy",d)})}};Ox.resolve=f7;Ox.sort=cC;Ox.flatten=aC;var Cbe={};a7(Cbe,{ClipboardTextSerializer:()=>k7,Commands:()=>E7,Delete:()=>C7,Drop:()=>A7,Editable:()=>T7,FocusEvents:()=>M7,Keymap:()=>R7,Paste:()=>I7,Tabindex:()=>D7,focusEventsPluginKey:()=>P7});var Ct=class N7 extends hC{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new N7(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},k7=Ct.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new nr({key:new Fr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(f=>f.$from.pos)),l=Math.max(...s.map(f=>f.$to.pos)),c=p7(r);return h7(n,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),_7={};a7(_7,{blur:()=>Abe,clearContent:()=>Tbe,clearNodes:()=>Pbe,command:()=>Mbe,createParagraphNear:()=>Rbe,cut:()=>Ibe,deleteCurrentNode:()=>Dbe,deleteNode:()=>Lbe,deleteRange:()=>$be,deleteSelection:()=>Bbe,enter:()=>Fbe,exitCode:()=>qbe,extendMarkRange:()=>zbe,first:()=>Ube,focus:()=>Wbe,forEach:()=>Vbe,insertContent:()=>Kbe,insertContentAt:()=>Ybe,joinBackward:()=>Qbe,joinDown:()=>Jbe,joinForward:()=>Zbe,joinItemBackward:()=>ewe,joinItemForward:()=>twe,joinTextblockBackward:()=>rwe,joinTextblockForward:()=>nwe,joinUp:()=>Xbe,keyboardShortcut:()=>swe,lift:()=>owe,liftEmptyBlock:()=>awe,liftListItem:()=>lwe,newlineInCode:()=>cwe,resetAttributes:()=>uwe,scrollIntoView:()=>dwe,selectAll:()=>fwe,selectNodeBackward:()=>hwe,selectNodeForward:()=>pwe,selectParentNode:()=>mwe,selectTextblockEnd:()=>gwe,selectTextblockStart:()=>ywe,setContent:()=>vwe,setMark:()=>bwe,setMeta:()=>wwe,setNode:()=>jwe,setNodeSelection:()=>Swe,setTextSelection:()=>Nwe,sinkListItem:()=>kwe,splitBlock:()=>_we,splitListItem:()=>Owe,toggleList:()=>Ewe,toggleMark:()=>Cwe,toggleNode:()=>Awe,toggleWrap:()=>Twe,undoInputRule:()=>Pwe,unsetAllMarks:()=>Mwe,unsetMark:()=>Rwe,updateAttributes:()=>Iwe,wrapIn:()=>Dwe,wrapInList:()=>Lwe});var Abe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),Tbe=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),Pbe=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:i}=n;return r&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(l,c)=>{if(l.type.isText)return;const{doc:u,mapping:f}=e,d=u.resolve(f.map(c)),p=u.resolve(f.map(c+l.nodeSize)),m=d.blockRange(p);if(!m)return;const x=Sd(m);if(l.type.isTextblock){const{defaultType:y}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(m.start,y)}(x||x===0)&&e.lift(m,x)})}),!0},Mbe=t=>e=>t(e),Rbe=()=>({state:t,dispatch:e})=>n7(t,e),Ibe=(t,e)=>({editor:r,tr:n})=>{const{state:i}=r,s=i.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,s.content),n.setSelection(new et(n.doc.resolve(Math.max(o-1,0)))),!0},Dbe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===n.type){if(e){const l=i.before(s),c=i.after(s);t.delete(l,c).scrollIntoView()}return!0}return!1},Lbe=t=>({tr:e,state:r,dispatch:n})=>{const i=gr(t,r.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(n){const c=s.before(o),u=s.after(o);e.delete(c,u).scrollIntoView()}return!0}return!1},$be=t=>({tr:e,dispatch:r})=>{const{from:n,to:i}=t;return r&&e.delete(n,i),!0},Bbe=()=>({state:t,dispatch:e})=>rC(t,e),Fbe=()=>({commands:t})=>t.keyboardShortcut("Enter"),qbe=()=>({state:t,dispatch:e})=>Fxe(t,e),zbe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const s=Ao(t,n.schema),{doc:o,selection:l}=r,{$from:c,from:u,to:f}=l;if(i){const d=dC(c,s,e);if(d&&d.from<=u&&d.to>=f){const p=et.create(o,d.from,d.to);r.setSelection(p)}}return!0},Ube=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function Hbe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function pC(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Wbe=(t=null,e={})=>({editor:r,view:n,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(pC()||Hbe())&&n.dom.focus(),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!b7(r.state.selection))return o(),!0;const l=w7(i.doc,t)||r.state.selection,c=r.state.selection.eq(l);return s&&(c||i.setSelection(l),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Vbe=(t,e)=>r=>t.every((n,i)=>e(n,{...r,index:i})),Kbe=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),Gbe=t=>!("type"in t),Ybe=(t,e,r)=>({tr:n,dispatch:i,editor:s})=>{var o;if(i){r={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let l;const{selection:c}=s.state,u=b=>{s.emit("contentError",{editor:s,error:b,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{mp(e,s.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(b){u(b)}try{l=mp(e,s.schema,{parseOptions:f,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(b){return u(b),!1}let{from:d,to:p}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},m=!0,x=!0;if((Gbe(l)?l:[l]).forEach(b=>{b.check(),m=m?b.isText&&b.marks.length===0:!1,x=x?b.isBlock:!1}),d===p&&x){const{parent:b}=n.doc.resolve(d);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(d-=1,p+=1)}let v;if(m){if(Array.isArray(e))v=e.map(b=>b.text||"").join("");else if(e instanceof Ne){let b="";e.forEach(w=>{w.text&&(b+=w.text)}),v=b}else typeof e=="object"&&e&&e.text?v=e.text:v=e;n.insertText(v,d,p)}else{v=l;const b=c.$from.parentOffset===0,w=c.$from.node().isText||c.$from.node().isTextblock,N=c.$from.node().content.size>0;b&&w&&N&&(d=Math.max(0,d-1)),n.replaceWith(d,p,v)}r.updateSelection&&xbe(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:v}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:v})}return!0},Xbe=()=>({state:t,dispatch:e})=>Lxe(t,e),Jbe=()=>({state:t,dispatch:e})=>$xe(t,e),Qbe=()=>({state:t,dispatch:e})=>XU(t,e),Zbe=()=>({state:t,dispatch:e})=>e7(t,e),ewe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=gx(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},twe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=gx(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},rwe=()=>({state:t,dispatch:e})=>Ixe(t,e),nwe=()=>({state:t,dispatch:e})=>Dxe(t,e);function O7(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function iwe(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,i,s,o;for(let l=0;l<e.length-1;l+=1){const c=e[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))pC()||O7()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),s&&(r=`Shift-${r}`),r}var swe=t=>({editor:e,view:r,tr:n,dispatch:i})=>{const s=iwe(t).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{r.someProp("handleKeyDown",u=>u(r,l))});return c==null||c.steps.forEach(u=>{const f=u.map(n.mapping);f&&i&&n.maybeStep(f)}),!0},owe=(t,e={})=>({state:r,dispatch:n})=>{const i=gr(t,r.schema);return Pa(r,i,e)?Bxe(r,n):!1},awe=()=>({state:t,dispatch:e})=>i7(t,e),lwe=t=>({state:e,dispatch:r})=>{const n=gr(t,e.schema);return Jxe(n)(e,r)},cwe=()=>({state:t,dispatch:e})=>r7(t,e);function Z$(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,i)=>(r.includes(i)||(n[i]=t[i]),n),{})}var uwe=(t,e)=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const l=kx(typeof t=="string"?t:t.name,n.schema);return l?(l==="node"&&(s=gr(t,n.schema)),l==="mark"&&(o=Ao(t,n.schema)),i&&r.selection.ranges.forEach(c=>{n.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,f)=>{s&&s===u.type&&r.setNodeMarkup(f,void 0,Z$(u.attrs,e)),o&&u.marks.length&&u.marks.forEach(d=>{o===d.type&&r.addMark(f,f+u.nodeSize,o.create(Z$(d.attrs,e)))})})}),!0):!1},dwe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),fwe=()=>({tr:t,dispatch:e})=>{if(e){const r=new ri(t.doc);t.setSelection(r)}return!0},hwe=()=>({state:t,dispatch:e})=>QU(t,e),pwe=()=>({state:t,dispatch:e})=>t7(t,e),mwe=()=>({state:t,dispatch:e})=>Uxe(t,e),gwe=()=>({state:t,dispatch:e})=>Vxe(t,e),ywe=()=>({state:t,dispatch:e})=>Wxe(t,e),vwe=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:c}=s;if(n.preserveWhitespace!=="full"){const u=V2(t,i.schema,n,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,c.content.size,u).setMeta("preventUpdate",!r),!0}return o&&s.setMeta("preventUpdate",!r),l.insertContentAt({from:0,to:c.content.size},t,{parseOptions:n,errorOnInvalidContent:e??i.options.enableContentCheck})};function xwe(t,e,r){var n;const{selection:i}=e;let s=null;if(b7(i)&&(s=i.$cursor),s){const l=(n=t.storedMarks)!=null?n:s.marks();return!!r.isInSet(l)||!l.some(c=>c.type.excludes(r))}const{ranges:o}=i;return o.some(({$from:l,$to:c})=>{let u=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(l.pos,c.pos,(f,d,p)=>{if(u)return!1;if(f.isInline){const m=!p||p.type.allowsMarkType(r),x=!!r.isInSet(f.marks)||!f.marks.some(y=>y.type.excludes(r));u=m&&x}return!u}),u})}var bwe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{const{selection:s}=r,{empty:o,ranges:l}=s,c=Ao(t,n.schema);if(i)if(o){const u=m7(n,c);r.addStoredMark(c.create({...u,...e}))}else l.forEach(u=>{const f=u.$from.pos,d=u.$to.pos;n.doc.nodesBetween(f,d,(p,m)=>{const x=Math.max(m,f),y=Math.min(m+p.nodeSize,d);p.marks.find(b=>b.type===c)?p.marks.forEach(b=>{c===b.type&&r.addMark(x,y,c.create({...b.attrs,...e}))}):r.addMark(x,y,c.create(e))})});return xwe(n,r,c)},wwe=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),jwe=(t,e={})=>({state:r,dispatch:n,chain:i})=>{const s=gr(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>K$(s,{...o,...e})(r)?!0:l.clearNodes()).command(({state:l})=>K$(s,{...o,...e})(l,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Swe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,i=Al(t,0,n.content.size),s=He.create(n,i);e.setSelection(s)}return!0},Nwe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=et.atStart(n).from,l=et.atEnd(n).to,c=Al(i,o,l),u=Al(s,o,l),f=et.create(n,c,u);e.setSelection(f)}return!0},kwe=t=>({state:e,dispatch:r})=>{const n=gr(t,e.schema);return ebe(n)(e,r)};function e6(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(n)}}var _we=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:c}=s,u=i.extensionManager.attributes,f=ny(u,l.node().type.name,l.node().attrs);if(s instanceof He&&s.node.isBlock)return!l.parentOffset||!ho(o,l.pos)?!1:(n&&(t&&e6(r,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=c.parentOffset===c.parent.content.size,p=l.depth===0?void 0:nbe(l.node(-1).contentMatchAt(l.indexAfter(-1)));let m=d&&p?[{type:p,attrs:f}]:void 0,x=ho(e.doc,e.mapping.map(l.pos),1,m);if(!m&&!x&&ho(e.doc,e.mapping.map(l.pos),1,p?[{type:p}]:void 0)&&(x=!0,m=p?[{type:p,attrs:f}]:void 0),n){if(x&&(s instanceof et&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,m),p&&!d&&!l.parentOffset&&l.parent.type!==p)){const y=e.mapping.map(l.before()),v=e.doc.resolve(y);l.node(-1).canReplaceWith(v.index(),v.index()+1,p)&&e.setNodeMarkup(e.mapping.map(l.before()),p)}t&&e6(r,i.extensionManager.splittableMarks),e.scrollIntoView()}return x},Owe=(t,e={})=>({tr:r,state:n,dispatch:i,editor:s})=>{var o;const l=gr(t,n.schema),{$from:c,$to:u}=n.selection,f=n.selection.node;if(f&&f.isBlock||c.depth<2||!c.sameParent(u))return!1;const d=c.node(-1);if(d.type!==l)return!1;const p=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let b=Ne.empty;const w=c.index(-1)?1:c.index(-2)?2:3;for(let A=c.depth-w;A>=c.depth-3;A-=1)b=Ne.from(c.node(A).copy(b));const N=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,j={...ny(p,c.node().type.name,c.node().attrs),...e},k=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(j))||void 0;b=b.append(Ne.from(l.createAndFill(null,k)||void 0));const _=c.before(c.depth-(w-1));r.replace(_,c.after(-N),new Ie(b,4-w,0));let E=-1;r.doc.nodesBetween(_,r.doc.content.size,(A,T)=>{if(E>-1)return!1;A.isTextblock&&A.content.size===0&&(E=T+1)}),E>-1&&r.setSelection(et.near(r.doc.resolve(E))),r.scrollIntoView()}return!0}const m=u.pos===c.end()?d.contentMatchAt(0).defaultType:null,x={...ny(p,d.type.name,d.attrs),...e},y={...ny(p,c.node().type.name,c.node().attrs),...e};r.delete(c.pos,u.pos);const v=m?[{type:l,attrs:x},{type:m,attrs:y}]:[{type:l,attrs:x}];if(!ho(r.doc,c.pos,2))return!1;if(i){const{selection:b,storedMarks:w}=n,{splittableMarks:N}=s.extensionManager,j=w||b.$to.parentOffset&&b.$from.marks();if(r.split(c.pos,2,v).scrollIntoView(),!j||!i)return!0;const k=j.filter(_=>N.includes(_.type.name));r.ensureMarks(k)}return!0},pk=(t,e)=>{const r=Nx(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&Ha(t.doc,r.pos)&&t.join(r.pos),!0},mk=(t,e)=>{const r=Nx(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=t.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&Ha(t.doc,n)&&t.join(n),!0},Ewe=(t,e,r,n={})=>({editor:i,tr:s,state:o,dispatch:l,chain:c,commands:u,can:f})=>{const{extensions:d,splittableMarks:p}=i.extensionManager,m=gr(t,o.schema),x=gr(e,o.schema),{selection:y,storedMarks:v}=o,{$from:b,$to:w}=y,N=b.blockRange(w),j=v||y.$to.parentOffset&&y.$from.marks();if(!N)return!1;const k=Nx(_=>Q$(_.type.name,d))(y);if(N.depth>=1&&k&&N.depth-k.depth<=1){if(k.node.type===m)return u.liftListItem(x);if(Q$(k.node.type.name,d)&&m.validContent(k.node.content)&&l)return c().command(()=>(s.setNodeMarkup(k.pos,m),!0)).command(()=>pk(s,m)).command(()=>mk(s,m)).run()}return!r||!j||!l?c().command(()=>f().wrapInList(m,n)?!0:u.clearNodes()).wrapInList(m,n).command(()=>pk(s,m)).command(()=>mk(s,m)).run():c().command(()=>{const _=f().wrapInList(m,n),E=j.filter(A=>p.includes(A.type.name));return s.ensureMarks(E),_?!0:u.clearNodes()}).wrapInList(m,n).command(()=>pk(s,m)).command(()=>mk(s,m)).run()},Cwe=(t,e={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:s=!1}=r,o=Ao(t,n.schema);return K2(n,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Awe=(t,e,r={})=>({state:n,commands:i})=>{const s=gr(t,n.schema),o=gr(e,n.schema),l=Pa(n,s,r);let c;return n.selection.$anchor.sameParent(n.selection.$head)&&(c=n.selection.$anchor.parent.attrs),l?i.setNode(o,c):i.setNode(s,{...c,...r})},Twe=(t,e={})=>({state:r,commands:n})=>{const i=gr(t,r.schema);return Pa(r,i,e)?n.lift(i):n.wrapIn(i,e)},Pwe=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,l=s.transform;for(let c=l.steps.length-1;c>=0;c-=1)o.step(l.steps[c].invert(l.docs[c]));if(s.text){const c=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,c))}else o.delete(s.from,s.to)}return!0}}return!1},Mwe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:i}=r;return n||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},Rwe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=r,c=Ao(t,n.schema),{$from:u,empty:f,ranges:d}=l;if(!i)return!0;if(f&&o){let{from:p,to:m}=l;const x=(s=u.marks().find(v=>v.type===c))==null?void 0:s.attrs,y=dC(u,c,x);y&&(p=y.from,m=y.to),r.removeMark(p,m,c)}else d.forEach(p=>{r.removeMark(p.$from.pos,p.$to.pos,c)});return r.removeStoredMark(c),!0},Iwe=(t,e={})=>({tr:r,state:n,dispatch:i})=>{let s=null,o=null;const l=kx(typeof t=="string"?t:t.name,n.schema);return l?(l==="node"&&(s=gr(t,n.schema)),l==="mark"&&(o=Ao(t,n.schema)),i&&r.selection.ranges.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;let d,p,m,x;r.selection.empty?n.doc.nodesBetween(u,f,(y,v)=>{s&&s===y.type&&(m=Math.max(v,u),x=Math.min(v+y.nodeSize,f),d=v,p=y)}):n.doc.nodesBetween(u,f,(y,v)=>{v<u&&s&&s===y.type&&(m=Math.max(v,u),x=Math.min(v+y.nodeSize,f),d=v,p=y),v>=u&&v<=f&&(s&&s===y.type&&r.setNodeMarkup(v,void 0,{...y.attrs,...e}),o&&y.marks.length&&y.marks.forEach(b=>{if(o===b.type){const w=Math.max(v,u),N=Math.min(v+y.nodeSize,f);r.addMark(w,N,o.create({...b.attrs,...e}))}}))}),p&&(d!==void 0&&r.setNodeMarkup(d,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(y=>{o===y.type&&r.addMark(m,x,o.create({...y.attrs,...e}))}))}),!0):!1},Dwe=(t,e={})=>({state:r,dispatch:n})=>{const i=gr(t,r.schema);return Kxe(i,e)(r,n)},Lwe=(t,e={})=>({state:r,dispatch:n})=>{const i=gr(t,r.schema);return Gxe(i,e)(r,n)},E7=Ct.create({name:"commands",addCommands(){return{..._7}}}),C7=Ct.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,i;const s=()=>{var o,l,c,u;if((u=(c=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:c.call(l,t))!=null?u:t.getMeta("y-sync$"))return;const f=l7(t.before,[t,...e]);y7(f).forEach(m=>{f.mapping.mapResult(m.oldRange.from).deletedAfter&&f.mapping.mapResult(m.oldRange.to).deletedBefore&&f.before.nodesBetween(m.oldRange.from,m.oldRange.to,(x,y)=>{const v=y+x.nodeSize-2,b=m.oldRange.from<=y&&v<=m.oldRange.to;this.editor.emit("delete",{type:"node",node:x,from:y,to:v,newFrom:f.mapping.map(y),newTo:f.mapping.map(v),deletedRange:m.oldRange,newRange:m.newRange,partial:!b,editor:this.editor,transaction:t,combinedTransform:f})})});const p=f.mapping;f.steps.forEach((m,x)=>{var y,v;if(m instanceof es){const b=p.slice(x).map(m.from,-1),w=p.slice(x).map(m.to),N=p.invert().map(b,-1),j=p.invert().map(w),k=(y=f.doc.nodeAt(b-1))==null?void 0:y.marks.some(E=>E.eq(m.mark)),_=(v=f.doc.nodeAt(w))==null?void 0:v.marks.some(E=>E.eq(m.mark));this.editor.emit("delete",{type:"mark",mark:m.mark,from:m.from,to:m.to,deletedRange:{from:N,to:j},newRange:{from:b,to:w},partial:!!(_||k),editor:this.editor,transaction:t,combinedTransform:f})}})};(i=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||i?setTimeout(s,0):s()}}),A7=Ct.create({name:"drop",addProseMirrorPlugins(){return[new nr({key:new Fr("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),T7=Ct.create({name:"editable",addProseMirrorPlugins(){return[new nr({key:new Fr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),P7=new Fr("focusEvents"),M7=Ct.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new nr({key:P7,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),R7=Ct.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:c,doc:u}=l,{empty:f,$anchor:d}=c,{pos:p,parent:m}=d,x=d.parent.isTextblock&&p>0?l.doc.resolve(p-1):d,y=x.parent.type.spec.isolating,v=d.pos-d.parentOffset,b=y&&x.parent.childCount===1?v===d.pos:ot.atStart(u).from===p;return!f||!m.type.isTextblock||m.textContent.length||!b||b&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},s={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return pC()||O7()?s:i},addProseMirrorPlugins(){return[new nr({key:new Fr("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(y=>y.getMeta("composition")))return;const n=t.some(y=>y.docChanged)&&!e.doc.eq(r.doc),i=t.some(y=>y.getMeta("preventClearDocument"));if(!n||i)return;const{empty:s,from:o,to:l}=e.selection,c=ot.atStart(e.doc).from,u=ot.atEnd(e.doc).to;if(s||!(o===c&&l===u)||!_x(r.doc))return;const p=r.tr,m=jx({state:r,transaction:p}),{commands:x}=new Sx({editor:this.editor,state:m});if(x.clearNodes(),!!p.steps.length)return p}})]}}),I7=Ct.create({name:"paste",addProseMirrorPlugins(){return[new nr({key:new Fr("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),D7=Ct.create({name:"tabindex",addProseMirrorPlugins(){return[new nr({key:new Fr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),$we=class au{constructor(e,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new au(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new au(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new au(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,s=r.isAtom&&!r.isText,o=this.pos+n+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const c=new au(l,this.editor,i,i?r:null);i&&(c.actualDepth=this.depth+1),e.push(new au(l,this.editor,i,i?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===e)if(Object.keys(r).length>0){const s=i.node.attrs,o=Object.keys(r);for(let l=0;l<o.length;l+=1){const c=o[l];if(s[c]!==r[c])break}}else n=i;i=i.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(r);return this.children.forEach(o=>{n&&i.length>0||(o.node.type.name===e&&s.every(c=>r[c]===o.node.attrs[c])&&i.push(o),!(n&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,r,n))))}),i}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},Bwe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Fwe(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var qwe=class extends rbe{constructor(t={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:s})=>this.options.onDrop(n,i,s)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=w7(e,this.options.autofocus);this.editorState=mu.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Fwe(Bwe,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.editorState=this.state.apply(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=u7(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(o=>!o.key.startsWith(s))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[T7,k7.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),E7,M7,R7,D7,A7,I7,C7].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Ox(n,this)}createCommandManager(){this.commandManager=new Sx({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=V2(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=V2(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new KU(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass(),this.injectCSS();const n=this.view.dom;n.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(u=>{var f;return(f=this.capturedTransaction)==null?void 0:f.step(u)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),i=r.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),l=o==null?void 0:o.getMeta("focus"),c=o==null?void 0:o.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),c&&this.emit("blur",{editor:this,event:c.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(u=>u.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return g7(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return gbe(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return lC(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return ube(this.state.doc,{blockSeparator:e,textSerializers:{...p7(this.schema),...r}})}get isEmpty(){return _x(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new $we(e,this)}get $doc(){return this.$pos(0)}};function id(t){return new Kp({find:t.find,handler:({state:e,range:r,match:n})=>{const i=St(t.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:s}=e,o=n[n.length-1],l=n[0];if(o){const c=l.search(/\S/),u=r.from+l.indexOf(o),f=u+o.length;if(fC(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(y=>y===t.type&&y!==m.mark.type)).filter(m=>m.to>u).length)return null;f<r.to&&s.delete(f,r.to),u>r.from&&s.delete(r.from+c,u);const p=r.from+c+o.length;s.addMark(r.from+c,p,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function zwe(t){return new Kp({find:t.find,handler:({state:e,range:r,match:n})=>{const i=St(t.getAttributes,void 0,n)||{},{tr:s}=e,o=r.from;let l=r.to;const c=t.type.create(i);if(n[1]){const u=n[0].lastIndexOf(n[1]);let f=o+u;f>l?f=l:l=f+n[1].length;const d=n[0][n[0].length-1];s.insertText(d,o+n[0].length-1),s.replaceWith(f,l,c)}else if(n[0]){const u=t.type.isInline?o:o-1;s.insert(u,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()}})}function G2(t){return new Kp({find:t.find,handler:({state:e,range:r,match:n})=>{const i=e.doc.resolve(r.from),s=St(t.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,s)}})}function ir(t){return new Kp({find:t.find,handler:({state:e,range:r,match:n})=>{let i=t.replace,s=r.from;const o=r.to;if(n[1]){const l=n[0].lastIndexOf(n[1]);i+=n[0].slice(l+n[1].length),s+=l;const c=s-o;c>0&&(i=n[0].slice(l-c,l)+i,s=o)}e.tr.insertText(i,s,o)}})}function sd(t){return new Kp({find:t.find,handler:({state:e,range:r,match:n,chain:i})=>{const s=St(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),c=o.doc.resolve(r.from).blockRange(),u=c&&WE(c,t.type,s);if(!u)return null;if(o.wrap(c,u),t.keepMarks&&t.editor){const{selection:d,storedMarks:p}=e,{splittableMarks:m}=t.editor.extensionManager,x=p||d.$to.parentOffset&&d.$from.marks();if(x){const y=x.filter(v=>m.includes(v.type.name));o.ensureMarks(y)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const f=o.doc.resolve(r.from-1).nodeBefore;f&&f.type===t.type&&Ha(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,f))&&o.join(r.from-1)}})}function Uwe(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof He){const s=n.index();return n.parent.canReplaceWith(s,s+1,e)}let i=n.depth;for(;i>=0;){const s=n.index(i);if(n.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}function Hwe(t,e,r={}){const{state:n}=e,{doc:i,tr:s}=n,o=t;i.descendants((l,c)=>{const u=s.mapping.map(c),f=s.mapping.map(c)+l.nodeSize;let d=null;if(l.marks.forEach(m=>{if(m!==o)return!1;d=m}),!d)return;let p=!1;if(Object.keys(r).forEach(m=>{r[m]!==d.attrs[m]&&(p=!0)}),p){const m=t.type.create({...t.attrs,...r});s.removeMark(u,f,t.type),s.addMark(u,f,m)}}),s.docChanged&&e.view.dispatch(s)}var li=class L7 extends hC{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new L7(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Jl(t){return new Nbe({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:i})=>{const s=St(t.getAttributes,void 0,n,i);if(s===!1||s===null)return null;const{tr:o}=e,l=n[n.length-1],c=n[0];let u=r.to;if(l){const f=c.search(/\S/),d=r.from+c.indexOf(l),p=d+l.length;if(fC(r.from,r.to,e.doc).filter(x=>x.mark.type.excluded.find(v=>v===t.type&&v!==x.mark.type)).filter(x=>x.to>d).length)return null;p<r.to&&o.delete(p,r.to),d>r.from&&o.delete(r.from+f,d),u=r.from+f+l.length,o.addMark(r.from+f,u,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}var gk,t6;function Wwe(){return t6||(t6=1,gk=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(i of e.entries())if(!r.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],r.get(i[0])))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(i of e.entries())if(!r.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(e[i]!==r[i])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}),gk}var Vwe=Wwe();const Kwe=ht(Vwe);var yk={exports:{}},vk={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r6;function Gwe(){if(r6)return vk;r6=1;var t=ad(),e=P8();function r(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,c=t.useDebugValue;return vk.useSyncExternalStoreWithSelector=function(u,f,d,p,m){var x=s(null);if(x.current===null){var y={hasValue:!1,value:null};x.current=y}else y=x.current;x=l(function(){function b(_){if(!w){if(w=!0,N=_,_=p(_),m!==void 0&&y.hasValue){var E=y.value;if(m(E,_))return j=E}return j=_}if(E=j,n(N,_))return E;var A=p(_);return m!==void 0&&m(E,A)?(N=_,E):(N=_,j=A)}var w=!1,N,j,k=d===void 0?null:d;return[function(){return b(f())},k===null?void 0:function(){return b(k())}]},[f,d,p,m]);var v=i(u,x[0],x[1]);return o(function(){y.hasValue=!0,y.value=v},[v]),c(v),v},vk}var n6;function Ywe(){return n6||(n6=1,yk.exports=Gwe()),yk.exports}var Xwe=Ywe(),Jwe=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},Qwe=({contentComponent:t})=>{const e=M8.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return a.jsx(a.Fragment,{children:Object.values(e)})};function Zwe(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:tB.createPortal(n.reactElement,n.element,r)},t.forEach(i=>i())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(i=>i())}}}var e1e=class extends Z.Component{constructor(t){var e;super(t),this.editorContentRef=Z.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(...t.options.element.childNodes),t.setOptions({element:e}),t.contentComponent=Zwe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!((t=e.options.element)!=null&&t.firstChild)))return;const r=document.createElement("div");r.append(...e.options.element.childNodes),e.setOptions({element:r})}render(){const{editor:t,innerRef:e,...r}=this.props;return a.jsxs(a.Fragment,{children:[a.jsx("div",{ref:Jwe(e,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&a.jsx(Qwe,{contentComponent:t.contentComponent})]})}},t1e=O.forwardRef((t,e)=>{const r=Z.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Z.createElement(e1e,{key:r,innerRef:e,...t})}),Mv=Z.memo(t1e),r1e=typeof window<"u"?O.useLayoutEffect:O.useEffect,n1e=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function i1e(t){var e;const[r]=O.useState(()=>new n1e(t.editor)),n=Xwe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:Kwe);return r1e(()=>r.watch(t.editor),[t.editor,r]),O.useDebugValue(n),n}var s1e=!1,Y2=typeof window>"u",o1e=Y2||!!(typeof window<"u"&&window.next),a1e=class $7{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Y2||o1e?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...n)},onBlur:(...n)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...n)},onCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...n)},onDestroy:(...n)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...n)},onFocus:(...n)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...n)},onSelectionUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...n)},onTransaction:(...n)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...n)},onUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...n)},onContentError:(...n)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...n)},onDrop:(...n)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...n)},onPaste:(...n)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...n)},onDelete:(...n)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...n)}};return new qwe(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=r.extensions)==null?void 0:o[s])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?$7.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,i)=>n===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function Rv(t={},e=[]){const r=O.useRef(t);r.current=t;const[n]=O.useState(()=>new a1e(r)),i=M8.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return O.useDebugValue(i),O.useEffect(n.onRender(e)),i1e({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var l1e=O.createContext({editor:null});l1e.Consumer;var c1e=O.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),u1e=()=>O.useContext(c1e);Z.forwardRef((t,e)=>{const{onDragStart:r}=u1e(),n=t.as||"div";return a.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});Z.createContext({markViewContentRef:()=>{}});var Iv=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},d1e=/^\s*>\s$/,f1e=li.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Iv("blockquote",{...ur(this.options.HTMLAttributes,t),children:Iv("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[sd({find:d1e,type:this.type})]}}),h1e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,p1e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,m1e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,g1e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,y1e=Va.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Iv("strong",{...ur(this.options.HTMLAttributes,t),children:Iv("slot",{})})},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[id({find:h1e,type:this.type}),id({find:m1e,type:this.type})]},addPasteRules(){return[Jl({find:p1e,type:this.type}),Jl({find:g1e,type:this.type})]}}),v1e=/(^|[^`])`([^`]+)`(?!`)/,x1e=/(^|[^`])`([^`]+)`(?!`)/g,b1e=Va.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",ur(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[id({find:v1e,type:this.type})]},addPasteRules(){return[Jl({find:x1e,type:this.type})]}}),w1e=/^```([a-z]+)?[\s\n]$/,j1e=/^~~~([a-z]+)?[\s\n]$/,S1e=li.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options,s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",ur(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const s=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:l})=>(l.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:i,empty:s}=r;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:n.nodeAt(l)?t.commands.command(({tr:u})=>(u.setSelection(ot.near(n.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[G2({find:w1e,type:this.type,getAttributes:t=>({language:t[1]})}),G2({find:j1e,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new nr({key:new Fr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,s=i==null?void 0:i.mode;if(!r||!s)return!1;const{tr:o,schema:l}=t.state,c=l.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},c)),o.selection.$from.parent.type!==this.type&&o.setSelection(et.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),N1e=li.create({name:"doc",topNode:!0,content:"block+"}),k1e=li.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",ur(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=n.extensionManager,c=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:f})=>{if(f&&c&&o){const d=c.filter(p=>l.includes(p.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),_1e=li.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,ur(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>G2({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),O1e=li.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",ur(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!Uwe(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,i=t();return x7(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:o})=>{var l;if(o){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(et.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(He.create(s.doc,c.pos)):s.setSelection(et.create(s.doc,c.pos));else{const f=(l=c.parent.type.contentMatch.defaultType)==null?void 0:l.create();f&&(s.insert(u,f),s.setSelection(et.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[zwe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),E1e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,C1e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,A1e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,T1e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,P1e=Va.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",ur(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[id({find:E1e,type:this.type}),id({find:A1e,type:this.type})]},addPasteRules(){return[Jl({find:C1e,type:this.type}),Jl({find:T1e,type:this.type})]}});const M1e="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",R1e="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",X2="numeric",J2="ascii",Q2="alpha",uh="asciinumeric",Kf="alphanumeric",Z2="domain",B7="emoji",I1e="scheme",D1e="slashscheme",xk="whitespace";function L1e(t,e){return t in e||(e[t]=[]),e[t]}function Tl(t,e,r){e[X2]&&(e[uh]=!0,e[Kf]=!0),e[J2]&&(e[uh]=!0,e[Q2]=!0),e[uh]&&(e[Kf]=!0),e[Q2]&&(e[Kf]=!0),e[Kf]&&(e[Z2]=!0),e[B7]&&(e[Z2]=!0);for(const n in e){const i=L1e(n,r);i.indexOf(t)<0&&i.push(t)}}function $1e(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function Pn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Pn.groups={};Pn.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const i=e.jr[n][0],s=e.jr[n][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let i=0;i<t.length;i++)this.tt(t[i],e,r,n)},tr(t,e,r,n){n=n||Pn.groups;let i;return e&&e.j?i=e:(i=new Pn(e),r&&n&&Tl(e,r,n)),this.jr.push([t,i]),i},ts(t,e,r,n){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,r,n)},tt(t,e,r,n){n=n||Pn.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,l=i.go(t);if(l?(o=new Pn,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Pn,s){if(n)if(o.t&&typeof o.t=="string"){const c=Object.assign($1e(o.t,n),r);Tl(s,c,n)}else r&&Tl(s,r,n);o.t=s}return i.j[t]=o,o}};const at=(t,e,r,n,i)=>t.ta(e,r,n,i),er=(t,e,r,n,i)=>t.tr(e,r,n,i),i6=(t,e,r,n,i)=>t.ts(e,r,n,i),Ee=(t,e,r,n,i)=>t.tt(e,r,n,i),eo="WORD",eO="UWORD",F7="ASCIINUMERICAL",q7="ALPHANUMERICAL",yp="LOCALHOST",tO="TLD",rO="UTLD",iy="SCHEME",lu="SLASH_SCHEME",mC="NUM",nO="WS",gC="NL",dh="OPENBRACE",fh="CLOSEBRACE",Dv="OPENBRACKET",Lv="CLOSEBRACKET",$v="OPENPAREN",Bv="CLOSEPAREN",Fv="OPENANGLEBRACKET",qv="CLOSEANGLEBRACKET",zv="FULLWIDTHLEFTPAREN",Uv="FULLWIDTHRIGHTPAREN",Hv="LEFTCORNERBRACKET",Wv="RIGHTCORNERBRACKET",Vv="LEFTWHITECORNERBRACKET",Kv="RIGHTWHITECORNERBRACKET",Gv="FULLWIDTHLESSTHAN",Yv="FULLWIDTHGREATERTHAN",Xv="AMPERSAND",Jv="APOSTROPHE",Qv="ASTERISK",la="AT",Zv="BACKSLASH",e0="BACKTICK",t0="CARET",ma="COLON",yC="COMMA",r0="DOLLAR",xs="DOT",n0="EQUALS",vC="EXCLAMATION",bi="HYPHEN",hh="PERCENT",i0="PIPE",s0="PLUS",o0="POUND",ph="QUERY",xC="QUOTE",z7="FULLWIDTHMIDDLEDOT",bC="SEMI",bs="SLASH",mh="TILDE",a0="UNDERSCORE",U7="EMOJI",l0="SYM";var H7=Object.freeze({__proto__:null,ALPHANUMERICAL:q7,AMPERSAND:Xv,APOSTROPHE:Jv,ASCIINUMERICAL:F7,ASTERISK:Qv,AT:la,BACKSLASH:Zv,BACKTICK:e0,CARET:t0,CLOSEANGLEBRACKET:qv,CLOSEBRACE:fh,CLOSEBRACKET:Lv,CLOSEPAREN:Bv,COLON:ma,COMMA:yC,DOLLAR:r0,DOT:xs,EMOJI:U7,EQUALS:n0,EXCLAMATION:vC,FULLWIDTHGREATERTHAN:Yv,FULLWIDTHLEFTPAREN:zv,FULLWIDTHLESSTHAN:Gv,FULLWIDTHMIDDLEDOT:z7,FULLWIDTHRIGHTPAREN:Uv,HYPHEN:bi,LEFTCORNERBRACKET:Hv,LEFTWHITECORNERBRACKET:Vv,LOCALHOST:yp,NL:gC,NUM:mC,OPENANGLEBRACKET:Fv,OPENBRACE:dh,OPENBRACKET:Dv,OPENPAREN:$v,PERCENT:hh,PIPE:i0,PLUS:s0,POUND:o0,QUERY:ph,QUOTE:xC,RIGHTCORNERBRACKET:Wv,RIGHTWHITECORNERBRACKET:Kv,SCHEME:iy,SEMI:bC,SLASH:bs,SLASH_SCHEME:lu,SYM:l0,TILDE:mh,TLD:tO,UNDERSCORE:a0,UTLD:rO,UWORD:eO,WORD:eo,WS:nO});const Js=/[a-z]/,Rf=new RegExp("\\p{L}","u"),bk=new RegExp("\\p{Emoji}","u"),Qs=/\d/,wk=/\s/,s6="\r",jk=`
`,B1e="",F1e="",Sk="";let Lg=null,$g=null;function q1e(t=[]){const e={};Pn.groups=e;const r=new Pn;Lg==null&&(Lg=o6(M1e)),$g==null&&($g=o6(R1e)),Ee(r,"'",Jv),Ee(r,"{",dh),Ee(r,"}",fh),Ee(r,"[",Dv),Ee(r,"]",Lv),Ee(r,"(",$v),Ee(r,")",Bv),Ee(r,"<",Fv),Ee(r,">",qv),Ee(r,"",zv),Ee(r,"",Uv),Ee(r,"",Hv),Ee(r,"",Wv),Ee(r,"",Vv),Ee(r,"",Kv),Ee(r,"",Gv),Ee(r,"",Yv),Ee(r,"&",Xv),Ee(r,"*",Qv),Ee(r,"@",la),Ee(r,"`",e0),Ee(r,"^",t0),Ee(r,":",ma),Ee(r,",",yC),Ee(r,"$",r0),Ee(r,".",xs),Ee(r,"=",n0),Ee(r,"!",vC),Ee(r,"-",bi),Ee(r,"%",hh),Ee(r,"|",i0),Ee(r,"+",s0),Ee(r,"#",o0),Ee(r,"?",ph),Ee(r,'"',xC),Ee(r,"/",bs),Ee(r,";",bC),Ee(r,"~",mh),Ee(r,"_",a0),Ee(r,"\\",Zv),Ee(r,"",z7);const n=er(r,Qs,mC,{[X2]:!0});er(n,Qs,n);const i=er(n,Js,F7,{[uh]:!0}),s=er(n,Rf,q7,{[Kf]:!0}),o=er(r,Js,eo,{[J2]:!0});er(o,Qs,i),er(o,Js,o),er(i,Qs,i),er(i,Js,i);const l=er(r,Rf,eO,{[Q2]:!0});er(l,Js),er(l,Qs,s),er(l,Rf,l),er(s,Qs,s),er(s,Js),er(s,Rf,s);const c=Ee(r,jk,gC,{[xk]:!0}),u=Ee(r,s6,nO,{[xk]:!0}),f=er(r,wk,nO,{[xk]:!0});Ee(r,Sk,f),Ee(u,jk,c),Ee(u,Sk,f),er(u,wk,f),Ee(f,s6),Ee(f,jk),er(f,wk,f),Ee(f,Sk,f);const d=er(r,bk,U7,{[B7]:!0});Ee(d,"#"),er(d,bk,d),Ee(d,B1e,d);const p=Ee(d,F1e);Ee(p,"#"),er(p,bk,d);const m=[[Js,o],[Qs,i]],x=[[Js,null],[Rf,l],[Qs,s]];for(let y=0;y<Lg.length;y++)ta(r,Lg[y],tO,eo,m);for(let y=0;y<$g.length;y++)ta(r,$g[y],rO,eO,x);Tl(tO,{tld:!0,ascii:!0},e),Tl(rO,{utld:!0,alpha:!0},e),ta(r,"file",iy,eo,m),ta(r,"mailto",iy,eo,m),ta(r,"http",lu,eo,m),ta(r,"https",lu,eo,m),ta(r,"ftp",lu,eo,m),ta(r,"ftps",lu,eo,m),Tl(iy,{scheme:!0,ascii:!0},e),Tl(lu,{slashscheme:!0,ascii:!0},e),t=t.sort((y,v)=>y[0]>v[0]?1:-1);for(let y=0;y<t.length;y++){const v=t[y][0],w=t[y][1]?{[I1e]:!0}:{[D1e]:!0};v.indexOf("-")>=0?w[Z2]=!0:Js.test(v)?Qs.test(v)?w[uh]=!0:w[J2]=!0:w[X2]=!0,i6(r,v,v,w)}return i6(r,"localhost",yp,{ascii:!0}),r.jd=new Pn(l0),{start:r,tokens:Object.assign({groups:e},H7)}}function W7(t,e){const r=z1e(e.replace(/[A-Z]/g,l=>l.toLowerCase())),n=r.length,i=[];let s=0,o=0;for(;o<n;){let l=t,c=null,u=0,f=null,d=-1,p=-1;for(;o<n&&(c=l.go(r[o]));)l=c,l.accepts()?(d=0,p=0,f=l):d>=0&&(d+=r[o].length,p++),u+=r[o].length,s+=r[o].length,o++;s-=d,o-=p,u-=d,i.push({t:f.t,v:e.slice(s-u,s),s:s-u,e:s})}return i}function z1e(t){const e=[],r=t.length;let n=0;for(;n<r;){let i=t.charCodeAt(n),s,o=i<55296||i>56319||n+1===r||(s=t.charCodeAt(n+1))<56320||s>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function ta(t,e,r,n,i){let s;const o=e.length;for(let l=0;l<o-1;l++){const c=e[l];t.j[c]?s=t.j[c]:(s=new Pn(n),s.jr=i.slice(),t.j[c]=s),t=s}return s=new Pn(r),s.jr=i.slice(),t.j[e[o-1]]=s,s}function o6(t){const e=[],r=[];let n=0,i="0123456789";for(;n<t.length;){let s=0;for(;i.indexOf(t[n+s])>=0;)s++;if(s>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+s),10);o>0;o--)r.pop();n+=s}else r.push(t[n]),n++}return e}const vp={defaultProtocol:"http",events:null,format:a6,formatHref:a6,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function wC(t,e=null){let r=Object.assign({},vp);t&&(r=Object.assign(r,t instanceof wC?t.o:t));const n=r.ignoreTags,i=[];for(let s=0;s<n.length;s++)i.push(n[s].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=i}wC.prototype={o:vp,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:vp[t],typeof i=="function"&&n&&(i=i(e,r))):typeof i=="function"&&n&&(i=i(e,r.t,r)),i)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function a6(t){return t}function V7(t,e){this.t="token",this.v=t,this.tk=e}V7.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=vp.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),i=t.get("tagName",r,e),s=this.toFormattedString(t),o={},l=t.get("className",r,e),c=t.get("target",r,e),u=t.get("rel",r,e),f=t.getObj("attributes",r,e),d=t.getObj("events",r,e);return o.href=n,l&&(o.class=l),c&&(o.target=c),u&&(o.rel=u),f&&Object.assign(o,f),{tagName:i,attributes:o,content:s,eventListeners:d}}};function Ex(t,e){class r extends V7{constructor(i,s){super(i,s),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const l6=Ex("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),c6=Ex("text"),U1e=Ex("nl"),Bg=Ex("url",{isLink:!0,toHref(t=vp.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==yp&&t[1].t===ma}}),xi=t=>new Pn(t);function H1e({groups:t}){const e=t.domain.concat([Xv,Qv,la,Zv,e0,t0,r0,n0,bi,mC,hh,i0,s0,o0,bs,l0,mh,a0]),r=[Jv,ma,yC,xs,vC,hh,ph,xC,bC,Fv,qv,dh,fh,Lv,Dv,$v,Bv,zv,Uv,Hv,Wv,Vv,Kv,Gv,Yv],n=[Xv,Jv,Qv,Zv,e0,t0,r0,n0,bi,dh,fh,hh,i0,s0,o0,ph,bs,l0,mh,a0],i=xi(),s=Ee(i,mh);at(s,n,s),at(s,t.domain,s);const o=xi(),l=xi(),c=xi();at(i,t.domain,o),at(i,t.scheme,l),at(i,t.slashscheme,c),at(o,n,s),at(o,t.domain,o);const u=Ee(o,la);Ee(s,la,u),Ee(l,la,u),Ee(c,la,u);const f=Ee(s,xs);at(f,n,s),at(f,t.domain,s);const d=xi();at(u,t.domain,d),at(d,t.domain,d);const p=Ee(d,xs);at(p,t.domain,d);const m=xi(l6);at(p,t.tld,m),at(p,t.utld,m),Ee(u,yp,m);const x=Ee(d,bi);Ee(x,bi,x),at(x,t.domain,d),at(m,t.domain,d),Ee(m,xs,p),Ee(m,bi,x);const y=Ee(m,ma);at(y,t.numeric,l6);const v=Ee(o,bi),b=Ee(o,xs);Ee(v,bi,v),at(v,t.domain,o),at(b,n,s),at(b,t.domain,o);const w=xi(Bg);at(b,t.tld,w),at(b,t.utld,w),at(w,t.domain,o),at(w,n,s),Ee(w,xs,b),Ee(w,bi,v),Ee(w,la,u);const N=Ee(w,ma),j=xi(Bg);at(N,t.numeric,j);const k=xi(Bg),_=xi();at(k,e,k),at(k,r,_),at(_,e,k),at(_,r,_),Ee(w,bs,k),Ee(j,bs,k);const E=Ee(l,ma),A=Ee(c,ma),T=Ee(A,bs),M=Ee(T,bs);at(l,t.domain,o),Ee(l,xs,b),Ee(l,bi,v),at(c,t.domain,o),Ee(c,xs,b),Ee(c,bi,v),at(E,t.domain,k),Ee(E,bs,k),Ee(E,ph,k),at(M,t.domain,k),at(M,e,k),Ee(M,bs,k);const P=[[dh,fh],[Dv,Lv],[$v,Bv],[Fv,qv],[zv,Uv],[Hv,Wv],[Vv,Kv],[Gv,Yv]];for(let R=0;R<P.length;R++){const[L,$]=P[R],F=Ee(k,L);Ee(_,L,F),Ee(F,$,k);const z=xi(Bg);at(F,e,z);const W=xi();at(F,r),at(z,e,z),at(z,r,W),at(W,e,z),at(W,r,W),Ee(z,$,k),Ee(W,$,k)}return Ee(i,yp,w),Ee(i,gC,U1e),{start:i,tokens:H7}}function W1e(t,e,r){let n=r.length,i=0,s=[],o=[];for(;i<n;){let l=t,c=null,u=null,f=0,d=null,p=-1;for(;i<n&&!(c=l.go(r[i].t));)o.push(r[i++]);for(;i<n&&(u=c||l.go(r[i].t));)c=null,l=u,l.accepts()?(p=0,d=l):p>=0&&p++,i++,f++;if(p<0)i-=f,i<n&&(o.push(r[i]),i++);else{o.length>0&&(s.push(Nk(c6,e,o)),o=[]),i-=p,f-=p;const m=d.t,x=r.slice(i-f,i);s.push(Nk(m,e,x))}}return o.length>0&&s.push(Nk(c6,e,o)),s}function Nk(t,e,r){const n=r[0].s,i=r[r.length-1].e,s=e.slice(n,i);return new t(s,r)}const V1e=typeof console<"u"&&console&&console.warn||(()=>{}),K1e="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",zt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function G1e(){return Pn.groups={},zt.scanner=null,zt.parser=null,zt.tokenQueue=[],zt.pluginQueue=[],zt.customSchemes=[],zt.initialized=!1,zt}function u6(t,e=!1){if(zt.initialized&&V1e(`linkifyjs: already initialized - will not register custom scheme "${t}" ${K1e}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);zt.customSchemes.push([t,e])}function Y1e(){zt.scanner=q1e(zt.customSchemes);for(let t=0;t<zt.tokenQueue.length;t++)zt.tokenQueue[t][1]({scanner:zt.scanner});zt.parser=H1e(zt.scanner.tokens);for(let t=0;t<zt.pluginQueue.length;t++)zt.pluginQueue[t][1]({scanner:zt.scanner,parser:zt.parser});return zt.initialized=!0,zt}function jC(t){return zt.initialized||Y1e(),W1e(zt.parser.start,t,W7(zt.scanner.start,t))}jC.scan=W7;function K7(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new wC(r),i=jC(t),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!e||l.t===e)&&n.check(l)&&s.push(l.toFormattedObject(n))}return s}var SC="[\0- -\u2029]",X1e=new RegExp(SC),J1e=new RegExp(`${SC}$`),Q1e=new RegExp(SC,"g");function Z1e(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function eje(t){return new nr({key:new Fr("autolink"),appendTransaction:(e,r,n)=>{const i=e.some(u=>u.docChanged)&&!r.doc.eq(n.doc),s=e.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=n,l=l7(r.doc,[...e]);if(y7(l).forEach(({newRange:u})=>{const f=ibe(n.doc,u,m=>m.isTextblock);let d,p;if(f.length>1)d=f[0],p=n.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(f.length){const m=n.doc.textBetween(u.from,u.to," "," ");if(!J1e.test(m))return;d=f[0],p=n.doc.textBetween(d.pos,u.to,void 0," ")}if(d&&p){const m=p.split(X1e).filter(Boolean);if(m.length<=0)return!1;const x=m[m.length-1],y=d.pos+p.lastIndexOf(x);if(!x)return!1;const v=jC(x).map(b=>b.toObject(t.defaultProtocol));if(!Z1e(v))return!1;v.filter(b=>b.isLink).map(b=>({...b,from:y+b.start+1,to:y+b.end+1})).filter(b=>n.schema.marks.code?!n.doc.rangeHasMark(b.from,b.to,n.schema.marks.code):!0).filter(b=>t.validate(b.value)).filter(b=>t.shouldAutoLink(b.value)).forEach(b=>{fC(b.from,b.to,n.doc).some(w=>w.mark.type===t.type)||o.addMark(b.from,b.to,t.type.create({href:b.href}))})}}),!!o.steps.length)return o}})}function tje(t){return new nr({key:new Fr("handleClickLink"),props:{handleClick:(e,r,n)=>{var i,s;if(n.button!==0||!e.editable)return!1;let o=null;if(n.target instanceof HTMLAnchorElement)o=n.target;else{let f=n.target;const d=[];for(;f.nodeName!=="DIV";)d.push(f),f=f.parentNode;o=d.find(p=>p.nodeName==="A")}if(!o)return!1;const l=g7(e.state,t.type.name),c=(i=o==null?void 0:o.href)!=null?i:l.href,u=(s=o==null?void 0:o.target)!=null?s:l.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),o&&c?(window.open(c,u),!0):!1}}})}function rje(t){return new nr({key:new Fr("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{state:i}=e,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";n.content.forEach(u=>{l+=u.textContent});const c=K7(l,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!c?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function pl(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!t||t.replace(Q1e,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var NC=Va.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){u6(t);return}u6(t.scheme,t.optionalSlashes)})},onDestroy(){G1e()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!pl(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!pl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!pl(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",ur(this.options.HTMLAttributes,t),0]:["a",ur(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!pl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!pl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Jl({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,i=K7(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!pl(o,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(eje({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!pl(i,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(tje({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(rje({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),nje=Object.defineProperty,ije=(t,e)=>{for(var r in e)nje(t,r,{get:e[r],enumerable:!0})},sje="listItem",d6="textStyle",f6=/^\s*([-+*])\s$/,G7=li.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",ur(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(sje,this.editor.getAttributes(d6)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=sd({find:f6,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=sd({find:f6,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(d6),editor:this.editor})),[t]}}),Y7=li.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",ur(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),oje={};ije(oje,{findListItemPos:()=>Gp,getNextListDepth:()=>kC,handleBackspace:()=>iO,handleDelete:()=>sO,hasListBefore:()=>X7,hasListItemAfter:()=>aje,hasListItemBefore:()=>J7,listItemHasSubList:()=>Q7,nextListIsDeeper:()=>Z7,nextListIsHigher:()=>e9});var Gp=(t,e)=>{const{$from:r}=e.selection,n=gr(t,e.schema);let i=null,s=r.depth,o=r.pos,l=null;for(;s>0&&l===null;)i=r.node(s),i.type===n?l=s:(s-=1,o-=1);return l===null?null:{$pos:e.doc.resolve(o),depth:l}},kC=(t,e)=>{const r=Gp(t,e);if(!r)return!1;const[,n]=pbe(e,t,r.$pos.pos+4);return n},X7=(t,e,r)=>{const{$anchor:n}=t.selection,i=Math.max(0,n.pos-2),s=t.doc.resolve(i).node();return!(!s||!r.includes(s.type.name))},J7=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-2);return!(i.index()===0||((r=i.nodeBefore)==null?void 0:r.type.name)!==t)},Q7=(t,e,r)=>{if(!r)return!1;const n=gr(t,e.schema);let i=!1;return r.descendants(s=>{s.type===n&&(i=!0)}),i},iO=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Pa(t.state,e)&&X7(t.state,e,r)){const{$anchor:l}=t.state.selection,c=t.state.doc.resolve(l.before()-1),u=[];c.node().descendants((p,m)=>{p.type.name===e&&u.push({node:p,pos:m})});const f=u.at(-1);if(!f)return!1;const d=t.state.doc.resolve(c.start()+f.pos+1);return t.chain().cut({from:l.start()-1,to:l.end()+1},d.end()).joinForward().run()}if(!Pa(t.state,e)||!vbe(t.state))return!1;const n=Gp(e,t.state);if(!n)return!1;const s=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=Q7(e,t.state,s);return J7(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},Z7=(t,e)=>{const r=kC(t,e),n=Gp(t,e);return!n||!r?!1:r>n.depth},e9=(t,e)=>{const r=kC(t,e),n=Gp(t,e);return!n||!r?!1:r<n.depth},sO=(t,e)=>{if(!Pa(t.state,e)||!ybe(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:i}=r;return!r.empty&&n.sameParent(i)?!1:Z7(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():e9(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},aje=(t,e)=>{var r;const{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((r=i.nodeAfter)==null?void 0:r.type.name)!==t)},t9=Ct.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&sO(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&sO(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&iO(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&iO(t,r,n)&&(e=!0)}),e}}}}),lje="listItem",h6="textStyle",p6=/^(\d+)\.\s$/,r9=li.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",ur(this.options.HTMLAttributes,r),0]:["ol",ur(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(lje,this.editor.getAttributes(h6)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=sd({find:p6,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=sd({find:p6,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(h6)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),cje=/^\s*(\[([( |x])?\])\s$/,uje=li.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",ur(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),c=document.createElement("div"),u=f=>{var d,p;l.ariaLabel=((p=(d=this.options.a11y)==null?void 0:d.checkboxLabel)==null?void 0:p.call(d,f,l.checked))||`Task item checkbox for ${f.textContent||"empty task item"}`};return u(t),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",f=>f.preventDefault()),l.addEventListener("change",f=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:d}=f.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const x=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...x==null?void 0:x.attrs,checked:d}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,d)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([f,d])=>{i.setAttribute(f,d)}),i.dataset.checked=t.attrs.checked,l.checked=t.attrs.checked,s.append(l,o),i.append(s,c),Object.entries(e).forEach(([f,d])=>{i.setAttribute(f,d)}),{dom:i,contentDOM:c,update:f=>f.type!==this.type?!1:(i.dataset.checked=f.attrs.checked,l.checked=f.attrs.checked,u(f),!0)}}},addInputRules(){return[sd({find:cje,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),dje=li.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",ur(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Ct.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(G7.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(Y7.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(t9.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(r9.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(uje.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(dje.configure(this.options.taskList)),t}});var fje=li.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",ur(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),hje=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pje=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,mje=Va.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",ur(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[id({find:hje,type:this.type})]},addPasteRules(){return[Jl({find:pje,type:this.type})]}}),gje=li.create({name:"text",group:"inline"}),yje=Va.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",ur(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function vje(t={}){return new nr({view(e){return new xje(e,t)}})}class xje{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(r){let d=e.nodeBefore,p=e.nodeAfter;if(d||p){let m=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(m){let x=m.getBoundingClientRect(),y=d?x.bottom:x.top;d&&p&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*l;n={left:x.left,right:x.right,top:y-v,bottom:y+v}}}}if(!n){let d=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*o;n={left:d.left-p,right:d.left+p,top:d.top,bottom:d.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let u,f;if(!c||c==document.body&&getComputedStyle(c).position=="static")u=-pageXOffset,f=-pageYOffset;else{let d=c.getBoundingClientRect(),p=d.width/c.offsetWidth,m=d.height/c.offsetHeight;u=d.left-c.scrollLeft*p,f=d.top-c.scrollTop*m}this.element.style.left=(n.left-u)/o+"px",this.element.style.top=(n.top-f)/l+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,r,e):i;if(r&&!s){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=oU(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class rr extends ot{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return rr.valid(n)?new rr(n):ot.near(n)}content(){return Ie.empty}eq(e){return e instanceof rr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new rr(e.resolve(r.pos))}getBookmark(){return new _C(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!bje(e)||!wje(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&rr.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(r>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=r;let c=e.doc.resolve(i);if(rr.valid(c))return c}for(;;){let o=r>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!He.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*r),n=!1;continue e}break}s=o,i+=r;let l=e.doc.resolve(i);if(rr.valid(l))return l}return null}}}rr.prototype.visible=!1;rr.findFrom=rr.findGapCursorFrom;ot.jsonID("gapcursor",rr);class _C{constructor(e){this.pos=e}map(e){return new _C(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return rr.valid(r)?new rr(r):ot.near(r)}}function bje(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function wje(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function jje(){return new nr({props:{decorations:_je,createSelectionBetween(t,e,r){return e.pos==r.pos&&rr.valid(r)?new rr(r):null},handleClick:Nje,handleKeyDown:Sje,handleDOMEvents:{beforeinput:kje}}})}const Sje=GU({ArrowLeft:Fg("horiz",-1),ArrowRight:Fg("horiz",1),ArrowUp:Fg("vert",-1),ArrowDown:Fg("vert",1)});function Fg(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,s){let o=n.selection,l=e>0?o.$to:o.$from,c=o.empty;if(o instanceof et){if(!s.endOfTextblock(r)||l.depth==0)return!1;c=!1,l=n.doc.resolve(e>0?l.after():l.before())}let u=rr.findGapCursorFrom(l,e,c);return u?(i&&i(n.tr.setSelection(new rr(u))),!0):!1}}function Nje(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!rr.valid(n))return!1;let i=t.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&He.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new rr(n))),!0)}function kje(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof rr))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let i=Ne.empty;for(let o=n.length-1;o>=0;o--)i=Ne.from(n[o].createAndFill(null,i));let s=t.state.tr.replace(r.pos,r.pos,new Ie(i,0,0));return s.setSelection(et.near(s.doc.resolve(r.pos+1))),t.dispatch(s),!1}function _je(t){if(!(t.selection instanceof rr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Qt.create(t.doc,[vn.widget(t.selection.head,e,{key:"gapcursor"})])}var c0=200,Lr=function(){};Lr.prototype.append=function(e){return e.length?(e=Lr.from(e),!this.length&&e||e.length<c0&&this.leafAppend(e)||this.length<c0&&e.leafPrepend(this)||this.appendInner(e)):this};Lr.prototype.prepend=function(e){return e.length?Lr.from(e).append(this):this};Lr.prototype.appendInner=function(e){return new Oje(this,e)};Lr.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?Lr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};Lr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Lr.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};Lr.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},r,n),i};Lr.from=function(e){return e instanceof Lr?e:e&&e.length?new n9(e):Lr.empty};var n9=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var c=s;c<o;c++)if(i(this.values[c],l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var c=s-1;c>=o;c--)if(i(this.values[c],l+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=c0)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=c0)return new e(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(Lr);Lr.empty=new n9([]);var Oje=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(n,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(n,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(n,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(n,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(n,i):n>=s?this.right.slice(n-s,i-s):this.left.slice(n,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(Lr);const Eje=500;class Zi{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,s;r&&(i=this.remapping(n,this.items.length),s=i.maps.length);let o=e.tr,l,c,u=[],f=[];return this.items.forEach((d,p)=>{if(!d.step){i||(i=this.remapping(n,p+1),s=i.maps.length),s--,f.push(d);return}if(i){f.push(new ra(d.map));let m=d.step.map(i.slice(s)),x;m&&o.maybeStep(m).doc&&(x=o.mapping.maps[o.mapping.maps.length-1],u.push(new ra(x,void 0,void 0,u.length+f.length))),s--,x&&i.appendMap(x,s)}else o.maybeStep(d.step);if(d.selection)return l=i?d.selection.map(i.slice(s)):d.selection,c=new Zi(this.items.slice(0,n).append(f.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:l}}addTransform(e,r,n,i){let s=[],o=this.eventCount,l=this.items,c=!i&&l.length?l.get(l.length-1):null;for(let f=0;f<e.steps.length;f++){let d=e.steps[f].invert(e.docs[f]),p=new ra(e.mapping.maps[f],d,r),m;(m=c&&c.merge(p))&&(p=m,f?s.pop():l=l.slice(0,l.length-1)),s.push(p),r&&(o++,r=void 0),i||(c=p)}let u=o-n.depth;return u>Aje&&(l=Cje(l,u),o-=u),new Zi(l.append(s),o)}remapping(e,r){let n=new up;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new Zi(this.items.append(e.map(r=>new ra(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(p=>{p.selection&&l--},i);let c=r;this.items.forEach(p=>{let m=s.getMirror(--c);if(m==null)return;o=Math.min(o,m);let x=s.maps[m];if(p.step){let y=e.steps[m].invert(e.docs[m]),v=p.selection&&p.selection.map(s.slice(c+1,m));v&&l++,n.push(new ra(x,y,v))}else n.push(new ra(x))},i);let u=[];for(let p=r;p<o;p++)u.push(new ra(s.maps[p]));let f=this.items.slice(0,i).append(u).append(n),d=new Zi(f,l);return d.emptyItemCount()>Eje&&(d=d.compress(this.items.length-n.length)),d}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let c=o.step.map(r.slice(n)),u=c&&c.getMap();if(n--,u&&r.appendMap(u,n),c){let f=o.selection&&o.selection.map(r.slice(n));f&&s++;let d=new ra(u.invert(),c,f),p,m=i.length-1;(p=i.length&&i[m].merge(d))?i[m]=p:i.push(d)}}else o.map&&n--},this.items.length,0),new Zi(Lr.from(i.reverse()),s)}}Zi.empty=new Zi(Lr.empty,0);function Cje(t,e){let r;return t.forEach((n,i)=>{if(n.selection&&e--==0)return r=i,!1}),t.slice(r)}let ra=class i9{constructor(e,r,n,i){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new i9(r.getMap().invert(),r,this.selection)}}};class ca{constructor(e,r,n,i,s){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=s}}const Aje=20;function Tje(t,e,r,n){let i=r.getMeta(Bl),s;if(i)return i.historyState;r.getMeta(Rje)&&(t=new ca(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(Bl))return o.getMeta(Bl).redo?new ca(t.done.addTransform(r,void 0,n,sy(e)),t.undone,m6(r.mapping.maps),t.prevTime,t.prevComposition):new ca(t.done,t.undone.addTransform(r,void 0,n,sy(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=r.getMeta("composition"),c=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(r.time||0)-n.newGroupDelay||!Pje(r,t.prevRanges)),u=o?kk(t.prevRanges,r.mapping):m6(r.mapping.maps);return new ca(t.done.addTransform(r,c?e.selection.getBookmark():void 0,n,sy(e)),Zi.empty,u,r.time,l??t.prevComposition)}else return(s=r.getMeta("rebased"))?new ca(t.done.rebased(r,s),t.undone.rebased(r,s),kk(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new ca(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),kk(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function Pje(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,i)=>{for(let s=0;s<e.length;s+=2)n<=e[s+1]&&i>=e[s]&&(r=!0)}),r}function m6(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,i,s,o)=>e.push(s,o));return e}function kk(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let i=e.map(t[n],1),s=e.map(t[n+1],-1);i<=s&&r.push(i,s)}return r}function Mje(t,e,r){let n=sy(e),i=Bl.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,n),c=new ca(r?l:s.remaining,r?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(Bl,{redo:r,historyState:c})}let _k=!1,g6=null;function sy(t){let e=t.plugins;if(g6!=e){_k=!1,g6=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){_k=!0;break}}return _k}const Bl=new Fr("history"),Rje=new Fr("closeHistory");function Ije(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new nr({key:Bl,state:{init(){return new ca(Zi.empty,Zi.empty,null,0,-1)},apply(e,r,n){return Tje(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,i=n=="historyUndo"?o9:n=="historyRedo"?a9:null;return i?(r.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function s9(t,e){return(r,n)=>{let i=Bl.getState(r);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(n){let s=Mje(i,r,t);s&&n(e?s.scrollIntoView():s)}return!0}}const o9=s9(!1,!0),a9=s9(!0,!0);Ct.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new nr({key:new Fr("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:n.doc});if(s>i){const o=s-i,l=0,c=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=n.tr.deleteRange(l,c);return t=!0,u}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const i=this.storage.characters({node:r.doc}),s=this.storage.characters({node:e.doc});if(s<=n||i>n&&s>n&&s<=i)return!0;if(i>n&&s>n&&s>i||!e.getMeta("paste"))return!1;const l=e.selection.$head.pos,c=s-n,u=l-c,f=l;return e.deleteRange(u,f),!(this.storage.characters({node:e.doc})>n)}})]}});var Dje=Ct.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[vje(this.options)]}});Ct.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new nr({key:new Fr("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:i}=e,s=[];if(!r||!n)return Qt.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((c,u)=>{if(c.isText)return;if(!(i>=u&&i<=u+c.nodeSize-1))return!1;o+=1});let l=0;return t.descendants((c,u)=>{if(c.isText||!(i>=u&&i<=u+c.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(vn.node(u,u+c.nodeSize,{class:this.options.className}))}),Qt.create(t,s)}}})]}});var Lje=Ct.create({name:"gapCursor",addProseMirrorPlugins(){return[jje()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=St(Ue(t,"allowGapCursor",r)))!=null?e:null}}}),u0=Ct.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new nr({key:new Fr("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,i=[];if(!r)return null;const s=this.editor.isEmpty;return t.descendants((o,l)=>{const c=n>=l&&n<=l+o.nodeSize,u=!o.isLeaf&&_x(o);if((c||!this.options.showOnlyCurrent)&&u){const f=[this.options.emptyNodeClass];s&&f.push(this.options.emptyEditorClass);const d=vn.node(l,l+o.nodeSize,{class:f.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:c}):this.options.placeholder});i.push(d)}return this.options.includeChildren}),Qt.create(t,i)}}})]}});Ct.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new nr({key:new Fr("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||x7(r.selection)||t.view.dragging?null:Qt.create(r.doc,[vn.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function y6({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var $je=Ct.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const t=new Fr(this.name),e=Object.entries(this.editor.schema.nodes).map(([,r])=>r).filter(r=>(this.options.notAfter||[]).concat(this.options.node).includes(r.name));return[new nr({key:t,appendTransaction:(r,n,i)=>{const{doc:s,tr:o,schema:l}=i,c=t.getState(i),u=s.content.size,f=l.nodes[this.options.node];if(c)return o.insert(u,f.create())},state:{init:(r,n)=>{const i=n.tr.doc.lastChild;return!y6({node:i,types:e})},apply:(r,n)=>{if(!r.docChanged)return n;const i=r.doc.lastChild;return!y6({node:i,types:e})}}})]}}),Bje=Ct.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>o9(t,e),redo:()=>({state:t,dispatch:e})=>a9(t,e)}},addProseMirrorPlugins(){return[Ije(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Fje=Ct.create({name:"starterKit",addExtensions(){var t,e,r,n;const i=[];return this.options.bold!==!1&&i.push(y1e.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(f1e.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(G7.configure(this.options.bulletList)),this.options.code!==!1&&i.push(b1e.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(S1e.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(N1e.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(Dje.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(Lje.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(k1e.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(_1e.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(Bje.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(O1e.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(P1e.configure(this.options.italic)),this.options.listItem!==!1&&i.push(Y7.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(t9.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(NC.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(r9.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(fje.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(mje.configure(this.options.strike)),this.options.text!==!1&&i.push(gje.configure(this.options.text)),this.options.underline!==!1&&i.push(yje.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&i.push($je.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),d0=Fje,qje=t=>{if(!t.children.length)return;const e=t.querySelectorAll("span");e&&e.forEach(r=>{var n,i;const s=r.getAttribute("style"),o=(i=(n=r.parentElement)==null?void 0:n.closest("span"))==null?void 0:i.getAttribute("style");r.setAttribute("style",`${o};${s}`)})},xp=Va.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&qje(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",ur(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(r,n)=>{if(r.isTextblock)return!0;r.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||t.removeMark(n,n+r.nodeSize,this.type)}),!0}}}}),zje=Ct.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),bp=Ct.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),Uje=Ct.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),Hje=Ct.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),Wje=Ct.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Ct.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(zje.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(bp.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(Uje.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(Hje.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(Wje.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(xp.configure(this.options.textStyle)),t}});var Vje=t=>ir({find:/--$/,replace:t??""}),Kje=t=>ir({find:/\.\.\.$/,replace:t??""}),Gje=t=>ir({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:t??""}),Yje=t=>ir({find:/"$/,replace:t??""}),Xje=t=>ir({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:t??""}),Jje=t=>ir({find:/'$/,replace:t??""}),Qje=t=>ir({find:/<-$/,replace:t??""}),Zje=t=>ir({find:/->$/,replace:t??""}),eSe=t=>ir({find:/\(c\)$/,replace:t??""}),tSe=t=>ir({find:/\(tm\)$/,replace:t??""}),rSe=t=>ir({find:/\(sm\)$/,replace:t??""}),nSe=t=>ir({find:/\(r\)$/,replace:t??""}),iSe=t=>ir({find:/(?:^|\s)(1\/2)\s$/,replace:t??""}),sSe=t=>ir({find:/\+\/-$/,replace:t??""}),oSe=t=>ir({find:/!=$/,replace:t??""}),aSe=t=>ir({find:/<<$/,replace:t??""}),lSe=t=>ir({find:/>>$/,replace:t??""}),cSe=t=>ir({find:/\d+\s?([*x])\s?\d+$/,replace:t??""}),uSe=t=>ir({find:/\^2$/,replace:t??""}),dSe=t=>ir({find:/\^3$/,replace:t??""}),fSe=t=>ir({find:/(?:^|\s)(1\/4)\s$/,replace:t??""}),hSe=t=>ir({find:/(?:^|\s)(3\/4)\s$/,replace:t??""}),f0=Ct.create({name:"typography",addOptions(){return{closeDoubleQuote:"",closeSingleQuote:"",copyright:"",ellipsis:"",emDash:"",laquo:"",leftArrow:"",multiplication:"",notEqual:"",oneHalf:"",oneQuarter:"",openDoubleQuote:"",openSingleQuote:"",plusMinus:"",raquo:"",registeredTrademark:"",rightArrow:"",servicemark:"",superscriptThree:"",superscriptTwo:"",threeQuarters:"",trademark:""}},addInputRules(){const t=[];return this.options.emDash!==!1&&t.push(Vje(this.options.emDash)),this.options.ellipsis!==!1&&t.push(Kje(this.options.ellipsis)),this.options.openDoubleQuote!==!1&&t.push(Gje(this.options.openDoubleQuote)),this.options.closeDoubleQuote!==!1&&t.push(Yje(this.options.closeDoubleQuote)),this.options.openSingleQuote!==!1&&t.push(Xje(this.options.openSingleQuote)),this.options.closeSingleQuote!==!1&&t.push(Jje(this.options.closeSingleQuote)),this.options.leftArrow!==!1&&t.push(Qje(this.options.leftArrow)),this.options.rightArrow!==!1&&t.push(Zje(this.options.rightArrow)),this.options.copyright!==!1&&t.push(eSe(this.options.copyright)),this.options.trademark!==!1&&t.push(tSe(this.options.trademark)),this.options.servicemark!==!1&&t.push(rSe(this.options.servicemark)),this.options.registeredTrademark!==!1&&t.push(nSe(this.options.registeredTrademark)),this.options.oneHalf!==!1&&t.push(iSe(this.options.oneHalf)),this.options.plusMinus!==!1&&t.push(sSe(this.options.plusMinus)),this.options.notEqual!==!1&&t.push(oSe(this.options.notEqual)),this.options.laquo!==!1&&t.push(aSe(this.options.laquo)),this.options.raquo!==!1&&t.push(lSe(this.options.raquo)),this.options.multiplication!==!1&&t.push(cSe(this.options.multiplication)),this.options.superscriptTwo!==!1&&t.push(uSe(this.options.superscriptTwo)),this.options.superscriptThree!==!1&&t.push(dSe(this.options.superscriptThree)),this.options.oneQuarter!==!1&&t.push(fSe(this.options.oneQuarter)),this.options.threeQuarters!==!1&&t.push(hSe(this.options.threeQuarters)),t}});function pSe({block:t,isSelected:e=!1,isEditing:r=!1,onSelect:n,onEdit:i,children:s,className:o}){const l=f=>{f.stopPropagation(),r&&n&&n()},c=f=>{f.stopPropagation(),r&&i&&i()},u=f=>{const d={};return Object.entries(f).forEach(([p,m])=>{if(m!=null&&m!==""){const x=p.replace(/-([a-z])/g,(y,v)=>v.toUpperCase());d[x]=String(m)}}),d};return t.is_visible?a.jsxs("div",{className:ge("relative group transition-all duration-200",r&&"cursor-pointer hover:outline hover:outline-2 hover:outline-blue-200",e&&"outline outline-2 outline-blue-500 outline-offset-1",o),style:u(t.style||{}),onClick:l,onDoubleClick:c,"data-block-id":t.id,"data-block-type":t.block_type,children:[s,r&&a.jsx("div",{className:"absolute inset-0 bg-transparent group-hover:bg-blue-50/20 transition-colors",children:e&&a.jsx("div",{className:"absolute -top-6 left-0 bg-blue-500 text-white text-xs px-2 py-1 rounded text-nowrap z-10",children:t.block_type.replace("_"," ").toUpperCase()})})]}):null}function Mi(t){return Z.forwardRef((e,r)=>{const{block:n,isSelected:i,isEditing:s,onSelect:o,onEdit:l,className:c,...u}=e,f={block:n,...u};return a.jsx("div",{ref:r,children:a.jsx(pSe,{block:n,isSelected:i,isEditing:s,onSelect:o,onEdit:l,className:c,children:a.jsx(t,{...f})})})})}function v6(t,[e,r]){return Math.min(r,Math.max(e,t))}function Jt(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t==null||t(i),r===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Yp(t,e=[]){let r=[];function n(s,o){const l=O.createContext(o),c=r.length;r=[...r,o];const u=d=>{var b;const{scope:p,children:m,...x}=d,y=((b=p==null?void 0:p[t])==null?void 0:b[c])||l,v=O.useMemo(()=>x,Object.values(x));return a.jsx(y.Provider,{value:v,children:m})};u.displayName=s+"Provider";function f(d,p){var y;const m=((y=p==null?void 0:p[t])==null?void 0:y[c])||l,x=O.useContext(m);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[u,f]}const i=()=>{const s=r.map(o=>O.createContext(o));return function(l){const c=(l==null?void 0:l[t])||s;return O.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,mSe(i,...e)]}function mSe(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(s)[`__scope${u}`];return{...l,...d}},{});return O.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function x6(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function l9(...t){return e=>{let r=!1;const n=t.map(i=>{const s=x6(i,e);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let i=0;i<n.length;i++){const s=n[i];typeof s=="function"?s():x6(t[i],null)}}}}function yr(...t){return O.useCallback(l9(...t),t)}function h0(t){const e=gSe(t),r=O.forwardRef((n,i)=>{const{children:s,...o}=n,l=O.Children.toArray(s),c=l.find(vSe);if(c){const u=c.props.children,f=l.map(d=>d===c?O.Children.count(u)>1?O.Children.only(null):O.isValidElement(u)?u.props.children:null:d);return a.jsx(e,{...o,ref:i,children:O.isValidElement(u)?O.cloneElement(u,void 0,f):null})}return a.jsx(e,{...o,ref:i,children:s})});return r.displayName=`${t}.Slot`,r}function gSe(t){const e=O.forwardRef((r,n)=>{const{children:i,...s}=r;if(O.isValidElement(i)){const o=bSe(i),l=xSe(s,i.props);return i.type!==O.Fragment&&(l.ref=n?l9(n,o):o),O.cloneElement(i,l)}return O.Children.count(i)>1?O.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ySe=Symbol("radix.slottable");function vSe(t){return O.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ySe}function xSe(t,e){const r={...e};for(const n in e){const i=t[n],s=e[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...l)=>{s(...l),i(...l)}:i&&(r[n]=i):n==="style"?r[n]={...i,...s}:n==="className"&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...t,...r}}function bSe(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function wSe(t){const e=t+"CollectionProvider",[r,n]=Yp(e),[i,s]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:v,children:b}=y,w=Z.useRef(null),N=Z.useRef(new Map).current;return a.jsx(i,{scope:v,itemMap:N,collectionRef:w,children:b})};o.displayName=e;const l=t+"CollectionSlot",c=h0(l),u=Z.forwardRef((y,v)=>{const{scope:b,children:w}=y,N=s(l,b),j=yr(v,N.collectionRef);return a.jsx(c,{ref:j,children:w})});u.displayName=l;const f=t+"CollectionItemSlot",d="data-radix-collection-item",p=h0(f),m=Z.forwardRef((y,v)=>{const{scope:b,children:w,...N}=y,j=Z.useRef(null),k=yr(v,j),_=s(f,b);return Z.useEffect(()=>(_.itemMap.set(j,{ref:j,...N}),()=>void _.itemMap.delete(j))),a.jsx(p,{[d]:"",ref:k,children:w})});m.displayName=f;function x(y){const v=s(t+"CollectionConsumer",y);return Z.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const N=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((_,E)=>N.indexOf(_.ref.current)-N.indexOf(E.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},x,n]}var jSe=O.createContext(void 0);function SSe(t){const e=O.useContext(jSe);return t||e||"ltr"}var NSe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$t=NSe.reduce((t,e)=>{const r=h0(`Primitive.${e}`),n=O.forwardRef((i,s)=>{const{asChild:o,...l}=i,c=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function kSe(t,e){t&&js.flushSync(()=>t.dispatchEvent(e))}function wo(t){const e=O.useRef(t);return O.useEffect(()=>{e.current=t}),O.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function _Se(t,e=globalThis==null?void 0:globalThis.document){const r=wo(t);O.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var OSe="DismissableLayer",oO="dismissableLayer.update",ESe="dismissableLayer.pointerDownOutside",CSe="dismissableLayer.focusOutside",b6,c9=O.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),u9=O.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...c}=t,u=O.useContext(c9),[f,d]=O.useState(null),p=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=O.useState({}),x=yr(e,E=>d(E)),y=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(v),w=f?y.indexOf(f):-1,N=u.layersWithOutsidePointerEventsDisabled.size>0,j=w>=b,k=PSe(E=>{const A=E.target,T=[...u.branches].some(M=>M.contains(A));!j||T||(i==null||i(E),o==null||o(E),E.defaultPrevented||l==null||l())},p),_=MSe(E=>{const A=E.target;[...u.branches].some(M=>M.contains(A))||(s==null||s(E),o==null||o(E),E.defaultPrevented||l==null||l())},p);return _Se(E=>{w===u.layers.size-1&&(n==null||n(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},p),O.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(b6=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),w6(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=b6)}},[f,p,r,u]),O.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),w6())},[f,u]),O.useEffect(()=>{const E=()=>m({});return document.addEventListener(oO,E),()=>document.removeEventListener(oO,E)},[]),a.jsx($t.div,{...c,ref:x,style:{pointerEvents:N?j?"auto":"none":void 0,...t.style},onFocusCapture:Jt(t.onFocusCapture,_.onFocusCapture),onBlurCapture:Jt(t.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Jt(t.onPointerDownCapture,k.onPointerDownCapture)})});u9.displayName=OSe;var ASe="DismissableLayerBranch",TSe=O.forwardRef((t,e)=>{const r=O.useContext(c9),n=O.useRef(null),i=yr(e,n);return O.useEffect(()=>{const s=n.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),a.jsx($t.div,{...t,ref:i})});TSe.displayName=ASe;function PSe(t,e=globalThis==null?void 0:globalThis.document){const r=wo(t),n=O.useRef(!1),i=O.useRef(()=>{});return O.useEffect(()=>{const s=l=>{if(l.target&&!n.current){let c=function(){d9(ESe,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function MSe(t,e=globalThis==null?void 0:globalThis.document){const r=wo(t),n=O.useRef(!1);return O.useEffect(()=>{const i=s=>{s.target&&!n.current&&d9(CSe,r,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function w6(){const t=new CustomEvent(oO);document.dispatchEvent(t)}function d9(t,e,r,{discrete:n}){const i=r.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?kSe(i,s):i.dispatchEvent(s)}var Ok=0;function RSe(){O.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??j6()),document.body.insertAdjacentElement("beforeend",t[1]??j6()),Ok++,()=>{Ok===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ok--}},[])}function j6(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ek="focusScope.autoFocusOnMount",Ck="focusScope.autoFocusOnUnmount",S6={bubbles:!1,cancelable:!0},ISe="FocusScope",f9=O.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[l,c]=O.useState(null),u=wo(i),f=wo(s),d=O.useRef(null),p=yr(e,y=>c(y)),m=O.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;O.useEffect(()=>{if(n){let y=function(N){if(m.paused||!l)return;const j=N.target;l.contains(j)?d.current=j:sa(d.current,{select:!0})},v=function(N){if(m.paused||!l)return;const j=N.relatedTarget;j!==null&&(l.contains(j)||sa(d.current,{select:!0}))},b=function(N){if(document.activeElement===document.body)for(const k of N)k.removedNodes.length>0&&sa(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",v);const w=new MutationObserver(b);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",v),w.disconnect()}}},[n,l,m.paused]),O.useEffect(()=>{if(l){k6.add(m);const y=document.activeElement;if(!l.contains(y)){const b=new CustomEvent(Ek,S6);l.addEventListener(Ek,u),l.dispatchEvent(b),b.defaultPrevented||(DSe(qSe(h9(l)),{select:!0}),document.activeElement===y&&sa(l))}return()=>{l.removeEventListener(Ek,u),setTimeout(()=>{const b=new CustomEvent(Ck,S6);l.addEventListener(Ck,f),l.dispatchEvent(b),b.defaultPrevented||sa(y??document.body,{select:!0}),l.removeEventListener(Ck,f),k6.remove(m)},0)}}},[l,u,f,m]);const x=O.useCallback(y=>{if(!r&&!n||m.paused)return;const v=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,b=document.activeElement;if(v&&b){const w=y.currentTarget,[N,j]=LSe(w);N&&j?!y.shiftKey&&b===j?(y.preventDefault(),r&&sa(N,{select:!0})):y.shiftKey&&b===N&&(y.preventDefault(),r&&sa(j,{select:!0})):b===w&&y.preventDefault()}},[r,n,m.paused]);return a.jsx($t.div,{tabIndex:-1,...o,ref:p,onKeyDown:x})});f9.displayName=ISe;function DSe(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(sa(n,{select:e}),document.activeElement!==r)return}function LSe(t){const e=h9(t),r=N6(e,t),n=N6(e.reverse(),t);return[r,n]}function h9(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function N6(t,e){for(const r of t)if(!$Se(r,{upTo:e}))return r}function $Se(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function BSe(t){return t instanceof HTMLInputElement&&"select"in t}function sa(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&BSe(t)&&e&&t.select()}}var k6=FSe();function FSe(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=_6(t,e),t.unshift(e)},remove(e){var r;t=_6(t,e),(r=t[0])==null||r.resume()}}}function _6(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function qSe(t){return t.filter(e=>e.tagName!=="A")}var Sn=globalThis!=null&&globalThis.document?O.useLayoutEffect:()=>{},zSe=eB[" useId ".trim().toString()]||(()=>{}),USe=0;function OC(t){const[e,r]=O.useState(zSe());return Sn(()=>{r(n=>n??String(USe++))},[t]),e?`radix-${e}`:""}const HSe=["top","right","bottom","left"],Ma=Math.min,Yn=Math.max,p0=Math.round,qg=Math.floor,_s=t=>({x:t,y:t}),WSe={left:"right",right:"left",bottom:"top",top:"bottom"},VSe={start:"end",end:"start"};function aO(t,e,r){return Yn(t,Ma(e,r))}function jo(t,e){return typeof t=="function"?t(e):t}function So(t){return t.split("-")[0]}function Nd(t){return t.split("-")[1]}function EC(t){return t==="x"?"y":"x"}function CC(t){return t==="y"?"height":"width"}function Ra(t){return["top","bottom"].includes(So(t))?"y":"x"}function AC(t){return EC(Ra(t))}function KSe(t,e,r){r===void 0&&(r=!1);const n=Nd(t),i=AC(t),s=CC(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=m0(o)),[o,m0(o)]}function GSe(t){const e=m0(t);return[lO(t),e,lO(e)]}function lO(t){return t.replace(/start|end/g,e=>VSe[e])}function YSe(t,e,r){const n=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return r?e?i:n:e?n:i;case"left":case"right":return e?s:o;default:return[]}}function XSe(t,e,r,n){const i=Nd(t);let s=YSe(So(t),r==="start",n);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(lO)))),s}function m0(t){return t.replace(/left|right|bottom|top/g,e=>WSe[e])}function JSe(t){return{top:0,right:0,bottom:0,left:0,...t}}function p9(t){return typeof t!="number"?JSe(t):{top:t,right:t,bottom:t,left:t}}function g0(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function O6(t,e,r){let{reference:n,floating:i}=t;const s=Ra(e),o=AC(e),l=CC(o),c=So(e),u=s==="y",f=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,p=n[l]/2-i[l]/2;let m;switch(c){case"top":m={x:f,y:n.y-i.height};break;case"bottom":m={x:f,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:d};break;case"left":m={x:n.x-i.width,y:d};break;default:m={x:n.x,y:n.y}}switch(Nd(e)){case"start":m[o]-=p*(r&&u?-1:1);break;case"end":m[o]+=p*(r&&u?-1:1);break}return m}const QSe=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,l=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:d}=O6(u,n,c),p=n,m={},x=0;for(let y=0;y<l.length;y++){const{name:v,fn:b}=l[y],{x:w,y:N,data:j,reset:k}=await b({x:f,y:d,initialPlacement:n,placement:p,strategy:i,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});f=w??f,d=N??d,m={...m,[v]:{...m[v],...j}},k&&x<=50&&(x++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):k.rects),{x:f,y:d}=O6(u,p,c)),y=-1)}return{x:f,y:d,placement:p,strategy:i,middlewareData:m}};async function wp(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:p=!1,padding:m=0}=jo(e,t),x=p9(m),v=l[p?d==="floating"?"reference":"floating":d],b=g0(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(v)))==null||r?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),w=d==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,N=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),j=await(s.isElement==null?void 0:s.isElement(N))?await(s.getScale==null?void 0:s.getScale(N))||{x:1,y:1}:{x:1,y:1},k=g0(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:N,strategy:c}):w);return{top:(b.top-k.top+x.top)/j.y,bottom:(k.bottom-b.bottom+x.bottom)/j.y,left:(b.left-k.left+x.left)/j.x,right:(k.right-b.right+x.right)/j.x}}const ZSe=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:i,rects:s,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:f=0}=jo(t,e)||{};if(u==null)return{};const d=p9(f),p={x:r,y:n},m=AC(i),x=CC(m),y=await o.getDimensions(u),v=m==="y",b=v?"top":"left",w=v?"bottom":"right",N=v?"clientHeight":"clientWidth",j=s.reference[x]+s.reference[m]-p[m]-s.floating[x],k=p[m]-s.reference[m],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=_?_[N]:0;(!E||!await(o.isElement==null?void 0:o.isElement(_)))&&(E=l.floating[N]||s.floating[x]);const A=j/2-k/2,T=E/2-y[x]/2-1,M=Ma(d[b],T),P=Ma(d[w],T),R=M,L=E-y[x]-P,$=E/2-y[x]/2+A,F=aO(R,$,L),z=!c.arrow&&Nd(i)!=null&&$!==F&&s.reference[x]/2-($<R?M:P)-y[x]/2<0,W=z?$<R?$-R:$-L:0;return{[m]:p[m]+W,data:{[m]:F,centerOffset:$-F-W,...z&&{alignmentOffset:W}},reset:z}}}),eNe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,...v}=jo(t,e);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const b=So(i),w=Ra(l),N=So(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),k=p||(N||!y?[m0(l)]:GSe(l)),_=x!=="none";!p&&_&&k.push(...XSe(l,y,x,j));const E=[l,...k],A=await wp(e,v),T=[];let M=((n=s.flip)==null?void 0:n.overflows)||[];if(f&&T.push(A[b]),d){const $=KSe(i,o,j);T.push(A[$[0]],A[$[1]])}if(M=[...M,{placement:i,overflows:T}],!T.every($=>$<=0)){var P,R;const $=(((P=s.flip)==null?void 0:P.index)||0)+1,F=E[$];if(F)return{data:{index:$,overflows:M},reset:{placement:F}};let z=(R=M.filter(W=>W.overflows[0]<=0).sort((W,K)=>W.overflows[1]-K.overflows[1])[0])==null?void 0:R.placement;if(!z)switch(m){case"bestFit":{var L;const W=(L=M.filter(K=>{if(_){const q=Ra(K.placement);return q===w||q==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(q=>q>0).reduce((q,V)=>q+V,0)]).sort((K,q)=>K[1]-q[1])[0])==null?void 0:L[0];W&&(z=W);break}case"initialPlacement":z=l;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function E6(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function C6(t){return HSe.some(e=>t[e]>=0)}const tNe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...i}=jo(t,e);switch(n){case"referenceHidden":{const s=await wp(e,{...i,elementContext:"reference"}),o=E6(s,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:C6(o)}}}case"escaped":{const s=await wp(e,{...i,altBoundary:!0}),o=E6(s,r.floating);return{data:{escapedOffsets:o,escaped:C6(o)}}}default:return{}}}}};async function rNe(t,e){const{placement:r,platform:n,elements:i}=t,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=So(r),l=Nd(r),c=Ra(r)==="y",u=["left","top"].includes(o)?-1:1,f=s&&c?-1:1,d=jo(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:x}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof x=="number"&&(m=l==="end"?x*-1:x),c?{x:m*f,y:p*u}:{x:p*u,y:m*f}}const nNe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:s,placement:o,middlewareData:l}=e,c=await rNe(e,t);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},iNe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:b,y:w}=v;return{x:b,y:w}}},...c}=jo(t,e),u={x:r,y:n},f=await wp(e,c),d=Ra(So(i)),p=EC(d);let m=u[p],x=u[d];if(s){const v=p==="y"?"top":"left",b=p==="y"?"bottom":"right",w=m+f[v],N=m-f[b];m=aO(w,m,N)}if(o){const v=d==="y"?"top":"left",b=d==="y"?"bottom":"right",w=x+f[v],N=x-f[b];x=aO(w,x,N)}const y=l.fn({...e,[p]:m,[d]:x});return{...y,data:{x:y.x-r,y:y.y-n,enabled:{[p]:s,[d]:o}}}}}},sNe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:s,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=jo(t,e),f={x:r,y:n},d=Ra(i),p=EC(d);let m=f[p],x=f[d];const y=jo(l,e),v=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const N=p==="y"?"height":"width",j=s.reference[p]-s.floating[N]+v.mainAxis,k=s.reference[p]+s.reference[N]-v.mainAxis;m<j?m=j:m>k&&(m=k)}if(u){var b,w;const N=p==="y"?"width":"height",j=["top","left"].includes(So(i)),k=s.reference[d]-s.floating[N]+(j&&((b=o.offset)==null?void 0:b[d])||0)+(j?0:v.crossAxis),_=s.reference[d]+s.reference[N]+(j?0:((w=o.offset)==null?void 0:w[d])||0)-(j?v.crossAxis:0);x<k?x=k:x>_&&(x=_)}return{[p]:m,[d]:x}}}},oNe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:s,platform:o,elements:l}=e,{apply:c=()=>{},...u}=jo(t,e),f=await wp(e,u),d=So(i),p=Nd(i),m=Ra(i)==="y",{width:x,height:y}=s.floating;let v,b;d==="top"||d==="bottom"?(v=d,b=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=d,v=p==="end"?"top":"bottom");const w=y-f.top-f.bottom,N=x-f.left-f.right,j=Ma(y-f[v],w),k=Ma(x-f[b],N),_=!e.middlewareData.shift;let E=j,A=k;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(A=N),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(E=w),_&&!p){const M=Yn(f.left,0),P=Yn(f.right,0),R=Yn(f.top,0),L=Yn(f.bottom,0);m?A=x-2*(M!==0||P!==0?M+P:Yn(f.left,f.right)):E=y-2*(R!==0||L!==0?R+L:Yn(f.top,f.bottom))}await c({...e,availableWidth:A,availableHeight:E});const T=await o.getDimensions(l.floating);return x!==T.width||y!==T.height?{reset:{rects:!0}}:{}}}};function Cx(){return typeof window<"u"}function kd(t){return m9(t)?(t.nodeName||"").toLowerCase():"#document"}function ni(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ls(t){var e;return(e=(m9(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function m9(t){return Cx()?t instanceof Node||t instanceof ni(t).Node:!1}function ss(t){return Cx()?t instanceof Element||t instanceof ni(t).Element:!1}function Ms(t){return Cx()?t instanceof HTMLElement||t instanceof ni(t).HTMLElement:!1}function A6(t){return!Cx()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ni(t).ShadowRoot}function Xp(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=as(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(i)}function aNe(t){return["table","td","th"].includes(kd(t))}function Ax(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function TC(t){const e=PC(),r=ss(t)?as(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function lNe(t){let e=Ia(t);for(;Ms(e)&&!od(e);){if(TC(e))return e;if(Ax(e))return null;e=Ia(e)}return null}function PC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function od(t){return["html","body","#document"].includes(kd(t))}function as(t){return ni(t).getComputedStyle(t)}function Tx(t){return ss(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ia(t){if(kd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||A6(t)&&t.host||Ls(t);return A6(e)?e.host:e}function g9(t){const e=Ia(t);return od(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ms(e)&&Xp(e)?e:g9(e)}function jp(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=g9(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),o=ni(i);if(s){const l=cO(o);return e.concat(o,o.visualViewport||[],Xp(i)?i:[],l&&r?jp(l):[])}return e.concat(i,jp(i,[],r))}function cO(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function y9(t){const e=as(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Ms(t),s=i?t.offsetWidth:r,o=i?t.offsetHeight:n,l=p0(r)!==s||p0(n)!==o;return l&&(r=s,n=o),{width:r,height:n,$:l}}function MC(t){return ss(t)?t:t.contextElement}function Su(t){const e=MC(t);if(!Ms(e))return _s(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:s}=y9(e);let o=(s?p0(r.width):r.width)/n,l=(s?p0(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const cNe=_s(0);function v9(t){const e=ni(t);return!PC()||!e.visualViewport?cNe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function uNe(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==ni(t)?!1:e}function Ql(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),s=MC(t);let o=_s(1);e&&(n?ss(n)&&(o=Su(n)):o=Su(t));const l=uNe(s,r,n)?v9(s):_s(0);let c=(i.left+l.x)/o.x,u=(i.top+l.y)/o.y,f=i.width/o.x,d=i.height/o.y;if(s){const p=ni(s),m=n&&ss(n)?ni(n):n;let x=p,y=cO(x);for(;y&&n&&m!==x;){const v=Su(y),b=y.getBoundingClientRect(),w=as(y),N=b.left+(y.clientLeft+parseFloat(w.paddingLeft))*v.x,j=b.top+(y.clientTop+parseFloat(w.paddingTop))*v.y;c*=v.x,u*=v.y,f*=v.x,d*=v.y,c+=N,u+=j,x=ni(y),y=cO(x)}}return g0({width:f,height:d,x:c,y:u})}function RC(t,e){const r=Tx(t).scrollLeft;return e?e.left+r:Ql(Ls(t)).left+r}function x9(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-(r?0:RC(t,n)),s=n.top+e.scrollTop;return{x:i,y:s}}function dNe(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const s=i==="fixed",o=Ls(n),l=e?Ax(e.floating):!1;if(n===o||l&&s)return r;let c={scrollLeft:0,scrollTop:0},u=_s(1);const f=_s(0),d=Ms(n);if((d||!d&&!s)&&((kd(n)!=="body"||Xp(o))&&(c=Tx(n)),Ms(n))){const m=Ql(n);u=Su(n),f.x=m.x+n.clientLeft,f.y=m.y+n.clientTop}const p=o&&!d&&!s?x9(o,c,!0):_s(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+f.x+p.x,y:r.y*u.y-c.scrollTop*u.y+f.y+p.y}}function fNe(t){return Array.from(t.getClientRects())}function hNe(t){const e=Ls(t),r=Tx(t),n=t.ownerDocument.body,i=Yn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=Yn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+RC(t);const l=-r.scrollTop;return as(n).direction==="rtl"&&(o+=Yn(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:l}}function pNe(t,e){const r=ni(t),n=Ls(t),i=r.visualViewport;let s=n.clientWidth,o=n.clientHeight,l=0,c=0;if(i){s=i.width,o=i.height;const u=PC();(!u||u&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:l,y:c}}function mNe(t,e){const r=Ql(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,s=Ms(t)?Su(t):_s(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,c=i*s.x,u=n*s.y;return{width:o,height:l,x:c,y:u}}function T6(t,e,r){let n;if(e==="viewport")n=pNe(t,r);else if(e==="document")n=hNe(Ls(t));else if(ss(e))n=mNe(e,r);else{const i=v9(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return g0(n)}function b9(t,e){const r=Ia(t);return r===e||!ss(r)||od(r)?!1:as(r).position==="fixed"||b9(r,e)}function gNe(t,e){const r=e.get(t);if(r)return r;let n=jp(t,[],!1).filter(l=>ss(l)&&kd(l)!=="body"),i=null;const s=as(t).position==="fixed";let o=s?Ia(t):t;for(;ss(o)&&!od(o);){const l=as(o),c=TC(o);!c&&l.position==="fixed"&&(i=null),(s?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Xp(o)&&!c&&b9(t,o))?n=n.filter(f=>f!==o):i=l,o=Ia(o)}return e.set(t,n),n}function yNe(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const o=[...r==="clippingAncestors"?Ax(e)?[]:gNe(e,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,f)=>{const d=T6(e,f,i);return u.top=Yn(d.top,u.top),u.right=Ma(d.right,u.right),u.bottom=Ma(d.bottom,u.bottom),u.left=Yn(d.left,u.left),u},T6(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function vNe(t){const{width:e,height:r}=y9(t);return{width:e,height:r}}function xNe(t,e,r){const n=Ms(e),i=Ls(e),s=r==="fixed",o=Ql(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const c=_s(0);if(n||!n&&!s)if((kd(e)!=="body"||Xp(i))&&(l=Tx(e)),n){const p=Ql(e,!0,s,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else i&&(c.x=RC(i));const u=i&&!n&&!s?x9(i,l):_s(0),f=o.left+l.scrollLeft-c.x-u.x,d=o.top+l.scrollTop-c.y-u.y;return{x:f,y:d,width:o.width,height:o.height}}function Ak(t){return as(t).position==="static"}function P6(t,e){if(!Ms(t)||as(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Ls(t)===r&&(r=r.ownerDocument.body),r}function w9(t,e){const r=ni(t);if(Ax(t))return r;if(!Ms(t)){let i=Ia(t);for(;i&&!od(i);){if(ss(i)&&!Ak(i))return i;i=Ia(i)}return r}let n=P6(t,e);for(;n&&aNe(n)&&Ak(n);)n=P6(n,e);return n&&od(n)&&Ak(n)&&!TC(n)?r:n||lNe(t)||r}const bNe=async function(t){const e=this.getOffsetParent||w9,r=this.getDimensions,n=await r(t.floating);return{reference:xNe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function wNe(t){return as(t).direction==="rtl"}const jNe={convertOffsetParentRelativeRectToViewportRelativeRect:dNe,getDocumentElement:Ls,getClippingRect:yNe,getOffsetParent:w9,getElementRects:bNe,getClientRects:fNe,getDimensions:vNe,getScale:Su,isElement:ss,isRTL:wNe};function j9(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function SNe(t,e){let r=null,n;const i=Ls(t);function s(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=t.getBoundingClientRect(),{left:f,top:d,width:p,height:m}=u;if(l||e(),!p||!m)return;const x=qg(d),y=qg(i.clientWidth-(f+p)),v=qg(i.clientHeight-(d+m)),b=qg(f),N={rootMargin:-x+"px "+-y+"px "+-v+"px "+-b+"px",threshold:Yn(0,Ma(1,c))||1};let j=!0;function k(_){const E=_[0].intersectionRatio;if(E!==c){if(!j)return o();E?o(!1,E):n=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!j9(u,t.getBoundingClientRect())&&o(),j=!1}try{r=new IntersectionObserver(k,{...N,root:i.ownerDocument})}catch{r=new IntersectionObserver(k,N)}r.observe(t)}return o(!0),s}function NNe(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=MC(t),f=i||s?[...u?jp(u):[],...jp(e)]:[];f.forEach(b=>{i&&b.addEventListener("scroll",r,{passive:!0}),s&&b.addEventListener("resize",r)});const d=u&&l?SNe(u,r):null;let p=-1,m=null;o&&(m=new ResizeObserver(b=>{let[w]=b;w&&w.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var N;(N=m)==null||N.observe(e)})),r()}),u&&!c&&m.observe(u),m.observe(e));let x,y=c?Ql(t):null;c&&v();function v(){const b=Ql(t);y&&!j9(y,b)&&r(),y=b,x=requestAnimationFrame(v)}return r(),()=>{var b;f.forEach(w=>{i&&w.removeEventListener("scroll",r),s&&w.removeEventListener("resize",r)}),d==null||d(),(b=m)==null||b.disconnect(),m=null,c&&cancelAnimationFrame(x)}}const kNe=nNe,_Ne=iNe,ONe=eNe,ENe=oNe,CNe=tNe,M6=ZSe,ANe=sNe,TNe=(t,e,r)=>{const n=new Map,i={platform:jNe,...r},s={...i.platform,_c:n};return QSe(t,e,{...i,platform:s})};var oy=typeof document<"u"?O.useLayoutEffect:O.useEffect;function y0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!y0(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(!(s==="_owner"&&t.$$typeof)&&!y0(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function S9(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function R6(t,e){const r=S9(t);return Math.round(e*r)/r}function Tk(t){const e=O.useRef(t);return oy(()=>{e.current=t}),e}function PNe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[f,d]=O.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=O.useState(n);y0(p,n)||m(n);const[x,y]=O.useState(null),[v,b]=O.useState(null),w=O.useCallback(K=>{K!==_.current&&(_.current=K,y(K))},[]),N=O.useCallback(K=>{K!==E.current&&(E.current=K,b(K))},[]),j=s||x,k=o||v,_=O.useRef(null),E=O.useRef(null),A=O.useRef(f),T=c!=null,M=Tk(c),P=Tk(i),R=Tk(u),L=O.useCallback(()=>{if(!_.current||!E.current)return;const K={placement:e,strategy:r,middleware:p};P.current&&(K.platform=P.current),TNe(_.current,E.current,K).then(q=>{const V={...q,isPositioned:R.current!==!1};$.current&&!y0(A.current,V)&&(A.current=V,js.flushSync(()=>{d(V)}))})},[p,e,r,P,R]);oy(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,d(K=>({...K,isPositioned:!1})))},[u]);const $=O.useRef(!1);oy(()=>($.current=!0,()=>{$.current=!1}),[]),oy(()=>{if(j&&(_.current=j),k&&(E.current=k),j&&k){if(M.current)return M.current(j,k,L);L()}},[j,k,L,M,T]);const F=O.useMemo(()=>({reference:_,floating:E,setReference:w,setFloating:N}),[w,N]),z=O.useMemo(()=>({reference:j,floating:k}),[j,k]),W=O.useMemo(()=>{const K={position:r,left:0,top:0};if(!z.floating)return K;const q=R6(z.floating,f.x),V=R6(z.floating,f.y);return l?{...K,transform:"translate("+q+"px, "+V+"px)",...S9(z.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:q,top:V}},[r,l,z.floating,f.x,f.y]);return O.useMemo(()=>({...f,update:L,refs:F,elements:z,floatingStyles:W}),[f,L,F,z,W])}const MNe=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:i}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?M6({element:n.current,padding:i}).fn(r):{}:n?M6({element:n,padding:i}).fn(r):{}}}},RNe=(t,e)=>({...kNe(t),options:[t,e]}),INe=(t,e)=>({..._Ne(t),options:[t,e]}),DNe=(t,e)=>({...ANe(t),options:[t,e]}),LNe=(t,e)=>({...ONe(t),options:[t,e]}),$Ne=(t,e)=>({...ENe(t),options:[t,e]}),BNe=(t,e)=>({...CNe(t),options:[t,e]}),FNe=(t,e)=>({...MNe(t),options:[t,e]});var qNe="Arrow",N9=O.forwardRef((t,e)=>{const{children:r,width:n=10,height:i=5,...s}=t;return a.jsx($t.svg,{...s,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});N9.displayName=qNe;var zNe=N9;function IC(t){const[e,r]=O.useState(void 0);return Sn(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var DC="Popper",[k9,_9]=Yp(DC),[UNe,O9]=k9(DC),E9=t=>{const{__scopePopper:e,children:r}=t,[n,i]=O.useState(null);return a.jsx(UNe,{scope:e,anchor:n,onAnchorChange:i,children:r})};E9.displayName=DC;var C9="PopperAnchor",A9=O.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...i}=t,s=O9(C9,r),o=O.useRef(null),l=yr(e,o);return O.useEffect(()=>{s.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:a.jsx($t.div,{...i,ref:l})});A9.displayName=C9;var LC="PopperContent",[HNe,WNe]=k9(LC),T9=O.forwardRef((t,e)=>{var Y,re,J,ne,te,se;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:d="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:x,...y}=t,v=O9(LC,r),[b,w]=O.useState(null),N=yr(e,ve=>w(ve)),[j,k]=O.useState(null),_=IC(j),E=(_==null?void 0:_.width)??0,A=(_==null?void 0:_.height)??0,T=n+(s!=="center"?"-"+s:""),M=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},P=Array.isArray(u)?u:[u],R=P.length>0,L={padding:M,boundary:P.filter(KNe),altBoundary:R},{refs:$,floatingStyles:F,placement:z,isPositioned:W,middlewareData:K}=PNe({strategy:"fixed",placement:T,whileElementsMounted:(...ve)=>NNe(...ve,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[RNe({mainAxis:i+A,alignmentAxis:o}),c&&INe({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?DNe():void 0,...L}),c&&LNe({...L}),$Ne({...L,apply:({elements:ve,rects:ie,availableWidth:ye,availableHeight:Te})=>{const{width:Le,height:ue}=ie.reference,he=ve.floating.style;he.setProperty("--radix-popper-available-width",`${ye}px`),he.setProperty("--radix-popper-available-height",`${Te}px`),he.setProperty("--radix-popper-anchor-width",`${Le}px`),he.setProperty("--radix-popper-anchor-height",`${ue}px`)}}),j&&FNe({element:j,padding:l}),GNe({arrowWidth:E,arrowHeight:A}),p&&BNe({strategy:"referenceHidden",...L})]}),[q,V]=R9(z),D=wo(x);Sn(()=>{W&&(D==null||D())},[W,D]);const U=(Y=K.arrow)==null?void 0:Y.x,G=(re=K.arrow)==null?void 0:re.y,ee=((J=K.arrow)==null?void 0:J.centerOffset)!==0,[Q,H]=O.useState();return Sn(()=>{b&&H(window.getComputedStyle(b).zIndex)},[b]),a.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:W?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[(ne=K.transformOrigin)==null?void 0:ne.x,(te=K.transformOrigin)==null?void 0:te.y].join(" "),...((se=K.hide)==null?void 0:se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(HNe,{scope:r,placedSide:q,onArrowChange:k,arrowX:U,arrowY:G,shouldHideArrow:ee,children:a.jsx($t.div,{"data-side":q,"data-align":V,...y,ref:N,style:{...y.style,animation:W?void 0:"none"}})})})});T9.displayName=LC;var P9="PopperArrow",VNe={top:"bottom",right:"left",bottom:"top",left:"right"},M9=O.forwardRef(function(e,r){const{__scopePopper:n,...i}=e,s=WNe(P9,n),o=VNe[s.placedSide];return a.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:a.jsx(zNe,{...i,ref:r,style:{...i.style,display:"block"}})})});M9.displayName=P9;function KNe(t){return t!==null}var GNe=t=>({name:"transformOrigin",options:t,fn(e){var v,b,w;const{placement:r,rects:n,middlewareData:i}=e,o=((v=i.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,f]=R9(r),d={start:"0%",center:"50%",end:"100%"}[f],p=(((b=i.arrow)==null?void 0:b.x)??0)+l/2,m=(((w=i.arrow)==null?void 0:w.y)??0)+c/2;let x="",y="";return u==="bottom"?(x=o?d:`${p}px`,y=`${-c}px`):u==="top"?(x=o?d:`${p}px`,y=`${n.floating.height+c}px`):u==="right"?(x=`${-c}px`,y=o?d:`${m}px`):u==="left"&&(x=`${n.floating.width+c}px`,y=o?d:`${m}px`),{data:{x,y}}}});function R9(t){const[e,r="center"]=t.split("-");return[e,r]}var YNe=E9,XNe=A9,JNe=T9,QNe=M9,ZNe="Portal",I9=O.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[i,s]=O.useState(!1);Sn(()=>s(!0),[]);const o=r||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?tB.createPortal(a.jsx($t.div,{...n,ref:e}),o):null});I9.displayName=ZNe;function v0({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,i]=eke({defaultProp:e,onChange:r}),s=t!==void 0,o=s?t:n,l=wo(r),c=O.useCallback(u=>{if(s){const d=typeof u=="function"?u(t):u;d!==t&&l(d)}else i(u)},[s,t,i,l]);return[o,c]}function eke({defaultProp:t,onChange:e}){const r=O.useState(t),[n]=r,i=O.useRef(n),s=wo(e);return O.useEffect(()=>{i.current!==n&&(s(n),i.current=n)},[n,i,s]),r}function $C(t){const e=O.useRef({value:t,previous:t});return O.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var tke="VisuallyHidden",D9=O.forwardRef((t,e)=>a.jsx($t.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));D9.displayName=tke;var rke=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},eu=new WeakMap,zg=new WeakMap,Ug={},Pk=0,L9=function(t){return t&&(t.host||L9(t.parentNode))},nke=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=L9(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},ike=function(t,e,r,n){var i=nke(e,Array.isArray(t)?t:[t]);Ug[r]||(Ug[r]=new WeakMap);var s=Ug[r],o=[],l=new Set,c=new Set(i),u=function(d){!d||l.has(d)||(l.add(d),u(d.parentNode))};i.forEach(u);var f=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(p){if(l.has(p))f(p);else try{var m=p.getAttribute(n),x=m!==null&&m!=="false",y=(eu.get(p)||0)+1,v=(s.get(p)||0)+1;eu.set(p,y),s.set(p,v),o.push(p),y===1&&x&&zg.set(p,!0),v===1&&p.setAttribute(r,"true"),x||p.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return f(e),l.clear(),Pk++,function(){o.forEach(function(d){var p=eu.get(d)-1,m=s.get(d)-1;eu.set(d,p),s.set(d,m),p||(zg.has(d)||d.removeAttribute(n),zg.delete(d)),m||d.removeAttribute(r)}),Pk--,Pk||(eu=new WeakMap,eu=new WeakMap,zg=new WeakMap,Ug={})}},ske=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),i=rke(t);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),ike(n,i,r,"aria-hidden")):function(){return null}},ws=function(){return ws=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ws.apply(this,arguments)};function $9(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function oke(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}var ay="right-scroll-bar-position",ly="width-before-scroll-bar",ake="with-scroll-bars-hidden",lke="--removed-body-scroll-bar-size";function Mk(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function cke(t,e){var r=O.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=e,r.facade}var uke=typeof window<"u"?O.useLayoutEffect:O.useEffect,I6=new WeakMap;function dke(t,e){var r=cke(null,function(n){return t.forEach(function(i){return Mk(i,n)})});return uke(function(){var n=I6.get(r);if(n){var i=new Set(n),s=new Set(t),o=r.current;i.forEach(function(l){s.has(l)||Mk(l,null)}),s.forEach(function(l){i.has(l)||Mk(l,o)})}I6.set(r,t)},[t]),r}function fke(t){return t}function hke(t,e){e===void 0&&(e=fke);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(s){var o=e(s,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(n=!0;r.length;){var o=r;r=[],o.forEach(s)}r={push:function(l){return s(l)},filter:function(){return r}}},assignMedium:function(s){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(s),o=r}var c=function(){var f=o;o=[],f.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(f){o.push(f),u()},filter:function(f){return o=o.filter(f),r}}}};return i}function pke(t){t===void 0&&(t={});var e=hke(null);return e.options=ws({async:!0,ssr:!1},t),e}var B9=function(t){var e=t.sideCar,r=$9(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return O.createElement(n,ws({},r))};B9.isSideCarExport=!0;function mke(t,e){return t.useMedium(e),B9}var F9=pke(),Rk=function(){},Px=O.forwardRef(function(t,e){var r=O.useRef(null),n=O.useState({onScrollCapture:Rk,onWheelCapture:Rk,onTouchMoveCapture:Rk}),i=n[0],s=n[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,f=t.enabled,d=t.shards,p=t.sideCar,m=t.noIsolation,x=t.inert,y=t.allowPinchZoom,v=t.as,b=v===void 0?"div":v,w=t.gapMode,N=$9(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=p,k=dke([r,e]),_=ws(ws({},N),i);return O.createElement(O.Fragment,null,f&&O.createElement(j,{sideCar:F9,removeScrollBar:u,shards:d,noIsolation:m,inert:x,setCallbacks:s,allowPinchZoom:!!y,lockRef:r,gapMode:w}),o?O.cloneElement(O.Children.only(l),ws(ws({},_),{ref:k})):O.createElement(b,ws({},_,{className:c,ref:k}),l))});Px.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Px.classNames={fullWidth:ly,zeroRight:ay};var gke=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function yke(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=gke();return e&&t.setAttribute("nonce",e),t}function vke(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function xke(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var bke=function(){var t=0,e=null;return{add:function(r){t==0&&(e=yke())&&(vke(e,r),xke(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},wke=function(){var t=bke();return function(e,r){O.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},q9=function(){var t=wke(),e=function(r){var n=r.styles,i=r.dynamic;return t(n,i),null};return e},jke={left:0,top:0,right:0,gap:0},Ik=function(t){return parseInt(t||"",10)||0},Ske=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Ik(r),Ik(n),Ik(i)]},Nke=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return jke;var e=Ske(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},kke=q9(),Nu="data-scroll-locked",_ke=function(t,e,r,n){var i=t.left,s=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(ake,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Nu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ay,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(ly,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(ay," .").concat(ay,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ly," .").concat(ly,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Nu,`] {
    `).concat(lke,": ").concat(l,`px;
  }
`)},D6=function(){var t=parseInt(document.body.getAttribute(Nu)||"0",10);return isFinite(t)?t:0},Oke=function(){O.useEffect(function(){return document.body.setAttribute(Nu,(D6()+1).toString()),function(){var t=D6()-1;t<=0?document.body.removeAttribute(Nu):document.body.setAttribute(Nu,t.toString())}},[])},Eke=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n;Oke();var s=O.useMemo(function(){return Nke(i)},[i]);return O.createElement(kke,{styles:_ke(s,!e,i,r?"":"!important")})},uO=!1;if(typeof window<"u")try{var Hg=Object.defineProperty({},"passive",{get:function(){return uO=!0,!0}});window.addEventListener("test",Hg,Hg),window.removeEventListener("test",Hg,Hg)}catch{uO=!1}var tu=uO?{passive:!1}:!1,Cke=function(t){return t.tagName==="TEXTAREA"},z9=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!Cke(t)&&r[e]==="visible")},Ake=function(t){return z9(t,"overflowY")},Tke=function(t){return z9(t,"overflowX")},L6=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=U9(t,n);if(i){var s=H9(t,n),o=s[1],l=s[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Pke=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},Mke=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},U9=function(t,e){return t==="v"?Ake(e):Tke(e)},H9=function(t,e){return t==="v"?Pke(e):Mke(e)},Rke=function(t,e){return t==="h"&&e==="rtl"?-1:1},Ike=function(t,e,r,n,i){var s=Rke(t,window.getComputedStyle(e).direction),o=s*n,l=r.target,c=e.contains(l),u=!1,f=o>0,d=0,p=0;do{var m=H9(t,l),x=m[0],y=m[1],v=m[2],b=y-v-s*x;(x||b)&&U9(t,l)&&(d+=b,p+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(f&&Math.abs(d)<1||!f&&Math.abs(p)<1)&&(u=!0),u},Wg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},$6=function(t){return[t.deltaX,t.deltaY]},B6=function(t){return t&&"current"in t?t.current:t},Dke=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Lke=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},$ke=0,ru=[];function Bke(t){var e=O.useRef([]),r=O.useRef([0,0]),n=O.useRef(),i=O.useState($ke++)[0],s=O.useState(q9)[0],o=O.useRef(t);O.useEffect(function(){o.current=t},[t]),O.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=oke([t.lockRef.current],(t.shards||[]).map(B6),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=O.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var b=Wg(y),w=r.current,N="deltaX"in y?y.deltaX:w[0]-b[0],j="deltaY"in y?y.deltaY:w[1]-b[1],k,_=y.target,E=Math.abs(N)>Math.abs(j)?"h":"v";if("touches"in y&&E==="h"&&_.type==="range")return!1;var A=L6(E,_);if(!A)return!0;if(A?k=E:(k=E==="v"?"h":"v",A=L6(E,_)),!A)return!1;if(!n.current&&"changedTouches"in y&&(N||j)&&(n.current=k),!k)return!0;var T=n.current||k;return Ike(T,v,y,T==="h"?N:j)},[]),c=O.useCallback(function(y){var v=y;if(!(!ru.length||ru[ru.length-1]!==s)){var b="deltaY"in v?$6(v):Wg(v),w=e.current.filter(function(k){return k.name===v.type&&(k.target===v.target||v.target===k.shadowParent)&&Dke(k.delta,b)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var N=(o.current.shards||[]).map(B6).filter(Boolean).filter(function(k){return k.contains(v.target)}),j=N.length>0?l(v,N[0]):!o.current.noIsolation;j&&v.cancelable&&v.preventDefault()}}},[]),u=O.useCallback(function(y,v,b,w){var N={name:y,delta:v,target:b,should:w,shadowParent:Fke(b)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(j){return j!==N})},1)},[]),f=O.useCallback(function(y){r.current=Wg(y),n.current=void 0},[]),d=O.useCallback(function(y){u(y.type,$6(y),y.target,l(y,t.lockRef.current))},[]),p=O.useCallback(function(y){u(y.type,Wg(y),y.target,l(y,t.lockRef.current))},[]);O.useEffect(function(){return ru.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:p}),document.addEventListener("wheel",c,tu),document.addEventListener("touchmove",c,tu),document.addEventListener("touchstart",f,tu),function(){ru=ru.filter(function(y){return y!==s}),document.removeEventListener("wheel",c,tu),document.removeEventListener("touchmove",c,tu),document.removeEventListener("touchstart",f,tu)}},[]);var m=t.removeScrollBar,x=t.inert;return O.createElement(O.Fragment,null,x?O.createElement(s,{styles:Lke(i)}):null,m?O.createElement(Eke,{gapMode:t.gapMode}):null)}function Fke(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const qke=mke(F9,Bke);var W9=O.forwardRef(function(t,e){return O.createElement(Px,ws({},t,{ref:e,sideCar:qke}))});W9.classNames=Px.classNames;var zke=[" ","Enter","ArrowUp","ArrowDown"],Uke=[" ","Enter"],Jp="Select",[Mx,Rx,Hke]=wSe(Jp),[_d,EEe]=Yp(Jp,[Hke,_9]),Ix=_9(),[Wke,Ka]=_d(Jp),[Vke,Kke]=_d(Jp),V9=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:i,onOpenChange:s,value:o,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:d,disabled:p,required:m,form:x}=t,y=Ix(e),[v,b]=O.useState(null),[w,N]=O.useState(null),[j,k]=O.useState(!1),_=SSe(u),[E=!1,A]=v0({prop:n,defaultProp:i,onChange:s}),[T,M]=v0({prop:o,defaultProp:l,onChange:c}),P=O.useRef(null),R=v?x||!!v.closest("form"):!0,[L,$]=O.useState(new Set),F=Array.from(L).map(z=>z.props.value).join(";");return a.jsx(YNe,{...y,children:a.jsxs(Wke,{required:m,scope:e,trigger:v,onTriggerChange:b,valueNode:w,onValueNodeChange:N,valueNodeHasChildren:j,onValueNodeHasChildrenChange:k,contentId:OC(),value:T,onValueChange:M,open:E,onOpenChange:A,dir:_,triggerPointerDownPosRef:P,disabled:p,children:[a.jsx(Mx.Provider,{scope:e,children:a.jsx(Vke,{scope:t.__scopeSelect,onNativeOptionAdd:O.useCallback(z=>{$(W=>new Set(W).add(z))},[]),onNativeOptionRemove:O.useCallback(z=>{$(W=>{const K=new Set(W);return K.delete(z),K})},[]),children:r})}),R?a.jsxs(yH,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:d,value:T,onChange:z=>M(z.target.value),disabled:p,form:x,children:[T===void 0?a.jsx("option",{value:""}):null,Array.from(L)]},F):null]})})};V9.displayName=Jp;var K9="SelectTrigger",G9=O.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...i}=t,s=Ix(r),o=Ka(K9,r),l=o.disabled||n,c=yr(e,o.onTriggerChange),u=Rx(r),f=O.useRef("touch"),[d,p,m]=vH(y=>{const v=u().filter(N=>!N.disabled),b=v.find(N=>N.value===o.value),w=xH(v,y,b);w!==void 0&&o.onValueChange(w.value)}),x=y=>{l||(o.onOpenChange(!0),m()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return a.jsx(XNe,{asChild:!0,...s,children:a.jsx($t.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":gH(o.value)?"":void 0,...i,ref:c,onClick:Jt(i.onClick,y=>{y.currentTarget.focus(),f.current!=="mouse"&&x(y)}),onPointerDown:Jt(i.onPointerDown,y=>{f.current=y.pointerType;const v=y.target;v.hasPointerCapture(y.pointerId)&&v.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(x(y),y.preventDefault())}),onKeyDown:Jt(i.onKeyDown,y=>{const v=d.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&p(y.key),!(v&&y.key===" ")&&zke.includes(y.key)&&(x(),y.preventDefault())})})})});G9.displayName=K9;var Y9="SelectValue",X9=O.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,children:s,placeholder:o="",...l}=t,c=Ka(Y9,r),{onValueNodeHasChildrenChange:u}=c,f=s!==void 0,d=yr(e,c.onValueNodeChange);return Sn(()=>{u(f)},[u,f]),a.jsx($t.span,{...l,ref:d,style:{pointerEvents:"none"},children:gH(c.value)?a.jsx(a.Fragment,{children:o}):s})});X9.displayName=Y9;var Gke="SelectIcon",J9=O.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...i}=t;return a.jsx($t.span,{"aria-hidden":!0,...i,ref:e,children:n||""})});J9.displayName=Gke;var Yke="SelectPortal",Q9=t=>a.jsx(I9,{asChild:!0,...t});Q9.displayName=Yke;var Zl="SelectContent",Z9=O.forwardRef((t,e)=>{const r=Ka(Zl,t.__scopeSelect),[n,i]=O.useState();if(Sn(()=>{i(new DocumentFragment)},[]),!r.open){const s=n;return s?js.createPortal(a.jsx(eH,{scope:t.__scopeSelect,children:a.jsx(Mx.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),s):null}return a.jsx(tH,{...t,ref:e})});Z9.displayName=Zl;var Gi=10,[eH,Ga]=_d(Zl),Xke="SelectContentImpl",Jke=h0("SelectContent.RemoveScroll"),tH=O.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:p,collisionPadding:m,sticky:x,hideWhenDetached:y,avoidCollisions:v,...b}=t,w=Ka(Zl,r),[N,j]=O.useState(null),[k,_]=O.useState(null),E=yr(e,Y=>j(Y)),[A,T]=O.useState(null),[M,P]=O.useState(null),R=Rx(r),[L,$]=O.useState(!1),F=O.useRef(!1);O.useEffect(()=>{if(N)return ske(N)},[N]),RSe();const z=O.useCallback(Y=>{const[re,...J]=R().map(se=>se.ref.current),[ne]=J.slice(-1),te=document.activeElement;for(const se of Y)if(se===te||(se==null||se.scrollIntoView({block:"nearest"}),se===re&&k&&(k.scrollTop=0),se===ne&&k&&(k.scrollTop=k.scrollHeight),se==null||se.focus(),document.activeElement!==te))return},[R,k]),W=O.useCallback(()=>z([A,N]),[z,A,N]);O.useEffect(()=>{L&&W()},[L,W]);const{onOpenChange:K,triggerPointerDownPosRef:q}=w;O.useEffect(()=>{if(N){let Y={x:0,y:0};const re=ne=>{var te,se;Y={x:Math.abs(Math.round(ne.pageX)-(((te=q.current)==null?void 0:te.x)??0)),y:Math.abs(Math.round(ne.pageY)-(((se=q.current)==null?void 0:se.y)??0))}},J=ne=>{Y.x<=10&&Y.y<=10?ne.preventDefault():N.contains(ne.target)||K(!1),document.removeEventListener("pointermove",re),q.current=null};return q.current!==null&&(document.addEventListener("pointermove",re),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",re),document.removeEventListener("pointerup",J,{capture:!0})}}},[N,K,q]),O.useEffect(()=>{const Y=()=>K(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[K]);const[V,D]=vH(Y=>{const re=R().filter(te=>!te.disabled),J=re.find(te=>te.ref.current===document.activeElement),ne=xH(re,Y,J);ne&&setTimeout(()=>ne.ref.current.focus())}),U=O.useCallback((Y,re,J)=>{const ne=!F.current&&!J;(w.value!==void 0&&w.value===re||ne)&&(T(Y),ne&&(F.current=!0))},[w.value]),G=O.useCallback(()=>N==null?void 0:N.focus(),[N]),ee=O.useCallback((Y,re,J)=>{const ne=!F.current&&!J;(w.value!==void 0&&w.value===re||ne)&&P(Y)},[w.value]),Q=n==="popper"?dO:rH,H=Q===dO?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:p,collisionPadding:m,sticky:x,hideWhenDetached:y,avoidCollisions:v}:{};return a.jsx(eH,{scope:r,content:N,viewport:k,onViewportChange:_,itemRefCallback:U,selectedItem:A,onItemLeave:G,itemTextRefCallback:ee,focusSelectedItem:W,selectedItemText:M,position:n,isPositioned:L,searchRef:V,children:a.jsx(W9,{as:Jke,allowPinchZoom:!0,children:a.jsx(f9,{asChild:!0,trapped:w.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:Jt(i,Y=>{var re;(re=w.trigger)==null||re.focus({preventScroll:!0}),Y.preventDefault()}),children:a.jsx(u9,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:a.jsx(Q,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:Y=>Y.preventDefault(),...b,...H,onPlaced:()=>$(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Jt(b.onKeyDown,Y=>{const re=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!re&&Y.key.length===1&&D(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let ne=R().filter(te=>!te.disabled).map(te=>te.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(ne=ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const te=Y.target,se=ne.indexOf(te);ne=ne.slice(se+1)}setTimeout(()=>z(ne)),Y.preventDefault()}})})})})})})});tH.displayName=Xke;var Qke="SelectItemAlignedPosition",rH=O.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...i}=t,s=Ka(Zl,r),o=Ga(Zl,r),[l,c]=O.useState(null),[u,f]=O.useState(null),d=yr(e,E=>f(E)),p=Rx(r),m=O.useRef(!1),x=O.useRef(!0),{viewport:y,selectedItem:v,selectedItemText:b,focusSelectedItem:w}=o,N=O.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&u&&y&&v&&b){const E=s.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),T=s.valueNode.getBoundingClientRect(),M=b.getBoundingClientRect();if(s.dir!=="rtl"){const te=M.left-A.left,se=T.left-te,ve=E.left-se,ie=E.width+ve,ye=Math.max(ie,A.width),Te=window.innerWidth-Gi,Le=v6(se,[Gi,Math.max(Gi,Te-ye)]);l.style.minWidth=ie+"px",l.style.left=Le+"px"}else{const te=A.right-M.right,se=window.innerWidth-T.right-te,ve=window.innerWidth-E.right-se,ie=E.width+ve,ye=Math.max(ie,A.width),Te=window.innerWidth-Gi,Le=v6(se,[Gi,Math.max(Gi,Te-ye)]);l.style.minWidth=ie+"px",l.style.right=Le+"px"}const P=p(),R=window.innerHeight-Gi*2,L=y.scrollHeight,$=window.getComputedStyle(u),F=parseInt($.borderTopWidth,10),z=parseInt($.paddingTop,10),W=parseInt($.borderBottomWidth,10),K=parseInt($.paddingBottom,10),q=F+z+L+K+W,V=Math.min(v.offsetHeight*5,q),D=window.getComputedStyle(y),U=parseInt(D.paddingTop,10),G=parseInt(D.paddingBottom,10),ee=E.top+E.height/2-Gi,Q=R-ee,H=v.offsetHeight/2,Y=v.offsetTop+H,re=F+z+Y,J=q-re;if(re<=ee){const te=P.length>0&&v===P[P.length-1].ref.current;l.style.bottom="0px";const se=u.clientHeight-y.offsetTop-y.offsetHeight,ve=Math.max(Q,H+(te?G:0)+se+W),ie=re+ve;l.style.height=ie+"px"}else{const te=P.length>0&&v===P[0].ref.current;l.style.top="0px";const ve=Math.max(ee,F+y.offsetTop+(te?U:0)+H)+J;l.style.height=ve+"px",y.scrollTop=re-ee+y.offsetTop}l.style.margin=`${Gi}px 0`,l.style.minHeight=V+"px",l.style.maxHeight=R+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[p,s.trigger,s.valueNode,l,u,y,v,b,s.dir,n]);Sn(()=>N(),[N]);const[j,k]=O.useState();Sn(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const _=O.useCallback(E=>{E&&x.current===!0&&(N(),w==null||w(),x.current=!1)},[N,w]);return a.jsx(e_e,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:_,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:a.jsx($t.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});rH.displayName=Qke;var Zke="SelectPopperPosition",dO=O.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=Gi,...s}=t,o=Ix(r);return a.jsx(JNe,{...o,...s,ref:e,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});dO.displayName=Zke;var[e_e,BC]=_d(Zl,{}),fO="SelectViewport",nH=O.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...i}=t,s=Ga(fO,r),o=BC(fO,r),l=yr(e,s.onViewportChange),c=O.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(Mx.Slot,{scope:r,children:a.jsx($t.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Jt(i.onScroll,u=>{const f=u.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&d){const m=Math.abs(c.current-f.scrollTop);if(m>0){const x=window.innerHeight-Gi*2,y=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),b=Math.max(y,v);if(b<x){const w=b+m,N=Math.min(x,w),j=w-N;d.style.height=N+"px",d.style.bottom==="0px"&&(f.scrollTop=j>0?j:0,d.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});nH.displayName=fO;var iH="SelectGroup",[t_e,r_e]=_d(iH),n_e=O.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=OC();return a.jsx(t_e,{scope:r,id:i,children:a.jsx($t.div,{role:"group","aria-labelledby":i,...n,ref:e})})});n_e.displayName=iH;var sH="SelectLabel",oH=O.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=r_e(sH,r);return a.jsx($t.div,{id:i.id,...n,ref:e})});oH.displayName=sH;var x0="SelectItem",[i_e,aH]=_d(x0),lH=O.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:s,...o}=t,l=Ka(x0,r),c=Ga(x0,r),u=l.value===n,[f,d]=O.useState(s??""),[p,m]=O.useState(!1),x=yr(e,w=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,w,n,i)}),y=OC(),v=O.useRef("touch"),b=()=>{i||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(i_e,{scope:r,value:n,disabled:i,textId:y,isSelected:u,onItemTextChange:O.useCallback(w=>{d(N=>N||((w==null?void 0:w.textContent)??"").trim())},[]),children:a.jsx(Mx.ItemSlot,{scope:r,value:n,disabled:i,textValue:f,children:a.jsx($t.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:x,onFocus:Jt(o.onFocus,()=>m(!0)),onBlur:Jt(o.onBlur,()=>m(!1)),onClick:Jt(o.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:Jt(o.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:Jt(o.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:Jt(o.onPointerMove,w=>{var N;v.current=w.pointerType,i?(N=c.onItemLeave)==null||N.call(c):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Jt(o.onPointerLeave,w=>{var N;w.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:Jt(o.onKeyDown,w=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&w.key===" "||(Uke.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});lH.displayName=x0;var Gf="SelectItemText",cH=O.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,...s}=t,o=Ka(Gf,r),l=Ga(Gf,r),c=aH(Gf,r),u=Kke(Gf,r),[f,d]=O.useState(null),p=yr(e,b=>d(b),c.onItemTextChange,b=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,b,c.value,c.disabled)}),m=f==null?void 0:f.textContent,x=O.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:v}=u;return Sn(()=>(y(x),()=>v(x)),[y,v,x]),a.jsxs(a.Fragment,{children:[a.jsx($t.span,{id:c.textId,...s,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?js.createPortal(s.children,o.valueNode):null]})});cH.displayName=Gf;var uH="SelectItemIndicator",dH=O.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return aH(uH,r).isSelected?a.jsx($t.span,{"aria-hidden":!0,...n,ref:e}):null});dH.displayName=uH;var hO="SelectScrollUpButton",fH=O.forwardRef((t,e)=>{const r=Ga(hO,t.__scopeSelect),n=BC(hO,t.__scopeSelect),[i,s]=O.useState(!1),o=yr(e,n.onScrollButtonChange);return Sn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;s(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?a.jsx(pH,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});fH.displayName=hO;var pO="SelectScrollDownButton",hH=O.forwardRef((t,e)=>{const r=Ga(pO,t.__scopeSelect),n=BC(pO,t.__scopeSelect),[i,s]=O.useState(!1),o=yr(e,n.onScrollButtonChange);return Sn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;s(f)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?a.jsx(pH,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});hH.displayName=pO;var pH=O.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=t,s=Ga("SelectScrollButton",r),o=O.useRef(null),l=Rx(r),c=O.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return O.useEffect(()=>()=>c(),[c]),Sn(()=>{var f;const u=l().find(d=>d.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),a.jsx($t.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Jt(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Jt(i.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Jt(i.onPointerLeave,()=>{c()})})}),s_e="SelectSeparator",mH=O.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return a.jsx($t.div,{"aria-hidden":!0,...n,ref:e})});mH.displayName=s_e;var mO="SelectArrow",o_e=O.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=Ix(r),s=Ka(mO,r),o=Ga(mO,r);return s.open&&o.position==="popper"?a.jsx(QNe,{...i,...n,ref:e}):null});o_e.displayName=mO;function gH(t){return t===""||t===void 0}var yH=O.forwardRef((t,e)=>{const{value:r,...n}=t,i=O.useRef(null),s=yr(e,i),o=$C(r);return O.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&f){const d=new Event("change",{bubbles:!0});f.call(l,r),l.dispatchEvent(d)}},[o,r]),a.jsx(D9,{asChild:!0,children:a.jsx("select",{...n,ref:s,defaultValue:r})})});yH.displayName="BubbleSelect";function vH(t){const e=wo(t),r=O.useRef(""),n=O.useRef(0),i=O.useCallback(o=>{const l=r.current+o;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),s=O.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return O.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,s]}function xH(t,e,r){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=r?t.indexOf(r):-1;let o=a_e(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function a_e(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var l_e=V9,bH=G9,c_e=X9,u_e=J9,d_e=Q9,wH=Z9,f_e=nH,jH=oH,SH=lH,h_e=cH,p_e=dH,NH=fH,kH=hH,_H=mH;const ec=l_e,tc=c_e,Da=O.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(bH,{ref:n,className:ge("flex h-10 w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:[e,a.jsx(u_e,{asChild:!0,children:a.jsx(mo,{className:"h-4 w-4 opacity-50"})})]}));Da.displayName=bH.displayName;const OH=O.forwardRef(({className:t,...e},r)=>a.jsx(NH,{ref:r,className:ge("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(CO,{className:"h-4 w-4"})}));OH.displayName=NH.displayName;const EH=O.forwardRef(({className:t,...e},r)=>a.jsx(kH,{ref:r,className:ge("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(mo,{className:"h-4 w-4"})}));EH.displayName=kH.displayName;const La=O.forwardRef(({className:t,children:e,position:r="popper",...n},i)=>a.jsx(d_e,{children:a.jsxs(wH,{ref:i,className:ge("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white text-gray-900 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[a.jsx(OH,{}),a.jsx(f_e,{className:ge("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(EH,{})]})}));La.displayName=wH.displayName;const m_e=O.forwardRef(({className:t,...e},r)=>a.jsx(jH,{ref:r,className:ge("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));m_e.displayName=jH.displayName;const kt=O.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(SH,{ref:n,className:ge("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(p_e,{children:a.jsx(ko,{className:"h-4 w-4"})})}),a.jsx(h_e,{children:e})]}));kt.displayName=SH.displayName;const g_e=O.forwardRef(({className:t,...e},r)=>a.jsx(_H,{ref:r,className:ge("-mx-1 my-1 h-px bg-gray-200",t),...e}));g_e.displayName=_H.displayName;function y_e({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n}){const i=t.content,{title:s="",subtitle:o,level:l=2}=i||{},[c,u]=O.useState(l),f=Rv({extensions:[d0.configure({heading:!1,paragraph:!1}),xp,bp,f0,u0.configure({placeholder:"Enter section title..."})],content:`<p>${s}</p>`,editable:e&&r,onUpdate:({editor:b})=>{if(n&&e){const w=b.getText();n({...i,title:w,level:c})}}}),d=Rv({extensions:[d0.configure({heading:!1}),xp,bp,f0,u0.configure({placeholder:"Optional subtitle..."})],content:`<p>${o||""}</p>`,editable:e&&r,onUpdate:({editor:b})=>{if(n&&e){const w=b.getText().trim();n({...i,title:(f==null?void 0:f.getText())||s,subtitle:w||void 0,level:c})}}});O.useEffect(()=>{f&&f.getText()!==s&&f.commands.setContent(`<p>${s}</p>`)},[f,s]),O.useEffect(()=>{d&&d.getText()!==(o||"")&&d.commands.setContent(`<p>${o||""}</p>`)},[d,o]),O.useEffect(()=>{f==null||f.setEditable(e&&r),d==null||d.setEditable(e&&r)},[f,d,e,r]);const p=b=>{b==null||b.chain().focus().toggleBold().run()},m=b=>{b==null||b.chain().focus().toggleItalic().run()},x=b=>{const w=parseInt(b);u(w),n&&n({...i,title:(f==null?void 0:f.getText())||s,subtitle:(d==null?void 0:d.getText().trim())||void 0,level:w})},y={1:"text-4xl font-bold",2:"text-3xl font-bold",3:"text-2xl font-semibold",4:"text-xl font-semibold",5:"text-lg font-medium",6:"text-base font-medium"},v=`h${c}`;return a.jsxs("div",{className:ge("space-y-3",r&&e&&"ring-2 ring-blue-500 ring-offset-2 rounded-lg p-3"),children:[e&&r&&a.jsxs("div",{className:"mb-4 p-3 border border-gray-200 rounded-lg bg-gray-50",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Heading Level:"}),a.jsxs(ec,{value:c.toString(),onValueChange:x,children:[a.jsx(Da,{className:"w-32",children:a.jsx(tc,{})}),a.jsxs(La,{children:[a.jsx(kt,{value:"1",children:"H1 - Largest"}),a.jsx(kt,{value:"2",children:"H2 - Large"}),a.jsx(kt,{value:"3",children:"H3 - Medium"}),a.jsx(kt,{value:"4",children:"H4 - Small"}),a.jsx(kt,{value:"5",children:"H5 - Smaller"}),a.jsx(kt,{value:"6",children:"H6 - Smallest"})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Title:"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>p(f),className:ge("h-8 w-8 p-0",(f==null?void 0:f.isActive("bold"))&&"bg-gray-200"),children:a.jsx(my,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>m(f),className:ge("h-8 w-8 p-0",(f==null?void 0:f.isActive("italic"))&&"bg-gray-200"),children:a.jsx(vy,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Subtitle:"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>p(d),className:ge("h-8 w-8 p-0",(d==null?void 0:d.isActive("bold"))&&"bg-gray-200"),children:a.jsx(my,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>m(d),className:ge("h-8 w-8 p-0",(d==null?void 0:d.isActive("italic"))&&"bg-gray-200"),children:a.jsx(vy,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:ge(y[c],"text-gray-900 leading-tight"),children:e&&r?a.jsx(Mv,{editor:f}):a.jsx(v,{className:ge(y[c],"text-gray-900 leading-tight"),children:s})}),(o||e&&r)&&a.jsx("div",{className:"text-gray-600 leading-relaxed",children:e&&r?a.jsx(Mv,{editor:d}):o?a.jsx("p",{className:"text-gray-600 leading-relaxed",children:o}):null}),e&&r&&!(f!=null&&f.getText().trim())&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-50",children:a.jsx("p",{className:"text-gray-400 text-sm",children:"Click to add section title..."})})]})}const v_e=Mi(y_e);var CH=Ct.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(r=>e.updateAttributes(r,{textAlign:t})).every(r=>r):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:r})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?r.unsetTextAlign():r.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});function x_e({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n}){const i=t.content,{html:s="<p>Enter your text here...</p>",text:o="Enter your text here..."}=i||{},l=Rv({extensions:[d0.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1}}),xp,bp,CH.configure({types:["heading","paragraph"]}),NC.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 hover:text-blue-800 underline"}}),f0,u0.configure({placeholder:"Start typing your content here..."})],content:s,editable:e&&r,onUpdate:({editor:v})=>{if(n&&e){const b=v.getHTML(),w=v.getText();n({html:b,text:w})}}});O.useEffect(()=>{l&&l.getHTML()!==s&&l.commands.setContent(s)},[l,s]),O.useEffect(()=>{l&&l.setEditable(e&&r)},[l,e,r]);const c=O.useCallback(()=>{l==null||l.chain().focus().toggleBold().run()},[l]),u=O.useCallback(()=>{l==null||l.chain().focus().toggleItalic().run()},[l]),f=O.useCallback(()=>{l==null||l.chain().focus().toggleUnderline().run()},[l]),d=O.useCallback(()=>{l==null||l.chain().focus().toggleStrike().run()},[l]),p=O.useCallback(v=>{l==null||l.chain().focus().setTextAlign(v).run()},[l]),m=O.useCallback(()=>{l==null||l.chain().focus().toggleBulletList().run()},[l]),x=O.useCallback(()=>{l==null||l.chain().focus().toggleOrderedList().run()},[l]),y=O.useCallback(()=>{const v=l==null?void 0:l.getAttributes("link").href,b=window.prompt("URL",v);if(b!==null){if(b===""){l==null||l.chain().focus().extendMarkRange("link").unsetLink().run();return}l==null||l.chain().focus().extendMarkRange("link").setLink({href:b}).run()}},[l]);return l?a.jsxs("div",{className:ge("relative",r&&e&&"ring-2 ring-blue-500 ring-offset-2 rounded-lg"),children:[e&&r&&a.jsxs("div",{className:"mb-4 p-2 border border-gray-200 rounded-lg bg-gray-50 flex flex-wrap gap-1",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:c,className:ge("h-8 w-8 p-0",l.isActive("bold")&&"bg-gray-200"),children:a.jsx(my,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:u,className:ge("h-8 w-8 p-0",l.isActive("italic")&&"bg-gray-200"),children:a.jsx(vy,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:f,className:ge("h-8 w-8 p-0",l.isActive("underline")&&"bg-gray-200"),children:a.jsx(qB,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:d,className:ge("h-8 w-8 p-0",l.isActive("strike")&&"bg-gray-200"),children:a.jsx(BB,{className:"w-4 h-4"})}),a.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>p("left"),className:ge("h-8 w-8 p-0",l.isActive({textAlign:"left"})&&"bg-gray-200"),children:a.jsx(PB,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>p("center"),className:ge("h-8 w-8 p-0",l.isActive({textAlign:"center"})&&"bg-gray-200"),children:a.jsx(TB,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>p("right"),className:ge("h-8 w-8 p-0",l.isActive({textAlign:"right"})&&"bg-gray-200"),children:a.jsx(MB,{className:"w-4 h-4"})}),a.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:m,className:ge("h-8 w-8 p-0",l.isActive("bulletList")&&"bg-gray-200"),children:a.jsx(rs,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:x,className:ge("h-8 w-8 p-0",l.isActive("orderedList")&&"bg-gray-200"),children:a.jsx(MO,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:y,className:ge("h-8 w-8 p-0",l.isActive("link")&&"bg-gray-200"),children:a.jsx(E0,{className:"w-4 h-4"})})]}),a.jsx("div",{className:ge("prose prose-gray max-w-none focus:outline-none",e&&r&&"min-h-[100px]"),children:a.jsx(Mv,{editor:l})}),e&&r&&l.getText().length===0&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx("p",{className:"text-gray-400 text-sm",children:"Click to start typing..."})})]}):a.jsxs("div",{className:"prose prose-gray max-w-none animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})}const b_e=Mi(x_e);function w_e({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n}){const i=t.content,{src:s="",alt:o="",caption:l,width:c,height:u}=i||{},[f,d]=O.useState(!1),[p,m]=O.useState(!!s),[x,y]=O.useState(!1),[v,b]=O.useState(!1),[w,N]=O.useState(l||""),[j,k]=O.useState(o||""),[_,E]=O.useState(!1),A=O.useRef(null),T=()=>{m(!1),d(!1)},M=()=>{d(!0),m(!1)},P=()=>{var z;(z=A.current)==null||z.click()},R=async z=>{var K;const W=(K=z.target.files)==null?void 0:K[0];if(W){if(!W.type.startsWith("image/")){alert("Please select an image file");return}if(W.size>5*1024*1024){alert("Image size must be less than 5MB");return}try{y(!0),d(!1);const q=await new Promise((Q,H)=>{const Y=new FileReader;Y.onloadend=()=>Q(Y.result),Y.onerror=H,Y.readAsDataURL(W)}),{data:V,error:D}=await pe.functions.invoke("enhanced-file-upload",{body:{fileData:q,fileName:W.name,fileType:W.type,folder:"page-builder/images"}});if(D)throw console.error("Upload error:",D),new Error(D.message||"Failed to upload image");if(V!=null&&V.error)throw new Error(V.error.message||"Failed to upload image");const G=V.data.publicUrl,ee={...i,src:G,alt:o||W.name.split(".")[0],width:void 0,height:void 0};n==null||n(ee),m(!0)}catch(q){console.error("Error uploading image:",q),alert(`Failed to upload image: ${q.message}`)}finally{y(!1),A.current&&(A.current.value="")}}},L=async()=>{const z=prompt("Enter image URL:");if(z)try{m(!0),d(!1);const W={...i,src:z,alt:o||"Image from URL"};n==null||n(W)}catch(W){console.error("Error setting image URL:",W),d(!0),m(!1)}},$=()=>{const z={...i,caption:w.trim()||void 0,alt:j.trim()||o};n==null||n(z),b(!1)},F=()=>{N(l||""),k(o||""),b(!1)};return s?f?a.jsx("div",{className:"flex items-center justify-center min-h-48 bg-red-50 border-2 border-dashed border-red-300 rounded-lg",children:a.jsxs("div",{className:"text-center p-8",children:[a.jsx("div",{className:"text-red-400 mb-4",children:a.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h4",{className:"text-lg font-medium text-red-800 mb-2",children:"Failed to load image"}),a.jsx("p",{className:"text-red-600 text-sm mb-4 break-all max-w-md",children:s}),e&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[a.jsxs(fe,{onClick:P,size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Ir,{className:"w-4 h-4"}),a.jsx("span",{children:"Upload New"})]}),a.jsxs(fe,{onClick:L,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Os,{className:"w-4 h-4"}),a.jsx("span",{children:"Try URL"})]})]})]})}):a.jsxs("figure",{className:ge("space-y-4 relative group",r&&e&&"ring-2 ring-blue-500 ring-offset-2 rounded-lg p-3"),children:[r&&e&&a.jsxs("div",{className:"absolute -top-2 -right-2 z-10 flex space-x-2",children:[a.jsx(fe,{onClick:()=>b(!v),size:"sm",variant:"outline",className:"h-8 w-8 p-0 bg-white border-gray-300 hover:bg-gray-50 shadow-lg",title:"Edit caption and alt text",children:a.jsx(yo,{className:"w-4 h-4"})}),a.jsx(fe,{onClick:P,size:"sm",variant:"outline",className:"h-8 w-8 p-0 bg-white border-gray-300 hover:bg-gray-50 shadow-lg",title:"Replace image",children:a.jsx(Ir,{className:"w-4 h-4"})})]}),v&&e&&a.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-4 shadow-lg space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alt Text (for accessibility)"}),a.jsx(ct,{value:j,onChange:z=>k(z.target.value),placeholder:"Describe the image for screen readers",className:"text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caption (optional)"}),a.jsx(ct,{value:w,onChange:z=>N(z.target.value),placeholder:"Add a caption for the image",className:"text-sm"})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx(fe,{onClick:F,size:"sm",variant:"outline",children:"Cancel"}),a.jsxs(fe,{onClick:$,size:"sm",className:"flex items-center space-x-1",children:[a.jsx(ko,{className:"w-4 h-4"}),a.jsx("span",{children:"Save"})]})]})]}),a.jsxs("div",{className:"relative overflow-hidden rounded-lg",children:[(p||x)&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 rounded-lg z-10",children:a.jsxs("div",{className:"text-center",children:[a.jsx(i_,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600",children:x?"Uploading...":"Loading..."})]})}),a.jsx("img",{src:s,alt:o,onLoad:T,onError:M,onClick:()=>!e&&E(!0),className:ge("max-w-full h-auto",!e&&"cursor-pointer hover:opacity-90 transition-opacity",(p||x)&&"opacity-0"),style:{width:c||"auto",height:u||"auto"}}),!e&&a.jsx("button",{onClick:()=>E(!0),className:"absolute top-3 right-3 bg-black bg-opacity-50 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"View fullscreen",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]}),l&&a.jsx("figcaption",{className:"text-sm text-gray-600 text-center italic px-4",children:l}),a.jsx("input",{ref:A,type:"file",accept:"image/*",onChange:R,className:"hidden"}),_&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"relative max-w-full max-h-full",children:[a.jsx("button",{onClick:()=>E(!1),className:"absolute -top-12 right-0 text-white hover:text-gray-300 text-2xl font-bold z-10",children:""}),a.jsx("img",{src:s,alt:o,className:"max-w-full max-h-full object-contain"}),l&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 text-white p-4 text-center",children:a.jsx("p",{className:"text-lg",children:l})})]})})]}):e?a.jsx("div",{className:"flex items-center justify-center min-h-48 bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors",children:a.jsxs("div",{className:"text-center p-8",children:[a.jsx(Eu,{className:"w-16 h-16 text-gray-400 mx-auto mb-6"}),a.jsx("h4",{className:"text-xl font-medium text-gray-900 mb-3",children:"Add Image"}),a.jsx("p",{className:"text-gray-600 text-sm mb-6 max-w-sm",children:"Upload an image file or provide a URL to display in this block."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[a.jsx(fe,{onClick:P,disabled:x,className:"flex items-center space-x-2",children:x?a.jsxs(a.Fragment,{children:[a.jsx(i_,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Uploading..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ir,{className:"w-4 h-4"}),a.jsx("span",{children:"Upload Image"})]})}),a.jsxs(fe,{onClick:L,variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(Os,{className:"w-4 h-4"}),a.jsx("span",{children:"From URL"})]})]}),a.jsx("input",{ref:A,type:"file",accept:"image/*",onChange:R,className:"hidden"})]})}):a.jsx("div",{className:"flex items-center justify-center h-48 bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Eu,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"No image selected"})]})})}const j_e=Mi(w_e);function S_e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return O.useMemo(()=>n=>{e.forEach(i=>i(n))},e)}const Dx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Od(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function FC(t){return"nodeType"in t}function Nn(t){var e,r;return t?Od(t)?t:FC(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function qC(t){const{Document:e}=Nn(t);return t instanceof e}function Qp(t){return Od(t)?!1:t instanceof Nn(t).HTMLElement}function AH(t){return t instanceof Nn(t).SVGElement}function Ed(t){return t?Od(t)?t.document:FC(t)?qC(t)?t:Qp(t)||AH(t)?t.ownerDocument:document:document:document}const ls=Dx?O.useLayoutEffect:O.useEffect;function Lx(t){const e=O.useRef(t);return ls(()=>{e.current=t}),O.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e.current==null?void 0:e.current(...n)},[])}function N_e(){const t=O.useRef(null),e=O.useCallback((n,i)=>{t.current=setInterval(n,i)},[]),r=O.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function Sp(t,e){e===void 0&&(e=[t]);const r=O.useRef(t);return ls(()=>{r.current!==t&&(r.current=t)},e),r}function Zp(t,e){const r=O.useRef();return O.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function b0(t){const e=Lx(t),r=O.useRef(null),n=O.useCallback(i=>{i!==r.current&&(e==null||e(i,r.current)),r.current=i},[]);return[r,n]}function w0(t){const e=O.useRef();return O.useEffect(()=>{e.current=t},[t]),e.current}let Dk={};function em(t,e){return O.useMemo(()=>{if(e)return e;const r=Dk[t]==null?0:Dk[t]+1;return Dk[t]=r,t+"-"+r},[t,e])}function TH(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce((s,o)=>{const l=Object.entries(o);for(const[c,u]of l){const f=s[c];f!=null&&(s[c]=f+t*u)}return s},{...e})}}const ku=TH(1),j0=TH(-1);function k_e(t){return"clientX"in t&&"clientY"in t}function $x(t){if(!t)return!1;const{KeyboardEvent:e}=Nn(t.target);return e&&t instanceof e}function __e(t){if(!t)return!1;const{TouchEvent:e}=Nn(t.target);return e&&t instanceof e}function S0(t){if(__e(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return k_e(t)?{x:t.clientX,y:t.clientY}:null}const Rs=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[Rs.Translate.toString(t),Rs.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),F6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function O_e(t){return t.matches(F6)?t:t.querySelector(F6)}const E_e={display:"none"};function C_e(t){let{id:e,value:r}=t;return Z.createElement("div",{id:e,style:E_e},r)}function A_e(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Z.createElement("div",{id:e,style:i,role:"status","aria-live":n,"aria-atomic":!0},r)}function T_e(){const[t,e]=O.useState("");return{announce:O.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const PH=O.createContext(null);function P_e(t){const e=O.useContext(PH);O.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function M_e(){const[t]=O.useState(()=>new Set),e=O.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[O.useCallback(n=>{let{type:i,event:s}=n;t.forEach(o=>{var l;return(l=o[i])==null?void 0:l.call(o,s)})},[t]),e]}const R_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},I_e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function D_e(t){let{announcements:e=I_e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:i=R_e}=t;const{announce:s,announcement:o}=T_e(),l=em("DndLiveRegion"),[c,u]=O.useState(!1);if(O.useEffect(()=>{u(!0)},[]),P_e(O.useMemo(()=>({onDragStart(d){let{active:p}=d;s(e.onDragStart({active:p}))},onDragMove(d){let{active:p,over:m}=d;e.onDragMove&&s(e.onDragMove({active:p,over:m}))},onDragOver(d){let{active:p,over:m}=d;s(e.onDragOver({active:p,over:m}))},onDragEnd(d){let{active:p,over:m}=d;s(e.onDragEnd({active:p,over:m}))},onDragCancel(d){let{active:p,over:m}=d;s(e.onDragCancel({active:p,over:m}))}}),[s,e])),!c)return null;const f=Z.createElement(Z.Fragment,null,Z.createElement(C_e,{id:n,value:i.draggable}),Z.createElement(A_e,{id:l,announcement:o}));return r?js.createPortal(f,r):f}var Sr;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Sr||(Sr={}));function N0(){}function Bx(t,e){return O.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Fx(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return O.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const cs=Object.freeze({x:0,y:0});function L_e(t,e){const r=S0(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function $_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function B_e(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function F_e(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-n,l=s-r;if(n<i&&r<s){const c=e.width*e.height,u=t.width*t.height,f=o*l,d=f/(c+u-f);return Number(d.toFixed(4))}return 0}const q_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const i=[];for(const s of n){const{id:o}=s,l=r.get(o);if(l){const c=F_e(l,e);c>0&&i.push({id:o,data:{droppableContainer:s,value:c}})}}return i.sort($_e)};function z_e(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function MH(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:cs}function U_e(t){return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return i.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...r})}}const H_e=U_e(1);function RH(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function W_e(t,e,r){const n=RH(e);if(!n)return t;const{scaleX:i,scaleY:s,x:o,y:l}=n,c=t.left-o-(1-i)*parseFloat(r),u=t.top-l-(1-s)*parseFloat(r.slice(r.indexOf(" ")+1)),f=i?t.width/i:t.width,d=s?t.height/s:t.height;return{width:f,height:d,top:u,right:c+f,bottom:u+d,left:c}}const V_e={ignoreTransform:!1};function Cd(t,e){e===void 0&&(e=V_e);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:f}=Nn(t).getComputedStyle(t);u&&(r=W_e(r,u,f))}const{top:n,left:i,width:s,height:o,bottom:l,right:c}=r;return{top:n,left:i,width:s,height:o,bottom:l,right:c}}function q6(t){return Cd(t,{ignoreTransform:!0})}function K_e(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function G_e(t,e){return e===void 0&&(e=Nn(t).getComputedStyle(t)),e.position==="fixed"}function Y_e(t,e){e===void 0&&(e=Nn(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?r.test(s):!1})}function zC(t,e){const r=[];function n(i){if(e!=null&&r.length>=e||!i)return r;if(qC(i)&&i.scrollingElement!=null&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!Qp(i)||AH(i)||r.includes(i))return r;const s=Nn(t).getComputedStyle(i);return i!==t&&Y_e(i,s)&&r.push(i),G_e(i,s)?r:n(i.parentNode)}return t?n(t):r}function IH(t){const[e]=zC(t,1);return e??null}function Lk(t){return!Dx||!t?null:Od(t)?t:FC(t)?qC(t)||t===Ed(t).scrollingElement?window:Qp(t)?t:null:null}function DH(t){return Od(t)?t.scrollX:t.scrollLeft}function LH(t){return Od(t)?t.scrollY:t.scrollTop}function gO(t){return{x:DH(t),y:LH(t)}}var Pr;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Pr||(Pr={}));function $H(t){return!Dx||!t?!1:t===document.scrollingElement}function BH(t){const e={x:0,y:0},r=$H(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=n.y,l=t.scrollLeft>=n.x;return{isTop:i,isLeft:s,isBottom:o,isRight:l,maxScroll:n,minScroll:e}}const X_e={x:.2,y:.2};function J_e(t,e,r,n,i){let{top:s,left:o,right:l,bottom:c}=r;n===void 0&&(n=10),i===void 0&&(i=X_e);const{isTop:u,isBottom:f,isLeft:d,isRight:p}=BH(t),m={x:0,y:0},x={x:0,y:0},y={height:e.height*i.y,width:e.width*i.x};return!u&&s<=e.top+y.height?(m.y=Pr.Backward,x.y=n*Math.abs((e.top+y.height-s)/y.height)):!f&&c>=e.bottom-y.height&&(m.y=Pr.Forward,x.y=n*Math.abs((e.bottom-y.height-c)/y.height)),!p&&l>=e.right-y.width?(m.x=Pr.Forward,x.x=n*Math.abs((e.right-y.width-l)/y.width)):!d&&o<=e.left+y.width&&(m.x=Pr.Backward,x.x=n*Math.abs((e.left+y.width-o)/y.width)),{direction:m,speed:x}}function Q_e(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:r,right:n,bottom:i}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:i,width:t.clientWidth,height:t.clientHeight}}function FH(t){return t.reduce((e,r)=>ku(e,gO(r)),cs)}function Z_e(t){return t.reduce((e,r)=>e+DH(r),0)}function e2e(t){return t.reduce((e,r)=>e+LH(r),0)}function qH(t,e){if(e===void 0&&(e=Cd),!t)return;const{top:r,left:n,bottom:i,right:s}=e(t);IH(t)&&(i<=0||s<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const t2e=[["x",["left","right"],Z_e],["y",["top","bottom"],e2e]];class UC{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=zC(r),i=FH(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,l]of t2e)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(n),f=i[s]-u;return this.rect[c]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class gh{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var i;(i=this.target)==null||i.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function r2e(t){const{EventTarget:e}=Nn(t);return t instanceof e?t:Ed(t)}function $k(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var Si;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Si||(Si={}));function z6(t){t.preventDefault()}function n2e(t){t.stopPropagation()}var vt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(vt||(vt={}));const zH={start:[vt.Space,vt.Enter],cancel:[vt.Esc],end:[vt.Space,vt.Enter,vt.Tab]},i2e=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case vt.Right:return{...r,x:r.x+25};case vt.Left:return{...r,x:r.x-25};case vt.Down:return{...r,y:r.y+25};case vt.Up:return{...r,y:r.y-25}}};class UH{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new gh(Ed(r)),this.windowListeners=new gh(Nn(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Si.Resize,this.handleCancel),this.windowListeners.add(Si.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Si.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&qH(n),r(cs)}handleKeyDown(e){if($x(e)){const{active:r,context:n,options:i}=this.props,{keyboardCodes:s=zH,coordinateGetter:o=i2e,scrollBehavior:l="smooth"}=i,{code:c}=e;if(s.end.includes(c)){this.handleEnd(e);return}if(s.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=n.current,f=u?{x:u.left,y:u.top}:cs;this.referenceCoordinates||(this.referenceCoordinates=f);const d=o(e,{active:r,context:n.current,currentCoordinates:f});if(d){const p=j0(d,f),m={x:0,y:0},{scrollableAncestors:x}=n.current;for(const y of x){const v=e.code,{isTop:b,isRight:w,isLeft:N,isBottom:j,maxScroll:k,minScroll:_}=BH(y),E=Q_e(y),A={x:Math.min(v===vt.Right?E.right-E.width/2:E.right,Math.max(v===vt.Right?E.left:E.left+E.width/2,d.x)),y:Math.min(v===vt.Down?E.bottom-E.height/2:E.bottom,Math.max(v===vt.Down?E.top:E.top+E.height/2,d.y))},T=v===vt.Right&&!w||v===vt.Left&&!N,M=v===vt.Down&&!j||v===vt.Up&&!b;if(T&&A.x!==d.x){const P=y.scrollLeft+p.x,R=v===vt.Right&&P<=k.x||v===vt.Left&&P>=_.x;if(R&&!p.y){y.scrollTo({left:P,behavior:l});return}R?m.x=y.scrollLeft-P:m.x=v===vt.Right?y.scrollLeft-k.x:y.scrollLeft-_.x,m.x&&y.scrollBy({left:-m.x,behavior:l});break}else if(M&&A.y!==d.y){const P=y.scrollTop+p.y,R=v===vt.Down&&P<=k.y||v===vt.Up&&P>=_.y;if(R&&!p.x){y.scrollTo({top:P,behavior:l});return}R?m.y=y.scrollTop-P:m.y=v===vt.Down?y.scrollTop-k.y:y.scrollTop-_.y,m.y&&y.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(e,ku(j0(d,this.referenceCoordinates),m))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}UH.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=zH,onActivation:i}=e,{active:s}=r;const{code:o}=t.nativeEvent;if(n.start.includes(o)){const l=s.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function U6(t){return!!(t&&"distance"in t)}function H6(t){return!!(t&&"delay"in t)}class HC{constructor(e,r,n){var i;n===void 0&&(n=r2e(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:s}=e,{target:o}=s;this.props=e,this.events=r,this.document=Ed(o),this.documentListeners=new gh(this.document),this.listeners=new gh(n),this.windowListeners=new gh(Nn(o)),this.initialCoordinates=(i=S0(s))!=null?i:cs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Si.Resize,this.handleCancel),this.windowListeners.add(Si.DragStart,z6),this.windowListeners.add(Si.VisibilityChange,this.handleCancel),this.windowListeners.add(Si.ContextMenu,z6),this.documentListeners.add(Si.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(H6(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(U6(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:i}=this.props;i(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Si.Click,n2e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Si.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:l}}=s;if(!i)return;const c=(r=S0(e))!=null?r:cs,u=j0(i,c);if(!n&&l){if(U6(l)){if(l.tolerance!=null&&$k(u,l.tolerance))return this.handleCancel();if($k(u,l.distance))return this.handleStart()}if(H6(l)&&$k(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===vt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const s2e={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ad extends HC{constructor(e){const{event:r}=e,n=Ed(r.target);super(e,s2e,n)}}Ad.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const o2e={move:{name:"mousemove"},end:{name:"mouseup"}};var yO;(function(t){t[t.RightClick=2]="RightClick"})(yO||(yO={}));class a2e extends HC{constructor(e){super(e,o2e,Ed(e.event.target))}}a2e.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===yO.RightClick?!1:(n==null||n({event:r}),!0)}}];const Bk={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class l2e extends HC{constructor(e){super(e,Bk)}static setup(){return window.addEventListener(Bk.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Bk.move.name,e)};function e(){}}}l2e.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:i}=r;return i.length>1?!1:(n==null||n({event:r}),!0)}}];var yh;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(yh||(yh={}));var k0;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(k0||(k0={}));function c2e(t){let{acceleration:e,activator:r=yh.Pointer,canScroll:n,draggingRect:i,enabled:s,interval:o=5,order:l=k0.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:f,delta:d,threshold:p}=t;const m=d2e({delta:d,disabled:!s}),[x,y]=N_e(),v=O.useRef({x:0,y:0}),b=O.useRef({x:0,y:0}),w=O.useMemo(()=>{switch(r){case yh.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case yh.DraggableRect:return i}},[r,i,c]),N=O.useRef(null),j=O.useCallback(()=>{const _=N.current;if(!_)return;const E=v.current.x*b.current.x,A=v.current.y*b.current.y;_.scrollBy(E,A)},[]),k=O.useMemo(()=>l===k0.TreeOrder?[...u].reverse():u,[l,u]);O.useEffect(()=>{if(!s||!u.length||!w){y();return}for(const _ of k){if((n==null?void 0:n(_))===!1)continue;const E=u.indexOf(_),A=f[E];if(!A)continue;const{direction:T,speed:M}=J_e(_,A,w,e,p);for(const P of["x","y"])m[P][T[P]]||(M[P]=0,T[P]=0);if(M.x>0||M.y>0){y(),N.current=_,x(j,o),v.current=M,b.current=T;return}}v.current={x:0,y:0},b.current={x:0,y:0},y()},[e,j,n,y,s,o,JSON.stringify(w),JSON.stringify(m),x,u,k,f,JSON.stringify(p)])}const u2e={x:{[Pr.Backward]:!1,[Pr.Forward]:!1},y:{[Pr.Backward]:!1,[Pr.Forward]:!1}};function d2e(t){let{delta:e,disabled:r}=t;const n=w0(e);return Zp(i=>{if(r||!n||!i)return u2e;const s={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[Pr.Backward]:i.x[Pr.Backward]||s.x===-1,[Pr.Forward]:i.x[Pr.Forward]||s.x===1},y:{[Pr.Backward]:i.y[Pr.Backward]||s.y===-1,[Pr.Forward]:i.y[Pr.Forward]||s.y===1}}},[r,e,n])}function f2e(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return Zp(i=>{var s;return e==null?null:(s=n??i)!=null?s:null},[n,e])}function h2e(t,e){return O.useMemo(()=>t.reduce((r,n)=>{const{sensor:i}=n,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,n)}));return[...r,...s]},[]),[t,e])}var Np;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Np||(Np={}));var vO;(function(t){t.Optimized="optimized"})(vO||(vO={}));const W6=new Map;function p2e(t,e){let{dragging:r,dependencies:n,config:i}=e;const[s,o]=O.useState(null),{frequency:l,measure:c,strategy:u}=i,f=O.useRef(t),d=v(),p=Sp(d),m=O.useCallback(function(b){b===void 0&&(b=[]),!p.current&&o(w=>w===null?b:w.concat(b.filter(N=>!w.includes(N))))},[p]),x=O.useRef(null),y=Zp(b=>{if(d&&!r)return W6;if(!b||b===W6||f.current!==t||s!=null){const w=new Map;for(let N of t){if(!N)continue;if(s&&s.length>0&&!s.includes(N.id)&&N.rect.current){w.set(N.id,N.rect.current);continue}const j=N.node.current,k=j?new UC(c(j),j):null;N.rect.current=k,k&&w.set(N.id,k)}return w}return b},[t,s,r,d,c]);return O.useEffect(()=>{f.current=t},[t]),O.useEffect(()=>{d||m()},[r,d]),O.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),O.useEffect(()=>{d||typeof l!="number"||x.current!==null||(x.current=setTimeout(()=>{m(),x.current=null},l))},[l,d,m,...n]),{droppableRects:y,measureDroppableContainers:m,measuringScheduled:s!=null};function v(){switch(u){case Np.Always:return!1;case Np.BeforeDragging:return r;default:return!r}}}function WC(t,e){return Zp(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function m2e(t,e){return WC(t,e)}function g2e(t){let{callback:e,disabled:r}=t;const n=Lx(e),i=O.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(n)},[n,r]);return O.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function qx(t){let{callback:e,disabled:r}=t;const n=Lx(e),i=O.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(n)},[r]);return O.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function y2e(t){return new UC(Cd(t),t)}function V6(t,e,r){e===void 0&&(e=y2e);const[n,i]=O.useState(null);function s(){i(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??r)!=null?u:null}const f=e(t);return JSON.stringify(c)===JSON.stringify(f)?c:f})}const o=g2e({callback(c){if(t)for(const u of c){const{type:f,target:d}=u;if(f==="childList"&&d instanceof HTMLElement&&d.contains(t)){s();break}}}}),l=qx({callback:s});return ls(()=>{s(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),n}function v2e(t){const e=WC(t);return MH(t,e)}const K6=[];function x2e(t){const e=O.useRef(t),r=Zp(n=>t?n&&n!==K6&&t&&e.current&&t.parentNode===e.current.parentNode?n:zC(t):K6,[t]);return O.useEffect(()=>{e.current=t},[t]),r}function b2e(t){const[e,r]=O.useState(null),n=O.useRef(t),i=O.useCallback(s=>{const o=Lk(s.target);o&&r(l=>l?(l.set(o,gO(o)),new Map(l)):null)},[]);return O.useEffect(()=>{const s=n.current;if(t!==s){o(s);const l=t.map(c=>{const u=Lk(c);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,gO(u)]):null}).filter(c=>c!=null);r(l.length?new Map(l):null),n.current=t}return()=>{o(t),o(s)};function o(l){l.forEach(c=>{const u=Lk(c);u==null||u.removeEventListener("scroll",i)})}},[i,t]),O.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>ku(s,o),cs):FH(t):cs,[t,e])}function G6(t,e){e===void 0&&(e=[]);const r=O.useRef(null);return O.useEffect(()=>{r.current=null},e),O.useEffect(()=>{const n=t!==cs;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?j0(t,r.current):cs}function w2e(t){O.useEffect(()=>{if(!Dx)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function j2e(t,e){return O.useMemo(()=>t.reduce((r,n)=>{let{eventName:i,handler:s}=n;return r[i]=o=>{s(o,e)},r},{}),[t,e])}function HH(t){return O.useMemo(()=>t?K_e(t):null,[t])}const Y6=[];function S2e(t,e){e===void 0&&(e=Cd);const[r]=t,n=HH(r?Nn(r):null),[i,s]=O.useState(Y6);function o(){s(()=>t.length?t.map(c=>$H(c)?n:new UC(e(c),c)):Y6)}const l=qx({callback:o});return ls(()=>{l==null||l.disconnect(),o(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),i}function WH(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Qp(e)?e:t}function N2e(t){let{measure:e}=t;const[r,n]=O.useState(null),i=O.useCallback(u=>{for(const{target:f}of u)if(Qp(f)){n(d=>{const p=e(f);return d?{...d,width:p.width,height:p.height}:p});break}},[e]),s=qx({callback:i}),o=O.useCallback(u=>{const f=WH(u);s==null||s.disconnect(),f&&(s==null||s.observe(f)),n(f?e(f):null)},[e,s]),[l,c]=b0(o);return O.useMemo(()=>({nodeRef:l,rect:r,setRef:c}),[r,l,c])}const k2e=[{sensor:Ad,options:{}},{sensor:UH,options:{}}],_2e={current:{}},cy={draggable:{measure:q6},droppable:{measure:q6,strategy:Np.WhileDragging,frequency:vO.Optimized},dragOverlay:{measure:Cd}};class vh extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const O2e={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new vh,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:N0},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:cy,measureDroppableContainers:N0,windowRect:null,measuringScheduled:!1},VH={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:N0,draggableNodes:new Map,over:null,measureDroppableContainers:N0},tm=O.createContext(VH),KH=O.createContext(O2e);function E2e(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new vh}}}function C2e(t,e){switch(e.type){case Sr.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Sr.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Sr.DragEnd:case Sr.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Sr.RegisterDroppable:{const{element:r}=e,{id:n}=r,i=new vh(t.droppable.containers);return i.set(n,r),{...t,droppable:{...t.droppable,containers:i}}}case Sr.SetDroppableDisabled:{const{id:r,key:n,disabled:i}=e,s=t.droppable.containers.get(r);if(!s||n!==s.key)return t;const o=new vh(t.droppable.containers);return o.set(r,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case Sr.UnregisterDroppable:{const{id:r,key:n}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const s=new vh(t.droppable.containers);return s.delete(r),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function A2e(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:i}=O.useContext(tm),s=w0(n),o=w0(r==null?void 0:r.id);return O.useEffect(()=>{if(!e&&!n&&s&&o!=null){if(!$x(s)||document.activeElement===s.target)return;const l=i.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[c.current,u.current]){if(!f)continue;const d=O_e(f);if(d){d.focus();break}}})}},[n,e,i,o,s]),null}function GH(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...n}),r):r}function T2e(t){return O.useMemo(()=>({draggable:{...cy.draggable,...t==null?void 0:t.draggable},droppable:{...cy.droppable,...t==null?void 0:t.droppable},dragOverlay:{...cy.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function P2e(t){let{activeNode:e,measure:r,initialRect:n,config:i=!0}=t;const s=O.useRef(!1),{x:o,y:l}=typeof i=="boolean"?{x:i,y:i}:i;ls(()=>{if(!o&&!l||!e){s.current=!1;return}if(s.current||!n)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const f=r(u),d=MH(f,n);if(o||(d.x=0),l||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const p=IH(u);p&&p.scrollBy({top:d.y,left:d.x})}},[e,o,l,n,r])}const zx=O.createContext({...cs,scaleX:1,scaleY:1});var ua;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ua||(ua={}));const Ux=O.memo(function(e){var r,n,i,s;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:f=k2e,collisionDetection:d=q_e,measuring:p,modifiers:m,...x}=e;const y=O.useReducer(C2e,void 0,E2e),[v,b]=y,[w,N]=M_e(),[j,k]=O.useState(ua.Uninitialized),_=j===ua.Initialized,{draggable:{active:E,nodes:A,translate:T},droppable:{containers:M}}=v,P=E!=null?A.get(E):null,R=O.useRef({initial:null,translated:null}),L=O.useMemo(()=>{var Kt;return E!=null?{id:E,data:(Kt=P==null?void 0:P.data)!=null?Kt:_2e,rect:R}:null},[E,P]),$=O.useRef(null),[F,z]=O.useState(null),[W,K]=O.useState(null),q=Sp(x,Object.values(x)),V=em("DndDescribedBy",o),D=O.useMemo(()=>M.getEnabled(),[M]),U=T2e(p),{droppableRects:G,measureDroppableContainers:ee,measuringScheduled:Q}=p2e(D,{dragging:_,dependencies:[T.x,T.y],config:U.droppable}),H=f2e(A,E),Y=O.useMemo(()=>W?S0(W):null,[W]),re=To(),J=m2e(H,U.draggable.measure);P2e({activeNode:E!=null?A.get(E):null,config:re.layoutShiftCompensation,initialRect:J,measure:U.draggable.measure});const ne=V6(H,U.draggable.measure,J),te=V6(H?H.parentElement:null),se=O.useRef({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ve=M.getNodeFor((r=se.current.over)==null?void 0:r.id),ie=N2e({measure:U.dragOverlay.measure}),ye=(n=ie.nodeRef.current)!=null?n:H,Te=_?(i=ie.rect)!=null?i:ne:null,Le=!!(ie.nodeRef.current&&ie.rect),ue=v2e(Le?null:ne),he=HH(ye?Nn(ye):null),we=x2e(_?ve??H:null),Oe=S2e(we),be=GH(m,{transform:{x:T.x-ue.x,y:T.y-ue.y,scaleX:1,scaleY:1},activatorEvent:W,active:L,activeNodeRect:ne,containerNodeRect:te,draggingNodeRect:Te,over:se.current.over,overlayNodeRect:ie.rect,scrollableAncestors:we,scrollableAncestorRects:Oe,windowRect:he}),We=Y?ku(Y,T):null,Je=b2e(we),Ye=G6(Je),Ae=G6(Je,[ne]),Me=ku(be,Ye),Re=Te?H_e(Te,be):null,sr=L&&Re?d({active:L,collisionRect:Re,droppableRects:G,droppableContainers:D,pointerCoordinates:We}):null,ut=B_e(sr,"id"),[wt,ci]=O.useState(null),dc=Le?be:ku(be,Ae),fc=z_e(dc,(s=wt==null?void 0:wt.rect)!=null?s:null,ne),Md=O.useRef(null),hc=O.useCallback((Kt,Yr)=>{let{sensor:Xr,options:Ri}=Yr;if($.current==null)return;const un=A.get($.current);if(!un)return;const Jr=Kt.nativeEvent,kn=new Xr({active:$.current,activeNode:un,event:Jr,options:Ri,context:se,onAbort(Gt){if(!A.get(Gt))return;const{onDragAbort:Qr}=q.current,Ii={id:Gt};Qr==null||Qr(Ii),w({type:"onDragAbort",event:Ii})},onPending(Gt,ui,Qr,Ii){if(!A.get(Gt))return;const{onDragPending:fs}=q.current,Bn={id:Gt,constraint:ui,initialCoordinates:Qr,offset:Ii};fs==null||fs(Bn),w({type:"onDragPending",event:Bn})},onStart(Gt){const ui=$.current;if(ui==null)return;const Qr=A.get(ui);if(!Qr)return;const{onDragStart:Ii}=q.current,Di={activatorEvent:Jr,active:{id:ui,data:Qr.data,rect:R}};js.unstable_batchedUpdates(()=>{Ii==null||Ii(Di),k(ua.Initializing),b({type:Sr.DragStart,initialCoordinates:Gt,active:ui}),w({type:"onDragStart",event:Di}),z(Md.current),K(Jr)})},onMove(Gt){b({type:Sr.DragMove,coordinates:Gt})},onEnd:$s(Sr.DragEnd),onCancel:$s(Sr.DragCancel)});Md.current=kn;function $s(Gt){return async function(){const{active:Qr,collisions:Ii,over:Di,scrollAdjustedTranslate:fs}=se.current;let Bn=null;if(Qr&&fs){const{cancelDrop:Bs}=q.current;Bn={activatorEvent:Jr,active:Qr,collisions:Ii,delta:fs,over:Di},Gt===Sr.DragEnd&&typeof Bs=="function"&&await Promise.resolve(Bs(Bn))&&(Gt=Sr.DragCancel)}$.current=null,js.unstable_batchedUpdates(()=>{b({type:Gt}),k(ua.Uninitialized),ci(null),z(null),K(null),Md.current=null;const Bs=Gt===Sr.DragEnd?"onDragEnd":"onDragCancel";if(Bn){const Ld=q.current[Bs];Ld==null||Ld(Bn),w({type:Bs,event:Bn})}})}}},[A]),Rd=O.useCallback((Kt,Yr)=>(Xr,Ri)=>{const un=Xr.nativeEvent,Jr=A.get(Ri);if($.current!==null||!Jr||un.dndKit||un.defaultPrevented)return;const kn={active:Jr};Kt(Xr,Yr.options,kn)===!0&&(un.dndKit={capturedBy:Yr.sensor},$.current=Ri,hc(Xr,Yr))},[A,hc]),pc=h2e(f,Rd);w2e(f),ls(()=>{ne&&j===ua.Initializing&&k(ua.Initialized)},[ne,j]),O.useEffect(()=>{const{onDragMove:Kt}=q.current,{active:Yr,activatorEvent:Xr,collisions:Ri,over:un}=se.current;if(!Yr||!Xr)return;const Jr={active:Yr,activatorEvent:Xr,collisions:Ri,delta:{x:Me.x,y:Me.y},over:un};js.unstable_batchedUpdates(()=>{Kt==null||Kt(Jr),w({type:"onDragMove",event:Jr})})},[Me.x,Me.y]),O.useEffect(()=>{const{active:Kt,activatorEvent:Yr,collisions:Xr,droppableContainers:Ri,scrollAdjustedTranslate:un}=se.current;if(!Kt||$.current==null||!Yr||!un)return;const{onDragOver:Jr}=q.current,kn=Ri.get(ut),$s=kn&&kn.rect.current?{id:kn.id,rect:kn.rect.current,data:kn.data,disabled:kn.disabled}:null,Gt={active:Kt,activatorEvent:Yr,collisions:Xr,delta:{x:un.x,y:un.y},over:$s};js.unstable_batchedUpdates(()=>{ci($s),Jr==null||Jr(Gt),w({type:"onDragOver",event:Gt})})},[ut]),ls(()=>{se.current={activatorEvent:W,active:L,activeNode:H,collisionRect:Re,collisions:sr,droppableRects:G,draggableNodes:A,draggingNode:ye,draggingNodeRect:Te,droppableContainers:M,over:wt,scrollableAncestors:we,scrollAdjustedTranslate:Me},R.current={initial:Te,translated:Re}},[L,H,sr,Re,A,ye,Te,G,M,wt,we,Me]),c2e({...re,delta:T,draggingRect:Re,pointerCoordinates:We,scrollableAncestors:we,scrollableAncestorRects:Oe});const Id=O.useMemo(()=>({active:L,activeNode:H,activeNodeRect:ne,activatorEvent:W,collisions:sr,containerNodeRect:te,dragOverlay:ie,draggableNodes:A,droppableContainers:M,droppableRects:G,over:wt,measureDroppableContainers:ee,scrollableAncestors:we,scrollableAncestorRects:Oe,measuringConfiguration:U,measuringScheduled:Q,windowRect:he}),[L,H,ne,W,sr,te,ie,A,M,G,wt,ee,we,Oe,U,Q,he]),Dd=O.useMemo(()=>({activatorEvent:W,activators:pc,active:L,activeNodeRect:ne,ariaDescribedById:{draggable:V},dispatch:b,draggableNodes:A,over:wt,measureDroppableContainers:ee}),[W,pc,L,ne,b,V,A,wt,ee]);return Z.createElement(PH.Provider,{value:N},Z.createElement(tm.Provider,{value:Dd},Z.createElement(KH.Provider,{value:Id},Z.createElement(zx.Provider,{value:fc},u)),Z.createElement(A2e,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Z.createElement(D_e,{...l,hiddenTextDescribedById:V}));function To(){const Kt=(F==null?void 0:F.autoScrollEnabled)===!1,Yr=typeof c=="object"?c.enabled===!1:c===!1,Xr=_&&!Kt&&!Yr;return typeof c=="object"?{...c,enabled:Xr}:{enabled:Xr}}}),M2e=O.createContext(null),X6="button",R2e="Draggable";function I2e(t){let{id:e,data:r,disabled:n=!1,attributes:i}=t;const s=em(R2e),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:f,draggableNodes:d,over:p}=O.useContext(tm),{role:m=X6,roleDescription:x="draggable",tabIndex:y=0}=i??{},v=(c==null?void 0:c.id)===e,b=O.useContext(v?zx:M2e),[w,N]=b0(),[j,k]=b0(),_=j2e(o,e),E=Sp(r);ls(()=>(d.set(e,{id:e,key:s,node:w,activatorNode:j,data:E}),()=>{const T=d.get(e);T&&T.key===s&&d.delete(e)}),[d,e]);const A=O.useMemo(()=>({role:m,tabIndex:y,"aria-disabled":n,"aria-pressed":v&&m===X6?!0:void 0,"aria-roledescription":x,"aria-describedby":f.draggable}),[n,m,y,v,x,f.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:A,isDragging:v,listeners:n?void 0:_,node:w,over:p,setNodeRef:N,setActivatorNodeRef:k,transform:b}}function YH(){return O.useContext(KH)}const D2e="Droppable",L2e={timeout:25};function $2e(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:i}=t;const s=em(D2e),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=O.useContext(tm),f=O.useRef({disabled:r}),d=O.useRef(!1),p=O.useRef(null),m=O.useRef(null),{disabled:x,updateMeasurementsFor:y,timeout:v}={...L2e,...i},b=Sp(y??n),w=O.useCallback(()=>{if(!d.current){d.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),m.current=null},v)},[v]),N=qx({callback:w,disabled:x||!o}),j=O.useCallback((A,T)=>{N&&(T&&(N.unobserve(T),d.current=!1),A&&N.observe(A))},[N]),[k,_]=b0(j),E=Sp(e);return O.useEffect(()=>{!N||!k.current||(N.disconnect(),d.current=!1,N.observe(k.current))},[k,N]),O.useEffect(()=>(l({type:Sr.RegisterDroppable,element:{id:n,key:s,disabled:r,node:k,rect:p,data:E}}),()=>l({type:Sr.UnregisterDroppable,key:s,id:n})),[n]),O.useEffect(()=>{r!==f.current.disabled&&(l({type:Sr.SetDroppableDisabled,id:n,key:s,disabled:r}),f.current.disabled=r)},[n,s,r,l]),{active:o,rect:p,isOver:(c==null?void 0:c.id)===n,node:k,over:c,setNodeRef:_}}function B2e(t){let{animation:e,children:r}=t;const[n,i]=O.useState(null),[s,o]=O.useState(null),l=w0(r);return!r&&!n&&l&&i(l),ls(()=>{if(!s)return;const c=n==null?void 0:n.key,u=n==null?void 0:n.props.id;if(c==null||u==null){i(null);return}Promise.resolve(e(u,s)).then(()=>{i(null)})},[e,n,s]),Z.createElement(Z.Fragment,null,r,n?O.cloneElement(n,{ref:o}):null)}const F2e={x:0,y:0,scaleX:1,scaleY:1};function q2e(t){let{children:e}=t;return Z.createElement(tm.Provider,{value:VH},Z.createElement(zx.Provider,{value:F2e},e))}const z2e={position:"fixed",touchAction:"none"},U2e=t=>$x(t)?"transform 250ms ease":void 0,H2e=O.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:i,children:s,className:o,rect:l,style:c,transform:u,transition:f=U2e}=t;if(!l)return null;const d=i?u:{...u,scaleX:1,scaleY:1},p={...z2e,width:l.width,height:l.height,top:l.top,left:l.left,transform:Rs.Transform.toString(d),transformOrigin:i&&n?L_e(n,l):void 0,transition:typeof f=="function"?f(n):f,...c};return Z.createElement(r,{className:o,style:p,ref:e},s)}),W2e=t=>e=>{let{active:r,dragOverlay:n}=e;const i={},{styles:s,className:o}=t;if(s!=null&&s.active)for(const[l,c]of Object.entries(s.active))c!==void 0&&(i[l]=r.node.style.getPropertyValue(l),r.node.style.setProperty(l,c));if(s!=null&&s.dragOverlay)for(const[l,c]of Object.entries(s.dragOverlay))c!==void 0&&n.node.style.setProperty(l,c);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(i))r.node.style.setProperty(c,u);o!=null&&o.active&&r.node.classList.remove(o.active)}},V2e=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:Rs.Transform.toString(e)},{transform:Rs.Transform.toString(r)}]},K2e={duration:250,easing:"ease",keyframes:V2e,sideEffects:W2e({styles:{active:{opacity:"0"}}})};function G2e(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:i}=t;return Lx((s,o)=>{if(e===null)return;const l=r.get(s);if(!l)return;const c=l.node.current;if(!c)return;const u=WH(o);if(!u)return;const{transform:f}=Nn(o).getComputedStyle(o),d=RH(f);if(!d)return;const p=typeof e=="function"?e:Y2e(e);return qH(c,i.draggable.measure),p({active:{id:s,data:l.data,node:c,rect:i.draggable.measure(c)},draggableNodes:r,dragOverlay:{node:o,rect:i.dragOverlay.measure(u)},droppableContainers:n,measuringConfiguration:i,transform:d})})}function Y2e(t){const{duration:e,easing:r,sideEffects:n,keyframes:i}={...K2e,...t};return s=>{let{active:o,dragOverlay:l,transform:c,...u}=s;if(!e)return;const f={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},d={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-f.x,y:c.y-f.y,...d},m=i({...u,active:o,dragOverlay:l,transform:{initial:c,final:p}}),[x]=m,y=m[m.length-1];if(JSON.stringify(x)===JSON.stringify(y))return;const v=n==null?void 0:n({active:o,dragOverlay:l,...u}),b=l.node.animate(m,{duration:e,easing:r,fill:"forwards"});return new Promise(w=>{b.onfinish=()=>{v==null||v(),w()}})}}let J6=0;function X2e(t){return O.useMemo(()=>{if(t!=null)return J6++,J6},[t])}const VC=Z.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:i,transition:s,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=t;const{activatorEvent:f,active:d,activeNodeRect:p,containerNodeRect:m,draggableNodes:x,droppableContainers:y,dragOverlay:v,over:b,measuringConfiguration:w,scrollableAncestors:N,scrollableAncestorRects:j,windowRect:k}=YH(),_=O.useContext(zx),E=X2e(d==null?void 0:d.id),A=GH(o,{activatorEvent:f,active:d,activeNodeRect:p,containerNodeRect:m,draggingNodeRect:v.rect,over:b,overlayNodeRect:v.rect,scrollableAncestors:N,scrollableAncestorRects:j,transform:_,windowRect:k}),T=WC(p),M=G2e({config:n,draggableNodes:x,droppableContainers:y,measuringConfiguration:w}),P=T?v.setRef:void 0;return Z.createElement(q2e,null,Z.createElement(B2e,{animation:M},d&&E?Z.createElement(H2e,{key:E,id:d.id,ref:P,as:l,activatorEvent:f,adjustScale:e,className:c,transition:s,rect:T,style:{zIndex:u,...i},transform:A},r):null))});function Td(t,e,r){const n=t.slice();return n.splice(r<0?n.length+r:r,0,n.splice(e,1)[0]),n}function J2e(t,e){return t.reduce((r,n,i)=>{const s=e.get(n);return s&&(r[i]=s),r},Array(t.length))}function Vg(t){return t!==null&&t>=0}function Q2e(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Z2e(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const XH=t=>{let{rects:e,activeIndex:r,overIndex:n,index:i}=t;const s=Td(e,n,r),o=e[i],l=s[i];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},Kg={scaleX:1,scaleY:1},Hx=t=>{var e;let{activeIndex:r,activeNodeRect:n,index:i,rects:s,overIndex:o}=t;const l=(e=s[r])!=null?e:n;if(!l)return null;if(i===r){const u=s[o];return u?{x:0,y:r<o?u.top+u.height-(l.top+l.height):u.top-l.top,...Kg}:null}const c=eOe(s,i,r);return i>r&&i<=o?{x:0,y:-l.height-c,...Kg}:i<r&&i>=o?{x:0,y:l.height+c,...Kg}:{x:0,y:0,...Kg}};function eOe(t,e,r){const n=t[e],i=t[e-1],s=t[e+1];return n?r<e?i?n.top-(i.top+i.height):s?s.top-(n.top+n.height):0:s?s.top-(n.top+n.height):i?n.top-(i.top+i.height):0:0}const JH="Sortable",QH=Z.createContext({activeIndex:-1,containerId:JH,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:XH,disabled:{draggable:!1,droppable:!1}});function Wx(t){let{children:e,id:r,items:n,strategy:i=XH,disabled:s=!1}=t;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:f}=YH(),d=em(JH,r),p=l.rect!==null,m=O.useMemo(()=>n.map(_=>typeof _=="object"&&"id"in _?_.id:_),[n]),x=o!=null,y=o?m.indexOf(o.id):-1,v=u?m.indexOf(u.id):-1,b=O.useRef(m),w=!Q2e(m,b.current),N=v!==-1&&y===-1||w,j=Z2e(s);ls(()=>{w&&x&&f(m)},[w,m,x,f]),O.useEffect(()=>{b.current=m},[m]);const k=O.useMemo(()=>({activeIndex:y,containerId:d,disabled:j,disableTransforms:N,items:m,overIndex:v,useDragOverlay:p,sortedRects:J2e(m,c),strategy:i}),[y,d,j.draggable,j.droppable,N,m,v,c,p,i]);return Z.createElement(QH.Provider,{value:k},e)}const tOe=t=>{let{id:e,items:r,activeIndex:n,overIndex:i}=t;return Td(r,n,i).indexOf(e)},rOe=t=>{let{containerId:e,isSorting:r,wasDragging:n,index:i,items:s,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!n||l!==s&&i===o?!1:r?!0:o!==i&&e===c},nOe={duration:200,easing:"ease"},ZH="transform",iOe=Rs.Transition.toString({property:ZH,duration:0,easing:"linear"}),sOe={roleDescription:"sortable"};function oOe(t){let{disabled:e,index:r,node:n,rect:i}=t;const[s,o]=O.useState(null),l=O.useRef(r);return ls(()=>{if(!e&&r!==l.current&&n.current){const c=i.current;if(c){const u=Cd(n.current,{ignoreTransform:!0}),f={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(f.x||f.y)&&o(f)}}r!==l.current&&(l.current=r)},[e,r,n,i]),O.useEffect(()=>{s&&o(null)},[s]),s}function KC(t){let{animateLayoutChanges:e=rOe,attributes:r,disabled:n,data:i,getNewIndex:s=tOe,id:o,strategy:l,resizeObserverConfig:c,transition:u=nOe}=t;const{items:f,containerId:d,activeIndex:p,disabled:m,disableTransforms:x,sortedRects:y,overIndex:v,useDragOverlay:b,strategy:w}=O.useContext(QH),N=aOe(n,m),j=f.indexOf(o),k=O.useMemo(()=>({sortable:{containerId:d,index:j,items:f},...i}),[d,i,j,f]),_=O.useMemo(()=>f.slice(f.indexOf(o)),[f,o]),{rect:E,node:A,isOver:T,setNodeRef:M}=$2e({id:o,data:k,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...c}}),{active:P,activatorEvent:R,activeNodeRect:L,attributes:$,setNodeRef:F,listeners:z,isDragging:W,over:K,setActivatorNodeRef:q,transform:V}=I2e({id:o,data:k,attributes:{...sOe,...r},disabled:N.draggable}),D=S_e(M,F),U=!!P,G=U&&!x&&Vg(p)&&Vg(v),ee=!b&&W,Q=ee&&G?V:null,Y=G?Q??(l??w)({rects:y,activeNodeRect:L,activeIndex:p,overIndex:v,index:j}):null,re=Vg(p)&&Vg(v)?s({id:o,items:f,activeIndex:p,overIndex:v}):j,J=P==null?void 0:P.id,ne=O.useRef({activeId:J,items:f,newIndex:re,containerId:d}),te=f!==ne.current.items,se=e({active:P,containerId:d,isDragging:W,isSorting:U,id:o,index:j,items:f,newIndex:ne.current.newIndex,previousItems:ne.current.items,previousContainerId:ne.current.containerId,transition:u,wasDragging:ne.current.activeId!=null}),ve=oOe({disabled:!se,index:j,node:A,rect:E});return O.useEffect(()=>{U&&ne.current.newIndex!==re&&(ne.current.newIndex=re),d!==ne.current.containerId&&(ne.current.containerId=d),f!==ne.current.items&&(ne.current.items=f)},[U,re,d,f]),O.useEffect(()=>{if(J===ne.current.activeId)return;if(J!=null&&ne.current.activeId==null){ne.current.activeId=J;return}const ye=setTimeout(()=>{ne.current.activeId=J},50);return()=>clearTimeout(ye)},[J]),{active:P,activeIndex:p,attributes:$,data:k,rect:E,index:j,newIndex:re,items:f,isOver:T,isSorting:U,isDragging:W,listeners:z,node:A,overIndex:v,over:K,setNodeRef:D,setActivatorNodeRef:q,setDroppableNodeRef:M,setDraggableNodeRef:F,transform:ve??Y,transition:ie()};function ie(){if(ve||te&&ne.current.newIndex===j)return iOe;if(!(ee&&!$x(R)||!u)&&(U||se))return Rs.Transition.toString({...u,property:ZH})}}function aOe(t,e){var r,n;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(r=t==null?void 0:t.draggable)!=null?r:e.draggable,droppable:(n=t==null?void 0:t.droppable)!=null?n:e.droppable}}vt.Down,vt.Right,vt.Up,vt.Left;function lOe({item:t,isEditing:e,onUpdate:r,onDelete:n}){const[i,s]=O.useState(t.text),[o,l]=O.useState(!1),{attributes:c,listeners:u,setNodeRef:f,transform:d,transition:p,isDragging:m}=KC({id:t.id}),x={transform:Rs.Transform.toString(d),transition:p},y=()=>{i.trim()&&r(t.id,i.trim()),l(!1)},v=()=>{s(t.text),l(!1)},b=w=>{w.key==="Enter"?(w.preventDefault(),y()):w.key==="Escape"&&v()};return a.jsxs("li",{ref:f,style:x,className:ge("flex items-center group relative py-2 px-1 rounded transition-colors",m&&"opacity-50",e&&"hover:bg-gray-50"),children:[e&&a.jsx("button",{...c,...u,className:"opacity-0 group-hover:opacity-100 mr-2 p-1 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing",title:"Drag to reorder",children:a.jsx(DB,{className:"w-4 h-4"})}),a.jsx("div",{className:"flex-1 min-w-0",children:o&&e?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ct,{value:i,onChange:w=>s(w.target.value),onKeyDown:b,className:"text-sm",autoFocus:!0,placeholder:"Enter list item text..."}),a.jsx(fe,{onClick:y,size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-green-600 hover:text-green-700 hover:bg-green-50",children:a.jsx(ko,{className:"w-4 h-4"})}),a.jsx(fe,{onClick:v,size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:a.jsx($r,{className:"w-4 h-4"})})]}):a.jsxs("div",{className:"flex items-center justify-between group",children:[a.jsx("span",{className:"text-gray-700 leading-relaxed break-words",children:t.html?a.jsx("span",{dangerouslySetInnerHTML:{__html:t.html}}):t.text}),e&&a.jsxs("div",{className:"opacity-0 group-hover:opacity-100 flex items-center space-x-1 ml-2",children:[a.jsx(fe,{onClick:()=>l(!0),size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50",title:"Edit item",children:a.jsx(yo,{className:"w-3 h-3"})}),a.jsx(fe,{onClick:()=>n(t.id),size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete item",children:a.jsx(RO,{className:"w-3 h-3"})})]})]})})]})}function cOe({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n}){var w;const i=t.content,{type:s="unordered",items:o=[]}=i||{},[l,c]=O.useState(null),u=Fx(Bx(Ad,{activationConstraint:{distance:8}})),f=O.useCallback(N=>{n&&n({...i,...N})},[i,n]),d=()=>{const j={id:`item_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,text:"New item"};f({items:[...o,j]})},p=(N,j)=>{const k=o.map(_=>_.id===N?{..._,text:j}:_);f({items:k})},m=N=>{const j=o.filter(k=>k.id!==N);f({items:j})},x=()=>{f({type:s==="ordered"?"unordered":"ordered"})},y=N=>{const{active:j,over:k}=N;if(k&&j.id!==k.id){const _=o.findIndex(A=>A.id===j.id),E=o.findIndex(A=>A.id===k.id);if(_!==-1&&E!==-1){const A=Td(o,_,E);f({items:A})}}c(null)},v=s==="ordered"?"ol":"ul",b=ge("space-y-1 pl-6",s==="ordered"?"list-decimal":"list-disc");return o.length===0&&!e?a.jsx("div",{className:"text-gray-400 italic py-4",children:"No list items"}):a.jsxs("div",{className:ge("space-y-3",r&&e&&"ring-2 ring-blue-500 ring-offset-2 rounded-lg p-3"),children:[e&&r&&a.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg bg-gray-50",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(fe,{onClick:x,size:"sm",variant:"outline",className:"flex items-center space-x-2",children:s==="ordered"?a.jsxs(a.Fragment,{children:[a.jsx(MO,{className:"w-4 h-4"}),a.jsx("span",{children:"Numbered"})]}):a.jsxs(a.Fragment,{children:[a.jsx(rs,{className:"w-4 h-4"}),a.jsx("span",{children:"Bulleted"})]})}),a.jsxs("span",{className:"text-sm text-gray-500",children:[o.length," ",o.length===1?"item":"items"]})]}),a.jsxs(fe,{onClick:d,size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Item"})]})]}),o.length>0&&a.jsxs(Ux,{sensors:u,onDragStart:N=>c(N.active.id),onDragEnd:y,children:[a.jsx(v,{className:b,children:a.jsx(Wx,{items:o.map(N=>N.id),strategy:Hx,children:o.map(N=>a.jsx(lOe,{item:N,isEditing:e&&r,onUpdate:p,onDelete:m},N.id))})}),a.jsx(VC,{children:l?a.jsx("div",{className:"bg-white border border-gray-300 rounded px-3 py-2 shadow-lg",children:(w=o.find(N=>N.id===l))==null?void 0:w.text}):null})]}),o.length===0&&e&&r&&a.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[a.jsx(rs,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"No list items yet"}),a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Add your first list item to get started"}),a.jsxs(fe,{onClick:d,size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add First Item"})]})]})]})}const uOe=Mi(cOe),Ai=O.forwardRef(({className:t,...e},r)=>a.jsx("textarea",{className:ge("flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));Ai.displayName="Textarea";function dOe({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n}){const i=t.content,{text:s="",author:o="",source:l=""}=i||{},[c,u]=O.useState(s),[f,d]=O.useState(o||""),[p,m]=O.useState(l||""),[x,y]=O.useState(!1);O.useEffect(()=>{u(s),d(o||""),m(l||"")},[s,o,l]);const v=()=>{c.trim()&&n&&n({text:c.trim(),author:f.trim()||void 0,source:p.trim()||void 0}),y(!1)},b=()=>{u(s),d(o||""),m(l||""),y(!1)},w=j=>{j.key==="Escape"&&b()},N=j=>{j.key==="Enter"?(j.preventDefault(),v()):j.key==="Escape"&&b()};return!s&&!e?a.jsx("div",{className:"text-gray-400 italic py-4",children:"No quote text"}):a.jsxs("div",{className:ge("relative",r&&e&&"ring-2 ring-blue-500 ring-offset-2 rounded-lg p-3"),children:[x&&e&&r?a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quote Text *"}),a.jsx(Ai,{value:c,onChange:j=>u(j.target.value),onKeyDown:w,placeholder:"Enter the quote text here...",className:"min-h-[100px] resize-none",autoFocus:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(zB,{className:"w-4 h-4 inline mr-1"}),"Author (Optional)"]}),a.jsx(ct,{value:f,onChange:j=>d(j.target.value),onKeyDown:N,placeholder:"e.g., Albert Einstein",className:"text-sm"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(E0,{className:"w-4 h-4 inline mr-1"}),"Source (Optional)"]}),a.jsx(ct,{value:p,onChange:j=>m(j.target.value),onKeyDown:N,placeholder:"e.g., Theory of Relativity",className:"text-sm"})]})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-2 border-t border-gray-200",children:[a.jsxs(fe,{onClick:b,size:"sm",variant:"outline",className:"flex items-center space-x-2",children:[a.jsx($r,{className:"w-4 h-4"}),a.jsx("span",{children:"Cancel"})]}),a.jsxs(fe,{onClick:v,size:"sm",disabled:!c.trim(),className:"flex items-center space-x-2",children:[a.jsx(ko,{className:"w-4 h-4"}),a.jsx("span",{children:"Save Quote"})]})]})]})}):a.jsxs("blockquote",{className:"relative border-l-4 border-blue-500 bg-blue-50 py-4 px-6 my-6 group",children:[e&&r&&a.jsx(fe,{onClick:()=>y(!0),size:"sm",variant:"outline",className:"absolute -top-2 -right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-white border-gray-300 hover:bg-gray-50 shadow-lg h-8 w-8 p-0",title:"Edit quote",children:a.jsx(yo,{className:"w-4 h-4"})}),a.jsxs("div",{className:"relative",children:[a.jsx("svg",{className:"absolute top-0 left-0 transform -translate-x-2 -translate-y-2 h-8 w-8 text-blue-500",fill:"currentColor",viewBox:"0 0 32 32",children:a.jsx("path",{d:"M9.352 4c4.456 0 8.064 3.84 8.064 8.352 0 4.448-3.608 8.064-8.064 8.064a7.12 7.12 0 01-.448-.032c1.216-1.344 1.888-3.136 1.888-5.12 0-3.584-2.848-6.464-6.464-6.464a7.12 7.12 0 01-.448.032c1.216 1.344 1.888 3.136 1.888 5.12 0 3.584-2.848 6.464-6.464 6.464v-1.6c2.752 0 4.864-2.112 4.864-4.864 0-2.688-2.176-4.864-4.864-4.864V4h10.048z"})}),a.jsx("div",{className:"pl-6",children:s?a.jsx("p",{className:"text-gray-800 text-lg leading-relaxed italic whitespace-pre-wrap",children:s}):a.jsx("p",{className:"text-gray-400 text-lg leading-relaxed italic",children:"Click to add quote text..."})}),(o||l)&&a.jsx("footer",{className:"mt-4 pl-6",children:a.jsxs("cite",{className:"text-gray-600 text-sm not-italic",children:[o&&a.jsx("span",{className:"font-medium",children:o}),o&&l&&a.jsx("span",{className:"mx-1",children:""}),l&&a.jsx("span",{children:l})]})})]})]}),!s&&e&&r&&!x&&a.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>y(!0),children:[a.jsx(xy,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Add an Inspirational Quote"}),a.jsx("p",{className:"text-gray-500 mb-4 max-w-sm mx-auto",children:"Share wisdom, motivation, or insights with a beautifully formatted quote block."}),a.jsxs(fe,{onClick:j=>{j.stopPropagation(),y(!0)},className:"flex items-center space-x-2",children:[a.jsx(xy,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Quote"})]})]})]})}const fOe=Mi(dOe);function hOe({block:t}){return a.jsx("div",{className:"flex items-center justify-center my-8",children:a.jsx("hr",{className:"flex-grow border-t border-gray-300"})})}const pOe=Mi(hOe);function mOe({onSelect:t,selectedContentType:e="video",allowedTypes:r=["video","document","prompt","automation","ai_agent"],multiSelect:n=!1}){const[i,s]=O.useState(e),[o,l]=O.useState("grid"),[c,u]=O.useState(""),[f,d]=O.useState("updated_at"),[p,m]=O.useState("desc"),[x,y]=O.useState([]),[v,b]=O.useState(""),[w,N]=O.useState(!1),[j,k]=O.useState([]),[_,E]=O.useState(0),[A,T]=O.useState(0),[M,P]=O.useState([]),[R,L]=O.useState(!1),[$,F]=O.useState([]),z=20,W={video:{icon:si,label:"Videos",color:"text-red-600"},document:{icon:Ot,label:"Documents",color:"text-blue-600"},prompt:{icon:Gr,label:"Prompts",color:"text-green-600"},automation:{icon:Ei,label:"Automations",color:"text-yellow-600"},ai_agent:{icon:Kr,label:"AI Agents",color:"text-purple-600"}},K=H=>({video:"videos",document:"documents",prompt:"prompts",automation:"automations",ai_agent:"ai_agents"})[H]||H,q=async(H=!1)=>{var Y;N(!0);try{const re=H?0:A,{data:J,error:ne}=await pe.functions.invoke("content-repository-manager",{body:{action:"list",contentType:K(i),searchQuery:c,filters:{tags:x,difficulty:v},sortBy:f,sortOrder:p,limit:z,offset:re}});if(ne){console.error("Failed to fetch content:",ne);return}const te=J.data;k(H||re===0?te.items||[]:se=>[...se,...te.items||[]]),E(((Y=te.pagination)==null?void 0:Y.total)||0),H&&T(0)}catch(re){console.error("Error fetching content:",re)}finally{N(!1)}},V=()=>{const H=A+z;T(H),q(!1)};O.useEffect(()=>{q(!0)},[i,c,x,v,f,p]);const D=H=>{if(n){const Y=M.includes(H.id)?M.filter(re=>re!==H.id):[...M,H.id];P(Y)}else t(H)},U=H=>{y(Y=>Y.includes(H)?Y.filter(re=>re!==H):[...Y,H])},G=W[i],ee=G.icon,Q=A+z<_;return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"border-b border-gray-200 px-4 py-3",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:r.map(H=>{const Y=W[H],re=Y.icon;return a.jsxs("button",{onClick:()=>{s(H),u(""),y([]),T(0)},className:ge("flex items-center space-x-2 px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200",i===H?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[a.jsx(re,{className:"w-4 h-4"}),a.jsx("span",{children:Y.label})]},H)})})}),a.jsxs("div",{className:"border-b border-gray-200 px-4 py-3 space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx(ct,{placeholder:`Search ${G.label.toLowerCase()}...`,value:c,onChange:H=>u(H.target.value),className:"pl-10 pr-10"}),c&&a.jsx("button",{onClick:()=>u(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:""})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>L(!R),className:ge("flex items-center space-x-2",R&&"bg-gray-100"),children:[a.jsx(Ep,{className:"w-4 h-4"}),a.jsx("span",{children:"Filters"}),(x.length>0||v)&&a.jsx(At,{variant:"secondary",className:"text-xs",children:x.length+(v?1:0)})]}),a.jsxs("select",{value:`${f}-${p}`,onChange:H=>{const[Y,re]=H.target.value.split("-");d(Y),m(re)},className:"text-sm border border-gray-300 rounded-md px-3 py-1.5 bg-white",children:[a.jsx("option",{value:"updated_at-desc",children:"Recently Updated"}),a.jsx("option",{value:"created_at-desc",children:"Newest First"}),a.jsx("option",{value:"title-asc",children:"A-Z"}),a.jsx("option",{value:"title-desc",children:"Z-A"})]})]}),a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>l("grid"),className:ge("p-1.5 rounded-md transition-colors",o==="grid"?"bg-white shadow-sm":"hover:bg-gray-200"),children:a.jsx(dd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>l("list"),className:ge("p-1.5 rounded-md transition-colors",o==="list"?"bg-white shadow-sm":"hover:bg-gray-200"),children:a.jsx(rs,{className:"w-4 h-4"})})]})]}),R&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty Level"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["beginner","intermediate","advanced"].map(H=>a.jsx("button",{onClick:()=>b(v===H?"":H),className:ge("px-3 py-1.5 text-sm rounded-full border transition-colors",v===H?"bg-blue-100 border-blue-300 text-blue-700":"border-gray-300 text-gray-600 hover:border-gray-400"),children:H.charAt(0).toUpperCase()+H.slice(1)},H))})]}),$.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:$.slice(0,10).map(H=>a.jsx("button",{onClick:()=>U(H),className:ge("px-3 py-1.5 text-sm rounded-full border transition-colors",x.includes(H)?"bg-blue-100 border-blue-300 text-blue-700":"border-gray-300 text-gray-600 hover:border-gray-400"),children:H},H))})]}),(x.length>0||v)&&a.jsx("div",{className:"flex justify-end",children:a.jsx(fe,{variant:"outline",size:"sm",onClick:()=>{y([]),b("")},children:"Clear All Filters"})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:w&&j.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-48",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"}),a.jsxs("p",{className:"text-gray-600",children:["Loading ",G.label.toLowerCase(),"..."]})]}):j.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-center",children:[a.jsx(ee,{className:ge("w-12 h-12 mb-4",G.color)}),a.jsxs("h3",{className:"font-medium text-gray-900 mb-2",children:["No ",G.label.toLowerCase()," found"]}),a.jsx("p",{className:"text-gray-500 text-sm",children:c||x.length>0||v?"Try adjusting your search or filters":`No ${G.label.toLowerCase()} available yet`})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:ge(o==="grid"?"grid grid-cols-2 gap-4":"space-y-3"),children:j.map(H=>a.jsx("div",{onClick:()=>D(H),className:ge("border border-gray-200 rounded-lg transition-all duration-200 cursor-pointer hover:shadow-md",M.includes(H.id)&&"border-blue-500 bg-blue-50",o==="grid"?"p-4":"p-3 flex items-center space-x-4"),children:o==="grid"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg mb-3 flex items-center justify-center overflow-hidden",children:H.thumbnail_url||H.file_url?a.jsx("img",{src:H.thumbnail_url||H.file_url,alt:H.title,className:"w-full h-full object-cover"}):a.jsx(ee,{className:ge("w-8 h-8",G.color)})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 text-sm line-clamp-2 mb-1",children:H.title}),H.description&&a.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 mb-2",children:H.description}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(go,{className:"w-3 h-3"}),a.jsx("span",{children:new Date(H.updated_at).toLocaleDateString()})]}),H.status&&a.jsx(At,{variant:H.status==="published"?"default":"secondary",className:"text-xs",children:H.status})]}),H.tags&&H.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[H.tags.slice(0,2).map(Y=>a.jsx(At,{variant:"outline",className:"text-xs",children:Y},Y)),H.tags.length>2&&a.jsxs("span",{className:"text-xs text-gray-500",children:["+",H.tags.length-2]})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0 overflow-hidden",children:H.thumbnail_url||H.file_url?a.jsx("img",{src:H.thumbnail_url||H.file_url,alt:H.title,className:"w-full h-full object-cover"}):a.jsx(ee,{className:ge("w-5 h-5",G.color)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 text-sm truncate",children:H.title}),H.description&&a.jsx("p",{className:"text-xs text-gray-600 truncate mt-1",children:H.description})]}),H.status&&a.jsx(At,{variant:H.status==="published"?"default":"secondary",className:"text-xs ml-2 flex-shrink-0",children:H.status})]}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(go,{className:"w-3 h-3"}),a.jsx("span",{children:new Date(H.updated_at).toLocaleDateString()})]}),H.difficulty_level&&a.jsx(At,{variant:"outline",className:"text-xs",children:H.difficulty_level})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(ii,{className:"w-4 h-4"})}),a.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(Os,{className:"w-4 h-4"})})]})]})]})]})},H.id))}),Q&&a.jsx("div",{className:"flex justify-center mt-6",children:a.jsx(fe,{variant:"outline",onClick:V,disabled:w,className:"flex items-center space-x-2",children:w?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):a.jsx("span",{children:"Load More"})})})]})}),a.jsxs("div",{className:"border-t border-gray-200 px-4 py-3 text-xs text-gray-500",children:["Showing ",j.length," of ",_," ",G.label.toLowerCase(),n&&M.length>0&&a.jsxs("span",{className:"ml-2",children:[" ",M.length," selected"]})]})]})}function GC({isOpen:t,onClose:e,onSelect:r,contentType:n="video",allowedTypes:i=["video","document","prompt","automation","ai_agent"],title:s="Select Content",description:o="Choose content from your library",multiSelect:l=!1}){const[c,u]=O.useState([]);O.useEffect(()=>{t||u([])},[t]);const f=p=>{l?u(m=>m.find(y=>y.id===p.id)?m.filter(y=>y.id!==p.id):[...m,p]):(r(p),e())},d=()=>{c.length>0&&(r(l?c:c[0]),e())};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s}),o&&a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:o})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 p-2",children:a.jsx($r,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsx(mOe,{onSelect:f,selectedContentType:n,allowedTypes:i,multiSelect:l})}),a.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-sm text-gray-500",children:l&&c.length>0&&a.jsxs("span",{children:[c.length," item",c.length!==1?"s":""," selected"]})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(fe,{variant:"outline",onClick:e,children:"Cancel"}),l&&a.jsxs(fe,{onClick:d,disabled:c.length===0,children:["Select ",c.length>0?`(${c.length})`:""]})]})]})})]})}):null}async function ml(t,e={}){const{search:r,status:n="published",limit:i=20,offset:s=0,sortBy:o="updated_at",sortOrder:l="desc"}=e;let c=pe.from("content_items").select("*").eq("content_type",t);n!=="all"&&(c=c.eq("status",n)),r!=null&&r.trim()&&(c=c.or(`title.ilike.%${r}%,description.ilike.%${r}%`)),c=c.order(o,{ascending:l==="asc"}),c=c.range(s,s+i-1);const{data:u,error:f,count:d}=await c;if(f)throw console.error("Error fetching content items:",f),f;if(!u||u.length===0)return{items:[],total:d||0};let p;const m=u.map(b=>b.id);switch(t){case"ai_agent":p=pe.from("ai_agents").select("content_item_id, agent_name, short_description").in("content_item_id",m);break;case"video":p=pe.from("videos").select("content_item_id, video_platform, duration_seconds").in("content_item_id",m);break;case"document":p=pe.from("documents").select("content_item_id, word_count, reading_time_minutes").in("content_item_id",m);break;case"prompt":p=pe.from("prompts").select("content_item_id, prompt_category, usage_count").in("content_item_id",m);break;case"automation":p=pe.from("automations").select("content_item_id, required_tools").in("content_item_id",m);break}const{data:x,error:y}=await p;return y&&console.error("Error fetching metadata:",y),{items:u.map(b=>{const w=x==null?void 0:x.find(N=>N.content_item_id===b.id);return{...b,metadata:w?{...w,content_item_id:void 0}:void 0}}),total:d||0}}const gOe={async getAIAgents(t){return ml("ai_agent",t)},async getVideos(t){return ml("video",t)},async getDocuments(t){return ml("document",t)},async getPrompts(t){return ml("prompt",t)},async getAutomations(t){return ml("automation",t)},async getContentByType(t,e){return ml(t,e)},async getContentById(t,e){const{data:r,error:n}=await pe.from("content_items").select("*").eq("id",e).eq("content_type",t).maybeSingle();if(n)throw console.error("Error fetching content item:",n),n;if(!r)return null;let i;switch(t){case"ai_agent":i=pe.from("ai_agents").select("agent_name, short_description").eq("content_item_id",e).maybeSingle();break;case"video":i=pe.from("videos").select("video_platform, duration_seconds").eq("content_item_id",e).maybeSingle();break;case"document":i=pe.from("documents").select("word_count, reading_time_minutes").eq("content_item_id",e).maybeSingle();break;case"prompt":i=pe.from("prompts").select("prompt_category, usage_count").eq("content_item_id",e).maybeSingle();break;case"automation":i=pe.from("automations").select("required_tools").eq("content_item_id",e).maybeSingle();break}const{data:s}=await i||{data:null};return{...r,metadata:s||void 0}},async searchAllContent(t,e){const{contentTypes:r=["ai_agent","video","document","prompt","automation"],status:n="published",limit:i=5}=e||{},s=await Promise.all(r.map(async l=>{const{items:c}=await ml(l,{search:t,status:n,limit:i,sortBy:"updated_at",sortOrder:"desc"});return{type:l,items:c}})),o={};return s.forEach(({type:l,items:c})=>{o[l]=c}),o}},uy={formatDuration(t){if(!t)return"Unknown duration";const e=Math.floor(t/3600),r=Math.floor(t%3600/60),n=t%60;return e>0?`${e}:${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`:`${r}:${n.toString().padStart(2,"0")}`},formatReadingTime(t){return t?t<1?"< 1 min read":`${t} min read`:"Unknown reading time"},formatWordCount(t){return t?t<1e3?`${t} words`:`${(t/1e3).toFixed(1)}k words`:"Unknown length"},getContentTypeInfo(t){return{ai_agent:{label:"AI Agent",icon:"Bot",color:"#3B82F6"},video:{label:"Video",icon:"Play",color:"#EF4444"},document:{label:"Document",icon:"FileText",color:"#10B981"},prompt:{label:"Prompt",icon:"MessageSquare",color:"#8B5CF6"},automation:{label:"Automation",icon:"Zap",color:"#F59E0B"}}[t]||{label:t,icon:"File",color:"#6B7280"}},generatePreviewText(t){const{content_type:e,metadata:r,description:n}=t;if(n&&n.length>100)return n.substring(0,100)+"...";if(n)return n;switch(e){case"ai_agent":return(r==null?void 0:r.short_description)||"AI agent for automated conversations and assistance";case"video":const i=r==null?void 0:r.duration_seconds,s=(r==null?void 0:r.video_platform)||"video";return`${s.charAt(0).toUpperCase()+s.slice(1)} - ${uy.formatDuration(i)}`;case"document":const o=r==null?void 0:r.word_count,l=r==null?void 0:r.reading_time_minutes;return`${uy.formatWordCount(o)}  ${uy.formatReadingTime(l)}`;case"prompt":const c=r==null?void 0:r.prompt_category,u=(r==null?void 0:r.usage_count)||0;return`${c?c+"  ":""}Used ${u} times`;case"automation":const f=r==null?void 0:r.required_tools;return f&&f.length>0?`Requires: ${f.slice(0,2).join(", ")}${f.length>2?`+${f.length-2} more`:""}`:"Process automation workflow";default:return"Content item"}}},gl={video:{label:"Videos",icon:({className:t})=>a.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M2 6a2 2 0 012-2h6l2 2h6a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})}),color:"#EF4444",bgColor:"#FEF2F2",description:"Video content and tutorials",extensions:["mp4","avi","mov","wmv"]},document:{label:"Documents",icon:({className:t})=>a.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-5L9 2H4z",clipRule:"evenodd"})}),color:"#10B981",bgColor:"#ECFDF5",description:"PDFs, guides and documentation",extensions:["pdf","doc","docx"]},ai_agent:{label:"AI Agents",icon:({className:t})=>a.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})}),color:"#3B82F6",bgColor:"#EFF6FF",description:"Interactive AI assistants",extensions:[]},prompt:{label:"Prompts",icon:({className:t})=>a.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z",clipRule:"evenodd"})}),color:"#8B5CF6",bgColor:"#F3E8FF",description:"Reusable prompt templates",extensions:[]},automation:{label:"Automations",icon:({className:t})=>a.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.477.859h4z"})}),color:"#F59E0B",bgColor:"#FFFBEB",description:"Workflow automations",extensions:[]}};function yOe({onSelect:t,onUpload:e,allowUpload:r=!1,multiSelect:n=!1,className:i}){const[s,o]=O.useState("folders"),[l,c]=O.useState(null),[u,f]=O.useState(["Content Repository"]),[d,p]=O.useState([]),[m,x]=O.useState(!1),[y,v]=O.useState(null),[b,w]=O.useState("tiles"),[N,j]=O.useState(""),[k,_]=O.useState("updated_at"),[E,A]=O.useState("desc"),[T,M]=O.useState([]),[P,R]=O.useState(!1),[L,$]=O.useState(!1),F=Object.entries(gl).map(([H,Y])=>({id:H,name:Y.label,contentType:H,itemCount:0,lastModified:new Date().toISOString(),color:Y.color,icon:Y.icon})),z=O.useCallback(async H=>{if(H){x(!0),v(null);try{const{items:Y}=await gOe.getContentByType(H,{search:N,status:"all",sortBy:k==="content_type"?"title":k,sortOrder:E,limit:50});p(Y)}catch(Y){console.error("Error fetching content:",Y),v("Failed to load content. Please try again."),p([])}finally{x(!1)}}},[N,k,E]),W=H=>{c(H.contentType),o("content"),f(["Content Repository",H.name]),z(H.contentType)},K=()=>{s==="content"&&(o("folders"),c(null),f(["Content Repository"]),p([]),M([]))},q=async()=>{l&&($(!0),await z(l),$(!1))},V=H=>{n?M(Y=>Y.includes(H.id)?Y.filter(J=>J!==H.id):[...Y,H.id]):t==null||t(H)},D=Z.useMemo(()=>{let H=[...d];if(N.trim()){const Y=N.toLowerCase();H=H.filter(re=>{var J;return re.title.toLowerCase().includes(Y)||((J=re.description)==null?void 0:J.toLowerCase().includes(Y))})}return H},[d,N]),U=()=>a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-4",children:[a.jsx(PO,{className:"w-4 h-4"}),u.map((H,Y)=>a.jsxs(Z.Fragment,{children:[Y>0&&a.jsx(jh,{className:"w-4 h-4"}),a.jsx("span",{className:ge(Y===u.length-1?"text-gray-900 font-medium":"hover:text-gray-900 cursor-pointer"),onClick:Y===0?K:void 0,children:H})]},Y))]}),G=()=>{var H;return a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[s==="content"&&a.jsxs(fe,{variant:"outline",size:"sm",onClick:K,className:"flex items-center space-x-2",children:[a.jsx(lo,{className:"w-4 h-4"}),a.jsx("span",{children:"Back"})]}),a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx(ct,{placeholder:`Search ${s==="folders"?"content":(H=gl[l])==null?void 0:H.label.toLowerCase()}...`,value:N,onChange:Y=>j(Y.target.value),className:"pl-10"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[s==="content"&&a.jsxs(fe,{variant:"outline",size:"sm",onClick:q,disabled:L,className:"flex items-center space-x-2",children:[a.jsx(IO,{className:ge("w-4 h-4",L&&"animate-spin")}),a.jsx("span",{children:"Refresh"})]}),r&&l&&a.jsxs(fe,{size:"sm",className:"flex items-center space-x-2",style:{backgroundColor:gl[l].color},children:[a.jsx(Ir,{className:"w-4 h-4"}),a.jsx("span",{children:"Upload"})]}),a.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>w("tiles"),className:ge("p-2 rounded-md transition-colors",b==="tiles"?"bg-white shadow-sm":"hover:bg-gray-200"),title:"Tile view",children:a.jsx(dd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>w("list"),className:ge("p-2 rounded-md transition-colors",b==="list"?"bg-white shadow-sm":"hover:bg-gray-200"),title:"List view",children:a.jsx(rs,{className:"w-4 h-4"})})]})]})]})},ee=()=>a.jsx("div",{className:ge("grid gap-6",b==="tiles"?"grid-cols-2 md:grid-cols-3 lg:grid-cols-4":"grid-cols-1"),children:F.map(H=>{const Y=H.icon;return a.jsxs("div",{onClick:()=>W(H),className:ge("group relative border border-gray-200 rounded-xl transition-all duration-200 cursor-pointer hover:shadow-lg hover:border-gray-300",b==="tiles"?"p-6 text-center":"p-4 flex items-center space-x-4"),style:{backgroundColor:H.color+"08"},children:[a.jsx("div",{className:ge("flex items-center justify-center rounded-lg transition-transform group-hover:scale-110",b==="tiles"?"w-16 h-16 mx-auto mb-4":"w-12 h-12 flex-shrink-0"),style:{backgroundColor:H.color+"20"},children:a.jsx(Y,{className:"w-8 h-8",style:{color:H.color}})}),a.jsxs("div",{className:ge(b==="list"&&"flex-1"),children:[a.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-gray-700 transition-colors",children:H.name}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:gl[H.contentType].description}),a.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-2 text-xs text-gray-500",children:[a.jsxs("span",{children:[H.itemCount," items"]}),a.jsx("span",{children:""}),a.jsx("span",{children:"Updated today"})]})]})]},H.id)})}),Q=()=>{var H;if(m)return a.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[a.jsx(cr,{size:"lg"}),a.jsxs("p",{className:"text-gray-600 mt-4",children:["Loading ",(H=gl[l])==null?void 0:H.label.toLowerCase(),"..."]})]});if(y)return a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"text-red-500 mb-4",children:a.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Content"}),a.jsx("p",{className:"text-gray-600 mb-4",children:y}),a.jsx(fe,{onClick:q,children:"Try Again"})]});if(D.length===0){const Y=gl[l];return a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"mb-4",style:{color:Y.color},children:a.jsx(Y.icon,{className:"w-12 h-12 mx-auto"})}),a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",Y.label.toLowerCase()," found"]}),a.jsx("p",{className:"text-gray-600 mb-6",children:N?`No ${Y.label.toLowerCase()} match your search"${N}"`:`Start by uploading your first ${Y.label.toLowerCase().slice(0,-1)}`}),r&&a.jsxs(fe,{className:"flex items-center space-x-2",style:{backgroundColor:Y.color},children:[a.jsx(Ir,{className:"w-4 h-4"}),a.jsxs("span",{children:["Upload ",Y.label.slice(0,-1)]})]})]})}return a.jsx("div",{className:ge("grid gap-4",b==="tiles"?"grid-cols-2 md:grid-cols-3 lg:grid-cols-4":"grid-cols-1"),children:D.map(Y=>{const re=T.includes(Y.id),J=gl[l];return a.jsx("div",{onClick:()=>V(Y),className:ge("group border border-gray-200 rounded-lg transition-all duration-200 cursor-pointer hover:shadow-md",re&&"border-blue-500 bg-blue-50",b==="tiles"?"p-4":"p-3 flex items-center space-x-4"),children:b==="tiles"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg mb-3 flex items-center justify-center overflow-hidden",children:Y.thumbnail_url?a.jsx("img",{src:Y.thumbnail_url,alt:Y.title,className:"w-full h-full object-cover"}):a.jsx(J.icon,{className:"w-8 h-8",style:{color:J.color}})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 line-clamp-2 mb-1",children:Y.title}),Y.description&&a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:Y.description}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[a.jsx("span",{children:new Date(Y.updated_at).toLocaleDateString()}),a.jsx(At,{variant:Y.status==="published"?"default":"secondary",className:"text-xs",children:Y.status})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(J.icon,{className:"w-5 h-5",style:{color:J.color}})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 truncate",children:Y.title}),Y.description&&a.jsx("p",{className:"text-sm text-gray-600 truncate",children:Y.description})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsx(At,{variant:Y.status==="published"?"default":"secondary",className:"text-xs",children:Y.status}),a.jsx("span",{children:new Date(Y.updated_at).toLocaleDateString()})]})]})},Y.id)})})};return a.jsxs("div",{className:ge("h-full flex flex-col bg-white",i),children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[U(),G()]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s==="folders"?ee():Q()}),n&&T.length>0&&a.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-sm text-gray-700",children:[T.length," item",T.length!==1?"s":""," selected"]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(fe,{variant:"outline",size:"sm",onClick:()=>M([]),children:"Clear Selection"}),a.jsx(fe,{size:"sm",onClick:()=>{const H=D.filter(Y=>T.includes(Y.id));t==null||t(H[0])},children:"Use Selected"})]})]})})]})}const Q6={video:UB,document:Ot,ai_agent:Kr,prompt:Gr,automation:Ei};function eW({isOpen:t,onClose:e,onSelect:r,contentType:n,allowedTypes:i,title:s="Select Content",description:o="Choose content from your library",multiSelect:l=!1,allowUpload:c=!1,className:u}){const[f,d]=O.useState([]),[p,m]=O.useState(!1),[x,y]=O.useState(!1);if(!t)return null;const v=_=>{if(l){const E=f.find(A=>A.id===_.id);d(E?A=>A.filter(T=>T.id!==_.id):A=>[...A,_])}else r(_),e()},b=()=>{f.length>0&&(r(l?f:f[0]),e())},w=_=>{console.log("Files to upload:",_),m(!1)},N=_=>{_.preventDefault(),y(!0)},j=_=>{_.preventDefault(),y(!1)},k=_=>{_.preventDefault(),y(!1);const E=Array.from(_.dataTransfer.files);E.length>0&&w(E)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:ge("bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[85vh] flex flex-col overflow-hidden",u),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:n&&Q6[n]?Z.createElement(Q6[n],{className:"w-6 h-6 text-white"}):a.jsx(Ot,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s}),o&&a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:o})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[c&&a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>m(!p),className:ge("flex items-center space-x-2",p&&"bg-blue-50 border-blue-300 text-blue-700"),children:[a.jsx(Ir,{className:"w-4 h-4"}),a.jsx("span",{children:"Upload"})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx($r,{className:"w-5 h-5"})})]})]}),a.jsx("div",{className:"flex-1 overflow-hidden relative",children:p?a.jsx("div",{className:ge("h-full flex items-center justify-center border-2 border-dashed border-gray-300 m-6 rounded-xl transition-colors",x&&"border-blue-500 bg-blue-50"),onDragOver:N,onDragLeave:j,onDrop:k,children:a.jsxs("div",{className:"text-center p-8",children:[a.jsx(Ir,{className:"w-16 h-16 mx-auto mb-6 text-gray-400"}),a.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Upload New Content"}),a.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:"Drag and drop your files here, or click to browse and select files from your computer."}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(fe,{className:"flex items-center space-x-2",children:[a.jsx(Ir,{className:"w-4 h-4"}),a.jsx("span",{children:"Choose Files"})]}),n&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Supported formats: ",vOe(n).join(", ")]})]})]})}):a.jsx(yOe,{onSelect:v,multiSelect:l,allowUpload:!1,className:"h-full"})}),a.jsx("div",{className:"border-t border-gray-200 px-6 py-4 bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[l&&f.length>0&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-xs font-medium",children:f.length}),a.jsxs("span",{className:"text-sm text-gray-700",children:[f.length," item",f.length!==1?"s":""," selected"]})]}),p&&a.jsx(fe,{variant:"outline",size:"sm",onClick:()=>m(!1),children:"Back to Library"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(fe,{variant:"outline",onClick:e,children:"Cancel"}),l&&f.length>0&&!p&&a.jsx(fe,{onClick:b,className:"flex items-center space-x-2",children:a.jsxs("span",{children:["Select (",f.length,")"]})})]})]})})]})})}function vOe(t){return{video:["MP4","AVI","MOV","WMV","MKV"],document:["PDF","DOC","DOCX","TXT"],ai_agent:["JSON","YAML"],prompt:["TXT","MD"],automation:["JSON","YAML","JS"]}[t]||["All files"]}function xOe({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n,onSelect:i,onEdit:s,className:o}){const[l,c]=O.useState(!1),[u,f]=O.useState(!1),d=t.content,{video_id:p,url:m,platform:x,title:y,description:v,thumbnail:b,duration:w,autoplay:N=!1,controls:j=!0}=d||{},k=T=>{var P,R,L;const M={video_id:T.id,title:T.title,description:T.description,thumbnail:T.thumbnail_url,platform:((P=T.metadata)==null?void 0:P.video_platform)||"internal",url:((R=T.metadata)==null?void 0:R.video_url)||T.file_url,duration:(L=T.metadata)==null?void 0:L.duration_seconds,autoplay:!1,controls:!0};n==null||n(M),c(!1)},_=()=>{n==null||n({})},E=()=>"aspect-video",A=()=>!p&&!m?a.jsx("div",{className:`${E()} bg-gray-100 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300`,children:a.jsxs("div",{className:"text-center",children:[a.jsx(Fw,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Add Video Content"}),a.jsx("p",{className:"text-gray-600 mb-4 max-w-sm",children:"Select a video from your content library to embed in this block."}),e&&a.jsxs(fe,{onClick:()=>c(!0),className:"flex items-center space-x-2",children:[a.jsx(si,{className:"w-4 h-4"}),a.jsx("span",{children:"Select Video"})]})]})}):a.jsxs("div",{className:"space-y-4",children:[y&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:y}),v&&a.jsx("p",{className:"text-gray-600 text-sm",children:v})]}),a.jsxs("div",{className:`${E()} bg-black rounded-lg relative overflow-hidden group`,children:[a.jsx("div",{className:"absolute inset-0",children:b?a.jsx("img",{src:b,alt:y||"Video thumbnail",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center",children:a.jsx(Fw,{className:"w-16 h-16 text-gray-400"})})}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("button",{onClick:()=>f(!0),className:"w-16 h-16 bg-white bg-opacity-90 rounded-full flex items-center justify-center hover:bg-opacity-100 transition-all duration-200 group-hover:scale-110",children:a.jsx(si,{className:"w-8 h-8 text-gray-800 ml-1",fill:"currentColor"})})}),e&&a.jsxs("div",{className:"absolute top-3 right-3 flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx(fe,{onClick:()=>c(!0),size:"sm",variant:"outline",className:"bg-white/90 hover:bg-white border-gray-300",children:a.jsx(Dn,{className:"w-4 h-4"})}),a.jsx(fe,{onClick:_,size:"sm",variant:"outline",className:"bg-white/90 hover:bg-white border-gray-300 text-red-600 hover:text-red-700",children:""})]}),w&&a.jsxs("div",{className:"absolute bottom-3 right-3 bg-black bg-opacity-75 text-white px-2 py-1 rounded text-sm",children:[Math.floor(w/60),":",(w%60).toString().padStart(2,"0")]})]}),(x||w)&&a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[x&&a.jsxs("span",{className:"capitalize",children:[x," Video"]}),w&&a.jsxs("span",{children:["Duration: ",Math.floor(w/60),":",(w%60).toString().padStart(2,"0")]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>f(!0),className:"p-1 hover:text-gray-700 transition-colors",title:"View fullscreen",children:a.jsx(Jg,{className:"w-4 h-4"})}),m&&a.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"p-1 hover:text-gray-700 transition-colors",title:"Open in new tab",children:a.jsx(Os,{className:"w-4 h-4"})})]})]})]});return a.jsxs("div",{className:ge("relative",r&&e&&"ring-2 ring-blue-500 ring-offset-2 rounded-lg p-2",o),onClick:i,children:[A(),a.jsx(eW,{isOpen:l,onClose:()=>c(!1),onSelect:k,contentType:"video",title:"Select Video",description:"Choose a video to embed in this block",allowUpload:!0}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"relative w-full max-w-6xl",children:[a.jsx("button",{onClick:()=>f(!1),className:"absolute -top-12 right-0 text-white hover:text-gray-300 text-xl font-bold z-10",children:""}),a.jsx("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:m?a.jsx("video",{src:m,controls:j,autoPlay:N,className:"w-full h-full",poster:b,children:"Your browser does not support the video tag."}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-white",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Fw,{className:"w-16 h-16 mx-auto mb-4"}),a.jsx("p",{children:"Video not available"})]})})}),y&&a.jsxs("div",{className:"mt-4 text-white text-center",children:[a.jsx("h3",{className:"text-xl font-semibold",children:y}),v&&a.jsx("p",{className:"text-gray-300 mt-2",children:v})]})]})})]})}function bOe({block:t,isSelected:e=!1,isEditing:r=!1,onSelect:n,onEdit:i,className:s}){const o=t.content,{agent_id:l,agent_name:c="AI Assistant",initial_message:u="Hello! How can I help you?",context:f,allowed_interactions:d=["chat"]}=o||{},[p,m]=O.useState([{id:"1",role:"assistant",content:u}]),[x,y]=O.useState(""),[v,b]=O.useState(!1),w=async()=>{if(!x.trim())return;const N={id:Date.now().toString(),role:"user",content:x};m(j=>[...j,N]),y(""),b(!0);try{await new Promise(k=>setTimeout(k,1e3));const j={id:(Date.now()+1).toString(),role:"assistant",content:`Thank you for your message: "${N.content}". I'm a simulated response from ${c}.`};m(k=>[...k,j])}catch(j){console.error("Failed to send message:",j)}finally{b(!1)}};return r&&!l?a.jsxs("div",{className:ge("border-2 border-dashed border-purple-300 rounded-lg p-8 text-center bg-purple-50",s),children:[a.jsx("div",{className:"text-purple-400 mb-4",children:a.jsx(Kr,{className:"w-12 h-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-purple-900 mb-2",children:"Select an AI Agent"}),a.jsx("p",{className:"text-purple-600 text-sm mb-4",children:"Choose an AI agent from your repository to embed here."}),a.jsxs(fe,{onClick:i,variant:"outline",size:"sm",className:"border-purple-300 text-purple-600 hover:bg-purple-100",children:[a.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Configure Agent"]})]}):a.jsxs("div",{className:ge("border border-gray-200 rounded-lg bg-white max-w-2xl",e&&"ring-2 ring-blue-500",s),onClick:n,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-blue-50",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(Kr,{className:"w-4 h-4 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:c}),a.jsx("p",{className:"text-xs text-gray-500",children:"AI Assistant"})]})]}),r&&a.jsx(fe,{onClick:i,variant:"ghost",size:"sm",children:a.jsx(Dn,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"p-4 h-64 overflow-y-auto space-y-3",children:[p.map(N=>a.jsx("div",{className:ge("flex",N.role==="user"?"justify-end":"justify-start"),children:a.jsx("div",{className:ge("max-w-xs lg:max-w-md px-3 py-2 rounded-lg text-sm",N.role==="user"?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"),children:N.content})},N.id)),v&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-gray-100 px-3 py-2 rounded-lg",children:a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),a.jsx("div",{className:"p-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(ct,{value:x,onChange:N=>y(N.target.value),onKeyPress:N=>N.key==="Enter"&&w(),placeholder:"Type your message...",disabled:v||!l,className:"flex-1"}),a.jsx(fe,{onClick:w,disabled:v||!x.trim()||!l,size:"sm",children:a.jsx($B,{className:"w-4 h-4"})})]})})]})}const wOe=Mi(bOe);function jOe({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n,onSelect:i,onEdit:s,className:o}){const[l,c]=O.useState(!1),[u,f]=O.useState(!1),[d,p]=O.useState(1),[m,x]=O.useState(1),[y,v]=O.useState(100),[b,w]=O.useState(0),[N,j]=O.useState(null),k=t.content,{document_id:_,title:E,excerpt:A,display_mode:T="embedded"}=k||{},M=V=>{var U;const D={document_id:V.id,title:V.title,excerpt:V.description||V.excerpt,display_mode:"embedded"};n==null||n(D),c(!1),j(V),(U=V.metadata)!=null&&U.total_pages&&x(V.metadata.total_pages)},P=()=>{d<m&&p(d+1)},R=()=>{d>1&&p(d-1)},L=()=>{y<200&&v(y+25)},$=()=>{y>50&&v(y-25)},F=()=>{w((b+90)%360)},z=()=>!_||!N?a.jsx("div",{className:"aspect-[3/4] bg-gray-100 rounded-lg flex items-center justify-center border border-gray-200",children:a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx(Ot,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("p",{className:"text-sm",children:"PDF preview unavailable"})]})}):a.jsxs("div",{className:"relative group",children:[a.jsxs("div",{className:"aspect-[3/4] bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm",children:[a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50",children:N.thumbnail_url?a.jsx("img",{src:N.thumbnail_url,alt:`Page ${d} of ${E}`,className:"max-w-full max-h-full object-contain",style:{transform:`rotate(${b}deg) scale(${y/100})`,transition:"transform 0.3s ease"}}):a.jsxs("div",{className:"text-center text-gray-400",children:[a.jsx(Ot,{className:"w-16 h-16 mx-auto mb-4"}),a.jsxs("p",{className:"text-lg font-medium",children:["Page ",d]}),a.jsx("p",{className:"text-sm",children:E})]})}),a.jsxs("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[d>1&&a.jsx("button",{onClick:R,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-75 text-white p-2 rounded-full hover:bg-opacity-90 transition-colors",title:"Previous page",children:a.jsx(r_,{className:"w-4 h-4"})}),d<m&&a.jsx("button",{onClick:P,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-75 text-white p-2 rounded-full hover:bg-opacity-90 transition-colors",title:"Next page",children:a.jsx(jh,{className:"w-4 h-4"})}),a.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[a.jsx("button",{onClick:$,className:"bg-black bg-opacity-75 text-white p-1.5 rounded hover:bg-opacity-90 transition-colors",title:"Zoom out",disabled:y<=50,children:a.jsx(NM,{className:"w-3 h-3"})}),a.jsx("button",{onClick:L,className:"bg-black bg-opacity-75 text-white p-1.5 rounded hover:bg-opacity-90 transition-colors",title:"Zoom in",disabled:y>=200,children:a.jsx(SM,{className:"w-3 h-3"})}),a.jsx("button",{onClick:F,className:"bg-black bg-opacity-75 text-white p-1.5 rounded hover:bg-opacity-90 transition-colors",title:"Rotate 90",children:a.jsx(bM,{className:"w-3 h-3"})})]}),a.jsx("button",{onClick:()=>f(!0),className:"absolute bottom-2 right-2 bg-black bg-opacity-75 text-white p-2 rounded hover:bg-opacity-90 transition-colors",title:"View fullscreen",children:a.jsx(Jg,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-3 px-1",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",d," of ",m]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[y,"% zoom"]})]}),m>1&&m<=10&&a.jsx("div",{className:"flex justify-center mt-2 space-x-1",children:Array.from({length:m},(V,D)=>a.jsx("button",{onClick:()=>p(D+1),className:ge("w-2 h-2 rounded-full transition-colors",d===D+1?"bg-blue-600":"bg-gray-300 hover:bg-gray-400"),title:`Go to page ${D+1}`},D))})]}),W=()=>{n==null||n({document_id:"",title:"",display_mode:"embedded"})},K=V=>{n==null||n({...k,display_mode:V})},q=()=>!_||!E?a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(Ot,{className:"w-12 h-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Add Document"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Select a document from your content library to embed in this block."}),e&&a.jsxs(fe,{onClick:()=>c(!0),className:"flex items-center space-x-2",children:[a.jsx(Zn,{className:"w-4 h-4"}),a.jsx("span",{children:"Select Document"})]})]}):a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden group hover:shadow-md transition-shadow",children:[a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(Ot,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:E}),A&&a.jsx("p",{className:"text-gray-600 text-sm line-clamp-3 mb-3",children:A}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(At,{variant:"outline",className:ge("text-xs",T==="embedded"&&"border-green-300 text-green-700",T==="modal"&&"border-blue-300 text-blue-700",T==="new_tab"&&"border-purple-300 text-purple-700"),children:[T==="embedded"&&"Embedded",T==="modal"&&"Modal View",T==="new_tab"&&"New Tab"]}),a.jsx("span",{className:"text-xs text-gray-500",children:"Document"})]})]})]}),e&&a.jsxs("div",{className:"flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsxs(fe,{onClick:()=>c(!0),size:"sm",variant:"outline",className:"flex items-center space-x-1",children:[a.jsx(Dn,{className:"w-4 h-4"}),a.jsx("span",{children:"Change"})]}),a.jsx(fe,{onClick:W,size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 border-red-300",children:""})]})]})}),a.jsx("div",{className:"border-t border-gray-100 px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(fe,{onClick:()=>{T==="modal"?f(!0):T==="new_tab"&&window.open(`/content/documents/${_}`,"_blank")},size:"sm",className:"flex items-center space-x-2",children:[T==="embedded"&&a.jsxs(a.Fragment,{children:[a.jsx(ii,{className:"w-4 h-4"}),a.jsx("span",{children:"View Document"})]}),T==="modal"&&a.jsxs(a.Fragment,{children:[a.jsx(Jg,{className:"w-4 h-4"}),a.jsx("span",{children:"Open Modal"})]}),T==="new_tab"&&a.jsxs(a.Fragment,{children:[a.jsx(Os,{className:"w-4 h-4"}),a.jsx("span",{children:"Open in New Tab"})]})]}),a.jsxs(fe,{onClick:()=>{console.log("Download document:",_)},size:"sm",variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(yy,{className:"w-4 h-4"}),a.jsx("span",{children:"Download"})]})]}),e&&a.jsx("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[{mode:"embedded",icon:ii,label:"Embedded"},{mode:"modal",icon:Jg,label:"Modal"},{mode:"new_tab",icon:Os,label:"New Tab"}].map(({mode:V,icon:D,label:U})=>a.jsxs("button",{onClick:()=>K(V),className:ge("px-2 py-1 text-xs rounded-md transition-colors flex items-center space-x-1",T===V?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-900"),title:U,children:[a.jsx(D,{className:"w-3 h-3"}),a.jsx("span",{className:"hidden sm:inline",children:U})]},V))})]})}),T==="embedded"&&a.jsx("div",{className:"border-t border-gray-100 p-4",children:z()})]});return a.jsxs("div",{className:ge("relative",r&&e&&"ring-2 ring-blue-500 ring-offset-2 rounded-lg p-2",o),onClick:i,children:[q(),a.jsx(eW,{isOpen:l,onClose:()=>c(!1),onSelect:M,contentType:"document",title:"Select Document",description:"Choose a document to embed in this block",allowUpload:!0}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"relative w-full max-w-6xl max-h-full bg-white rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:E}),A&&a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:A})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{onClick:()=>{console.log("Download document:",_)},size:"sm",variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(yy,{className:"w-4 h-4"}),a.jsx("span",{children:"Download"})]}),a.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600 p-2",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",style:{maxHeight:"calc(90vh - 120px)"},children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[z(),m>1&&a.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-6",children:[a.jsxs(fe,{onClick:R,disabled:d===1,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(r_,{className:"w-4 h-4"}),a.jsx("span",{children:"Previous"})]}),a.jsx("div",{className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 rounded-lg",children:a.jsxs("span",{className:"text-sm font-medium",children:["Page ",d," of ",m]})}),a.jsxs(fe,{onClick:P,disabled:d===m,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[a.jsx("span",{children:"Next"}),a.jsx(jh,{className:"w-4 h-4"})]})]}),a.jsxs("div",{className:"flex justify-center items-center space-x-3 mt-4",children:[a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:$,disabled:y<=50,className:"p-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",title:"Zoom out",children:a.jsx(NM,{className:"w-4 h-4"})}),a.jsxs("span",{className:"px-2 text-sm font-medium",children:[y,"%"]}),a.jsx("button",{onClick:L,disabled:y>=200,className:"p-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",title:"Zoom in",children:a.jsx(SM,{className:"w-4 h-4"})})]}),a.jsx("button",{onClick:F,className:"p-2 bg-gray-100 text-gray-600 hover:text-gray-800 rounded-lg",title:"Rotate 90",children:a.jsx(bM,{className:"w-4 h-4"})})]})]})})]})})]})}function SOe({block:t,isSelected:e=!1,isEditing:r=!1,onSelect:n,onEdit:i,onBlockChange:s,className:o}){const l=t.content,{prompt_id:c,title:u="Prompt",preview_text:f,show_copy_button:d=!0,allow_customization:p=!1}=l||{},[m,x]=O.useState(!1),[y,v]=O.useState(!1),[b,w]=O.useState(!1),N=E=>{var T;const A={prompt_id:E.id,title:E.title,preview_text:E.description||((T=E.content)==null?void 0:T.substring(0,200))+"...",show_copy_button:!0,allow_customization:!1};s&&s(t.id,{content:A}),w(!1)},j=()=>{s&&s(t.id,{content:{prompt_id:"",title:"Prompt",show_copy_button:!0}})},k=async()=>{if(f)try{await navigator.clipboard.writeText(f),x(!0),setTimeout(()=>x(!1),2e3)}catch(E){console.error("Failed to copy prompt:",E)}},_=async()=>{if(c){v(!0);try{window.open(`/prompts/${c}`,"_blank")}catch(E){console.error("Failed to view prompt:",E)}finally{v(!1)}}};return r&&!c?a.jsxs("div",{className:ge("border-2 border-dashed border-indigo-300 rounded-lg p-8 text-center bg-indigo-50",o),children:[a.jsx("div",{className:"text-indigo-400 mb-4",children:a.jsx(Gr,{className:"w-12 h-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-indigo-900 mb-2",children:"Select a Prompt"}),a.jsx("p",{className:"text-indigo-600 text-sm mb-4",children:"Choose a prompt template from your repository to embed here."}),a.jsxs(fe,{onClick:()=>w(!0),variant:"outline",size:"sm",className:"border-indigo-300 text-indigo-600 hover:bg-indigo-100",children:[a.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Select Prompt"]})]}):a.jsxs("div",{className:ge("border border-gray-200 rounded-lg p-6 bg-white hover:shadow-md transition-shadow",e&&"ring-2 ring-blue-500",o),onClick:n,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(Gr,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:u}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Prompt Template"})]})]}),r&&a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(fe,{onClick:()=>w(!0),variant:"ghost",size:"sm",className:"flex items-center space-x-1",title:"Change prompt",children:[a.jsx(C0,{className:"w-4 h-4"}),a.jsx("span",{children:"Change"})]}),a.jsx(fe,{onClick:j,variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",title:"Remove prompt",children:""})]})]}),f&&a.jsx("div",{className:"mb-4",children:a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border text-sm text-gray-700 max-h-32 overflow-y-auto",children:f})}),c&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{onClick:_,disabled:y,className:"flex items-center space-x-2",children:[y?a.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-white border-t-transparent rounded-full"}):a.jsx(Os,{className:"w-4 h-4"}),a.jsx("span",{children:"View Full Prompt"})]}),d&&f&&a.jsxs(fe,{onClick:k,variant:"outline",size:"sm",className:"flex items-center space-x-1",children:[m?a.jsx(ln,{className:"w-3 h-3 text-green-600"}):a.jsx(gy,{className:"w-3 h-3"}),a.jsx("span",{children:m?"Copied!":"Copy"})]})]}),!c&&!r&&a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No prompt selected"}),a.jsx(GC,{isOpen:b,onClose:()=>w(!1),onSelect:N,contentType:"prompt",title:"Select Prompt",description:"Choose a prompt template to embed in this block"})]})}const NOe=Mi(SOe);function kOe({block:t,isSelected:e=!1,isEditing:r=!1,onSelect:n,onEdit:i,onBlockChange:s,userContext:o,className:l}){const c=t.content,{automation_id:u,automation_name:f="Automation",automation_url:d,required_tools:p=[],description:m,display_mode:x="embedded"}=c||{},[y,v]=O.useState(!1),[b,w]=O.useState(!1),N=_=>{var A,T;const E={automation_id:_.id,automation_name:_.title,description:_.description,automation_url:((A=_.metadata)==null?void 0:A.automation_url)||_.file_url,required_tools:((T=_.metadata)==null?void 0:T.required_tools)||[],display_mode:"embedded"};s&&s(t.id,{content:E}),w(!1)},j=()=>{s&&s(t.id,{content:{automation_id:"",automation_name:"Automation",display_mode:"embedded"}})},k=async()=>{if(d){v(!0);try{window.open(d,"_blank")}catch(_){console.error("Failed to run automation:",_)}finally{v(!1)}}};return r&&!u?a.jsxs("div",{className:ge("border-2 border-dashed border-blue-300 rounded-lg p-8 text-center bg-blue-50",l),children:[a.jsx("div",{className:"text-blue-400 mb-4",children:a.jsx(Ei,{className:"w-12 h-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Select an Automation"}),a.jsx("p",{className:"text-blue-600 text-sm mb-4",children:"Choose an automation from your repository to embed here."}),a.jsxs(fe,{onClick:()=>w(!0),variant:"outline",size:"sm",className:"border-blue-300 text-blue-600 hover:bg-blue-100",children:[a.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Select Automation"]})]}):a.jsxs("div",{className:ge("border border-gray-200 rounded-lg p-6 bg-white hover:shadow-md transition-shadow",e&&"ring-2 ring-blue-500",l),onClick:n,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:a.jsx(Ei,{className:"w-5 h-5 text-yellow-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:f}),m&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m})]})]}),r&&a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(fe,{onClick:()=>w(!0),variant:"ghost",size:"sm",className:"flex items-center space-x-1",title:"Change automation",children:[a.jsx(C0,{className:"w-4 h-4"}),a.jsx("span",{children:"Change"})]}),a.jsx(fe,{onClick:j,variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",title:"Remove automation",children:""})]})]}),p&&p.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Required Tools:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:p.map((_,E)=>a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:_},E))})]}),d&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{onClick:k,disabled:y,className:"flex items-center space-x-2",children:[y?a.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-white border-t-transparent rounded-full"}):a.jsx(si,{className:"w-4 h-4"}),a.jsx("span",{children:"Run Automation"})]}),a.jsxs(fe,{onClick:()=>window.open(d,"_blank"),variant:"outline",size:"sm",className:"flex items-center space-x-1",children:[a.jsx(Os,{className:"w-3 h-3"}),a.jsx("span",{children:"Open"})]})]}),!d&&!r&&a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No automation URL configured"}),a.jsx(GC,{isOpen:b,onClose:()=>w(!1),onSelect:N,contentType:"automation",title:"Select Automation",description:"Choose an automation workflow to embed in this block"})]})}const _Oe=Mi(kOe);function OOe({item:t,index:e,isEditing:r,onUpdate:n,onDelete:i}){const[s,o]=O.useState(!1),[l,c]=O.useState(t),[u,f]=O.useState(t.is_open_by_default||!1),{attributes:d,listeners:p,setNodeRef:m,transform:x,transition:y,isDragging:v}=KC({id:t.id}),b={transform:Rs.Transform.toString(x),transition:y},w=()=>{n(t.id,l),o(!1)},N=()=>{c(t),o(!1)};return a.jsx("div",{ref:m,style:b,className:ge("border rounded-lg overflow-hidden transition-colors group",v&&"opacity-50",s?"border-blue-300 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:s?a.jsx("div",{className:"p-4 space-y-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[r&&a.jsx("button",{...d,...p,className:"mt-2 p-1 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing",title:"Drag to reorder",children:a.jsx(s_,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section Title"}),a.jsx(ct,{value:l.title,onChange:j=>c({...l,title:j.target.value}),placeholder:"Enter section title...",className:"font-medium"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),a.jsx(Ai,{value:l.content,onChange:j=>c({...l,content:j.target.value}),placeholder:"Enter section content...",className:"min-h-[120px] resize-none"})]}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:l.is_open_by_default||!1,onChange:j=>c({...l,is_open_by_default:j.target.checked}),className:"form-checkbox text-blue-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Open by default"})]})}),a.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-2 border-t border-gray-200",children:[a.jsxs(fe,{onClick:N,size:"sm",variant:"outline",children:[a.jsx($r,{className:"w-4 h-4 mr-1"}),"Cancel"]}),a.jsxs(fe,{onClick:w,size:"sm",children:[a.jsx(ko,{className:"w-4 h-4 mr-1"}),"Save"]})]})]})]})}):a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("button",{onClick:()=>f(!u),className:"w-full px-4 py-3 text-left bg-gray-50 hover:bg-gray-100 transition-colors flex items-center justify-between focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset","aria-expanded":u,children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[r&&a.jsx("button",{...d,...p,className:"opacity-0 group-hover:opacity-100 p-1 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing",title:"Drag to reorder",onClick:j=>j.stopPropagation(),children:a.jsx(s_,{className:"w-4 h-4"})}),a.jsx("span",{className:"font-medium text-gray-900",children:t.title})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[r&&a.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100",onClick:j=>j.stopPropagation(),children:[a.jsx(fe,{onClick:()=>o(!0),size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:a.jsx(yo,{className:"w-3 h-3"})}),a.jsx(fe,{onClick:()=>i(t.id),size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:a.jsx(ns,{className:"w-3 h-3"})})]}),u?a.jsx(CO,{className:"w-5 h-5 text-gray-500"}):a.jsx(mo,{className:"w-5 h-5 text-gray-500"})]})]})}),a.jsx("div",{className:ge("transition-all duration-200 ease-in-out overflow-hidden",u?"max-h-screen":"max-h-0"),children:a.jsxs("div",{className:"p-4 bg-white border-t border-gray-100",children:[t.html?a.jsx("div",{className:"prose prose-gray max-w-none text-sm",dangerouslySetInnerHTML:{__html:t.html}}):a.jsx("p",{className:"text-gray-700 leading-relaxed text-sm whitespace-pre-wrap",children:t.content}),r&&!t.content&&!t.html&&a.jsx("p",{className:"text-gray-400 italic text-sm",children:"No content added yet"})]})})]})})}function EOe({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n}){const i=t.content,{items:s=[],allow_multiple_open:o=!0}=i||{},[l,c]=O.useState(new Set(s.filter(j=>j.is_open_by_default).map(j=>j.id))),[u,f]=O.useState(null),[d,p]=O.useState(!1),m=Fx(Bx(Ad,{activationConstraint:{distance:8}})),x=j=>{n&&n({...i,...j})},y=()=>{const k={id:`accordion_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:"New Section",content:"Enter content for this section...",is_open_by_default:!1};x({items:[...s,k]})},v=(j,k)=>{const _=s.map(E=>E.id===j?{...E,...k}:E);x({items:_})},b=j=>{const k=s.filter(_=>_.id!==j);x({items:k})},w=j=>{const{active:k,over:_}=j;if(_&&k.id!==_.id){const E=s.findIndex(T=>T.id===k.id),A=s.findIndex(T=>T.id===_.id);if(E!==-1&&A!==-1){const T=Td(s,E,A);x({items:T})}}f(null)},N=j=>{c(k=>{const _=new Set(k);return _.has(j)?_.delete(j):(o||_.clear(),_.add(j)),_})};return e&&r?a.jsxs("div",{className:ge("border border-gray-300 rounded-lg overflow-hidden","ring-2 ring-blue-500 ring-offset-2"),children:[a.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Accordion Block"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create collapsible sections with expandable content"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{onClick:()=>p(!d),size:"sm",variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(Dn,{className:"w-4 h-4"}),a.jsx("span",{children:"Settings"})]}),a.jsxs(fe,{onClick:y,size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Section"})]})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[s.length," section",s.length!==1?"s":""]}),d&&a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mt-4",children:a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:o,onChange:j=>x({allow_multiple_open:j.target.checked}),className:"form-checkbox text-blue-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Allow multiple sections to be open at once"})]})})]}),a.jsx("div",{className:"p-6",children:s.length===0?a.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[a.jsx(Sh,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Sections Yet"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Add your first accordion section to get started"}),a.jsxs(fe,{onClick:y,className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add First Section"})]})]}):a.jsxs(Ux,{sensors:m,onDragStart:j=>f(j.active.id),onDragEnd:w,children:[a.jsx("div",{className:"space-y-3",children:a.jsx(Wx,{items:s.map(j=>j.id),strategy:Hx,children:s.map((j,k)=>a.jsx(OOe,{item:j,index:k,isEditing:!0,onUpdate:v,onDelete:b},j.id))})}),a.jsx(VC,{children:u?a.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-4 shadow-lg",children:["Section ",s.findIndex(j=>j.id===u)+1]}):null})]})})]}):s.length===0?a.jsx("div",{className:"text-gray-400 italic py-4 text-center",children:"No accordion items configured"}):a.jsx("div",{className:"space-y-2",children:s.map((j,k)=>{const _=l.has(j.id);return a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsxs("button",{onClick:()=>N(j.id),className:"w-full px-4 py-3 text-left bg-gray-50 hover:bg-gray-100 transition-colors flex items-center justify-between focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset","aria-expanded":_,children:[a.jsx("span",{className:"font-medium text-gray-900",children:j.title}),_?a.jsx(CO,{className:"w-5 h-5 text-gray-500"}):a.jsx(mo,{className:"w-5 h-5 text-gray-500"})]}),a.jsx("div",{className:ge("transition-all duration-200 ease-in-out overflow-hidden",_?"max-h-screen":"max-h-0"),children:a.jsx("div",{className:"p-4 bg-white border-t border-gray-100",children:j.html?a.jsx("div",{className:"prose prose-gray max-w-none",dangerouslySetInnerHTML:{__html:j.html}}):a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:j.content})})})]},j.id)})})}const COe=Mi(EOe);function AOe({question:t,index:e,isEditing:r,onUpdate:n,onDelete:i}){var k;const[s,o]=O.useState(!1),[l,c]=O.useState(t),{attributes:u,listeners:f,setNodeRef:d,transform:p,transition:m,isDragging:x}=KC({id:t.id}),y={transform:Rs.Transform.toString(p),transition:m},v=()=>{n(t.id,l),o(!1)},b=()=>{c(t),o(!1)},w=()=>{const _=[...l.options||[],"New Option"];c({...l,options:_})},N=(_,E)=>{const A=[...l.options];A[_]=E,c({...l,options:A})},j=_=>{const E=l.options.filter((A,T)=>T!==_);c({...l,options:E})};return a.jsx("div",{ref:d,style:y,className:ge("border rounded-lg p-4 transition-colors group",x&&"opacity-50",s?"border-blue-300 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:a.jsxs("div",{className:"flex items-start space-x-3",children:[r&&a.jsx("button",{...u,...f,className:"opacity-0 group-hover:opacity-100 mt-1 p-1 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing",title:"Drag to reorder",children:a.jsx(s_,{className:"w-4 h-4"})}),a.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-800 text-sm font-medium rounded-full flex items-center justify-center mt-1",children:e+1}),a.jsx("div",{className:"flex-1",children:s?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question"}),a.jsx(Ai,{value:l.question,onChange:_=>c({...l,question:_.target.value}),placeholder:"Enter your question...",className:"min-h-[80px]"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Type"}),a.jsxs(ec,{value:l.type,onValueChange:_=>c({...l,type:_}),children:[a.jsx(Da,{children:a.jsx(tc,{})}),a.jsxs(La,{children:[a.jsx(kt,{value:"multiple_choice",children:"Multiple Choice"}),a.jsx(kt,{value:"true_false",children:"True/False"}),a.jsx(kt,{value:"short_answer",children:"Short Answer"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points"}),a.jsx(ct,{type:"number",value:l.points,onChange:_=>c({...l,points:parseInt(_.target.value)||1}),min:"1",className:"w-full"})]})]}),l.type==="multiple_choice"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer Options"}),a.jsxs("div",{className:"space-y-2",children:[(k=l.options)==null?void 0:k.map((_,E)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ct,{value:_,onChange:A=>N(E,A.target.value),placeholder:`Option ${E+1}`,className:"flex-1"}),a.jsx(fe,{onClick:()=>c({...l,correct_answer:_}),size:"sm",variant:l.correct_answer===_?"default":"outline",className:"shrink-0",children:l.correct_answer===_?"Correct":"Set Correct"}),a.jsx(fe,{onClick:()=>j(E),size:"sm",variant:"ghost",className:"shrink-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:a.jsx(ns,{className:"w-4 h-4"})})]},E)),a.jsxs(fe,{onClick:w,size:"sm",variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Option"})]})]})]}),l.type!=="multiple_choice"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer"}),l.type==="true_false"?a.jsxs(ec,{value:l.correct_answer,onValueChange:_=>c({...l,correct_answer:_}),children:[a.jsx(Da,{className:"w-32",children:a.jsx(tc,{})}),a.jsxs(La,{children:[a.jsx(kt,{value:"True",children:"True"}),a.jsx(kt,{value:"False",children:"False"})]})]}):a.jsx(ct,{value:l.correct_answer,onChange:_=>c({...l,correct_answer:_.target.value}),placeholder:"Enter the correct answer..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Explanation (Optional)"}),a.jsx(Ai,{value:l.explanation||"",onChange:_=>c({...l,explanation:_.target.value}),placeholder:"Explain why this answer is correct...",className:"min-h-[60px]"})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-2 border-t border-gray-200",children:[a.jsxs(fe,{onClick:b,size:"sm",variant:"outline",children:[a.jsx($r,{className:"w-4 h-4 mr-1"}),"Cancel"]}),a.jsxs(fe,{onClick:v,size:"sm",children:[a.jsx(ko,{className:"w-4 h-4 mr-1"}),"Save"]})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("p",{className:"font-medium text-gray-900 flex-1",children:[t.question,a.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",t.points," pt",t.points!==1?"s":"",")"]})]}),r&&a.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100",children:[a.jsx(fe,{onClick:()=>o(!0),size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:a.jsx(yo,{className:"w-3 h-3"})}),a.jsx(fe,{onClick:()=>i(t.id),size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:a.jsx(ns,{className:"w-3 h-3"})})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Type:"})," ",t.type==="multiple_choice"?"Multiple Choice":t.type==="true_false"?"True/False":"Short Answer",t.type==="multiple_choice"&&t.options&&a.jsxs("span",{className:"ml-2",children:["(",t.options.length," options)"]})]}),t.correct_answer&&a.jsxs("div",{className:"text-sm text-green-600",children:[a.jsx("strong",{children:"Answer:"})," ",String(t.correct_answer)]})]})})]})})}function TOe({block:t,isEditing:e=!1,isSelected:r=!1,onContentChange:n,onComplete:i}){const s=t.content,{title:o="Quiz",description:l="",questions:c=[],time_limit:u,passing_score:f=70,allow_retries:d=!0,show_results_immediately:p=!0}=s||{},[m,x]=O.useState({}),[y,v]=O.useState(!1),[b,w]=O.useState(null),[N,j]=O.useState(u?u*60:null),[k,_]=O.useState(!1),[E,A]=O.useState(o),[T,M]=O.useState(l),[P,R]=O.useState(!1),[L,$]=O.useState(null),F=Fx(Bx(Ad,{activationConstraint:{distance:8}})),z=J=>{n&&n({...s,...J})},W=()=>{const ne={id:`q_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,question:"New Question",type:"multiple_choice",options:["Option 1","Option 2"],correct_answer:"Option 1",points:1};z({questions:[...c,ne]})},K=(J,ne)=>{const te=c.map(se=>se.id===J?{...se,...ne}:se);z({questions:te})},q=J=>{const ne=c.filter(te=>te.id!==J);z({questions:ne})},V=J=>{const{active:ne,over:te}=J;if(te&&ne.id!==te.id){const se=c.findIndex(ie=>ie.id===ne.id),ve=c.findIndex(ie=>ie.id===te.id);if(se!==-1&&ve!==-1){const ie=Td(c,se,ve);z({questions:ie})}}$(null)},D=()=>{z({title:E,description:T})},U=(J,ne)=>{x(te=>({...te,[J]:ne}))},G=()=>{let J=0,ne=0;return c.forEach(te=>{J+=te.points;const se=m[te.id];te.type==="multiple_choice"||te.type==="true_false"?se===te.correct_answer&&(ne+=te.points):te.type==="short_answer"&&se&&se.toLowerCase().trim()===String(te.correct_answer).toLowerCase().trim()&&(ne+=te.points)}),J>0?Math.round(ne/J*100):0},ee=()=>{const J=G();w(J),v(!0),p&&_(!0),i==null||i(J,m)},Q=()=>{x({}),v(!1),w(null),_(!1),j(u?u*60:null)},H=J=>m[J]!==void 0&&m[J]!=="",Y=c.every(J=>H(J.id)),re=b!==null&&b>=f;return O.useEffect(()=>{if(N!==null&&N>0&&!y){const J=setTimeout(()=>{j(ne=>ne-1)},1e3);return()=>clearTimeout(J)}else N===0&&!y&&ee()},[N,y]),O.useEffect(()=>{if(e){const J=setTimeout(()=>{(E!==o||T!==l)&&D()},1e3);return()=>clearTimeout(J)}},[E,T,e]),e&&r?a.jsxs("div",{className:ge("border border-gray-300 rounded-lg overflow-hidden","ring-2 ring-blue-500 ring-offset-2"),children:[a.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quiz Title"}),a.jsx(ct,{value:E,onChange:J=>A(J.target.value),placeholder:"Enter quiz title...",className:"font-semibold"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),a.jsx(Ai,{value:T,onChange:J=>M(J.target.value),placeholder:"Enter quiz description...",className:"min-h-[60px] resize-none"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:[c.length," question",c.length!==1?"s":""]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{onClick:()=>R(!P),size:"sm",variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(Dn,{className:"w-4 h-4"}),a.jsx("span",{children:"Settings"})]}),a.jsxs(fe,{onClick:W,size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Question"})]})]})]}),P&&a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Limit (minutes)"}),a.jsx(ct,{type:"number",value:u||"",onChange:J=>z({time_limit:J.target.value?parseInt(J.target.value):void 0}),placeholder:"No limit",min:"1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Passing Score (%)"}),a.jsx(ct,{type:"number",value:f,onChange:J=>z({passing_score:parseInt(J.target.value)||70}),min:"0",max:"100"})]})]}),a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:d,onChange:J=>z({allow_retries:J.target.checked}),className:"form-checkbox text-blue-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Allow retries"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:p,onChange:J=>z({show_results_immediately:J.target.checked}),className:"form-checkbox text-blue-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Show results immediately"})]})]})]})]})}),a.jsx("div",{className:"p-6",children:c.length===0?a.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[a.jsx(AO,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Questions Yet"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Add your first question to get started"}),a.jsxs(fe,{onClick:W,className:"flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add First Question"})]})]}):a.jsxs(Ux,{sensors:F,onDragStart:J=>$(J.active.id),onDragEnd:V,children:[a.jsx("div",{className:"space-y-4",children:a.jsx(Wx,{items:c.map(J=>J.id),strategy:Hx,children:c.map((J,ne)=>a.jsx(AOe,{question:J,index:ne,isEditing:!0,onUpdate:K,onDelete:q},J.id))})}),a.jsx(VC,{children:L?a.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-4 shadow-lg",children:["Question ",c.findIndex(J=>J.id===L)+1]}):null})]})})]}):c.length===0?a.jsx("div",{className:"text-gray-400 italic py-8 text-center",children:"No quiz questions configured"}):a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"bg-blue-50 px-6 py-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:o}),l&&a.jsx("p",{className:"text-gray-600 mt-1",children:l})]}),N!==null&&!y&&a.jsxs("div",{className:"flex items-center space-x-2 bg-white px-3 py-2 rounded-lg border",children:[a.jsx(go,{className:"w-4 h-4 text-gray-500"}),a.jsxs("span",{className:ge("font-mono text-sm",N<60?"text-red-600 font-bold":"text-gray-700"),children:[Math.floor(N/60),":",String(N%60).padStart(2,"0")]})]})]}),y&&b!==null&&a.jsxs("div",{className:ge("mt-4 p-3 rounded-lg flex items-center space-x-2",re?"bg-green-100 border border-green-200":"bg-red-100 border border-red-200"),children:[re?a.jsx(ko,{className:"w-5 h-5 text-green-600"}):a.jsx($r,{className:"w-5 h-5 text-red-600"}),a.jsxs("span",{className:ge("font-medium",re?"text-green-800":"text-red-800"),children:["Score: ",b,"% ",re?"(Passed)":`(Failed - ${f}% required)`]})]})]}),a.jsx("div",{className:"p-6 space-y-6",children:c.map((J,ne)=>{const te=m[J.id],se=y&&te===J.correct_answer,ve=y&&te!==J.correct_answer;return a.jsx("div",{className:ge("border rounded-lg p-4 transition-colors",y&&se&&"border-green-300 bg-green-50",y&&ve&&"border-red-300 bg-red-50",!y&&"border-gray-200"),children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-800 text-sm font-medium rounded-full flex items-center justify-center",children:ne+1}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"font-medium text-gray-900 mb-3",children:[J.question,a.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",J.points," pt",J.points!==1?"s":"",")"]})]}),J.type==="multiple_choice"&&J.options&&a.jsx("div",{className:"space-y-2",children:J.options.map((ie,ye)=>a.jsxs("label",{className:ge("flex items-center space-x-2 p-2 rounded cursor-pointer transition-colors",!y&&"hover:bg-gray-50",y&&ie===J.correct_answer&&"bg-green-100 border border-green-300",y&&ie===te&&ie!==J.correct_answer&&"bg-red-100 border border-red-300"),children:[a.jsx("input",{type:"radio",name:`question-${J.id}`,value:ie,checked:te===ie,disabled:y,onChange:Te=>U(J.id,Te.target.value),className:"form-radio text-blue-600"}),a.jsx("span",{className:ge("text-gray-700",y&&ie===J.correct_answer&&"font-medium text-green-800",y&&ie===te&&ie!==J.correct_answer&&"text-red-800"),children:ie})]},ye))}),J.type==="true_false"&&a.jsx("div",{className:"space-y-2",children:["True","False"].map(ie=>a.jsxs("label",{className:ge("flex items-center space-x-2 p-2 rounded cursor-pointer transition-colors",!y&&"hover:bg-gray-50",y&&ie===J.correct_answer&&"bg-green-100 border border-green-300",y&&ie===te&&ie!==J.correct_answer&&"bg-red-100 border border-red-300"),children:[a.jsx("input",{type:"radio",name:`question-${J.id}`,value:ie,checked:te===ie,disabled:y,onChange:ye=>U(J.id,ye.target.value),className:"form-radio text-blue-600"}),a.jsx("span",{children:ie})]},ie))}),J.type==="short_answer"&&a.jsx("input",{type:"text",value:te||"",disabled:y,onChange:ie=>U(J.id,ie.target.value),placeholder:"Enter your answer...",className:ge("w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",y&&se&&"border-green-300 bg-green-50",y&&ve&&"border-red-300 bg-red-50")}),y&&k&&J.explanation&&a.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded",children:a.jsxs("p",{className:"text-blue-800 text-sm",children:[a.jsx("strong",{children:"Explanation:"})," ",J.explanation]})})]})]})},J.id)})}),a.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Questions answered: ",Object.keys(m).length," of ",c.length]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[y&&!re&&d&&a.jsx("button",{onClick:Q,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Retry Quiz"}),!y&&a.jsx("button",{onClick:ee,disabled:!Y,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit Quiz"}),y&&p&&!k&&a.jsx("button",{onClick:()=>_(!0),className:"px-4 py-2 text-sm font-medium text-blue-700 bg-blue-100 border border-blue-300 rounded-md hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Show Answers"})]})]})})]})}const POe=Mi(TOe);function MOe({block:t,isSelected:e=!1,isEditing:r=!1,onSelect:n,onEdit:i,onBlockChange:s,className:o}){const l=t.content,{title:c="Submit Your Work",description:u,submission_type:f="text",instructions:d="Please provide your submission below",max_file_size:p,allowed_file_types:m=[],required_fields:x=[],auto_grade:y=!1}=l||{},[v,b]=O.useState({}),[w,N]=O.useState(null),[j,k]=O.useState(!1),[_,E]=O.useState(!1),[A,T]=O.useState(!1),M=K=>{N(K.target.files)},P=async()=>{k(!0);try{await new Promise(K=>setTimeout(K,2e3)),console.log("Submission:",{blockId:t.id,submissionType:f,submission:v,files:w?Array.from(w):[]}),E(!0)}catch(K){console.error("Failed to submit:",K)}finally{k(!1)}},L=(()=>{switch(f){case"file":return IB;case"url":return E0;case"text":return Ot;default:return Ir}})(),$=K=>{s&&s(t.id,{content:{...l,...K}})},F=()=>{const K={name:`field_${Date.now()}`,label:"New Field",type:"text",required:!0};$({required_fields:[...x||[],K]})},z=(K,q)=>{const V=[...x||[]];V[K]={...V[K],...q},$({required_fields:V})},W=K=>{const q=[...x||[]];q.splice(K,1),$({required_fields:q})};return r?a.jsx("div",{className:ge("border-2 border-dashed border-orange-300 rounded-lg bg-orange-50",o),children:A?a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-orange-900",children:"Configure User Submission"}),a.jsx(fe,{onClick:()=>T(!1),variant:"ghost",size:"sm",className:"text-orange-600 hover:bg-orange-100",children:a.jsx($r,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),a.jsx(ct,{value:c,onChange:K=>$({title:K.target.value}),placeholder:"Submit Your Work"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Submission Type"}),a.jsxs(ec,{value:f,onValueChange:K=>$({submission_type:K}),children:[a.jsx(Da,{children:a.jsx(tc,{})}),a.jsxs(La,{children:[a.jsx(kt,{value:"text",children:"Text Submission"}),a.jsx(kt,{value:"file",children:"Single File"}),a.jsx(kt,{value:"multiple",children:"Multiple Files"}),a.jsx(kt,{value:"url",children:"URL/Link"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),a.jsx(ct,{value:u||"",onChange:K=>$({description:K.target.value}),placeholder:"Brief description of the submission"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructions"}),a.jsx(Ai,{value:d,onChange:K=>$({instructions:K.target.value}),placeholder:"Please provide your submission below",rows:3})]}),(f==="file"||f==="multiple")&&a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg space-y-4",children:[a.jsx("h4",{className:"font-medium text-blue-900",children:"File Upload Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max File Size (MB)"}),a.jsx(ct,{type:"number",value:p?Math.round(p/(1024*1024)):"",onChange:K=>{const q=parseInt(K.target.value)||0;$({max_file_size:q*1024*1024})},placeholder:"10",min:"1",max:"100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allowed File Types (comma separated)"}),a.jsx(ct,{value:(m==null?void 0:m.join(", "))||"",onChange:K=>{const q=K.target.value.split(",").map(V=>V.trim()).filter(Boolean);$({allowed_file_types:q})},placeholder:".pdf, .docx, .txt, image/*"})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Additional Fields"}),a.jsxs(fe,{onClick:F,variant:"outline",size:"sm",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[a.jsx(Vt,{className:"w-4 h-4 mr-1"}),"Add Field"]})]}),x&&x.length>0?a.jsx("div",{className:"space-y-3",children:x.map((K,q)=>a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Field ",q+1]}),a.jsx(fe,{onClick:()=>W(q),variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-50",children:a.jsx(ns,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Field Name"}),a.jsx(ct,{value:K.name,onChange:V=>z(q,{name:V.target.value}),placeholder:"field_name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Label"}),a.jsx(ct,{value:K.label,onChange:V=>z(q,{label:V.target.value}),placeholder:"Field Label"})]}),a.jsxs("div",{className:"flex items-end gap-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),a.jsxs(ec,{value:K.type,onValueChange:V=>z(q,{type:V}),children:[a.jsx(Da,{className:"h-9",children:a.jsx(tc,{})}),a.jsxs(La,{children:[a.jsx(kt,{value:"text",children:"Text"}),a.jsx(kt,{value:"email",children:"Email"}),a.jsx(kt,{value:"number",children:"Number"}),a.jsx(kt,{value:"tel",children:"Phone"}),a.jsx(kt,{value:"date",children:"Date"}),a.jsx(kt,{value:"textarea",children:"Long Text"})]})]})]}),a.jsxs("div",{className:"flex items-center h-9",children:[a.jsx("input",{type:"checkbox",id:`required-${q}`,checked:K.required,onChange:V=>z(q,{required:V.target.checked}),className:"mr-2"}),a.jsx("label",{htmlFor:`required-${q}`,className:"text-xs text-gray-600",children:"Required"})]})]})]})]},q))}):a.jsx("p",{className:"text-sm text-gray-500 italic",children:'No additional fields configured. Click "Add Field" to create custom form fields.'})]}),a.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"auto-grade",checked:y||!1,onChange:K=>$({auto_grade:K.target.checked}),className:"mr-3"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"auto-grade",className:"text-sm font-medium text-green-900",children:"Enable Auto-Grading"}),a.jsx("p",{className:"text-xs text-green-700",children:"Automatically evaluate submissions when possible"})]})]})})]}):a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"text-orange-400 mb-4",children:a.jsx(Ir,{className:"w-12 h-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-orange-900 mb-2",children:"User Submission Block"}),a.jsx("p",{className:"text-orange-600 text-sm mb-4",children:"Configure how users can submit their work."}),a.jsxs(fe,{onClick:()=>T(!0),variant:"outline",size:"sm",className:"border-orange-300 text-orange-600 hover:bg-orange-100",children:[a.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Configure Submission"]})]})}):_?a.jsxs("div",{className:ge("border border-green-200 rounded-lg p-6 bg-green-50 text-center",e&&"ring-2 ring-blue-500",o),onClick:n,children:[a.jsx("div",{className:"text-green-500 mb-4",children:a.jsx(ln,{className:"w-12 h-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"Submission Received!"}),a.jsxs("p",{className:"text-green-700 text-sm",children:["Thank you for your submission. ",y?"Your work is being evaluated automatically.":"Your work will be reviewed soon."]})]}):a.jsxs("div",{className:ge("border border-gray-200 rounded-lg p-6 bg-white",e&&"ring-2 ring-blue-500",o),onClick:n,children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:a.jsx(L,{className:"w-5 h-5 text-orange-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:c}),u&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u})]})]})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Instructions:"})," ",d]})}),a.jsxs("div",{className:"space-y-4",children:[x.map((K,q)=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[K.label," ",K.required&&a.jsx("span",{className:"text-red-500",children:"*"})]}),K.type==="textarea"?a.jsx("textarea",{value:v[K.name]||"",onChange:V=>b(D=>({...D,[K.name]:V.target.value})),placeholder:`Enter ${K.label.toLowerCase()}`,required:K.required,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):a.jsx(ct,{type:K.type||"text",value:v[K.name]||"",onChange:V=>b(D=>({...D,[K.name]:V.target.value})),placeholder:`Enter ${K.label.toLowerCase()}`,required:K.required})]},q)),f==="text"&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Your Submission ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{value:v.content||"",onChange:K=>b(q=>({...q,content:K.target.value})),placeholder:"Enter your submission here...",rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(f==="file"||f==="multiple")&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Upload File(s) ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"file",onChange:M,multiple:f==="multiple",accept:m.join(","),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),p&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum file size: ",Math.round(p/(1024*1024)),"MB"]})]}),f==="url"&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["URL ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(ct,{type:"url",value:v.url||"",onChange:K=>b(q=>({...q,url:K.target.value})),placeholder:"https://example.com",required:!0})]}),a.jsxs(fe,{onClick:P,disabled:j,className:"w-full flex items-center justify-center space-x-2",children:[j?a.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-white border-t-transparent rounded-full"}):a.jsx($B,{className:"w-4 h-4"}),a.jsx("span",{children:j?"Submitting...":"Submit"})]})]})]})}const ROe=Mi(MOe);function tW({block:t,isSelected:e=!1,isEditing:r=!1,onSelect:n,onEdit:i,onProgress:s,onContentChange:o,userContext:l,className:c}){const u={block:t,isSelected:e,isEditing:r,onSelect:n,onEdit:i,className:c},f=d=>{o==null||o(t.id,d)};switch(t.block_type){case"section_header":return a.jsx(v_e,{...u,onContentChange:f});case"rich_text":return a.jsx(b_e,{...u,onContentChange:f});case"image":return a.jsx(j_e,{...u,onContentChange:f});case"list":return a.jsx(uOe,{...u,onContentChange:f});case"quote":return a.jsx(fOe,{...u,onContentChange:f});case"divider":return a.jsx(pOe,{...u});case"video":return a.jsx(xOe,{...u,onContentChange:f});case"agent":return a.jsx(wOe,{...u});case"document":return a.jsx(jOe,{...u,onContentChange:f});case"prompt":return a.jsx(NOe,{...u});case"automation":return a.jsx(_Oe,{...u,userContext:l});case"quiz":return a.jsx(POe,{...u,onComplete:(d,p)=>{console.log("Quiz completed:",{blockId:t.id,score:d,answers:p})}});case"user_submission":return a.jsx(ROe,{...u});case"accordion":return a.jsx(COe,{...u});default:return a.jsxs("div",{className:"border-2 border-dashed border-red-300 rounded-lg p-8 text-center bg-red-50",children:[a.jsx("div",{className:"text-red-400 mb-2",children:a.jsx("svg",{className:"w-8 h-8 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsxs("p",{className:"text-red-600 text-sm font-medium",children:["Unknown Block Type: ",t.block_type]}),a.jsx("p",{className:"text-red-500 text-xs mt-1",children:"This block type is not supported"})]})}}var IOe="Separator",Z6="horizontal",DOe=["horizontal","vertical"],rW=O.forwardRef((t,e)=>{const{decorative:r,orientation:n=Z6,...i}=t,s=LOe(n)?n:Z6,l=r?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return a.jsx($t.div,{"data-orientation":s,...l,...i,ref:e})});rW.displayName=IOe;function LOe(t){return DOe.includes(t)}var nW=rW;const Pd=O.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},i)=>a.jsx(nW,{ref:i,decorative:r,orientation:e,className:ge("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));Pd.displayName=nW.displayName;var YC="Switch",[$Oe,CEe]=Yp(YC),[BOe,FOe]=$Oe(YC),iW=O.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:i,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:f,...d}=t,[p,m]=O.useState(null),x=yr(e,N=>m(N)),y=O.useRef(!1),v=p?f||!!p.closest("form"):!0,[b=!1,w]=v0({prop:i,defaultProp:s,onChange:u});return a.jsxs(BOe,{scope:r,checked:b,disabled:l,children:[a.jsx($t.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":aW(b),"data-disabled":l?"":void 0,disabled:l,value:c,...d,ref:x,onClick:Jt(t.onClick,N=>{w(j=>!j),v&&(y.current=N.isPropagationStopped(),y.current||N.stopPropagation())})}),v&&a.jsx(qOe,{control:p,bubbles:!y.current,name:n,value:c,checked:b,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});iW.displayName=YC;var sW="SwitchThumb",oW=O.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,i=FOe(sW,r);return a.jsx($t.span,{"data-state":aW(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:e})});oW.displayName=sW;var qOe=t=>{const{control:e,checked:r,bubbles:n=!0,...i}=t,s=O.useRef(null),o=$C(r),l=IC(e);return O.useEffect(()=>{const c=s.current,u=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==r&&d){const p=new Event("click",{bubbles:n});d.call(c,r),c.dispatchEvent(p)}},[o,r,n]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:s,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function aW(t){return t?"checked":"unchecked"}var lW=iW,zOe=oW;const kp=O.forwardRef(({className:t,...e},r)=>a.jsx(lW,{className:ge("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:r,children:a.jsx(zOe,{className:ge("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));kp.displayName=lW.displayName;var UOe="Label",cW=O.forwardRef((t,e)=>a.jsx($t.label,{...t,ref:e,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));cW.displayName=UOe;var uW=cW;const HOe=it,WOe=(t,e)=>r=>HOe(t,r==null?void 0:r.class,r==null?void 0:r.className),VOe=WOe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_t=O.forwardRef(({className:t,...e},r)=>a.jsx(uW,{ref:r,className:ge(VOe(),t),...e}));_t.displayName=uW.displayName;const If={ai_agent:"AI Agents",video:"Videos",document:"Documents",prompt:"Prompts",automation:"Automations",image:"Images",pdf:"PDFs"},Gg={ai_agent:"",video:"",document:"",prompt:"",automation:"",image:"",pdf:""};function KOe({contentType:t,selectedItemId:e,onSelect:r,onCancel:n,className:i}){const{user:s}=Ln(),[o,l]=O.useState([]),[c,u]=O.useState(!0),[f,d]=O.useState(""),[p,m]=O.useState("grid"),[x,y]=O.useState("updated_at"),[v,b]=O.useState("desc"),[w,N]=O.useState("published"),[j,k]=O.useState(null);O.useEffect(()=>{_()},[t,x,v,w]);const _=async()=>{try{u(!0),k(null);let R=pe.from("content_items").select("*");if(t==="image"){const{data:z,error:W}=await pe.from("content_images").select("*").eq("status",w==="all"?void 0:w).order(x,{ascending:v==="asc"});if(W)throw W;l(z||[]);return}if(t==="pdf"){const{data:z,error:W}=await pe.from("content_pdfs").select("*").eq("status",w==="all"?void 0:w).order(x,{ascending:v==="asc"});if(W)throw W;l(z||[]);return}R=R.eq("content_type",t),w!=="all"&&(R=R.eq("status",w)),R=R.order(x,{ascending:v==="asc"});const{data:L,error:$}=await R;if($)throw $;const F=await Promise.all((L||[]).map(async z=>{try{switch(z.content_type){case"ai_agent":{const{data:W}=await pe.from("ai_agents").select("agent_name").eq("content_item_id",z.id).maybeSingle();return{...z,agent_name:W==null?void 0:W.agent_name}}case"video":{const{data:W}=await pe.from("videos").select("video_url").eq("content_item_id",z.id).maybeSingle();return{...z,video_url:W==null?void 0:W.video_url}}case"document":{const{data:W}=await pe.from("documents").select("content_html").eq("content_item_id",z.id).maybeSingle();return{...z,content_html:W==null?void 0:W.content_html}}case"prompt":{const{data:W}=await pe.from("prompts").select("prompt_text").eq("content_item_id",z.id).maybeSingle();return{...z,prompt_text:W==null?void 0:W.prompt_text}}case"automation":{const{data:W}=await pe.from("automations").select("automation_url").eq("content_item_id",z.id).maybeSingle();return{...z,automation_url:W==null?void 0:W.automation_url}}default:return z}}catch(W){return console.error(`Error loading details for ${z.content_type}:`,W),z}}));l(F)}catch(R){console.error("Error loading content:",R),k(R instanceof Error?R.message:"Failed to load content")}finally{u(!1)}},E=O.useMemo(()=>o.filter(R=>{var $,F,z,W;const L=f.toLowerCase();return(($=R.title)==null?void 0:$.toLowerCase().includes(L))||((F=R.description)==null?void 0:F.toLowerCase().includes(L))||((z=R.agent_name)==null?void 0:z.toLowerCase().includes(L))||((W=R.prompt_text)==null?void 0:W.toLowerCase().includes(L))}),[o,f]),A=R=>{x===R?b(v==="asc"?"desc":"asc"):(y(R),b("desc"))},T=R=>{switch(R){case"published":return a.jsxs(At,{className:"bg-green-100 text-green-800 border-green-200",children:[a.jsx(ln,{className:"w-3 h-3 mr-1"}),"Published"]});case"draft":return a.jsxs(At,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[a.jsx(go,{className:"w-3 h-3 mr-1"}),"Draft"]});case"archived":return a.jsxs(At,{className:"bg-gray-100 text-gray-800 border-gray-200",children:[a.jsx(t_,{className:"w-3 h-3 mr-1"}),"Archived"]});default:return a.jsx(At,{variant:"outline",children:R})}},M=R=>new Date(R).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),P=R=>{switch(R.content_type||t){case"ai_agent":return R.agent_name||"AI Agent";case"video":return"Video Content";case"document":return R.content_html?`${R.content_html.length} characters`:"Document";case"prompt":return R.prompt_text?R.prompt_text.substring(0,100)+"...":"Prompt";case"automation":return R.automation_url||"Automation";case"image":return"Image File";case"pdf":return"PDF Document";default:return R.description||"Content Item"}};return c?a.jsx("div",{className:ge("bg-white rounded-lg border border-gray-200 p-6 max-w-4xl mx-auto",i),children:a.jsxs("div",{className:"flex items-center justify-center h-64",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsxs("span",{className:"ml-3 text-gray-600",children:["Loading ",If[t],"..."]})]})}):a.jsxs("div",{className:ge("bg-white rounded-lg border border-gray-200 max-w-4xl mx-auto",i),children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-2xl",children:Gg[t]}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold",children:["Select ",If[t]]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Choose content from your repository"})]})]}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:n,children:a.jsx($r,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ct,{placeholder:`Search ${If[t].toLowerCase()}...`,value:f,onChange:R=>d(R.target.value),className:"pl-10"})]}),a.jsxs("div",{className:"flex border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx(fe,{variant:p==="grid"?"default":"ghost",size:"sm",onClick:()=>m("grid"),className:"rounded-none border-0",children:a.jsx(dd,{className:"h-4 w-4"})}),a.jsx(fe,{variant:p==="list"?"default":"ghost",size:"sm",onClick:()=>m("list"),className:"rounded-none border-0 border-l border-gray-200",children:a.jsx(rs,{className:"h-4 w-4"})})]}),a.jsxs("select",{value:w,onChange:R=>N(R.target.value),className:"border border-gray-200 rounded-lg px-3 py-2 text-sm",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"published",children:"Published Only"}),a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"archived",children:"Archived"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>A("name"),className:ge("flex items-center space-x-1",x==="name"&&"bg-blue-50 border-blue-200"),children:[a.jsx("span",{children:"Name"}),x==="name"&&(v==="asc"?a.jsx(yM,{className:"h-3 w-3"}):a.jsx(gM,{className:"h-3 w-3"}))]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>A("updated_at"),className:ge("flex items-center space-x-1",x==="updated_at"&&"bg-blue-50 border-blue-200"),children:[a.jsx("span",{children:"Modified"}),x==="updated_at"&&(v==="asc"?a.jsx(yM,{className:"h-3 w-3"}):a.jsx(gM,{className:"h-3 w-3"}))]})]})]})]}),a.jsxs("div",{className:"p-6",children:[j&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[a.jsx("p",{className:"text-red-800",children:j}),a.jsx(fe,{variant:"outline",size:"sm",onClick:_,className:"mt-2",children:"Try Again"})]}),E.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("span",{className:"text-6xl mb-4 block",children:Gg[t]}),a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",If[t]," Found"]}),a.jsx("p",{className:"text-gray-600 mb-4",children:f?"Try adjusting your search terms.":`No ${If[t].toLowerCase()} available yet.`}),f&&a.jsx(fe,{variant:"outline",onClick:()=>d(""),children:"Clear Search"})]}):a.jsx("div",{className:ge(p==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-3"),children:E.map(R=>a.jsx("div",{onClick:()=>r(R),className:ge("border border-gray-200 rounded-lg p-4 cursor-pointer transition-all hover:border-blue-300 hover:shadow-md",e===R.id&&"border-blue-500 bg-blue-50",p==="list"&&"flex items-center space-x-4"),children:p==="grid"?a.jsxs("div",{children:[a.jsx("div",{className:"w-full h-32 bg-gray-100 rounded-lg flex items-center justify-center mb-3",children:a.jsx("span",{className:"text-3xl",children:Gg[t]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:R.title}),a.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:P(R)}),a.jsxs("div",{className:"flex items-center justify-between",children:[T(R.status),a.jsx("span",{className:"text-xs text-gray-500",children:M(R.updated_at)})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-xl",children:Gg[t]})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium text-sm truncate",children:R.title}),a.jsx("p",{className:"text-xs text-gray-600 truncate",children:P(R)})]}),a.jsxs("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[T(R.status),a.jsx("span",{className:"text-xs text-gray-500",children:M(R.updated_at)})]})]})},R.id))})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[E.length," ",E.length===1?"item":"items",f&&` matching "${f}"`]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx(fe,{variant:"outline",onClick:n,children:"Cancel"}),a.jsx(fe,{disabled:!e,onClick:()=>{const R=E.find(L=>L.id===e);R&&r(R)},children:"Select Content"})]})]})]})}const GOe={section_header:{icon:DO,label:"Section Header",description:"Create section headings with formatting"},rich_text:{icon:Ot,label:"Rich Text",description:"WYSIWYG text editor with formatting"},list:{icon:rs,label:"List",description:"Bullets, numbers, checkboxes with interactions"},quote:{icon:xy,label:"Quote",description:"Blockquotes with optional author attribution"},divider:{icon:RO,label:"Division",description:"Horizontal rule with spacing controls"},quiz:{icon:AO,label:"Quiz",description:"Interactive quizzes with multiple question types"},accordion:{icon:mo,label:"Accordion",description:"Expandable content sections"},user_submission:{icon:Ir,label:"User Submission",description:"Forms for text and file submissions"}},YOe={video:{icon:UB,label:"Video",description:"Video content from repository"},agent:{icon:Kr,label:"AI Agent",description:"Interactive AI agent conversations"},document:{icon:IB,label:"Document",description:"Rich documents from repository"},prompt:{icon:Gr,label:"Prompts",description:"Interactive prompt execution"},automation:{icon:Ei,label:"Automation",description:"Process automation workflows"},image:{icon:Eu,label:"Image",description:"Images with upload or repository selection"},pdf:{icon:RX,label:"PDF",description:"PDF documents with carousel view"}};function XOe({onBlockAdd:t,onPageCreate:e,onPageSelect:r,pages:n,currentPageId:i,structure:s,onSave:o,onPreview:l,isPreviewMode:c=!1,onStructureUpdate:u,className:f}){const[d,p]=O.useState(null),[m,x]=O.useState(""),[y,v]=O.useState((s==null?void 0:s.title)||""),[b,w]=O.useState((s==null?void 0:s.description)||""),[N,j]=O.useState((s==null?void 0:s.status)==="published"),[k,_]=O.useState(!1),[E,A]=O.useState(!1),[T,M]=O.useState(!1),[P,R]=O.useState(null);O.useEffect(()=>{s&&(v(s.title||""),w(s.description||""),j(s.status==="published"),_(!1))},[s]),O.useEffect(()=>{if(s){const U=y!==(s.title||"")||b!==(s.description||"")||N!==(s.status==="published");_(U)}},[s,y,b,N]);const L=async()=>{if(!(!u||!s||!k)){A(!0);try{await u({title:y,description:b,status:N?"published":"draft"}),_(!1),console.log("Settings saved successfully")}catch(U){console.error("Failed to save settings:",U)}finally{A(!1)}}},$=async U=>{if(!P)return;const ee={video:"video",ai_agent:"agent",document:"document",prompt:"prompt",automation:"automation",image:"image",pdf:"pdf"}[P];ee&&await t(ee),M(!1),R(null),p(null)},F=()=>{M(!1),R(null)},z=U=>{p(d===U?null:U)},W=()=>{p(null)},K=Object.entries(GOe).filter(([U,G])=>m===""||G.label.toLowerCase().includes(m.toLowerCase())),q=Object.entries(YOe).filter(([U,G])=>m===""||G.label.toLowerCase().includes(m.toLowerCase())),V=K.length>0,D=q.length>0;return a.jsxs("div",{className:ge("flex",f),children:[a.jsxs("div",{className:"w-16 bg-gray-900 border-r border-gray-800 flex flex-col items-center py-4 space-y-2 fixed left-0 top-0 bottom-0 z-40",children:[a.jsx(fe,{variant:d==="setup"?"secondary":"ghost",size:"sm",onClick:()=>z("setup"),className:"w-12 h-12 p-0 text-gray-300 hover:text-white hover:bg-gray-700 data-[state=open]:bg-gray-700",title:"Setup",children:a.jsx(Dn,{className:"h-5 w-5"})}),a.jsx(fe,{variant:d==="elements"?"secondary":"ghost",size:"sm",onClick:()=>z("elements"),className:"w-12 h-12 p-0 text-gray-300 hover:text-white hover:bg-gray-700 data-[state=open]:bg-gray-700",title:"Elements",children:a.jsx("div",{className:"relative",children:a.jsx("div",{className:"w-6 h-6 border-2 border-current rounded-full flex items-center justify-center",children:a.jsx(Vt,{className:"h-3 w-3"})})})}),a.jsx(fe,{variant:d==="content"?"secondary":"ghost",size:"sm",onClick:()=>z("content"),className:"w-12 h-12 p-0 text-gray-300 hover:text-white hover:bg-gray-700 data-[state=open]:bg-gray-700",title:"Content",children:a.jsx(Ot,{className:"h-5 w-5"})}),a.jsx(fe,{variant:d==="pages"?"secondary":"ghost",size:"sm",onClick:()=>z("pages"),className:"w-12 h-12 p-0 text-gray-300 hover:text-white hover:bg-gray-700 data-[state=open]:bg-gray-700",title:"Pages",children:a.jsx(Sh,{className:"h-5 w-5"})}),a.jsx("div",{className:"flex-1"}),o&&a.jsx(fe,{variant:"ghost",size:"sm",onClick:o,className:"w-12 h-12 p-0 text-gray-300 hover:text-white hover:bg-gray-700",title:"Save",children:a.jsx(Cp,{className:"h-5 w-5"})}),l&&a.jsx(fe,{variant:"ghost",size:"sm",onClick:l,className:"w-12 h-12 p-0 text-gray-300 hover:text-white hover:bg-gray-700",title:c?"Exit Preview":"Preview",children:a.jsx(ii,{className:"h-5 w-5"})})]}),d&&a.jsx("div",{className:"fixed inset-0 z-30",onClick:W}),d&&a.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col fixed left-16 top-0 bottom-0 z-40 shadow-lg",children:[d==="setup"&&a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h2",{className:"font-semibold text-lg",children:"WOD Setup"}),E?a.jsxs("div",{className:"flex items-center text-blue-600 text-sm",children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-blue-600 mr-2"}),"Saving..."]}):k?a.jsxs("div",{className:"flex items-center text-orange-600 text-sm",children:[a.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),"Unsaved"]}):a.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[a.jsx(ln,{className:"h-3 w-3 mr-1"}),"Saved"]})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Configure your Workout of the Day"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"wod-title",className:"text-sm font-medium",children:"WOD Title"}),a.jsx(ct,{id:"wod-title",value:y,onChange:U=>v(U.target.value),placeholder:"Enter WOD title...",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"wod-description",className:"text-sm font-medium",children:"Description"}),a.jsx(Ai,{id:"wod-description",value:b,onChange:U=>w(U.target.value),placeholder:"Describe this WOD...",rows:3,className:"mt-1"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"publication-status",className:"text-sm font-medium",children:"Publication Status"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N?"Published - visible to users":"Draft - only visible to admins"})]}),a.jsx(kp,{id:"publication-status",checked:N,onCheckedChange:j})]}),k&&a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-orange-900",children:"Unsaved Changes"}),a.jsx("p",{className:"text-xs text-orange-700 mt-1",children:"Click save to update WOD settings"})]}),a.jsx(fe,{onClick:L,disabled:E,size:"sm",className:"bg-orange-600 hover:bg-orange-700",children:E?a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-white mr-2"}),"Saving..."]}):"Save Settings"})]})}),a.jsx(Pd,{}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium mb-3",children:"WOD Categories & Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(_t,{className:"text-sm font-medium",children:"Category"}),a.jsxs("select",{className:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 mt-1",children:[a.jsx("option",{value:"",children:"Select Category"}),a.jsx("option",{value:"strength",children:"Strength Training"}),a.jsx("option",{value:"cardio",children:"Cardiovascular"}),a.jsx("option",{value:"hiit",children:"HIIT"}),a.jsx("option",{value:"flexibility",children:"Flexibility & Mobility"}),a.jsx("option",{value:"functional",children:"Functional Fitness"}),a.jsx("option",{value:"olympic",children:"Olympic Lifting"}),a.jsx("option",{value:"bodyweight",children:"Bodyweight"}),a.jsx("option",{value:"crossfit",children:"CrossFit Style"})]})]}),a.jsxs("div",{children:[a.jsx(_t,{className:"text-sm font-medium",children:"Workout Type"}),a.jsxs("select",{className:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 mt-1",children:[a.jsx("option",{value:"",children:"Select Type"}),a.jsx("option",{value:"strength",children:"Strength"}),a.jsx("option",{value:"cardio",children:"Cardio"}),a.jsx("option",{value:"hiit",children:"HIIT"}),a.jsx("option",{value:"endurance",children:"Endurance"}),a.jsx("option",{value:"power",children:"Power"}),a.jsx("option",{value:"flexibility",children:"Flexibility"}),a.jsx("option",{value:"recovery",children:"Recovery"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(_t,{className:"text-sm font-medium",children:"Difficulty Level"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Set the difficulty level"})]}),a.jsxs("select",{className:"text-sm border rounded px-2 py-1",children:[a.jsx("option",{children:"Beginner"}),a.jsx("option",{children:"Intermediate"}),a.jsx("option",{children:"Advanced"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(_t,{className:"text-sm font-medium",children:"Progress Tracking"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Track user progress (ready for future functionality)"})]}),a.jsx(kp,{defaultChecked:!0,disabled:!0,className:"opacity-50"})]})]})]})]})]}),d==="elements"&&a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsx("h2",{className:"font-semibold text-lg mb-3",children:"Elements"}),a.jsxs("div",{className:"relative",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ct,{placeholder:"Search elements...",value:m,onChange:U=>x(U.target.value),className:"w-full pl-10"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:a.jsxs("div",{className:"space-y-6",children:[V&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Basic Elements"}),a.jsx("div",{className:"space-y-3",children:K.map(([U,G])=>{const ee=G.icon;return a.jsxs(fe,{variant:"outline",onClick:()=>{t(U),p(null)},className:"w-full h-auto p-4 flex items-start space-x-3 hover:bg-gray-50 transition-colors text-left",children:[a.jsx(ee,{className:"h-5 w-5 text-gray-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:G.label}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:G.description})]})]},U)})})]}),D&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Content Elements"}),a.jsx("div",{className:"space-y-3",children:q.map(([U,G])=>{const ee=G.icon;return a.jsxs(fe,{variant:"outline",onClick:()=>{t(U),p(null)},className:"w-full h-auto p-4 flex items-start space-x-3 hover:bg-gray-50 transition-colors text-left",children:[a.jsx(ee,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:G.label}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:G.description})]}),a.jsx(At,{variant:"secondary",className:"text-xs ml-2",children:"Repository"})]},U)})})]}),!V&&!D&&m&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(dd,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No elements found"}),a.jsx("p",{className:"text-xs",children:"Try adjusting your search"})]})]})})]}),d==="content"&&a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsx("h2",{className:"font-semibold text-lg mb-3",children:"Content"}),a.jsxs("div",{className:"relative",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ct,{placeholder:"Search content blocks...",value:m,onChange:U=>x(U.target.value),className:"w-full pl-10"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:a.jsx("div",{className:"space-y-3",children:q.map(([U,G])=>{const ee=G.icon;return a.jsxs(fe,{variant:"outline",onClick:()=>{const Q={video:"video",agent:"ai_agent",document:"document",prompt:"prompt",automation:"automation",image:"image",pdf:"pdf"};U in Q?(R(Q[U]),M(!0)):(t(U),p(null))},className:"w-full h-auto p-4 flex items-start space-x-3 hover:bg-gray-50 transition-colors text-left",children:[a.jsx(ee,{className:"h-5 w-5 text-gray-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:G.label}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Select from ",G.label.toLowerCase()," repository"]})]})]},U)})})})]}),d==="pages"&&a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h2",{className:"font-semibold text-lg",children:"Pages"}),a.jsxs(fe,{size:"sm",onClick:e,children:[a.jsx(Vt,{className:"h-4 w-4 mr-1"}),"New"]})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage WOD pages"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:a.jsxs("div",{className:"space-y-2",children:[n.map((U,G)=>a.jsx("div",{onClick:()=>{r(U.id),p(null)},className:ge("p-3 rounded-lg border cursor-pointer transition-colors",i===U.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:bg-gray-50"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:G+1}),a.jsx("span",{className:"font-medium text-sm",children:U.title})]}),a.jsxs(At,{variant:"outline",className:"text-xs",children:[U.blocks," blocks"]})]})},U.id)),n.length===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Sh,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No pages yet"}),a.jsx("p",{className:"text-xs",children:"Create your first page to get started"})]})]})})]})]}),T&&P&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx(KOe,{contentType:P,onSelect:$,onCancel:F,className:"max-w-4xl w-full mx-4"})})]})}function JOe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){const i=t.content||{},s=i.title||"",o=i.subtitle||"",l=i.level||1,c=d=>{e({...i,title:d})},u=d=>{e({...i,subtitle:d})},f=d=>{e({...i,level:parseInt(d)})};if(n){const d=`h${l}`;return a.jsxs("div",{className:"p-4",children:[a.jsx(d,{className:`font-bold mb-2 ${l===1?"text-3xl":l===2?"text-2xl":l===3?"text-xl":l===4?"text-lg":l===5?"text-base":"text-sm"}`,children:s||"Untitled Section"}),o&&a.jsx("p",{className:"text-gray-600 text-sm",children:o})]})}return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"title",children:"Section Title"}),a.jsx(ct,{id:"title",value:s,onChange:d=>c(d.target.value),placeholder:"Enter section title...",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"subtitle",children:"Subtitle (optional)"}),a.jsx(ct,{id:"subtitle",value:o,onChange:d=>u(d.target.value),placeholder:"Enter subtitle...",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"level",children:"Heading Level"}),a.jsxs(ec,{value:l.toString(),onValueChange:f,children:[a.jsx(Da,{className:"mt-1",children:a.jsx(tc,{placeholder:"Select heading level"})}),a.jsxs(La,{children:[a.jsx(kt,{value:"1",children:"H1 - Main Title"}),a.jsx(kt,{value:"2",children:"H2 - Section Title"}),a.jsx(kt,{value:"3",children:"H3 - Subsection"}),a.jsx(kt,{value:"4",children:"H4 - Small Heading"}),a.jsx(kt,{value:"5",children:"H5 - Tiny Heading"})]})]})]})]})}function QOe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){const i=t.content||{},s=i.html||"<p>Enter your text here...</p>";i.text;const o=Rv({extensions:[d0.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1}}),xp,bp,CH.configure({types:["heading","paragraph"]}),NC.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 hover:text-blue-800 underline"}}),f0,u0.configure({placeholder:"Start typing your content here..."})],content:s,editable:!n,onUpdate:({editor:y})=>{const v=y.getHTML(),b=y.getText();e({html:v,text:b})}});if(O.useEffect(()=>{o&&o.getHTML()!==s&&o.commands.setContent(s)},[o,s]),!o)return a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})});const l=()=>o.chain().focus().toggleBold().run(),c=()=>o.chain().focus().toggleItalic().run(),u=()=>o.chain().focus().toggleUnderline().run(),f=()=>o.chain().focus().toggleStrike().run(),d=y=>o.chain().focus().setTextAlign(y).run(),p=()=>o.chain().focus().toggleBulletList().run(),m=()=>o.chain().focus().toggleOrderedList().run(),x=()=>{const y=o.getAttributes("link").href,v=window.prompt("URL",y);if(v!==null){if(v===""){o.chain().focus().extendMarkRange("link").unsetLink().run();return}o.chain().focus().extendMarkRange("link").setLink({href:v}).run()}};return n?a.jsx("div",{className:"p-4",children:a.jsx("div",{dangerouslySetInnerHTML:{__html:s},className:"prose prose-sm max-w-none"})}):a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx(_t,{className:"text-base font-semibold mb-4 block",children:"Content Editor"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Use the toolbar below to format your text. Changes will be reflected on the canvas in real-time."})]}),a.jsx(Pd,{}),a.jsx("div",{className:"border border-gray-200 rounded-lg bg-gray-50 p-2",children:a.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:l,className:ge("h-8 w-8 p-0",o.isActive("bold")&&"bg-gray-200"),children:a.jsx(my,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:c,className:ge("h-8 w-8 p-0",o.isActive("italic")&&"bg-gray-200"),children:a.jsx(vy,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:u,className:ge("h-8 w-8 p-0",o.isActive("underline")&&"bg-gray-200"),children:a.jsx(qB,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:f,className:ge("h-8 w-8 p-0",o.isActive("strike")&&"bg-gray-200"),children:a.jsx(BB,{className:"w-4 h-4"})}),a.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1 self-center"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>d("left"),className:ge("h-8 w-8 p-0",o.isActive({textAlign:"left"})&&"bg-gray-200"),children:a.jsx(PB,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>d("center"),className:ge("h-8 w-8 p-0",o.isActive({textAlign:"center"})&&"bg-gray-200"),children:a.jsx(TB,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>d("right"),className:ge("h-8 w-8 p-0",o.isActive({textAlign:"right"})&&"bg-gray-200"),children:a.jsx(MB,{className:"w-4 h-4"})}),a.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1 self-center"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:p,className:ge("h-8 w-8 p-0",o.isActive("bulletList")&&"bg-gray-200"),children:a.jsx(rs,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:m,className:ge("h-8 w-8 p-0",o.isActive("orderedList")&&"bg-gray-200"),children:a.jsx(MO,{className:"w-4 h-4"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:x,className:ge("h-8 w-8 p-0",o.isActive("link")&&"bg-gray-200"),children:a.jsx(E0,{className:"w-4 h-4"})})]})}),a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 min-h-[300px] bg-white",children:a.jsx(Mv,{editor:o,className:"prose prose-gray max-w-none focus:outline-none min-h-[250px]"})}),a.jsxs("div",{className:"text-xs text-gray-500",children:[a.jsx("strong",{children:"Tip:"})," Select text and use the toolbar buttons to format it. Your changes will appear on the canvas immediately."]})]})}function ZOe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){const{user:i}=Ln(),s=O.useRef(null),[o,l]=O.useState([]),[c,u]=O.useState(""),[f,d]=O.useState(!1),[p,m]=O.useState(!1),[x,y]=O.useState(!1),v=t.content||{},b=v.src||"",w=v.alt||"",N=v.caption||"",j=v.width,k=v.height;Z.useEffect(()=>{x&&_()},[x]);const _=async()=>{if(i)try{d(!0);const{data:$,error:F}=await pe.from("uploaded_files").select("*").like("mime_type","image/%").order("created_at",{ascending:!1});if(F)throw F;l($||[])}catch($){console.error("Error loading images:",$)}finally{d(!1)}},E=async $=>{var z;const F=(z=$.target.files)==null?void 0:z[0];if(F){if(!F.type.startsWith("image/")){alert("Please select a valid image file");return}if(F.size>5*1024*1024){alert("File size must be less than 5MB");return}try{m(!0);const W=await new Promise((D,U)=>{const G=new FileReader;G.onloadend=()=>D(G.result),G.onerror=U,G.readAsDataURL(F)}),{data:K,error:q}=await pe.functions.invoke("enhanced-file-upload",{body:{fileData:W,fileName:F.name,fileType:F.type,folder:"page-builder"}});if(q)throw q;const V=K.data;e({...v,src:V.publicUrl,alt:w||F.name,width:void 0,height:void 0}),_()}catch(W){console.error("Error uploading file:",W),alert("Failed to upload image. Please try again.")}finally{m(!1),s.current&&(s.current.value="")}}},A=$=>{e({...v,src:$.file_url,alt:w||$.filename,width:void 0,height:void 0}),y(!1)},T=$=>{e({...v,alt:$})},M=$=>{e({...v,caption:$})},P=($,F)=>{const z=F?parseInt(F,10):void 0;e({...v,[$]:z})},R=()=>{e({...v,src:"",alt:"",caption:"",width:void 0,height:void 0})},L=o.filter($=>c===""||$.filename.toLowerCase().includes(c.toLowerCase()));return n?b?a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("img",{src:b,alt:w,style:{width:j?`${j}px`:"auto",height:k?`${k}px`:"auto",maxWidth:"100%"},className:"rounded-lg shadow-sm mx-auto"}),N&&a.jsx("p",{className:"text-sm text-gray-600 mt-2 italic",children:N})]})}):a.jsxs("div",{className:"p-4 text-center text-gray-500",children:[a.jsx(Eu,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),a.jsx("p",{children:"No image selected"})]}):a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx(_t,{children:"Current Image"}),b?a.jsxs("div",{className:"mt-2 relative",children:[a.jsx("img",{src:b,alt:w,className:"w-full max-w-xs rounded-lg border border-gray-200"}),a.jsx(fe,{variant:"destructive",size:"sm",onClick:R,className:"absolute top-2 right-2 h-6 w-6 p-0",children:a.jsx($r,{className:"h-3 w-3"})})]}):a.jsxs("div",{className:"mt-2 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center text-gray-500",children:[a.jsx(Eu,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{children:"No image selected"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(fe,{onClick:()=>{var $;return($=s.current)==null?void 0:$.click()},disabled:p,size:"sm",children:[a.jsx(Ir,{className:"h-4 w-4 mr-1"}),p?"Uploading...":"Upload New"]}),a.jsx(fe,{variant:"outline",size:"sm",onClick:()=>y(!x),children:x?"Hide Repository":"Browse Repository"})]}),a.jsx("input",{type:"file",ref:s,onChange:E,accept:"image/*",className:"hidden"}),x&&a.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"p-3 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(In,{className:"h-4 w-4 text-gray-400"}),a.jsx(ct,{placeholder:"Search images...",value:c,onChange:$=>u($.target.value),className:"flex-1"})]})}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:f?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading images..."}):L.length>0?a.jsx("div",{className:"grid grid-cols-3 gap-2 p-3",children:L.map($=>a.jsx("button",{onClick:()=>A($),className:"aspect-square bg-gray-100 rounded border hover:border-blue-500 transition-colors overflow-hidden",children:a.jsx("img",{src:$.file_url,alt:$.filename,className:"w-full h-full object-cover"})},$.id))}):a.jsx("div",{className:"p-4 text-center text-gray-500",children:a.jsx("p",{children:"No images found"})})})]}),b&&a.jsxs(a.Fragment,{children:[a.jsx(Pd,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"alt-text",children:"Alt Text"}),a.jsx(ct,{id:"alt-text",value:w,onChange:$=>T($.target.value),placeholder:"Describe this image for accessibility...",className:"mt-1"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Alt text is important for screen readers and SEO"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"caption",children:"Caption (optional)"}),a.jsx(Ai,{id:"caption",value:N,onChange:$=>M($.target.value),placeholder:"Add a caption that will appear below the image...",className:"mt-1 min-h-[60px]"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"width",children:"Width (px)"}),a.jsx(ct,{id:"width",type:"number",value:j||"",onChange:$=>P("width",$.target.value),placeholder:"Auto",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"height",children:"Height (px)"}),a.jsx(ct,{id:"height",type:"number",value:k||"",onChange:$=>P("height",$.target.value),placeholder:"Auto",className:"mt-1"})]})]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Leave dimensions empty for automatic sizing"})]})]})]})}const dW=({fileTypes:t=[],onSelect:e,onCancel:r,allowUpload:n=!0,multiSelect:i=!1,title:s="Content Repository",subtitle:o="Select content from your repository"})=>{const[l,c]=O.useState([]),[u,f]=O.useState([]),[d,p]=O.useState(!0),[m,x]=O.useState(null),[y,v]=O.useState(""),[b,w]=O.useState("grid"),[N,j]=O.useState("created_at"),[k,_]=O.useState("desc"),[E,A]=O.useState(!0),[T,M]=O.useState([]),[P,R]=O.useState(null),[L,$]=O.useState(0),[F,z]=O.useState(!1);O.useEffect(()=>{W()},[]),O.useEffect(()=>{K()},[l,y,N,k,E,t]);const W=async()=>{try{p(!0),x(null);let Q=pe.from("uploaded_files").select("*");if(t.length>0){const re=t.map(J=>J.endsWith("/*")?`file_type.like.${J.replace("/*","/%")}`:`file_type.eq.${J}`);Q=Q.or(re.join(","))}const{data:H,error:Y}=await Q;if(Y)throw Y;c(H||[])}catch(Q){console.error("Error fetching files:",Q),x(Q.message||"Failed to load files")}finally{p(!1)}},K=()=>{let Q=[...l];y.trim()&&(Q=Q.filter(H=>H.file_name.toLowerCase().includes(y.toLowerCase()))),E&&(Q=Q.filter(H=>H.is_published)),Q.sort((H,Y)=>{let re,J;switch(N){case"name":re=H.file_name.toLowerCase(),J=Y.file_name.toLowerCase();break;case"created_at":re=new Date(H.created_at).getTime(),J=new Date(Y.created_at).getTime();break;case"file_size":re=H.file_size,J=Y.file_size;break;default:return 0}return re<J?k==="asc"?-1:1:re>J?k==="asc"?1:-1:0}),f(Q)},q=async Q=>{const H=Q.target.files;if(!H||H.length===0)return;const Y=H[0];try{z(!0),$(0),x(null);const ne=`uploads/${`${Date.now()}-${Y.name.replace(/[^a-zA-Z0-9.-]/g,"_")}`}`,{data:te,error:se}=await pe.storage.from("missions").upload(ne,Y,{cacheControl:"3600",upsert:!1});if(se)throw se;const{data:{user:ve}}=await pe.auth.getUser();if(!ve)throw new Error("User not authenticated");const{data:ie}=await pe.from("users").select("organization_id").eq("id",ve.id).single();if(!(ie!=null&&ie.organization_id))throw new Error("User organization not found");const{data:ye,error:Te}=await pe.from("uploaded_files").insert({file_name:Y.name,file_type:Y.type,file_size:Y.size,storage_path:ne,organization_id:ie.organization_id,uploader_id:ve.id,is_published:!0}).select().single();if(Te)throw Te;await W(),e(ye)}catch(re){console.error("Error uploading file:",re),x(re.message||"Failed to upload file")}finally{z(!1),$(0)}},V=Q=>{if(Q===0)return"0 Bytes";const H=1024,Y=["Bytes","KB","MB","GB"],re=Math.floor(Math.log(Q)/Math.log(H));return parseFloat((Q/Math.pow(H,re)).toFixed(2))+" "+Y[re]},D=Q=>Q.startsWith("image/")?"":Q==="application/pdf"?"":Q.startsWith("video/")?"":"",U=Q=>{if(i){const H=T.includes(Q.id)?T.filter(Y=>Y!==Q.id):[...T,Q.id];M(H)}else R(Q)},G=()=>{P&&e(P)},ee=()=>{const Q=u.filter(H=>T.includes(H.id));Q.length>0&&e(Q[0])};return d?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[80vh] overflow-hidden",children:a.jsxs("div",{className:"flex items-center justify-center h-64",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),a.jsx("span",{className:"ml-3 text-lg",children:"Loading files..."})]})})}):a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:s}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o})]}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:""})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:t.some(Q=>Q.startsWith("video"))?"Search videos...":"Search files...",value:y,onChange:Q=>v(Q.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs("div",{className:"flex border border-gray-300 rounded-md",children:[a.jsx("button",{onClick:()=>w("grid"),className:`p-2 ${b==="grid"?"bg-blue-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:a.jsx(dd,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>w("list"),className:`p-2 ${b==="list"?"bg-blue-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:a.jsx(rs,{className:"h-4 w-4"})})]}),a.jsxs("select",{value:`${N}-${k}`,onChange:Q=>{const[H,Y]=Q.target.value.split("-");j(H),_(Y)},className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"created_at-desc",children:"Newest First"}),a.jsx("option",{value:"created_at-asc",children:"Oldest First"}),a.jsx("option",{value:"name-asc",children:"Name A-Z"}),a.jsx("option",{value:"name-desc",children:"Name Z-A"}),a.jsx("option",{value:"file_size-desc",children:"Largest First"}),a.jsx("option",{value:"file_size-asc",children:"Smallest First"})]}),a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx("input",{type:"checkbox",checked:E,onChange:Q=>A(Q.target.checked),className:"rounded border-gray-300 focus:ring-2 focus:ring-blue-500"}),"Published Only"]})]})]})]}),n&&a.jsx("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:"flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md cursor-pointer transition-colors",children:[a.jsx(Ir,{className:"h-4 w-4"}),F?"Uploading...":"Upload New File",a.jsx("input",{type:"file",onChange:q,className:"hidden",accept:t.join(","),disabled:F})]}),F&&a.jsx("div",{className:"flex-1",children:a.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${L}%`}})})})]})}),m&&a.jsx("div",{className:"p-4 bg-red-50 border-b border-red-200",children:a.jsx("p",{className:"text-red-600",children:m})}),a.jsx("div",{className:"flex-1 overflow-auto p-6",children:u.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No files found"}),a.jsx("p",{className:"text-gray-600",children:y?"Try adjusting your search terms":"Upload some files to get started"})]}):b==="grid"?a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:u.map(Q=>a.jsx("div",{onClick:()=>U(Q),className:`border-2 rounded-lg p-4 cursor-pointer transition-all duration-200 hover:shadow-lg ${i&&T.includes(Q.id)||!i&&(P==null?void 0:P.id)===Q.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl mb-2",children:D(Q.file_type)}),a.jsx("h4",{className:"font-medium text-sm text-gray-900 mb-1 truncate",title:Q.file_name,children:Q.file_name}),a.jsx("p",{className:"text-xs text-gray-500",children:V(Q.file_size)}),a.jsx("p",{className:"text-xs text-gray-400",children:new Date(Q.created_at).toLocaleDateString()})]})},Q.id))}):a.jsx("div",{className:"space-y-2",children:u.map(Q=>a.jsxs("div",{onClick:()=>U(Q),className:`flex items-center gap-4 p-4 rounded-lg cursor-pointer transition-all duration-200 hover:bg-gray-50 ${i&&T.includes(Q.id)||!i&&(P==null?void 0:P.id)===Q.id?"bg-blue-50 border border-blue-200":"border border-gray-200"}`,children:[a.jsx("div",{className:"text-2xl",children:D(Q.file_type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 truncate",children:Q.file_name}),a.jsxs("p",{className:"text-sm text-gray-500",children:[V(Q.file_size),"  ",new Date(Q.created_at).toLocaleDateString()]})]}),!Q.is_published&&a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:"Draft"})]},Q.id))})}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-between items-center",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[u.length," file",u.length!==1?"s":""," found",i&&T.length>0&&`  ${T.length} selected`,!i&&P&&`  ${P.file_name} selected`]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),i&&T.length>0&&a.jsxs("button",{onClick:ee,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors",children:["Select ",T.length," File",T.length!==1?"s":""]}),!i&&P&&a.jsx("button",{onClick:G,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors",children:"Select Content"})]})]})]})})};function eEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){const{user:i}=Ln(),[s,o]=O.useState([]),[l,c]=O.useState(!1),[u,f]=O.useState(!1),d=t.content||{},p=d.video_id,m=s.find(k=>k.id===p),x=d.autoplay||!1,y=d.controls!==!1;O.useEffect(()=>{v()},[]);const v=async()=>{if(i)try{c(!0);const{data:k,error:_}=await pe.from("videos").select("*").eq("status","published").order("created_at",{ascending:!1});if(_)throw _;o(k||[])}catch(k){console.error("Error loading videos:",k)}finally{c(!1)}},b=k=>{e({...d,video_id:k.id,title:k.file_name,description:"",thumbnail:"",url:k.storage_path,platform:"direct",video_id_external:"",duration:0}),f(!1)},w=k=>{e({...d,autoplay:k})},N=k=>{e({...d,controls:k})},j=k=>k.video_url?k.video_url:k.platform==="youtube"&&k.video_id_external?`https://www.youtube.com/embed/${k.video_id_external}?autoplay=${x?1:0}&controls=${y?1:0}`:k.platform==="vimeo"&&k.video_id_external?`https://player.vimeo.com/video/${k.video_id_external}?autoplay=${x?1:0}&controls=${y?1:0}`:null;if(n){if(!m)return a.jsxs("div",{className:"p-4 text-center text-gray-500",children:[a.jsx(si,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),a.jsx("p",{children:"No video selected"})]});const k=j(m);return k?a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:m.platform&&m.platform!=="direct"?a.jsx("iframe",{src:k,title:m.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):a.jsx("video",{src:k,controls:y,autoPlay:x,className:"w-full h-full",poster:m.thumbnail_url,children:"Your browser does not support the video tag."})}),a.jsxs("div",{className:"mt-3",children:[a.jsx("h3",{className:"font-medium",children:m.title}),m.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m.description}),m.duration&&a.jsxs(At,{variant:"secondary",className:"mt-2 text-xs",children:[Math.floor(m.duration/60),":",(m.duration%60).toString().padStart(2,"0")]})]})]}):a.jsx("div",{className:"p-4 text-center text-red-500",children:a.jsx("p",{children:"Invalid video configuration"})})}return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(_t,{children:"Selected Video"}),a.jsx(fe,{size:"sm",onClick:()=>{console.log("Browse Repository button clicked"),f(!0)},className:"bg-blue-500 hover:bg-blue-600 text-white",children:"Browse Repository"})]}),m?a.jsx("div",{className:"border border-gray-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium",children:m.title}),m.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m.description}),a.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[a.jsx(At,{variant:"outline",className:"text-xs",children:m.platform||"Direct"}),m.duration&&a.jsxs(At,{variant:"secondary",className:"text-xs",children:[Math.floor(m.duration/60),":",(m.duration%60).toString().padStart(2,"0")]})]})]}),m.thumbnail_url&&a.jsx("img",{src:m.thumbnail_url,alt:m.title,className:"w-16 h-12 object-cover rounded"})]})}):a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center text-gray-500",children:[a.jsx(si,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{children:"No video selected"}),a.jsx("p",{className:"text-sm",children:"Browse the repository to select a video"})]})]}),u&&a.jsx(dW,{title:"Select Videos",subtitle:"Choose a video from your content repository",fileTypes:["video/*"],onSelect:b,onCancel:()=>f(!1),allowUpload:!0}),m&&a.jsxs(a.Fragment,{children:[a.jsx(Pd,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(_t,{className:"font-medium",children:"Autoplay"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Start playing automatically when visible"})]}),a.jsx(kp,{checked:x,onCheckedChange:w})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(_t,{className:"font-medium",children:"Show Controls"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Display video player controls"})]}),a.jsx(kp,{checked:y,onCheckedChange:N})]})]})]})]})}function tEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){const{user:i}=Ln(),[s,o]=O.useState([]),[l,c]=O.useState(!1),[u,f]=O.useState(!1),d=t.content||{},p=d.agent_id,m=s.find(j=>j.id===p),x=d.initial_message||"",y=d.context||"";O.useEffect(()=>{v()},[]);const v=async()=>{if(i)try{c(!0);const{data:j,error:k}=await pe.from("ai_agents").select("*").eq("status","published").order("created_at",{ascending:!1});if(k)throw k;o(j||[])}catch(j){console.error("Error loading AI agents:",j)}finally{c(!1)}},b=j=>{e({...d,agent_id:j.id,agent_name:j.file_name,agent_description:"AI Agent from file repository",model:"default",avatar_url:""}),f(!1)},w=j=>{e({...d,initial_message:j})},N=j=>{e({...d,context:j})};return n?m?a.jsx("div",{className:"p-4",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:m.avatar_url?a.jsx("img",{src:m.avatar_url,alt:m.name,className:"w-full h-full rounded-full object-cover"}):a.jsx(Kr,{className:"h-5 w-5 text-blue-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-blue-900",children:m.name}),m.description&&a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:m.description}),x&&a.jsx("div",{className:"mt-3 bg-white border border-blue-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Gr,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700",children:x})]})}),a.jsx(fe,{size:"sm",className:"mt-3 bg-blue-600 hover:bg-blue-700",disabled:!0,children:"Start Conversation"})]})]})})}):a.jsxs("div",{className:"p-4 text-center text-gray-500",children:[a.jsx(Kr,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),a.jsx("p",{children:"No AI agent selected"})]}):a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(_t,{children:"Selected AI Agent"}),a.jsx(fe,{size:"sm",onClick:()=>{console.log("Browse Repository button clicked"),f(!0)},className:"bg-blue-500 hover:bg-blue-600 text-white",children:"Browse Repository"})]}),m?a.jsx("div",{className:"border border-gray-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0",children:m.avatar_url?a.jsx("img",{src:m.avatar_url,alt:m.name,className:"w-full h-full rounded-full object-cover"}):a.jsx(Kr,{className:"h-5 w-5 text-gray-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium",children:m.name}),m.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m.description}),a.jsx("div",{className:"flex items-center space-x-2 mt-2",children:a.jsx(At,{variant:"outline",className:"text-xs",children:m.model||"Default Model"})})]})]})}):a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center text-gray-500",children:[a.jsx(Kr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{children:"No AI agent selected"}),a.jsx("p",{className:"text-sm",children:"Browse the repository to select an agent"})]})]}),u&&a.jsx(dW,{title:"Select AI Agent",subtitle:"Choose an AI agent from your content repository",fileTypes:["application/json"],onSelect:b,onCancel:()=>f(!1),allowUpload:!0}),m&&a.jsxs(a.Fragment,{children:[a.jsx(Pd,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"initial-message",children:"Initial Message (optional)"}),a.jsx(Ai,{id:"initial-message",value:x,onChange:j=>w(j.target.value),placeholder:"Enter the agent's greeting message...",className:"mt-1 min-h-[80px]"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This message will be displayed when the agent first loads"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"custom-context",children:"Additional Context (optional)"}),a.jsx(Ai,{id:"custom-context",value:y,onChange:j=>N(j.target.value),placeholder:"Provide additional context specific to this interaction...",className:"mt-1 min-h-[80px]"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Additional context that will be provided to the agent for this specific interaction"})]})]})]})]})}function rEe(t,e){return O.useReducer((r,n)=>e[r][n]??r,t)}var fW=t=>{const{present:e,children:r}=t,n=nEe(e),i=typeof r=="function"?r({present:n.isPresent}):O.Children.only(r),s=yr(n.ref,iEe(i));return typeof r=="function"||n.isPresent?O.cloneElement(i,{ref:s}):null};fW.displayName="Presence";function nEe(t){const[e,r]=O.useState(),n=O.useRef({}),i=O.useRef(t),s=O.useRef("none"),o=t?"mounted":"unmounted",[l,c]=rEe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return O.useEffect(()=>{const u=Yg(n.current);s.current=l==="mounted"?u:"none"},[l]),Sn(()=>{const u=n.current,f=i.current;if(f!==t){const p=s.current,m=Yg(u);t?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),Sn(()=>{if(e){let u;const f=e.ownerDocument.defaultView??window,d=m=>{const y=Yg(n.current).includes(m.animationName);if(m.target===e&&y&&(c("ANIMATION_END"),!i.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",u=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},p=m=>{m.target===e&&(s.current=Yg(n.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{f.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:O.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Yg(t){return(t==null?void 0:t.animationName)||"none"}function iEe(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var XC="Checkbox",[sEe,AEe]=Yp(XC),[oEe,aEe]=sEe(XC),hW=O.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:f,...d}=t,[p,m]=O.useState(null),x=yr(e,j=>m(j)),y=O.useRef(!1),v=p?f||!!p.closest("form"):!0,[b=!1,w]=v0({prop:i,defaultProp:s,onChange:u}),N=O.useRef(b);return O.useEffect(()=>{const j=p==null?void 0:p.form;if(j){const k=()=>w(N.current);return j.addEventListener("reset",k),()=>j.removeEventListener("reset",k)}},[p,w]),a.jsxs(oEe,{scope:r,state:b,disabled:l,children:[a.jsx($t.button,{type:"button",role:"checkbox","aria-checked":Ca(b)?"mixed":b,"aria-required":o,"data-state":gW(b),"data-disabled":l?"":void 0,disabled:l,value:c,...d,ref:x,onKeyDown:Jt(t.onKeyDown,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:Jt(t.onClick,j=>{w(k=>Ca(k)?!0:!k),v&&(y.current=j.isPropagationStopped(),y.current||j.stopPropagation())})}),v&&a.jsx(lEe,{control:p,bubbles:!y.current,name:n,value:c,checked:b,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"},defaultChecked:Ca(s)?!1:s})]})});hW.displayName=XC;var pW="CheckboxIndicator",mW=O.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:n,...i}=t,s=aEe(pW,r);return a.jsx(fW,{present:n||Ca(s.state)||s.state===!0,children:a.jsx($t.span,{"data-state":gW(s.state),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});mW.displayName=pW;var lEe=t=>{const{control:e,checked:r,bubbles:n=!0,defaultChecked:i,...s}=t,o=O.useRef(null),l=$C(r),c=IC(e);O.useEffect(()=>{const f=o.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==r&&m){const x=new Event("click",{bubbles:n});f.indeterminate=Ca(r),m.call(f,Ca(r)?!1:r),f.dispatchEvent(x)}},[l,r,n]);const u=O.useRef(Ca(r)?!1:r);return a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??u.current,...s,tabIndex:-1,ref:o,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ca(t){return t==="indeterminate"}function gW(t){return Ca(t)?"indeterminate":t?"checked":"unchecked"}var yW=hW,cEe=mW;const Yf=O.forwardRef(({className:t,...e},r)=>a.jsx(yW,{ref:r,className:ge("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:a.jsx(cEe,{className:ge("flex items-center justify-center text-current"),children:a.jsx(ko,{className:"h-4 w-4"})})}));Yf.displayName=yW.displayName;function uEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){const i=t.content||{},s=i.type||"unordered",o=i.items||[{id:"1",text:""}],l=i.checklistStyle||!1,c=y=>{e({...i,type:y})},u=y=>{e({...i,checklistStyle:y,items:o.map(v=>({...v,checked:y?!1:void 0}))})},f=(y,v)=>{const b=o.map(w=>w.id===y?{...w,text:v}:w);e({...i,items:b})},d=(y,v)=>{const b=o.map(w=>w.id===y?{...w,checked:v}:w);e({...i,items:b})},p=()=>{const y=(Math.max(...o.map(b=>parseInt(b.id)||0))+1).toString(),v=[...o,{id:y,text:"",...l&&{checked:!1}}];e({...i,items:v})},m=y=>{if(o.length<=1)return;const v=o.filter(b=>b.id!==y);e({...i,items:v})},x=(y,v)=>{const b=[...o],w=y-1;w<0||w>=b.length||([b[y],b[w]]=[b[w],b[y]],e({...i,items:b}))};return n?a.jsx("div",{className:"p-4",children:s==="ordered"?a.jsx("ol",{className:"list-decimal list-inside space-y-2",children:o.map((y,v)=>a.jsx("li",{className:"flex items-start",children:l?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Yf,{checked:y.checked||!1,disabled:!0,className:"mt-0.5"}),a.jsx("span",{className:y.checked?"line-through text-gray-500":"",children:y.text||`Item ${v+1}`})]}):a.jsx("span",{children:y.text||`Item ${v+1}`})},y.id))}):a.jsx("ul",{className:"list-disc list-inside space-y-2",children:o.map((y,v)=>a.jsx("li",{className:"flex items-start",children:l?a.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[a.jsx(Yf,{checked:y.checked||!1,disabled:!0,className:"mt-0.5"}),a.jsx("span",{className:y.checked?"line-through text-gray-500":"",children:y.text||`Item ${v+1}`})]}):a.jsx("span",{className:"ml-4",children:y.text||`Item ${v+1}`})},y.id))})}):a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"list-type",children:"List Type"}),a.jsxs(ec,{value:s,onValueChange:c,children:[a.jsx(Da,{className:"mt-1",children:a.jsx(tc,{placeholder:"Select list type"})}),a.jsxs(La,{children:[a.jsx(kt,{value:"unordered",children:"Bulleted List"}),a.jsx(kt,{value:"ordered",children:"Numbered List"})]})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Yf,{id:"checklist-style",checked:l,onCheckedChange:u}),a.jsx(_t,{htmlFor:"checklist-style",className:"text-sm",children:"Interactive Checklist"})]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(_t,{children:"List Items"}),a.jsxs(fe,{size:"sm",onClick:p,children:[a.jsx(Vt,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),o.map((y,v)=>a.jsxs("div",{className:"flex items-center space-x-2 group",children:[a.jsx("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>x(v),disabled:v===0,className:"h-8 w-8 p-0",children:a.jsx(DB,{className:"h-4 w-4"})})}),l&&a.jsx(Yf,{checked:y.checked||!1,onCheckedChange:b=>d(y.id,b)}),a.jsx(ct,{value:y.text,onChange:b=>f(y.id,b.target.value),placeholder:`Item ${v+1}...`,className:"flex-1"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>m(y.id),disabled:o.length<=1,className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(RO,{className:"h-4 w-4"})})]},y.id))]})]})}function dEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){const i=t.content||{},s=i.text||"",o=i.author||"",l=i.source||"",c=d=>{e({...i,text:d})},u=d=>{e({...i,author:d})},f=d=>{e({...i,source:d})};return n?a.jsx("div",{className:"p-4",children:a.jsxs("blockquote",{className:"border-l-4 border-blue-500 bg-blue-50 p-4 italic",children:[a.jsxs("p",{className:"text-gray-800 text-lg mb-2",children:['"',s||"Enter your quote text...",'"']}),(o||l)&&a.jsxs("footer",{className:"text-gray-600 text-sm",children:[o&&a.jsx("span",{className:"font-medium",children:o}),o&&l&&a.jsx("span",{children:", "}),l&&a.jsx("cite",{className:"not-italic",children:l})]})]})}):a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"quote-text",children:"Quote Text"}),a.jsx(Ai,{id:"quote-text",value:s,onChange:d=>c(d.target.value),placeholder:"Enter the quote text...",className:"mt-1 min-h-[100px]"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"quote-author",children:"Author (optional)"}),a.jsx(ct,{id:"quote-author",value:o,onChange:d=>u(d.target.value),placeholder:"Quote author...",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(_t,{htmlFor:"quote-source",children:"Source (optional)"}),a.jsx(ct,{id:"quote-source",value:l,onChange:d=>f(d.target.value),placeholder:"Source or publication...",className:"mt-1"})]})]})}function fEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){return Z.createElement("div",{className:"p-4 text-center text-gray-500"},Z.createElement("p",null,"Document editor coming soon"),Z.createElement("p",{className:"text-sm"},"This will integrate with the document repository"))}function hEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){return Z.createElement("div",{className:"p-4 text-center text-gray-500"},Z.createElement("p",null,"Prompt editor coming soon"),Z.createElement("p",{className:"text-sm"},"This will integrate with the prompts repository"))}function pEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){return Z.createElement("div",{className:"p-4 text-center text-gray-500"},Z.createElement("p",null,"Automation editor coming soon"),Z.createElement("p",{className:"text-sm"},"This will integrate with the automations repository"))}function mEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){return Z.createElement("div",{className:"p-4 text-center text-gray-500"},Z.createElement("p",null,"Quiz editor coming soon"),Z.createElement("p",{className:"text-sm"},"This will include question creation and scoring"))}function gEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){return Z.createElement("div",{className:"p-4 text-center text-gray-500"},Z.createElement("p",null,"Accordion editor coming soon"),Z.createElement("p",{className:"text-sm"},"This will create expandable sections"))}function yEe({block:t,onContentChange:e,onConfigChange:r,isPreview:n}){return Z.createElement("div",{className:"p-4 text-center text-gray-500"},Z.createElement("p",null,"User submission editor coming soon"),Z.createElement("p",{className:"text-sm"},"This will create forms for user data collection"))}function Fk(){const{type:t,id:e}=us(),r=Ti(),{user:n}=Ln(),{structure:i,currentPage:s,selectedBlock:o,isEditing:l,previewMode:c,loading:u,error:f,loadStructure:d,createPage:p,updatePage:m,navigateToPage:x,createBlock:y,updateBlock:v,deleteBlock:b,reorderBlocks:w,setSelectedBlock:N,setIsEditing:j,setPreviewMode:k}=C8(t==="wods"?"mission":"course",e||""),_=O.useCallback(async Ae=>{var ut,wt;if(!i)return;const Me=t==="wods",Re=Me?qf:zf,sr=Me?(ut=i.mission)==null?void 0:ut.id:(wt=i.course)==null?void 0:wt.id;if(!sr)throw new Error("Parent ID not found");try{await Re.update(sr,Ae),await d()}catch(ci){throw console.error("Failed to update structure:",ci),ci}},[i,t,d]),{trackProgress:E}=A8(t==="wods"?"mission":"course",e||""),[A,T]=O.useState("desktop"),[M,P]=O.useState(!1),[R,L]=O.useState({isOpen:!1}),[$,F]=O.useState(!1),[z,W]=O.useState("idle"),[K,q]=O.useState(null),[V,D]=O.useState(null),[U,G]=O.useState(null),ee=Fx(Bx(Ad,{activationConstraint:{distance:8}})),Q=O.useRef(!0),H=O.useRef(null),Y=O.useMemo(()=>s?{id:s.id,title:s.title,description:s.description,status:s.status,is_locked:s.is_locked,unlock_conditions:s.unlock_conditions,page_config:s.page_config,order_index:s.order_index}:null,[s==null?void 0:s.id,s==null?void 0:s.title,s==null?void 0:s.description,s==null?void 0:s.status]);O.useEffect(()=>{e&&Q.current&&d(!0)},[e,d]),O.useEffect(()=>()=>{Q.current=!1,H.current&&H.current.abort()},[]);const re=O.useCallback(async Ae=>{if(!s||!Q.current){console.warn("Cannot add block - no current page or component unmounted");return}try{const Me=Xye[Ae];if(!Me)throw new Error(`Unknown block type: ${Ae}`);console.log("Creating block of type:",Ae);const Re=await y(Ae,Me.defaultContent||{});Re&&Q.current&&(N(Re),P(!0),j(!0),E({progressType:"block_interacted",pageId:s.id,progressData:{action:"block_created",blockType:Ae}}))}catch(Me){console.error("Failed to add block:",Me),q(Me instanceof Error?Me.message:"Failed to add block"),W("error")}},[s,y,E,N,j]),J=O.useCallback(async(Ae,Me)=>{new AbortController;try{await v(Ae,{content:Me}),Q.current&&j(!0)}catch(Re){Re.name!=="AbortError"&&(console.error("Failed to update block content:",Re),q(Re instanceof Error?Re.message:"Failed to update block"),W("error"))}},[v,j]),ne=O.useCallback(Ae=>{Q.current&&(N(Ae),P(!0),j(!1))},[N,j]),te=O.useCallback(Ae=>{Q.current&&(N(Ae),P(!0),j(!0))},[N,j]),se=O.useCallback(async(Ae,Me)=>{new AbortController;try{await v(Ae,Me),Q.current&&j(!0)}catch(Re){Re.name!=="AbortError"&&(console.error("Failed to update block:",Re),q(Re instanceof Error?Re.message:"Failed to update block"),W("error"))}},[v,j]),ve=O.useCallback(Ae=>{L({isOpen:!0,blockId:Ae})},[]),ie=O.useCallback(async()=>{if(!R.blockId||!Q.current)return;const Ae=new AbortController,Me=setTimeout(()=>{Ae.abort(),q("Delete operation timed out - please try again"),W("error")},1e4);try{await b(R.blockId),clearTimeout(Me),L({isOpen:!1}),(o==null?void 0:o.id)===R.blockId&&(N(null),P(!1))}catch(Re){clearTimeout(Me),Re.name!=="AbortError"&&(console.error("Failed to delete block:",Re),q(Re instanceof Error?Re.message:"Failed to delete block"),W("error"))}},[R.blockId,b,o,N]),ye=O.useCallback(async Ae=>{new AbortController;try{await w(Ae),Q.current&&j(!0)}catch(Me){Me.name!=="AbortError"&&(console.error("Failed to reorder blocks:",Me),q(Me instanceof Error?Me.message:"Failed to reorder blocks"),W("error"))}},[w,j]),Te=O.useCallback(async()=>{if(!Y||!Q.current){console.warn("Save attempted without valid page data");return}if(H.current){console.log("Save operation already in progress");return}W("saving"),F(!0),q(null);const Ae=new AbortController;H.current=Ae;try{console.log("Saving WOD page data:",Y.title),await m(Y),Q.current&&(W("saved"),j(!1),H.current=null,console.log("WOD saved successfully - staying on current page"),setTimeout(()=>{Q.current&&z!=="saving"&&W("idle")},3e3))}catch(Me){if(Me.name!=="AbortError"&&Q.current){console.error("Save failed:",Me);const Re=Me instanceof Error?Me.message:"Failed to save";q(Re),W("error"),H.current=null,setTimeout(()=>{Q.current&&(q(null),W("idle"))},1e4)}}finally{Q.current&&F(!1)}},[Y,m,j,z]),Le=O.useCallback(()=>{Q.current&&(k(!c),c||P(!1))},[c,k]),ue=O.useCallback(async()=>{if(!i||!Q.current)return;const Ae=new AbortController,Me=setTimeout(()=>{Ae.abort(),q("Page creation timed out - please try again"),W("error")},15e3);try{const Re=i.pages.length+1,sr=await p({title:`Page ${Re}`,description:"",is_locked:!1,status:"draft"});clearTimeout(Me),sr&&Q.current&&x(sr)}catch(Re){clearTimeout(Me),Re.name!=="AbortError"&&(console.error("Failed to create page:",Re),q(Re instanceof Error?Re.message:"Failed to create page"),W("error"))}},[i,p,x]),he=O.useCallback(Ae=>{const Me=i==null?void 0:i.pages.find(Re=>Re.id===Ae);Me&&Q.current&&(x(Me),P(!1),N(null))},[i==null?void 0:i.pages,x,N]),we=O.useCallback(Ae=>{const{active:Me}=Ae;if(D(Me.id),s!=null&&s.blocks){const Re=s.blocks.find(sr=>sr.id===Me.id);G(Re||null)}},[s==null?void 0:s.blocks]),Oe=O.useCallback(Ae=>{var sr;const{active:Me,over:Re}=Ae;if(D(null),G(null),!!Re){if(((sr=Me.data.current)==null?void 0:sr.type)==="block-type"){const ut=Me.data.current.blockType;re(ut);return}if(Me.id!==Re.id&&(s!=null&&s.blocks)){const ut=s.blocks.findIndex(ci=>ci.id===Me.id),wt=s.blocks.findIndex(ci=>ci.id===Re.id);if(ut!==-1&&wt!==-1){const dc=Td(s.blocks,ut,wt).map(fc=>fc.id);ye(dc)}}}},[s==null?void 0:s.blocks,re,ye]),be=O.useCallback(()=>{if(!o)return null;const Ae={block:o,onContentChange:Me=>{J(o.id,Me)},onConfigChange:Me=>{se(o.id,{config:Me})},isPreview:!1};switch(o.block_type){case"rich_text":return a.jsx(QOe,{...Ae});case"section_header":return a.jsx(JOe,{...Ae});case"image":return a.jsx(ZOe,{...Ae});case"video":return a.jsx(eEe,{...Ae});case"agent":return a.jsx(tEe,{...Ae});case"list":return a.jsx(uEe,{...Ae});case"quote":return a.jsx(dEe,{...Ae});case"document":return a.jsx(fEe,{...Ae});case"prompt":return a.jsx(hEe,{...Ae});case"automation":return a.jsx(pEe,{...Ae});case"quiz":return a.jsx(mEe,{...Ae});case"accordion":return a.jsx(gEe,{...Ae});case"user_submission":return a.jsx(yEe,{...Ae});default:return a.jsxs("div",{className:"p-4 text-center text-gray-500",children:[a.jsxs("p",{children:["Editor not available for ",o.block_type]}),a.jsx("p",{className:"text-sm",children:"Using fallback to generic editor"})]})}},[o,J,se]),We=()=>{switch(A){case"mobile":return"max-w-sm mx-auto";case"tablet":return"max-w-2xl mx-auto";case"desktop":default:return"max-w-full"}},Je=Ae=>{switch(Ae){case"mobile":return UX;case"tablet":return HX;case"desktop":return $X}};if(u)return a.jsx("div",{className:"h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading WOD builder..."})]})});if(f||!i)return a.jsx("div",{className:"h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 max-w-md",children:[a.jsx(ql,{className:"h-8 w-8 text-red-600 mx-auto mb-4"}),a.jsxs("p",{className:"text-red-800 text-center mb-4",children:["Error: ",f||"Failed to load content"]}),a.jsxs(fe,{onClick:()=>r("/training-zone"),variant:"outline",className:"w-full",children:[a.jsx(lo,{className:"h-4 w-4 mr-2"}),"Back to Training Zone"]})]})});const Ye=t==="wods"?i.mission:i.course;return Ye?a.jsxs("div",{className:"h-screen bg-gray-50 flex overflow-hidden",children:[!c&&a.jsx(XOe,{onBlockAdd:re,onPageCreate:ue,onPageSelect:he,pages:i.pages.map(Ae=>{var Me;return{id:Ae.id,title:Ae.title,blocks:((Me=Ae.blocks)==null?void 0:Me.length)||0}}),currentPageId:s==null?void 0:s.id,structure:Ye,onSave:Te,onPreview:Le,isPreviewMode:c,onStructureUpdate:_}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",style:{marginLeft:c?"0":"64px"},children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>r("/training-zone"),className:"text-gray-600 hover:text-gray-900",children:[a.jsx(lo,{className:"h-4 w-4 mr-2"}),"Back to Training Zone"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:Ye.title}),a.jsxs("p",{className:"text-sm text-gray-600",children:[Ye.status,"  ",i.pages.length," pages",s&&`  Page: ${s.title}`]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[!c&&a.jsx("div",{className:"flex items-center border border-gray-200 rounded-lg",children:["desktop","tablet","mobile"].map(Ae=>{const Me=Je(Ae);return a.jsx(fe,{variant:A===Ae?"default":"ghost",size:"sm",onClick:()=>T(Ae),className:"rounded-none first:rounded-l-lg last:rounded-r-lg",children:a.jsx(Me,{className:"h-4 w-4"})},Ae)})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[z==="saving"&&a.jsxs("div",{className:"flex items-center text-blue-600 text-sm",children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-blue-600 mr-2"}),"Saving..."]}),z==="saved"&&a.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[a.jsx(ln,{className:"h-3 w-3 mr-1"}),"Saved"]}),z==="error"&&K&&a.jsxs("div",{className:"flex items-center text-red-600 text-sm",children:[a.jsx(ql,{className:"h-3 w-3 mr-1"}),K]}),l&&z==="idle"&&a.jsx(At,{variant:"outline",className:"text-orange-600",children:"Unsaved Changes"})]}),a.jsx(fe,{variant:c?"default":"outline",size:"sm",onClick:Le,className:"min-w-[100px]",children:c?a.jsxs(a.Fragment,{children:[a.jsx(TO,{className:"h-4 w-4 mr-2"}),"Exit Preview"]}):a.jsxs(a.Fragment,{children:[a.jsx(ii,{className:"h-4 w-4 mr-2"}),"Preview"]})}),a.jsxs(fe,{onClick:Te,disabled:$||!l,size:"sm",className:"min-w-[80px]",children:[$?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b border-white mr-2"}):a.jsx(Cp,{className:"h-4 w-4 mr-2"}),"Save"]})]})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[a.jsx("div",{className:ge("flex-1 overflow-auto",c&&"bg-white",!c&&M&&"mr-96"),children:a.jsx("div",{className:ge("min-h-full",We()),children:a.jsx(Ux,{sensors:ee,onDragStart:we,onDragEnd:Oe,children:a.jsx("div",{className:ge("min-h-full",c?"bg-white":"bg-gray-50 p-8"),children:s?a.jsx("div",{className:ge("bg-white rounded-lg shadow-sm",c?"min-h-screen":"min-h-[600px] p-6"),children:s.blocks&&s.blocks.length>0?a.jsx(Wx,{items:s.blocks.map(Ae=>Ae.id),strategy:Hx,children:a.jsx("div",{className:"space-y-4",children:s.blocks.map(Ae=>a.jsxs("div",{className:ge("group relative",!c&&"border border-transparent hover:border-gray-300 rounded-lg transition-colors",(o==null?void 0:o.id)===Ae.id&&!c&&"border-blue-500 bg-blue-50/50"),onClick:()=>!c&&ne(Ae),children:[!c&&a.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:a.jsxs("div",{className:"flex items-center space-x-1 bg-white border border-gray-200 rounded-lg shadow-sm p-1",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:Me=>{Me.stopPropagation(),te(Ae)},className:"h-6 w-6 p-0",children:a.jsx(FX,{className:"h-3 w-3"})}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:Me=>{Me.stopPropagation(),ve(Ae.id)},className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",children:a.jsx(ns,{className:"h-3 w-3"})})]})}),a.jsx(tW,{block:Ae,isEditing:!c&&(o==null?void 0:o.id)===Ae.id,isSelected:(o==null?void 0:o.id)===Ae.id,onContentChange:(Me,Re)=>J(Me,Re)})]},Ae.id))})}):a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Sh,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["Start building your ",t==="wods"?"WOD":"block"]}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Add blocks from the left panel to create engaging content"}),a.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Use the left sidebar to add blocks and manage content"})]})})}):a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ot,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No page selected"}),a.jsx("p",{className:"text-gray-500",children:"Select a page from the pages panel to start editing"})]})})})})})}),!c&&M&&o&&a.jsxs("div",{className:"w-96 bg-white border-l border-gray-200 flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[(()=>{const Ae=(()=>{switch(o.block_type){case"section_header":return IX;case"rich_text":return DO;case"list":return rs;case"quote":return xy;case"image":return Eu;case"video":return si;case"agent":return Kr;case"document":return Ot;case"prompt":return Gr;case"automation":return Ei;case"quiz":return AO;case"user_submission":return Ir;default:return Dn}})();return a.jsx(Ae,{className:"h-5 w-5 text-gray-600"})})(),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:(()=>{switch(o.block_type){case"section_header":return"Section Header";case"rich_text":return"Rich Text";case"list":return"List";case"quote":return"Quote";case"image":return"Image";case"video":return"Video";case"agent":return"AI Agent";case"document":return"Document";case"prompt":return"Prompts";case"automation":return"Automation";case"quiz":return"Quiz";case"user_submission":return"User Form";default:return"Block"}})()}),a.jsx("p",{className:"text-sm text-gray-500",children:"Configure block content and settings"})]})]}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>P(!1),className:"h-8 w-8 p-0",children:a.jsx($r,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex-1 overflow-auto",children:be()})]})]})]}),a.jsx(T8,{isOpen:R.isOpen,onClose:()=>L({isOpen:!1}),onConfirm:ie,title:"Delete Block",message:"Are you sure you want to delete this block? This action cannot be undone.",confirmText:"Delete",variant:"destructive"})]}):a.jsx("div",{className:"h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 max-w-md",children:[a.jsx("p",{className:"text-red-800 text-center mb-4",children:"Content not found"}),a.jsxs(fe,{onClick:()=>r("/training-zone"),variant:"outline",className:"w-full",children:[a.jsx(lo,{className:"h-4 w-4 mr-2"}),"Back to Training Zone"]})]})})}function vEe({value:t=0,max:e=100,className:r,...n}){const i=Math.min(Math.max(t/e*100,0),100);return a.jsx("div",{className:ge("relative h-2 w-full overflow-hidden rounded-full bg-gray-200",r),...n,children:a.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300 ease-in-out",style:{width:`${i}%`}})})}function xEe(){const{type:t,id:e}=us(),r=Ti(),{user:n}=Ln(),{structure:i,currentPage:s,loading:o,error:l,loadStructure:c,navigateToPageIndex:u}=C8(t==="missions"?"mission":"course",e||""),{progressMetrics:f,trackProgress:d}=A8(t==="missions"?"mission":"course",e||""),[p,m]=O.useState(!1),[x,y]=O.useState(0),[v,b]=O.useState(null);O.useEffect(()=>{e&&n&&(c(!0),b(new Date))},[e,n,c]),O.useEffect(()=>{s&&n&&d({progressType:"page_started",pageId:s.id,progressData:{timestamp:new Date().toISOString(),pageIndex:x}})},[s,n,d,x]),O.useEffect(()=>()=>{if(v&&s&&n){const T=Math.floor((new Date().getTime()-v.getTime())/1e3);T>10&&d({progressType:"page_completed",pageId:s.id,completionPercentage:100,timeSpent:T,progressData:{completed:!0,endTime:new Date().toISOString()}})}},[v,s,n,d]);const w=()=>{if(x>0){const T=x-1;y(T),u(T),b(new Date)}},N=()=>{if(i&&x<i.pages.length-1){const T=x+1;y(T),u(T),b(new Date)}},j=T=>{y(T),u(T),m(!1),b(new Date)},k=(T,M)=>{n&&s&&d({progressType:"block_interacted",pageId:s.id,blockId:T,progressData:{interactionProgress:M,timestamp:new Date().toISOString()}})},_=T=>f.lastActivity?f.lastActivity.page_id===T.id&&f.lastActivity.progress_type==="page_completed":!1,E=()=>i!=null&&i.pages.length?f.completedPages/i.pages.length*100:0;if(o)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your learning experience..."})]})});if(l||!i)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-red-500 mb-4",children:a.jsx(Zn,{className:"w-12 h-12 mx-auto"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Content not available"}),a.jsx("p",{className:"text-gray-600 mb-6",children:l||"The requested content could not be found."}),a.jsx(fe,{onClick:()=>r("/dashboard"),variant:"outline",children:"Return to Dashboard"})]})});const A=t==="missions"?i.mission:i.course;return A?a.jsxs("div",{className:"min-h-screen bg-white",children:[a.jsxs("div",{className:"sticky top-0 z-40 bg-white border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>m(!0),className:"md:hidden",children:a.jsx(LX,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(Zn,{className:"w-4 h-4 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-semibold text-gray-900 text-sm md:text-base truncate max-w-48",children:A.title}),a.jsxs("p",{className:"text-xs text-gray-500",children:[x+1," of ",i.pages.length]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"text-right hidden sm:block",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[Math.round(E()),"% Complete"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[f.completedPages," of ",i.pages.length," pages"]})]}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>r("/dashboard"),children:"Exit"})]})]}),a.jsx("div",{className:"px-4 pb-3",children:a.jsx(vEe,{value:E(),className:"h-2"})})]}),a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"hidden md:block w-80 bg-gray-50 border-r border-gray-200 h-screen sticky top-16 overflow-y-auto",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(At,{variant:A.status==="published"?"default":"secondary",children:A.status}),A.difficulty_level&&a.jsx(At,{variant:"outline",children:A.difficulty_level})]}),A.description&&a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:A.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[A.estimated_duration_minutes&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(go,{className:"w-3 h-3"}),a.jsxs("span",{children:[A.estimated_duration_minutes,"min"]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(TX,{className:"w-3 h-3"}),a.jsxs("span",{children:[f.completedPages," completed"]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Pages"}),a.jsx("nav",{className:"space-y-1",children:i.pages.map((T,M)=>{const P=_(T),R=M===x;return a.jsxs("button",{onClick:()=>j(M),className:ge("w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center space-x-2",R?"bg-blue-100 text-blue-900 font-medium":"text-gray-700 hover:bg-gray-200"),disabled:T.is_locked,children:[a.jsx("div",{className:"flex-shrink-0",children:P?a.jsx(ln,{className:"w-4 h-4 text-green-500"}):a.jsx(vM,{className:ge("w-4 h-4",R?"text-blue-600":"text-gray-400")})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:ge("truncate",T.is_locked?"text-gray-400":""),children:T.title}),T.description&&a.jsx("div",{className:"text-xs text-gray-500 truncate",children:T.description})]}),a.jsx("div",{className:"text-xs text-gray-400",children:M+1})]},T.id)})})]})]})}),p&&a.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>m(!1)}),a.jsxs("div",{className:"fixed left-0 top-0 bottom-0 w-80 bg-white",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"font-semibold text-gray-900",children:"Navigation"}),a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>m(!1),children:a.jsx($r,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"p-4 overflow-y-auto h-full",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(At,{variant:A.status==="published"?"default":"secondary",children:A.status}),A.difficulty_level&&a.jsx(At,{variant:"outline",children:A.difficulty_level})]}),A.description&&a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:A.description})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Pages"}),a.jsx("nav",{className:"space-y-1",children:i.pages.map((T,M)=>{const P=_(T),R=M===x;return a.jsxs("button",{onClick:()=>j(M),className:ge("w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center space-x-2",R?"bg-blue-100 text-blue-900 font-medium":"text-gray-700 hover:bg-gray-200"),disabled:T.is_locked,children:[a.jsx("div",{className:"flex-shrink-0",children:P?a.jsx(ln,{className:"w-4 h-4 text-green-500"}):a.jsx(vM,{className:ge("w-4 h-4",R?"text-blue-600":"text-gray-400")})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("div",{className:ge("truncate",T.is_locked?"text-gray-400":""),children:T.title})}),a.jsx("div",{className:"text-xs text-gray-400",children:M+1})]},T.id)})})]})]})]})]}),a.jsx("div",{className:"flex-1 min-h-screen",children:s?a.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:s.title}),s.description&&a.jsx("p",{className:"text-lg text-gray-600 leading-relaxed",children:s.description})]}),a.jsx("div",{className:"space-y-8 mb-12",children:s.blocks&&s.blocks.length>0?s.blocks.filter(T=>T.is_visible).map(T=>a.jsx(tW,{block:T,onProgress:k,userContext:{userId:n==null?void 0:n.id,progress:f,learningMode:!0}},T.id)):a.jsxs("div",{className:"text-center py-16",children:[a.jsx(Zn,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"This page doesn't have any content yet."})]})}),a.jsx("div",{className:"border-t border-gray-200 pt-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(fe,{variant:"outline",onClick:w,disabled:x===0,className:"flex items-center space-x-2",children:[a.jsx(r_,{className:"w-4 h-4"}),a.jsx("span",{children:"Previous"})]}),a.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:a.jsxs("span",{children:["Page ",x+1," of ",i.pages.length]})}),a.jsxs(fe,{onClick:N,disabled:x===i.pages.length-1,className:"flex items-center space-x-2",children:[a.jsx("span",{children:"Next"}),a.jsx(jh,{className:"w-4 h-4"})]})]})})]}):a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("p",{className:"text-gray-500",children:"No content available"})})})]})]}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-red-600",children:"Content not found"})})})}function bEe(){const[t,e]=O.useState(!1),[r,n]=O.useState("video"),[i,s]=O.useState([]),o=[{type:"video",label:"Videos",icon:si,color:"#EF4444",description:"Educational videos with transcriptions"},{type:"ai_agent",label:"AI Agents",icon:Kr,color:"#3B82F6",description:"Intelligent AI agents with custom prompts"},{type:"document",label:"Documents",icon:Ot,color:"#10B981",description:"Rich text documents and guides"},{type:"prompt",label:"Prompts",icon:Gr,color:"#8B5CF6",description:"Reusable prompt templates"},{type:"automation",label:"Automations",icon:Ei,color:"#F59E0B",description:"Process automations and workflows"}],l=p=>{n(p),e(!0)},c=p=>{const m={type:r,item:p};s(x=>[...x.filter(v=>!(v.type===r&&v.item.id===p.id)),m]),e(!1)},u=(p,m)=>{s(x=>x.filter(y=>!(y.type===p&&y.item.id===m)))},f=p=>o.find(m=>m.type===p),d=p=>{const m=f(p.type),{item:x}=p,y=uy.generatePreviewText(x);return a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:m.color+"15"},children:a.jsx(m.icon,{className:"w-5 h-5",style:{color:m.color}})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:x.title}),a.jsx("button",{onClick:()=>u(p.type,x.id),className:"text-red-500 hover:text-red-700 text-sm ml-2",children:"Remove"})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:y}),a.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:m.color+"10",color:m.color},children:m.label.slice(0,-1)}),a.jsxs("span",{children:["Updated ",new Date(x.updated_at).toLocaleDateString()]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${x.status==="published"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:x.status})]})]})]})},`${p.type}-${x.id}`)};return a.jsx(pr,{children:a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:a.jsx(wM,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Content Selector System Demo"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Demonstrating the reusable Content Selector Modal for all content types"})]})]})}),a.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Select Content Type"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:o.map(p=>{const m=p.icon;return a.jsx("button",{onClick:()=>l(p.type),className:"p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all text-left group",children:a.jsxs("div",{className:"flex flex-col items-center text-center space-y-2",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",style:{backgroundColor:p.color+"15"},children:a.jsx(m,{className:"w-6 h-6",style:{color:p.color}})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:p.label}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:p.description})]})]})},p.type)})})]}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Selected Content"}),a.jsxs("div",{className:"text-sm text-gray-500",children:[i.length," ",i.length===1?"item":"items"," selected"]})]}),i.length===0?a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center",children:[a.jsx(wM,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Content Selected"}),a.jsx("p",{className:"text-gray-600",children:"Click on any content type above to open the Content Selector Modal and choose items from your repositories."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(d)})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Demo Features"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Content Selector Modal"}),a.jsxs("ul",{className:"text-blue-700 space-y-1",children:[a.jsx("li",{children:" Unified interface for all content types"}),a.jsx("li",{children:" Search and filter capabilities"}),a.jsx("li",{children:" Card and list view modes"}),a.jsx("li",{children:" Pagination for large datasets"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Content Integration"}),a.jsxs("ul",{className:"text-blue-700 space-y-1",children:[a.jsx("li",{children:" Type-specific metadata display"}),a.jsx("li",{children:" Status and update information"}),a.jsx("li",{children:" Reusable across all block types"}),a.jsx("li",{children:" Error handling and loading states"})]})]})]})]}),a.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"How It Works"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-700",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-blue-600 font-semibold",children:"1"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Select Content Type"}),a.jsx("p",{children:"Click any content type button to open the selector modal for that specific repository."})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-blue-600 font-semibold",children:"2"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Browse & Search"}),a.jsx("p",{children:"Use the search, filters, and view modes to find the content you need from the repository."})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-blue-600 font-semibold",children:"3"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Select & Use"}),a.jsx("p",{children:'Click on any item to select it. The selected content will appear in the "Selected Content" section below.'})]})]})]})]})]}),a.jsx(GC,{isOpen:t,onClose:()=>e(!1),onSelect:c,contentType:r})]})})}function wEe(){return a.jsx(Nh,{onError:(t,e)=>{console.group(" Application Error"),console.error("App-level error:",t),console.error("Error info:",e),console.groupEnd(),console.warn("Production error reporting not configured")},children:a.jsx(EX,{children:a.jsx(bG,{children:a.jsx("div",{className:"App",children:a.jsx(Nh,{children:a.jsxs(hG,{children:[a.jsx(rt,{path:"/login",element:a.jsx(_J,{})}),a.jsx(rt,{path:"/",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(da,{to:"/dashboard",replace:!0})})}),a.jsx(rt,{path:"/dashboard",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(mge,{})})}),a.jsx(rt,{path:"/clients",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(yge,{})})}),a.jsx(rt,{path:"/clients/:clientId",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Sge,{})})}),a.jsx(rt,{path:"/users/:userId",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Nge,{})})}),a.jsx(rt,{path:"/users",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(vge,{})})}),a.jsx(rt,{path:"/tags",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(wge,{})})}),a.jsx(rt,{path:"/content",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(_ge,{})})}),a.jsx(rt,{path:"/content/articles",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Oge,{})})}),a.jsx(rt,{path:"/content/ai-agents",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Ege,{})})}),a.jsx(rt,{path:"/content/videos",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Cge,{})})}),a.jsx(rt,{path:"/content/documents",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Age,{})})}),a.jsx(rt,{path:"/content/prompts",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Tge,{})})}),a.jsx(rt,{path:"/content/automations",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Pge,{})})}),a.jsx(rt,{path:"/content/articles/create",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(A5,{})})}),a.jsx(rt,{path:"/content/articles/:id/edit",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(A5,{})})}),a.jsx(rt,{path:"/content/ai-agents/create",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(L5,{})})}),a.jsx(rt,{path:"/content/ai-agents/:id/edit",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(L5,{})})}),a.jsx(rt,{path:"/content/videos/create",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx($5,{})})}),a.jsx(rt,{path:"/content/videos/:id/edit",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx($5,{})})}),a.jsx(rt,{path:"/content/documents/create",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(q5,{})})}),a.jsx(rt,{path:"/content/documents/:id/edit",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(q5,{})})}),a.jsx(rt,{path:"/content/prompts/create",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(z5,{})})}),a.jsx(rt,{path:"/content/prompts/:id/edit",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(z5,{})})}),a.jsx(rt,{path:"/content/automations/create",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(U5,{})})}),a.jsx(rt,{path:"/content/automations/:id/edit",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(U5,{})})}),a.jsx(rt,{path:"/training-zone",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Yye,{})})}),a.jsx(rt,{path:"/wod-builder",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Fk,{})})}),a.jsx(rt,{path:"/training-zone/:type/:id",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Fk,{})})}),a.jsx(rt,{path:"/training-zone/legacy/:type/:id",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(Fk,{})})}),a.jsx(rt,{path:"/page-builder",element:a.jsx(da,{to:"/training-zone",replace:!0})}),a.jsx(rt,{path:"/page-builder/*",element:a.jsx(da,{to:"/training-zone",replace:!0})}),a.jsx(rt,{path:"/mission-builder-v4",element:a.jsx(da,{to:"/wod-builder",replace:!0})}),a.jsx(rt,{path:"/demo/content-selector",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(bEe,{})})}),a.jsx(rt,{path:"/learn/:type/:id",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(xEe,{})})}),a.jsx(rt,{path:"/sandbox",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"AI Sandbox"}),a.jsx("p",{className:"text-gray-600",children:"Interactive learning environment coming soon..."})]})})})}),a.jsx(rt,{path:"/admin",element:a.jsx(da,{to:"/dashboard",replace:!0})}),a.jsx(rt,{path:"/settings",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Settings"}),a.jsx("p",{className:"text-gray-600",children:"Settings page coming soon..."})]})})})}),a.jsx(rt,{path:"/logout",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(kge,{})})}),a.jsx(rt,{path:"*",element:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Page Not Found"}),a.jsx("p",{className:"text-gray-600",children:"The page you're looking for doesn't exist."})]})})})]})})})})})})}jK.createRoot(document.getElementById("root")).render(a.jsx(Z.StrictMode,{children:a.jsx(wEe,{})}));
